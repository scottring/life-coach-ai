/*! For license information please see main.00b9451a.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var _=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===j?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return D(e(t))}catch(oi){}}return null}var R=Array.isArray,P=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},L=[],F=-1;function U(e){return{current:e}}function B(e){0>F||(e.current=L[F],L[F]=null,F--)}function z(e,t){F++,L[F]=e.current,e.current=t}var H=U(null),V=U(null),W=U(null),G=U(null);function q(e,t){switch(z(W,t),z(V,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(H),z(H,e)}function Q(){B(H),B(V),B(W)}function K(e){null!==e.memoizedState&&z(G,e);var t=H.current,n=ad(t,e.type);t!==n&&(z(V,e),z(H,n))}function Y(e){V.current===e&&(B(H),B(V)),G.current===e&&(B(G),Yd._currentValue=M)}var X=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,$=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=ye(r):0!==(a&=o)?s=ye(a):n||0!==(n=o&~e)&&(s=ye(n)):0!==(o=r&~i)?s=ye(o):0!==a?s=ye(a):n||0!==(n=r&~e)&&(s=ye(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ee(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ae(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function _e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ie(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var je=Math.random().toString(36).slice(2),De="__reactFiber$"+je,Re="__reactProps$"+je,Pe="__reactContainer$"+je,Oe="__reactEvents$"+je,Me="__reactListeners$"+je,Le="__reactHandles$"+je,Fe="__reactResources$"+je,Ue="__reactMarker$"+je;function Be(e){delete e[De],delete e[Re],delete e[Oe],delete e[Me],delete e[Le]}function ze(e){var t=e[De];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[De]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xd(e);null!==e;){if(n=e[De])return n;e=xd(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[De]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ve(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function We(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ue]=!0}var qe=new Set,Qe={};function Ke(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Qe[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Xe,Ze,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},et={};function tt(e,t,n){if(s=t,X.call(et,s)||!X.call($e,s)&&(Je.test(s)?et[s]=!0:($e[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Xe)try{throw Error()}catch(oi){var t=oi.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ze=-1<oi.stack.indexOf("\n    at")?" (<anonymous>)":-1<oi.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ze}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(oi){var r=oi}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(oi){return"\nError generating stack: "+oi.message+"\n"+oi.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(cb){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ct(t)):null!=n?yt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(R(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&kt(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&kt(e,i,t[i])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function jt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Rt=null;function Pt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Re]||null;if(!s)throw Error(a(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Mt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Dt||null!==Rt)&&(Hc(),Dt&&(t=Dt,e=Rt,Rt=Dt=null,Pt(t),e)))for(t=0;t<e.length;t++)Pt(e[t])}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(cb){Ut=!1}var zt=null,Ht=null,Vt=null;function Wt(){if(Vt)return Vt;var e,t,n=Ht,r=n.length,s="value"in zt?zt.value:zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Vt=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Qt(){return!1}function Kt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?qt:Qt,this.isPropagationStopped=Qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Yt,Xt,Zt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Kt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Kt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Yt=e.screenX-Zt.screenX,Xt=e.screenY-Zt.screenY):Xt=Yt=0,Zt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Kt(nn),sn=Kt(h({},nn,{dataTransfer:0})),an=Kt(h({},en,{relatedTarget:0})),on=Kt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Kt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Kt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Kt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Kt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Kt(h({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],En=Ft&&"CompositionEvent"in window,Sn=null;Ft&&"documentMode"in document&&(Sn=document.documentMode);var kn=Ft&&"TextEvent"in window&&!Sn,Cn=Ft&&(!En||Sn&&8<Sn&&11>=Sn),Nn=String.fromCharCode(32),An=!1;function _n(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Rn(e,t,n,r){Dt?Rt?Rt.push(r):Rt=[r]:Dt=r,0<(t=Gu(t,"onChange")).length&&(n=new $t("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pn=null,On=null;function Mn(e){Lu(e,0)}function Ln(e){if(ht(Ve(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var Bn;if(Ft){var zn="oninput"in document;if(!zn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),zn="function"===typeof Hn.oninput}Bn=zn}else Bn=!1;Un=Bn&&(!document.documentMode||9<document.documentMode)}function Vn(){Pn&&(Pn.detachEvent("onpropertychange",Wn),On=Pn=null)}function Wn(e){if("value"===e.propertyName&&Ln(On)){var t=[];Rn(t,On,e,jt(e)),Mt(Mn,t)}}function Gn(e,t,n){"focusin"===e?(Vn(),On=n,(Pn=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Vn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(On)}function Qn(e,t){if("click"===e)return Ln(t)}function Kn(e,t){if("input"===e||"change"===e)return Ln(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!X.call(t,s)||!Yn(e[s],t[s]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function $n(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Xn(ir,r)||(ir=r,0<(r=Gu(sr,"onSelect")).length&&(t=new $t("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),xr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){xr.set(e,t),Ke(t,[e])}wr.push("scrollEnd");var Sr=new WeakMap;function kr(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Nr=0,Ar=0;function _r(){for(var e=Nr,t=Ar=Nr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var i=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Dr(n,s,i)}}function Tr(e,t,n,r){Cr[Nr++]=e,Cr[Nr++]=t,Cr[Nr++]=n,Cr[Nr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return Tr(e,t,n,r),Rr(e)}function jr(e,t){return Tr(e,null,null,t),Rr(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-fe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Rr(e){if(50<Rc)throw Rc=0,Pc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Or(e,t,n,r)}function Lr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Lr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Mr(31,n,t,s)).elementType=A,e.lanes=i,e;case g:return zr(n.children,s,i,t);case v:o=8,s|=24;break;case y:return(e=Mr(12,n,t,2|s)).elementType=y,e.lanes=i,e;case S:return(e=Mr(13,n,t,s)).elementType=S,e.lanes=i,e;case k:return(e=Mr(19,n,t,s)).elementType=k,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:o=10;break e;case x:o=9;break e;case E:o=11;break e;case C:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Vr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],Gr=0,qr=null,Qr=0,Kr=[],Yr=0,Xr=null,Zr=1,Jr="";function $r(e,t){Wr[Gr++]=Qr,Wr[Gr++]=qr,qr=e,Qr=t}function es(e,t,n){Kr[Yr++]=Zr,Kr[Yr++]=Jr,Kr[Yr++]=Xr,Xr=e;var r=Zr;e=Jr;var s=32-fe(r)-1;r&=~(1<<s),n+=1;var i=32-fe(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Zr=1<<32-fe(t)+s|n<<s|r,Jr=i+e}else Zr=1<<i|n<<s|r,Jr=e}function ts(e){null!==e.return&&($r(e,1),es(e,1,0))}function ns(e){for(;e===qr;)qr=Wr[--Gr],Wr[Gr]=null,Qr=Wr[--Gr],Wr[Gr]=null;for(;e===Xr;)Xr=Kr[--Yr],Kr[Yr]=null,Jr=Kr[--Yr],Kr[Yr]=null,Zr=Kr[--Yr],Kr[Yr]=null}var rs=null,ss=null,is=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw ms(kr(Error(a(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[De]=e,t[Re]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Ou.length;n++)Fu(Ou[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),wt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Zu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Ju),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,pd(e.type)?(e=bd,bd=null,ss=e):ss=n):ss=rs?yd(e.stateNode.nextSibling):null;return!0}function fs(){ss=rs=null,is=!1}function ps(){var e=as;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),as=null),e}function ms(e){null===as?as=[e]:as.push(e)}var gs=U(null),vs=null,ys=null;function bs(e,t,n){z(gs,t._currentValue),t._currentValue=n}function xs(e){e._currentValue=gs.current,B(gs)}function ws(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),ws(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),ws(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Ss(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Yn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}s=s.return}null!==e&&Es(t,e,n,r),t.flags|=262144}function ks(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){vs=e,ys=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ns(e){return _s(vs,e)}function As(e,t){return null===vs&&Cs(e),_s(e,t)}function _s(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ys){if(null===e)throw Error(a(308));ys=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ys=ys.next=t;return n}var Ts="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Is=r.unstable_scheduleCallback,js=r.unstable_NormalPriority,Ds={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rs(){return{controller:new Ts,data:new Map,refCount:0}}function Ps(e){e.refCount--,0===e.refCount&&Is(js,(function(){e.controller.abort()}))}var Os=null,Ms=0,Ls=0,Fs=null;function Us(){if(0===--Ms&&null!==Os){null!==Fs&&(Fs.status="fulfilled");var e=Os;Os=null,Ls=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bs=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Os){var n=Os=[];Ms=0,Ls=Iu(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ms++,t.then(Us,Us)}(0,t),null!==Bs&&Bs(e,t)};var zs=U(null);function Hs(){var e=zs.current;return null!==e?e:sc.pooledCache}function Vs(e,t){z(zs,null===t?zs.current:t.pool)}function Ws(){var e=Hs();return null===e?null:{parent:Ds._currentValue,pool:e}}var Gs=Error(a(460)),qs=Error(a(474)),Qs=Error(a(542)),Ks={then:function(){}};function Ys(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xs(){}function Zs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xs,Xs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xs,Xs);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Js=t,Gs}}var Js=null;function $s(){if(null===Js)throw Error(a(459));var e=Js;return Js=null,e}function ei(e){if(e===Gs||e===Qs)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&rc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Rr(e),Dr(e,null,n),t}return Tr(e,r,t,n),Rr(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}function li(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ci=!1;function ui(){if(ci){if(null!==Fs)throw Fs}}function di(e,t,n,r){ci=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(ac&f)===f:(r&f)===f){0!==f&&f===Ls&&(ci=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),pc|=a,e.lanes=a,e.memoizedState=d}}function hi(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function fi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hi(n[e],t)}var pi=U(null),mi=U(0);function gi(e,t){z(mi,e=hc),z(pi,t),hc=e|t.baseLanes}function vi(){z(mi,hc),z(pi,pi.current)}function yi(){hc=mi.current,B(pi),B(mi)}var bi=0,xi=null,wi=null,Ei=null,Si=!1,ki=!1,Ci=!1,Ni=0,Ai=0,_i=null,Ti=0;function Ii(){throw Error(a(321))}function ji(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Di(e,t,n,r,s,i){return bi=i,xi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?qa:Qa,Ci=!1,i=n(r,s),Ci=!1,ki&&(i=Pi(t,n,r,s)),Ri(e),i}function Ri(e){P.H=Ga;var t=null!==wi&&null!==wi.next;if(bi=0,Ei=wi=xi=null,Si=!1,Ai=0,_i=null,t)throw Error(a(300));null===e||_o||null!==(e=e.dependencies)&&ks(e)&&(_o=!0)}function Pi(e,t,n,r){xi=e;var s=0;do{if(ki&&(_i=null),Ai=0,ki=!1,25<=s)throw Error(a(301));if(s+=1,Ei=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}P.H=Ka,i=t(n,r)}while(ki);return i}function Oi(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?zi(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(xi.flags|=1024),t}function Mi(){var e=0!==Ni;return Ni=0,e}function Li(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fi(e){if(Si){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Si=!1}bi=0,Ei=wi=xi=null,ki=!1,Ai=Ni=0,_i=null}function Ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ei?xi.memoizedState=Ei=e:Ei=Ei.next=e,Ei}function Bi(){if(null===wi){var e=xi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===Ei?xi.memoizedState:Ei.next;if(null!==t)Ei=t,wi=e;else{if(null===e){if(null===xi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===Ei?xi.memoizedState=Ei=e:Ei=Ei.next=e}return Ei}function zi(e){var t=Ai;return Ai+=1,null===_i&&(_i=[]),e=Zs(_i,e,t),t=xi,null===(null===Ei?t.memoizedState:Ei.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?qa:Qa),e}function Hi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zi(e);if(e.$$typeof===w)return Ns(e)}throw Error(a(438,String(e)))}function Vi(e){var t=null,n=xi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=_;return t.index++,n}function Wi(e,t){return"function"===typeof t?t(e):t}function Gi(e){return qi(Bi(),wi,e)}function qi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ac&h)===h:(bi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ls&&(d=!0);else{if((bi&f)===f){u=u.next,f===Ls&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,xi.lanes|=f,pc|=f}h=u.action,Ci&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,xi.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Yn(i,e.memoizedState)&&(_o=!0,d&&null!==(n=Fs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Qi(e){var t=Bi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Yn(i,t.memoizedState)||(_o=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ki(e,t,n){var r=xi,s=Bi(),i=is;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Yn((wi||s).memoizedState,n);if(o&&(s.memoizedState=n,_o=!0),s=s.queue,va(2048,8,Zi.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Ei&&1&Ei.memoizedState.tag){if(r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,s,n,t),null),null===sc)throw Error(a(349));i||0!==(124&bi)||Yi(r,t,n)}return n}function Yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xi(e,t,n,r){t.value=n,t.getSnapshot=r,Ji(t)&&$i(e)}function Zi(e,t,n){return n((function(){Ji(t)&&$i(e)}))}function Ji(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function $i(e){var t=jr(e,2);null!==t&&Lc(t,e,2)}function ea(e){var t=Ui();if("function"===typeof e){var n=e;if(e=n(),Ci){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,qi(e,wi,"function"===typeof r?r:Wi)}function na(e,t,n,r,s){if(Ha(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==P.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,ra(t,i)):(i.next=n.next,t.pending=n.next=i)}}function ra(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=P.T,a={};P.T=a;try{var o=n(s,r),l=P.S;null!==l&&l(a,o),sa(e,t,o)}catch(c){aa(e,t,c)}finally{P.T=i}}else try{sa(e,t,i=n(s,r))}catch(u){aa(e,t,u)}}function sa(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){ia(e,t,n)}),(function(n){return aa(e,t,n)})):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,oa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oa(t),t=t.next}while(t!==r)}e.action=null}function oa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ca(e,t){if(is){var n=sc.formState;if(null!==n){e:{var r=xi;if(is){if(ss){t:{for(var s=ss,i=os;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=yd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=yd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Ui()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=Ua.bind(null,xi,r),r.dispatch=n,r=ea(!1),i=za.bind(null,xi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Ui()).queue=s,n=na.bind(null,xi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ua(e){return da(Bi(),wi,e)}function da(e,t,n){if(t=qi(e,t,la)[0],e=Gi(Wi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zi(t)}catch(oi){if(oi===Gs)throw Qs;throw oi}else r=t;var s=(t=Bi()).queue,i=s.dispatch;return n!==t.memoizedState&&(xi.flags|=2048,pa(9,{destroy:void 0,resource:void 0},ha.bind(null,s,n),null)),[r,i,e]}function ha(e,t){e.action=t}function fa(e){var t=Bi(),n=wi;if(null!==n)return da(t,n,e);Bi(),t=t.memoizedState;var r=(n=Bi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(){return Bi().memoizedState}function ga(e,t,n,r){var s=Ui();r=void 0===r?null:r,xi.flags|=e,s.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function va(e,t,n,r){var s=Bi();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==wi&&null!==r&&ji(r,wi.memoizedState.deps)?s.memoizedState=pa(t,i,n,r):(xi.flags|=e,s.memoizedState=pa(1|t,i,n,r))}function ya(e,t){ga(8390656,8,e,t)}function ba(e,t){va(2048,8,e,t)}function xa(e,t){return va(4,2,e,t)}function wa(e,t){return va(4,4,e,t)}function Ea(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Sa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,va(4,4,Ea.bind(null,t,e),n)}function ka(){}function Ca(e,t){var n=Bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Na(e,t){var n=Bi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ji(t,r[1]))return r[0];if(r=e(),Ci){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Aa(e,t,n){return void 0===n||0!==(1073741824&bi)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),xi.lanes|=e,pc|=e,n)}function _a(e,t,n,r){return Yn(n,t)?n:null!==pi.current?(e=Aa(e,n,r),Yn(e,t)||(_o=!0),e):0===(42&bi)?(_o=!0,e.memoizedState=n):(e=Mc(),xi.lanes|=e,pc|=e,t)}function Ta(e,t,n,r,s){var i=O.p;O.p=0!==i&&8>i?i:8;var a=P.T,o={};P.T=o,za(e,!1,t,n);try{var l=s(),c=P.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r);Ba(e,t,u,Oc())}else Ba(e,t,r,Oc())}catch(d){Ba(e,t,{then:function(){},status:"rejected",reason:d},Oc())}finally{O.p=i,P.T=a}}function Ia(){}function ja(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=Da(e).queue;Ta(e,s,t,M,null===n?Ia:function(){return Ra(e),n(r)})}function Da(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ra(e){Ba(e,Da(e).next.queue,{},Oc())}function Pa(){return Ns(Yd)}function Oa(){return Bi().memoizedState}function Ma(){return Bi().memoizedState}function La(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),r=ii(t,e=si(n),n);return null!==r&&(Lc(r,t,n),ai(r,t,n)),t={cache:Rs()},void(e.payload=t)}t=t.return}}function Fa(e,t,n){var r=Oc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ha(e)?Va(t,n):null!==(n=Ir(e,t,n,r))&&(Lc(n,e,r),Wa(n,t,r))}function Ua(e,t,n){Ba(e,t,n,Oc())}function Ba(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ha(e))Va(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Yn(o,a))return Tr(e,t,s,0),null===sc&&_r(),!1}catch(l){}if(null!==(n=Ir(e,t,s,r)))return Lc(n,e,r),Wa(n,t,r),!0}return!1}function za(e,t,n,r){if(r={lane:2,revertLane:Iu(),action:r,hasEagerState:!1,eagerState:null,next:null},Ha(e)){if(t)throw Error(a(479))}else null!==(t=Ir(e,n,r,2))&&Lc(t,e,2)}function Ha(e){var t=e.alternate;return e===xi||null!==t&&t===xi}function Va(e,t){ki=Si=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wa(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}var Ga={readContext:Ns,use:Hi,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii,useHostTransitionStatus:Ii,useFormState:Ii,useActionState:Ii,useOptimistic:Ii,useMemoCache:Ii,useCacheRefresh:Ii},qa={readContext:Ns,use:Hi,useCallback:function(e,t){return Ui().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:ya,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,Ea.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Ui();t=void 0===t?null:t;var r=e();if(Ci){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ui();if(void 0!==n){var s=n(t);if(Ci){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Fa.bind(null,xi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ui().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=Ua.bind(null,xi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ka,useDeferredValue:function(e,t){return Aa(Ui(),e,t)},useTransition:function(){var e=ea(!1);return e=Ta.bind(null,xi,e.queue,!0,!1),Ui().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=xi,s=Ui();if(is){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===sc)throw Error(a(349));0!==(124&ac)||Yi(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,ya(Zi.bind(null,r,i,e),[e]),r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,i,n,t),null),n},useId:function(){var e=Ui(),t=sc.identifierPrefix;if(is){var n=Jr;t="\xab"+t+"R"+(n=(Zr&~(1<<32-fe(Zr)-1)).toString(32)+n),0<(n=Ni++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ti++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Pa,useFormState:ca,useActionState:ca,useOptimistic:function(e){var t=Ui();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=za.bind(null,xi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Vi,useCacheRefresh:function(){return Ui().memoizedState=La.bind(null,xi)}},Qa={readContext:Ns,use:Hi,useCallback:Ca,useContext:Ns,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:xa,useLayoutEffect:wa,useMemo:Na,useReducer:Gi,useRef:ma,useState:function(){return Gi(Wi)},useDebugValue:ka,useDeferredValue:function(e,t){return _a(Bi(),wi.memoizedState,e,t)},useTransition:function(){var e=Gi(Wi)[0],t=Bi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Ki,useId:Oa,useHostTransitionStatus:Pa,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ta(Bi(),0,e,t)},useMemoCache:Vi,useCacheRefresh:Ma},Ka={readContext:Ns,use:Hi,useCallback:Ca,useContext:Ns,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:xa,useLayoutEffect:wa,useMemo:Na,useReducer:Qi,useRef:ma,useState:function(){return Qi(Wi)},useDebugValue:ka,useDeferredValue:function(e,t){var n=Bi();return null===wi?Aa(n,e,t):_a(n,wi.memoizedState,e,t)},useTransition:function(){var e=Qi(Wi)[0],t=Bi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Ki,useId:Oa,useHostTransitionStatus:Pa,useFormState:fa,useActionState:fa,useOptimistic:function(e,t){var n=Bi();return null!==wi?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Vi,useCacheRefresh:Ma},Ya=null,Xa=0;function Za(e){var t=Xa;return Xa+=1,null===Ya&&(Ya=[]),Zs(Ya,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $a(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eo(e){return(0,e._init)(e._payload)}function to(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&eo(i)===t.type)?(Ja(t=s(t,n.props),n),t.return=e,t):(Ja(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=zr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Ja(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Vr(t,e.mode,n)).return=e,t;case N:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||I(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Za(t),n);if(t.$$typeof===w)return h(e,As(e,t),n);$a(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,r):null;case m:return n.key===s?u(e,t,n,r):null;case N:return f(e,t,n=(s=n._init)(n._payload),r)}if(R(n)||I(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Za(n),r);if(n.$$typeof===w)return f(e,t,As(e,n),r);$a(e,n)}return null}function v(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return v(e,t,n,r=(0,r._init)(r._payload),s)}if(R(r)||I(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return v(e,t,n,Za(r),s);if(r.$$typeof===w)return v(e,t,n,As(t,r),s);$a(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&eo(b)===c.type){n(l,c.sibling),Ja(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Ja(d=Br(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Vr(u,l.mode,d)).return=l,l=d}return o(l);case N:return y(l,c,u=(b=u._init)(u._payload),d)}if(R(u))return function(s,a,o,l){for(var c=null,u=null,d=a,p=a=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(s,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(s,d),a=i(g,a,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===o.length)return n(s,d),is&&$r(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(a=i(d,a,p),null===u?c=d:u.sibling=d,u=d);return is&&$r(s,p),c}for(d=r(d);p<o.length;p++)null!==(m=v(d,s,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=i(m,a,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(s,e)})),is&&$r(s,p),c}(l,c,u,d);if(I(u)){if("function"!==typeof(b=I(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,m=o=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(s,p,y.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(s,p),o=i(b,o,m),null===d?u=b:d.sibling=b,d=b,p=g}if(y.done)return n(s,p),is&&$r(s,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,m),null===d?u=y:d.sibling=y,d=y);return is&&$r(s,m),u}for(p=r(p);!y.done;m++,y=l.next())null!==(y=v(p,s,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=i(y,o,m),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach((function(e){return t(s,e)})),is&&$r(s,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,Za(u),d);if(u.$$typeof===w)return y(l,c,As(l,u),d);$a(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Hr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Xa=0;var s=y(e,t,n,r);return Ya=null,s}catch(oi){if(oi===Gs||oi===Qs)throw oi;var i=Mr(29,oi,null,e.mode);return i.lanes=r,i.return=e,i}}}var no=to(!0),ro=to(!1),so=U(null),io=null;function ao(e){var t=e.alternate;z(uo,1&uo.current),z(so,e),null===io&&(null===t||null!==pi.current||null!==t.memoizedState)&&(io=e)}function oo(e){if(22===e.tag){if(z(uo,uo.current),z(so,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else lo()}function lo(){z(uo,uo.current),z(so,so.current)}function co(e){B(so),io===e&&(io=null),B(uo)}var uo=U(0);function ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Lc(t,e,r),ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Lc(t,e,r),ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Lc(t,e,n),ai(t,e,n))}};function mo(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(s,i))}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function vo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var yo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){yo(e)}function xo(e){console.error(e)}function wo(e){yo(e)}function Eo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function So(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function ko(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){Eo(e,t)},n}function Co(e){return(e=si(e)).tag=3,e}function No(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){So(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){So(t,n,r),"function"!==typeof s&&(null===Cc?Cc=new Set([this]):Cc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ao=Error(a(461)),_o=!1;function To(e,t,n,r){t.child=null===e?ro(t,null,n,r):no(t,e.child,n,r)}function Io(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Cs(t),r=Di(e,t,n,a,i,s),o=Mi(),null===e||_o?(is&&o&&ts(t),t.flags|=1,To(e,t,r,s),t.child):(Li(e,t,s),Xo(e,t,s))}function jo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Lr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Do(e,t,i,r,s))}if(i=e.child,!Zo(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return Xo(e,t,s)}return t.flags|=1,(e=Fr(i,r)).ref=t.ref,e.return=t,t.child=e}function Do(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Xn(i,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=i,!Zo(e,s))return t.lanes=e.lanes,Xo(e,t,s);0!==(131072&e.flags)&&(_o=!0)}}return Mo(e,t,n,r,s)}function Ro(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Po(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Po(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Vs(0,null!==i?i.cachePool:null),null!==i?gi(t,i):vi(),oo(t)}else null!==i?(Vs(0,i.cachePool),gi(t,i),lo(),t.memoizedState=null):(null!==e&&Vs(0,null),vi(),lo());return To(e,t,s,n),t.child}function Po(e,t,n,r){var s=Hs();return s=null===s?null:{parent:Ds._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Vs(0,null),vi(),oo(t),null!==e&&Ss(e,t,r,!0),null}function Oo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Mo(e,t,n,r,s){return Cs(t),n=Di(e,t,n,r,void 0,s),r=Mi(),null===e||_o?(is&&r&&ts(t),t.flags|=1,To(e,t,n,s),t.child):(Li(e,t,s),Xo(e,t,s))}function Lo(e,t,n,r,s,i){return Cs(t),t.updateQueue=null,n=Pi(t,r,n,s),Ri(e),r=Mi(),null===e||_o?(is&&r&&ts(t),t.flags|=1,To(e,t,n,i),t.child):(Li(e,t,i),Xo(e,t,i))}function Fo(e,t,n,r,s){if(Cs(t),null===t.stateNode){var i=Pr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Ns(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=po,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Ns(a):Pr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(fo(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&po.enqueueReplaceState(i,i.state,null),di(t,r,i,s),ui(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=vo(n,o);i.props=l;var c=i.context,u=n.contextType;a=Pr,"object"===typeof u&&null!==u&&(a=Ns(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&go(t,i,r,a),ti=!1;var h=t.memoizedState;i.state=h,di(t,r,i,s),ui(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(fo(t,n,d,r),c=t.memoizedState),(l=ti||mo(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=vo(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Pr,"object"===typeof c&&null!==c&&(l=Ns(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&go(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,di(t,r,i,s),ui();var f=t.memoizedState;a!==d||h!==f||ti||null!==e&&null!==e.dependencies&&ks(e.dependencies)?("function"===typeof o&&(fo(t,n,o,r),f=t.memoizedState),(u=ti||mo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&ks(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Oo(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=no(t,e.child,null,s),t.child=no(t,null,n,s)):To(e,t,n,s),t.memoizedState=i.state,e=t.child):e=Xo(e,t,s),e}function Uo(e,t,n,r){return fs(),t.flags|=256,To(e,t,n,r),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Ws()}}function Ho(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function Vo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&uo.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?ao(t):lo(),is){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Zr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;co(t)}return c=s.children,s=s.fallback,i?(lo(),c=Go({mode:"hidden",children:c},i=t.mode),s=zr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=zo(n),i.childLanes=Ho(e,r,n),t.memoizedState=Bo,s):(ao(t),Wo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=qo(e,t,n)):null!==t.memoizedState?(lo(),t.child=e.child,t.flags|=128,t=null):(lo(),i=s.fallback,c=t.mode,s=Go({mode:"visible",children:s.children},c),(i=zr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,no(t,e.child,null,n),(s=t.child).memoizedState=zo(n),s.childLanes=Ho(e,r,n),t.memoizedState=Bo,t=i);else if(ao(t),vd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ms({value:s,source:null,stack:null}),t=qo(e,t,n)}else if(_o||Ss(e,t,n,!1),r=0!==(n&e.childLanes),_o||r){if(null!==(r=sc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:_e(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,jr(e,s),Lc(r,e,s),Ao;"$?"===c.data||Kc(),t=qo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=yd(c.nextSibling),rs=t,is=!0,as=null,os=!1,null!==e&&(Kr[Yr++]=Zr,Kr[Yr++]=Jr,Kr[Yr++]=Xr,Zr=e.id,Jr=e.overflow,Xr=t),(t=Wo(t,s.children)).flags|=4096);return t}return i?(lo(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Fr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fr(u,i):(i=zr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=Ds._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ws(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=Ho(e,r,n),t.memoizedState=Bo,s):(ao(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Wo(e,t){return(t=Go({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Go(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qo(e,t,n){return no(t,e.child,null,n),(e=Wo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ws(e.return,t,n)}function Ko(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(To(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n,t);else if(19===e.tag)Qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(uo,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ho(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ko(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ho(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ko(t,!0,n,null,i);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ss(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ks(e))}function Jo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_o=!0;else{if(!Zo(e,n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),bs(0,Ds,e.memoizedState.cache),fs();break;case 27:case 5:K(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ao(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Vo(e,t,n):(ao(t),null!==(e=Xo(e,t,n))?e.sibling:null);ao(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ss(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,n);case 24:bs(0,Ds,e.memoizedState.cache)}return Xo(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,is&&0!==(1048576&t.flags)&&es(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===E){t.tag=11,t=Io(null,t,r,e,n);break e}if(s===C){t.tag=14,t=jo(null,t,r,e,n);break e}}throw t=D(r)||r,Error(a(306,t,""))}Lr(r)?(e=vo(r,e),t.tag=1,t=Fo(null,t,r,e,n)):(t.tag=0,t=Mo(null,t,r,e,n))}return t;case 0:return Mo(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,r=t.type,s=vo(r,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),di(t,r,null,n);var o=t.memoizedState;if(r=o.cache,bs(0,Ds,r),r!==i.cache&&Es(t,[Ds],n,!0),ui(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Uo(e,t,r,n);break e}if(r!==s){ms(s=kr(Error(a(424)),t)),t=Uo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=yd(e.firstChild),rs=t,is=!0,as=null,os=!0,n=ro(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===s){t=Xo(e,t,n);break e}To(e,t,r,n)}t=t.child}return t;case 26:return Oo(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=sd(W.current).createElement(n))[De]=t,r[Re]=e,td(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&is&&(r=t.stateNode=wd(t.type,t.pendingProps,W.current),rs=t,os=!0,s=ss,pd(t.type)?(bd=s,ss=yd(r.firstChild)):ss=s),To(e,t,t.pendingProps.children,n),Oo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,os))?(t.stateNode=r,rs=t,ss=yd(r.firstChild),os=!1,s=!0):s=!1),s||cs(t)),K(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,od(s,i)?r=null:null!==o&&od(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Di(e,t,Oi,null,null,n),Yd._currentValue=s),Oo(e,t),To(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Vo(e,t,n);case 4:return q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=no(t,null,r,n):To(e,t,r,n),t.child;case 11:return Io(e,t,t.type,t.pendingProps,n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bs(0,t.type,r.value),To(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Cs(t),r=r(s=Ns(s)),t.flags|=1,To(e,t,r,n),t.child;case 14:return jo(e,t,t.type,t.pendingProps,n);case 15:return Do(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Go(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ro(e,t,n);case 24:return Cs(t),r=Ns(Ds),null===e?(null===(s=Hs())&&(s=sc,i=Rs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),bs(0,Ds,s)):(0!==(e.lanes&n)&&(ri(e,t),di(t,null,null,n),ui()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ds,r)):(r=i.cache,bs(0,Ds,r),r!==s.cache&&Es(t,[Ds],n,!0))),To(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function $o(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Hd(t)){if(null!==(t=so.current)&&((4194048&ac)===ac?null!==io:(62914560&ac)!==ac&&0===(536870912&ac)||t!==io))throw Js=Ks,qs;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function nl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xs(Ds),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?$o(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ps())),rl(t),null;case 26:return n=t.memoizedState,null===e?($o(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?($o(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&$o(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),n=W.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$o(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}e=H.current,hs(t)?us(t):(e=wd(s,r,n),t.stateNode=e,$o(t))}return rl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$o(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}if(e=H.current,hs(t))us(t);else{switch(s=sd(W.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[De]=t,e[Re]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$o(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&$o(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=W.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[De]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Zu(e.nodeValue,n)))||cs(t)}else(e=sd(e).createTextNode(r))[De]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[De]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),s=!1}else s=ps(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(co(t),t):(co(t),null)}if(co(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return Q(),null===e&&zu(t.stateNode.containerInfo),rl(t),null;case 10:return xs(t.type),rl(t),null;case 19:if(B(uo),null===(s=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)nl(s,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=ho(e))){for(t.flags|=128,nl(s,!1),e=i.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return z(uo,1&uo.current|2),t.child}e=e.sibling}null!==s.tail&&te()>Sc&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ho(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return rl(t),null}else 2*te()-s.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=uo.current,z(uo,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return co(t),yi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(zs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xs(Ds),rl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xs(Ds),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(co(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(uo),null;case 4:return Q(),null;case 10:return xs(t.type),null;case 22:case 23:return co(t),yi(),null!==e&&B(zs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xs(Ds),null;default:return null}}function al(e,t){switch(ns(t),t.tag){case 3:xs(Ds),Q();break;case 26:case 27:case 5:Y(t);break;case 4:Q();break;case 13:co(t);break;case 19:B(uo);break;case 10:xs(t.type);break;case 22:case 23:co(t),yi(),null!==e&&B(zs);break;case 24:xs(Ds)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){du(t,t.return,o)}}function ll(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){du(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fi(t,n)}catch(r){du(e,e.return,r)}}}function ul(e,t,n){n.props=vo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){du(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){du(e,t,s)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){du(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){du(e,t,i)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){du(e,e.return,s)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||$u(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&$u(e,t,f,p,r,h)}}return void gt(e,o,l,c,u,d,i,s);case"select":for(i in p=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||$u(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&$u(e,t,s,i,r,c)}return t=l,n=o,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:$u(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&$u(e,t,o,s,r,i)}return void xt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else $u(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else $u(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&$u(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:$u(e,t,u,f,r,p)}return;default:if(Nt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&ed(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||ed(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&$u(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||$u(e,t,h,f,r,p)}(r,e.type,n,t),r[Re]=t}catch(s){du(e,e.return,s)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ju));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);td(t,r,n),t[De]=e,t[Re]=n}catch(i){du(e,e.return,i)}}var xl=!1,wl=!1,El=!1,Sl="function"===typeof WeakSet?WeakSet:Set,kl=null;function Cl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){du(n,n.return,a)}else{var s=vo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){du(n,n.return,o)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fi(e,t)}catch(a){du(n,n.return,a)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&jl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||wl,s=xl;var i=wl;xl=r,(wl=t)&&!i?Bl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),xl=s,wl=i}break;case 30:break;default:Fl(e,n)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Al=null,_l=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:wl||hl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||hl(n,t);var r=Al,s=_l;pd(n.type)&&(Al=n.stateNode,_l=!1),Tl(e,t,n),Ed(n.stateNode),Al=r,_l=s;break;case 5:wl||hl(n,t);case 6:if(r=Al,s=_l,Al=null,Tl(e,t,n),_l=s,null!==(Al=r))if(_l)try{(9===Al.nodeType?Al.body:"HTML"===Al.nodeName?Al.ownerDocument.body:Al).removeChild(n.stateNode)}catch(a){du(n,t,a)}else try{Al.removeChild(n.stateNode)}catch(a){du(n,t,a)}break;case 18:null!==Al&&(_l?(md(9===(e=Al).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_h(e)):md(Al,n.stateNode));break;case 4:r=Al,s=_l,Al=n.stateNode.containerInfo,_l=!0,Tl(e,t,n),Al=r,_l=s;break;case 0:case 11:case 14:case 15:wl||ll(2,n,t),wl||ll(4,n,t),Tl(e,t,n);break;case 1:wl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Tl(e,t,n),wl=r;break;default:Tl(e,t,n)}}function jl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_h(e)}catch(n){du(t,t.return,n)}}function Dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Al=l.stateNode,_l=!1;break e}break;case 5:Al=l.stateNode,_l=!1;break e;case 3:case 4:Al=l.stateNode.containerInfo,_l=!0;break e}l=l.return}if(null===Al)throw Error(a(160));Il(i,o,s),Al=null,_l=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Pl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ml(e),4&r&&(ll(3,e,e.return),ol(3,e),ll(5,e,e.return));break;case 1:Rl(t,e),Ml(e),512&r&&(wl||null===n||hl(n,n.return)),64&r&&xl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Pl;if(Rl(t,e),Ml(e),512&r&&(wl||null===n||hl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Ue]||i[De]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),td(i,r,n),i[De]=e,Ge(i),r=i;break e;case"link":var o=Bd("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}td(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=Bd("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}td(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[De]=e,Ge(i),r=i}e.stateNode=r}else zd(s,e.type,e.stateNode);else e.stateNode=Od(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?zd(s,e.type,e.stateNode):Od(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ml(e),512&r&&(wl||null===n||hl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ml(e),512&r&&(wl||null===n||hl(n,n.return)),32&e.flags){s=e.stateNode;try{Et(s,"")}catch(p){du(e,e.return,p)}}4&r&&null!=e.stateNode&&pl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(El=!0);break;case 6:if(Rl(t,e),Ml(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){du(e,e.return,p)}}break;case 3:if(Ud=null,s=Pl,Pl=Cd(t.containerInfo),Rl(t,e),Pl=s,Ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_h(t.containerInfo)}catch(p){du(e,e.return,p)}El&&(El=!1,Ll(e));break;case 4:r=Pl,Pl=Cd(e.stateNode.containerInfo),Rl(t,e),Ml(e),Pl=r;break;case 12:default:Rl(t,e),Ml(e);break;case 13:Rl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Ec=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Dl(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=xl,d=wl;if(xl=u||s,wl=d||c,Rl(t,e),wl=d,xl=u,Ml(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||xl||wl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){du(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){du(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Dl(e,n))));break;case 19:Rl(t,e),Ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Dl(e,r)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;yl(e,gl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(Et(i,""),n.flags&=-33),yl(e,gl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;vl(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ll(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ll(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Cl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Ul(t);break;case 27:Ed(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Bl(s,i,n),ol(4,i);break;case 1:if(Bl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){du(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)hi(l[s],o)}catch(c){du(r,r.return,c)}}n&&64&a&&cl(i),dl(i,i.return);break;case 27:bl(i);case 26:case 5:Bl(s,i,n),n&&null===r&&4&a&&fl(i),dl(i,i.return);break;case 12:Bl(s,i,n);break;case 13:Bl(s,i,n),n&&4&a&&jl(s,i);break;case 22:null===i.memoizedState&&Bl(s,i,n),dl(i,i.return);break;case 30:break;default:Bl(s,i,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ps(n))}function Hl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ps(e))}function Vl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,n,r),t=t.sibling}function Wl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,n,r),2048&s&&ol(9,t);break;case 1:case 13:default:Vl(e,t,n,r);break;case 3:Vl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ps(e)));break;case 12:if(2048&s){Vl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else Vl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Vl(e,t,n,r):ql(e,t):2&i._visibility?Vl(e,t,n,r):(i._visibility|=2,Gl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&zl(a,t);break;case 24:Vl(e,t,n,r),2048&s&&Hl(t.alternate,t)}}function Gl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Gl(i,a,o,l,s),ol(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Gl(i,a,o,l,s):ql(i,a):(u._visibility|=2,Gl(i,a,o,l,s)),s&&2048&c&&zl(a.alternate,a);break;case 24:Gl(i,a,o,l,s),s&&2048&c&&Hl(a.alternate,a);break;default:Gl(i,a,o,l,s)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:ql(n,r),2048&s&&zl(r.alternate,r);break;case 24:ql(n,r),2048&s&&Hl(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Ql=8192;function Kl(e){if(e.subtreeFlags&Ql)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Kl(e),e.flags&Ql&&null!==e.memoizedState&&function(e,t,n){if(null===Vd)throw Error(a(475));var r=Vd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Id(n.href),i=e.querySelector(jd(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Gd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,n=Dd(n),(s=Sd.get(s))&&Ld(n,s),Ge(i=i.createElement("link"));var o=i;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),td(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Gd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Pl,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Pl;Pl=Cd(e.stateNode.containerInfo),Kl(e),Pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ql,Ql=16777216,Kl(e),Ql=t):Kl(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,ec(r,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Zl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Zl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,$l(e)):Zl(e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,ec(r,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),$l(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,$l(t));break;default:$l(t)}e=e.sibling}}function ec(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ps(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,kl=r;else e:for(n=e;null!==kl;){var s=(r=kl).sibling,i=r.return;if(Nl(r),r===n){kl=null;break e}if(null!==s){s.return=i,kl=s;break e}kl=i}}}var tc={getCacheForType:function(e){var t=Ns(Ds),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,rc=0,sc=null,ic=null,ac=0,oc=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,pc=0,mc=0,gc=0,vc=0,yc=0,bc=null,xc=null,wc=!1,Ec=0,Sc=1/0,kc=null,Cc=null,Nc=0,Ac=null,_c=null,Tc=0,Ic=0,jc=null,Dc=null,Rc=0,Pc=null;function Oc(){if(0!==(2&rc)&&0!==ac)return ac&-ac;if(null!==P.T){return 0!==Ls?Ls:Iu()}return Ie()}function Mc(){0===vc&&(vc=0===(536870912&ac)||is?Ee():536870912);var e=so.current;return null!==e&&(e.flags|=32),vc}function Lc(e,t,n){(e!==sc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Wc(e,0),zc(e,ac,vc,!1)),Ce(e,n),0!==(2&rc)&&e===sc||(e===sc&&(0===(2&rc)&&(mc|=n),4===fc&&zc(e,ac,vc,!1)),Su(e))}function Fc(e,t,n){if(0!==(6&rc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),s=r?function(e,t){var n=rc;rc|=2;var r=qc(),s=Qc();sc!==e||ac!==t?(kc=null,Sc=te()+500,Wc(e,t)):uc=xe(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var i=lc;t:switch(oc){case 1:oc=0,lc=null,eu(e,t,i,1);break;case 2:case 9:if(Ys(i)){oc=0,lc=null,$c(t);break}t=function(){2!==oc&&9!==oc||sc!==e||(oc=7),Su(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Ys(i)?(oc=0,lc=null,$c(t)):(oc=0,lc=null,eu(e,t,i,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||Hd(o)){oc=0,lc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,tu(u)):ic=null}break t}}oc=0,lc=null,eu(e,t,i,5);break;case 6:oc=0,lc=null,eu(e,t,i,6);break;case 8:Vc(),fc=6;break e;default:throw Error(a(462))}}Zc();break}catch(d){Gc(e,d)}return ys=vs=null,P.H=r,P.A=s,rc=n,null!==ic?0:(sc=null,ac=0,_r(),fc)}(e,t):Yc(e,t,!0),i=r;;){if(0===s){uc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Bc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Wc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=i,mc|=i,s=4;break e}i=xc,xc=s,null!==i&&(null===xc?xc=i:xc.push.apply(xc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){Wc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,vc,!cc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=Ec+300-te())){if(zc(r,t,vc,!cc),0!==be(r,0,!0))break e;r.timeoutHandle=cd(Uc.bind(null,r,n,xc,kc,wc,t,vc,mc,yc,cc,i,2,-0,0),s)}else Uc(r,n,xc,kc,wc,t,vc,mc,yc,cc,i,0,-0,0)}break}s=Yc(e,t,!1),i=!1}Su(e)}function Uc(e,t,n,r,s,i,o,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Vd={stylesheets:null,count:0,unsuspend:Wd},Yl(t),null!==(h=function(){if(null===Vd)throw Error(a(475));var e=Vd;return e.stylesheets&&0===e.count&&Qd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,i,n,r,s,o,l,c,d,1,f,p)),void zc(e,i,o,!u);ru(e,t,i,n,r,s,o,l,c)}function Bc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-fe(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Ne(e,n,t)}function Hc(){return 0!==(6&rc)||(ku(0,!1),!1)}function Vc(){if(null!==ic){if(0===oc)var e=ic.return;else ys=vs=null,Fi(e=ic),Ya=null,Xa=0,e=ic;for(;null!==e;)al(e.alternate,e),e=e.return;ic=null}}function Wc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc(),sc=e,ic=n=Fr(e.current,null),ac=t,oc=0,lc=null,cc=!1,uc=xe(e,t),dc=!1,yc=vc=gc=mc=pc=fc=0,xc=bc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-fe(r),i=1<<s;t|=e[s],r&=~i}return hc=t,_r(),n}function Gc(e,t){xi=null,P.H=Ga,t===Gs||t===Qs?(t=$s(),oc=3):t===qs?(t=$s(),oc=4):oc=t===Ao?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===ic&&(fc=1,Eo(e,kr(t,e.current)))}function qc(){var e=P.H;return P.H=Ga,null===e?Ga:e}function Qc(){var e=P.A;return P.A=tc,e}function Kc(){fc=4,cc||(4194048&ac)!==ac&&null!==so.current||(uc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===sc||zc(sc,ac,vc,!1)}function Yc(e,t,n){var r=rc;rc|=2;var s=qc(),i=Qc();sc===e&&ac===t||(kc=null,Wc(e,t)),t=!1;var a=fc;e:for(;;)try{if(0!==oc&&null!==ic){var o=ic,l=lc;switch(oc){case 8:Vc(),a=6;break e;case 3:case 2:case 9:case 6:null===so.current&&(t=!0);var c=oc;if(oc=0,lc=null,eu(e,o,l,c),n&&uc){a=0;break e}break;default:c=oc,oc=0,lc=null,eu(e,o,l,c)}}Xc(),a=fc;break}catch(u){Gc(e,u)}return t&&e.shellSuspendCounter++,ys=vs=null,rc=r,P.H=s,P.A=i,null===ic&&(sc=null,ac=0,_r()),a}function Xc(){for(;null!==ic;)Jc(ic)}function Zc(){for(;null!==ic&&!$();)Jc(ic)}function Jc(e){var t=Jo(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function $c(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Lo(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Lo(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:Fi(t);default:al(n,t),t=Jo(n,t=ic=Ur(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function eu(e,t,n,r){ys=vs=null,Fi(t),Ya=null,Xa=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ss(t,n,s,!0),null!==(n=so.current)){switch(n.tag){case 13:return null===io?Kc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Ks?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,s)),!1;case 22:return n.flags|=65536,r===Ks?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,s)),!1}throw Error(a(435,n.tag))}return hu(e,r,s),Kc(),!1}if(is)return null!==(t=so.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&ms(kr(e=Error(a(422),{cause:r}),n))):(r!==ls&&ms(kr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=kr(r,n),li(e,s=ko(e.stateNode,r,s)),4!==fc&&(fc=2)),!1;var i=Error(a(520),{cause:r});if(i=kr(i,n),null===bc?bc=[i]:bc.push(i),4!==fc&&(fc=2),null===t)return!0;r=kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,li(n,e=ko(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Cc||!Cc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,No(s=Co(s),e,n,r),li(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ac))return fc=1,Eo(e,kr(n,e.current)),void(ic=null)}catch(i){if(null!==s)throw ic=s,i;return fc=1,Eo(e,kr(n,e.current)),void(ic=null)}32768&t.flags?(is||1===r?e=!0:uc||0!==(536870912&ac)?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=so.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=sl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);fc=6,ic=null}function ru(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==Nc);if(0!==(6&rc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ne(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Ar,o,l,c),e===sc&&(ic=sc=null,ac=0),_c=t,Ac=e,Tc=n,Ic=i,jc=s,Dc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(ie,(function(){return cu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,s=O.p,O.p=2,o=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(i=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=vo(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){du(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{rc=o,O.p=s,P.T=r}}Nc=1,su(),iu(),au()}}function su(){if(1===Nc){Nc=0;var e=Ac,t=_c,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=O.p;O.p=2;var s=rc;rc|=4;try{Ol(t,e);var i=rd,a=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&$n(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var v=Jn(o,m),y=Jn(o,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}rh=!!nd,rd=nd=null}finally{rc=s,O.p=r,P.T=n}}e.current=t,Nc=2}}function iu(){if(2===Nc){Nc=0;var e=Ac,t=_c,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=O.p;O.p=2;var s=rc;rc|=4;try{Cl(e,t.alternate,t)}finally{rc=s,O.p=r,P.T=n}}Nc=3}}function au(){if(4===Nc||3===Nc){Nc=0,ee();var e=Ac,t=_c,n=Tc,r=Dc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nc=5:(Nc=0,_c=Ac=null,ou(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Cc=null),Te(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=P.T,s=O.p,O.p=2,P.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{P.T=t,O.p=s}}0!==(3&Tc)&&lu(),Su(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Pc?Rc++:(Rc=0,Pc=e):Rc=0,ku(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ps(t)))}function lu(e){return su(),iu(),au(),cu()}function cu(){if(5!==Nc)return!1;var e=Ac,t=Ic;Ic=0;var n=Te(Tc),r=P.T,s=O.p;try{O.p=32>n?32:n,P.T=null,n=jc,jc=null;var i=Ac,o=Tc;if(Nc=0,_c=Ac=null,Tc=0,0!==(6&rc))throw Error(a(331));var l=rc;if(rc|=4,Jl(i.current),Wl(i,i.current,o,n),rc=l,ku(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{O.p=s,P.T=r,ou(e,t)}}function uu(e,t,n){t=kr(n,t),null!==(e=ii(e,t=ko(e.stateNode,t,2),2))&&(Ce(e,2),Su(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Cc||!Cc.has(r))){e=kr(n,e),null!==(r=ii(t,n=Co(2),2))&&(No(n,r,t,e),Ce(r,2),Su(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(dc=!0,s.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(ac&n)===n&&(4===fc||3===fc&&(62914560&ac)===ac&&300>te()-Ec?0===(2&rc)&&Wc(e,0):gc|=n,yc===ac&&(yc=0)),Su(e)}function pu(e,t){0===t&&(t=Se()),null!==(e=jr(e,t))&&(Ce(e,t),Su(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),pu(e,n)}var vu=null,yu=null,bu=!1,xu=!1,wu=!1,Eu=0;function Su(e){e!==yu&&null===e.next&&(null===yu?vu=yu=e:yu=yu.next=e),xu=!0,bu||(bu=!0,hd((function(){0!==(6&rc)?Z(re,Cu):Nu()})))}function ku(e,t){if(!wu&&xu){wu=!0;do{for(var n=!1,r=vu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Tu(r,i))}else i=ac,0===(3&(i=be(r,r===sc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||xe(r,i)||(n=!0,Tu(r,i));r=r.next}}while(n);wu=!1}}function Cu(){Nu()}function Nu(){xu=bu=!1;var e=0;0!==Eu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=Eu),Eu=0);for(var t=te(),n=null,r=vu;null!==r;){var s=r.next,i=Au(r,t);0===i?(r.next=null,null===n?vu=s:n.next=s,null===s&&(yu=n)):(n=r,(0!==e||0!==(3&i))&&(xu=!0)),r=s}ku(e,!1)}function Au(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-fe(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=we(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ac,n=be(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Te(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=_u.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function _u(e,t){if(0!==Nc&&5!==Nc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=ac;return 0===(r=be(e,e===sc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Au(e,te()),null!=e.callbackNode&&e.callbackNode===n?_u.bind(null,e):null)}function Tu(e,t){if(lu())return null;Fc(e,t,!0)}function Iu(){return 0===Eu&&(Eu=Ee()),Eu}function ju(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Du(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<wr.length;Ru++){var Pu=wr[Ru];Er(Pu.toLowerCase(),"on"+(Pu[0].toUpperCase()+Pu.slice(1)))}Er(fr,"onAnimationEnd"),Er(pr,"onAnimationIteration"),Er(mr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(gr,"onTransitionRun"),Er(vr,"onTransitionStart"),Er(yr,"onTransitionCancel"),Er(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Lu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){yo(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){yo(u)}s.currentTarget=null,i=l}}}}function Fu(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||(Hu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),Hu(n,e,r,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Bu]){e[Bu]=!0,qe.forEach((function(t){"selectionchange"!==t&&(Mu.has(t)||Uu(t,!1,e),Uu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,Uu("selectionchange",!1,t))}}function Hu(e,t,n,r){switch(uh(t)){case 2:var s=sh;break;case 8:s=ih;break;default:s=ah}n=s.bind(null,t,n,e),s=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=ze(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Mt((function(){var r=i,s=jt(n),a=[];e:{var o=xr.get(e);if(void 0!==o){var c=$t,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fr:case pr:case mr:c=on;break;case br:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Lt(m,f))&&d.push(Wu(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Pe])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:Ve(c),p=null==u?o:Ve(u),(o=new d(g,m+"leave",c,n,s)).target=h,o.relatedTarget=p,g=null,ze(s)===r&&((d=new d(f,m+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=qu(p))m++;for(p=0,g=f;g;g=qu(g))p++;for(;0<m-p;)d=qu(d),m--;for(;0<p-m;)f=qu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=qu(d),f=qu(f)}d=null}else d=null;null!==c&&Qu(a,o,c,d,!1),null!==u&&null!==h&&Qu(a,h,u,d,!0)}if("select"===(c=(o=r?Ve(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Fn;else if(Dn(o))if(Un)v=Kn;else{v=qn;var y=Gn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Nt(r.elementType)&&(v=Fn):v=Qn;switch(v&&(v=v(e,r))?Rn(a,v,n,s):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&yt(o,"number",o.value)),y=r?Ve(r):window,e){case"focusin":(Dn(y)||"true"===y.contentEditable)&&(rr=y,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,s)}var b;if(En)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else In?_n(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(In||"onCompositionStart"!==x?"onCompositionEnd"===x&&In&&(b=Wt()):(Ht="value"in(zt=s)?zt.value:zt.textContent,In=!0)),0<(y=Gu(r,x)).length&&(x=new cn(x,e,null,n,s),a.push({event:x,listeners:y}),b?x.data=b:null!==(b=Tn(n))&&(x.data=b))),(b=kn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(An=!0,Nn);case"textInput":return(e=t.data)===Nn&&An?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!En&&_n(e,t)?(e=Wt(),Vt=Ht=zt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Gu(r,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:y,listeners:x}),y.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=ju((s[Re]||null).action),a=r.submitter;a&&null!==(t=(t=a[Re]||null)?ju(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new $t("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Eu){var e=a?Du(s,a):new FormData(s);ja(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Du(s,a):new FormData(s),ja(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Lu(a,t)}))}function Wu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Lt(e,n))&&r.unshift(Wu(e,s,i)),null!=(s=Lt(e,t))&&r.push(Wu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function qu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Qu(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Lt(n,i))&&a.unshift(Wu(n,c,l)):s||null!=(c=Lt(n,i))&&a.push(Wu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ku=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Xu(e){return("string"===typeof e?e:""+e).replace(Ku,"\n").replace(Yu,"")}function Zu(e,t){return t=Xu(t),Xu(e)===t}function Ju(){}function $u(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&$u(e,t,"name",s.name,s,null),$u(e,t,"formEncType",s.formEncType,s,null),$u(e,t,"formMethod",s.formMethod,s,null),$u(e,t,"formTarget",s.formTarget,s,null)):($u(e,t,"encType",s.encType,s,null),$u(e,t,"method",s.method,s,null),$u(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=At.get(n)||n,r)}}function ed(e,t,n,r,s,i){switch(n){case"style":Ct(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Re]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,r,o,n,null)}}return i&&$u(e,t,"srcSet",n.srcSet,n,null),void(s&&$u(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:$u(e,t,s,d,n,null)}}return vt(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Fu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:$u(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(o in Fu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:$u(e,t,o,l,n,null)}return wt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else $u(e,t,c,s,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(s=0;s<Ou.length;s++)Fu(Ou[s],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,u,s,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&ed(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&$u(e,t,l,s,n,null))}var nd=null,rd=null;function sd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout((function(){throw e}))}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Ed(a.documentElement),2&n&&Ed(a.body),4&n)for(Ed(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(i),void _h(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);_h(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function xd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=sd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ed(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Sd=new Map,kd=new Set;function Cd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Nd=O.d;O.d={f:function(){var e=Nd.f(),t=Hc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Ra(t):Nd.r(e)},D:function(e){Nd.D(e),_d("dns-prefetch",e,null)},C:function(e,t){Nd.C(e,t),_d("preconnect",e,t)},L:function(e,t,n){Nd.L(e,t,n);var r=Ad;if(r&&e&&t){var s='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+mt(n.imageSizes)+'"]')):s+='[href="'+mt(e)+'"]';var i=s;switch(t){case"style":i=Id(e);break;case"script":i=Rd(e)}Sd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(jd(i))||"script"===t&&r.querySelector(Pd(i))||(td(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Nd.m(e,t);var n=Ad;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Rd(e)}if(!Sd.has(i)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pd(i)))return}td(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Nd.X(e,t);var n=Ad;if(n&&e){var r=We(n).hoistableScripts,s=Rd(e),i=r.get(s);i||((i=n.querySelector(Pd(s)))||(e=h({src:e,async:!0},t),(t=Sd.get(s))&&Fd(e,t),Ge(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){Nd.S(e,t,n);var r=Ad;if(r&&e){var s=We(r).hoistableStyles,i=Id(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(jd(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(i))&&Ld(e,n);var l=a=r.createElement("link");Ge(l),td(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Md(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){Nd.M(e,t);var n=Ad;if(n&&e){var r=We(n).hoistableScripts,s=Rd(e),i=r.get(s);i||((i=n.querySelector(Pd(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(s))&&Fd(e,t),Ge(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Ad="undefined"===typeof document?null:document;function _d(e,t,n){var r=Ad;if(r&&"string"===typeof t&&t){var s=mt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),kd.has(s)||(kd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(td(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Td(e,t,n,r){var s,i,o,l,c=(c=W.current)?Cd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Id(n.href),(r=(n=We(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Id(n.href);var u=We(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(jd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),td(i,"link",o),Ge(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=We(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Id(e){return'href="'+mt(e)+'"'}function jd(e){return'link[rel="stylesheet"]['+e+"]"}function Dd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+mt(e)+'"]'}function Pd(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),td(r,"style",s),Md(r,n.precedence,e),t.instance=r;case"stylesheet":s=Id(n.href);var i=e.querySelector(jd(s));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;r=Dd(n),(s=Sd.get(s))&&Ld(r,s),Ge(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),td(i,"link",r),t.state.loading|=4,Md(i,n.precedence,e),t.instance=i;case"script":return i=Rd(n.src),(s=e.querySelector(Pd(i)))?(t.instance=s,Ge(s),s):(r=n,(s=Sd.get(i))&&Fd(r=h({},n),s),Ge(s=(e=e.ownerDocument||e).createElement("script")),td(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Md(r,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ld(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Bd(e,t,n){if(null===Ud){var r=new Map,s=Ud=new Map;s.set(n,r)}else(r=(s=Ud).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Ue]||i[De]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Hd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Vd=null;function Wd(){}function Gd(){if(this.count--,0===this.count)if(this.stylesheets)Qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qd=null;function Qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qd=new Map,t.forEach(Kd,e),qd=null,Gd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=qd.get(e);if(n)var r=n.get(null);else{n=new Map,qd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=Gd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:w,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Xd(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Zd(e,t,n,r,s,i,a,o,l,c,u,d){return e=new Xd(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Mr(3,null,null,t),e.current=i,i.stateNode=e,(t=Rs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Jd(e){return e?e=Pr:Pr}function $d(e,t,n,r,s,i){s=Jd(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Lc(n,0,t),ai(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=jr(e,67108864);null!==t&&Lc(t,0,67108864),th(e,67108864)}}var rh=!0;function sh(e,t,n,r){var s=P.T;P.T=null;var i=O.p;try{O.p=2,ah(e,t,n,r)}finally{O.p=i,P.T=s}}function ih(e,t,n,r){var s=P.T;P.T=null;var i=O.p;try{O.p=8,ah(e,t,n,r)}finally{O.p=i,P.T=s}}function ah(e,t,n,r){if(rh){var s=oh(r);if(null===s)Vu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return hh=xh(hh,e,t,n,r,s),!0;case"dragenter":return fh=xh(fh,e,t,n,r,s),!0;case"mouseover":return ph=xh(ph,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return mh.set(i,xh(mh.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gh.set(i,xh(gh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==s;){var i=He(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ye(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}Su(i),0===(6&rc)&&(Sc=te()+500,ku(0,!1))}}break;case 13:null!==(o=jr(i,2))&&Lc(o,0,2),Hc(),th(i,2)}if(null===(i=oh(r))&&Vu(e,t,r,lh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Vu(e,t,r,null,n)}}function oh(e){return ch(e=jt(e))}var lh=null;function ch(e){if(lh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,ph=null,mh=new Map,gh=new Map,vh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function xh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=He(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function wh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,(function(){if(13===n.tag){var e=Oc();e=_e(e);var t=jr(n,e);null!==t&&Lc(t,0,e),th(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Eh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function Sh(e,t,n){Eh(e)&&n.delete(t)}function kh(){dh=!1,null!==hh&&Eh(hh)&&(hh=null),null!==fh&&Eh(fh)&&(fh=null),null!==ph&&Eh(ph)&&(ph=null),mh.forEach(Sh),gh.forEach(Sh)}function Ch(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kh)))}var Nh=null;function Ah(e){Nh!==e&&(Nh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Nh===e&&(Nh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var i=He(n);null!==i&&(e.splice(t,3),t-=3,ja(i,{pending:!0,data:s,method:n.method,action:r},r,s))}})))}function _h(e){function t(t){return Ch(t,e)}null!==hh&&Ch(hh,e),null!==fh&&Ch(fh,e),null!==ph&&Ch(ph,e),mh.forEach(t),gh.forEach(t);for(var n=0;n<vh.length;n++){var r=vh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)wh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Re]||null;if("function"===typeof i)a||Ah(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Re]||null)o=a.formAction;else if(null!==ch(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Ah(n)}}}function Th(e){this._internalRoot=e}function Ih(e){this._internalRoot=e}Ih.prototype.render=Th.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));$d(t.current,Oc(),e,t,null,null)},Ih.prototype.unmount=Th.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$d(e.current,2,null,e,null,null),Hc(),t[Pe]=null}},Ih.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&wh(e)}};var jh=s.version;if("19.1.0"!==jh)throw Error(a(527,jh,"19.1.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Dh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Dh),de=Rh}catch(Ph){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=bo,i=xo,l=wo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Zd(e,1,!1,null,0,n,r,s,i,l,0,null),e[Pe]=t.current,zu(e),new Th(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=bo,l=xo,c=wo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Zd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=Jd(null),n=t.current,(s=si(r=_e(r=Oc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,Ce(t,n),Su(t),e[Pe]=t.current,zu(e),new Ih(t)},t.version="19.1.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function k(e,t,r,s,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(){}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+A(e,0):i,w(a)?(s="",null!=u&&(s=u.replace(N,"$&/")+"/"),T(a,t,s,"",(function(e){return e}))):null!=a&&(C(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+u,a=k(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,p=""===i?".":i+":";if(w(e))for(var m=0;m<e.length;m++)u+=T(i=e[m],t,s,o=p+A(i,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=T(i=i.value,t,s,o=p+A(i,m++),a);else if("object"===o){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function I(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return k(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return k(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),s=E.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,D)}catch(i){D(i)}finally{E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=E.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.1.0"},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(cb){return e}}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,k||(k=!0,S());else{var t=r(u);null!==t&&D(E,t.startTime-e)}}var S,k=!1,C=-1,N=5,A=-1;function _(){return!!v||!(t.unstable_now()-A<N)}function T(){if(v=!1,k){var e=t.unstable_now();A=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(C),C=-1),p=!0;var i=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&_());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&s(c),w(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&D(E,l.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?S():k=!1}}}if("function"===typeof x)S=function(){x(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,j=I.port2;I.port1.onmessage=T,S=function(){j.postMessage(null)}}else S=function(){y(T,0)};function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,D(E,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,k||(k=!0,S()))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(cb){if("object"===typeof window)return window}}();var r=n(43),s=n(391);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==l)throw new o;const c=t<<2|i>>4;if(r.push(c),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=i(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return a.decodeString(e,!0)}catch(cb){console.error("base64Decode failed: ",cb)}return null};function u(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const d=()=>{try{return u().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production",REACT_APP_API_URL:"https://your-api-domain.com",REACT_APP_FIREBASE_PROJECT_ID:"lifecoach-ai-c862c",REACT_APP_FIREBASE_API_KEY:"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",REACT_APP_FIREBASE_AUTH_DOMAIN:"lifecoach-ai-c862c.firebaseapp.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"lifecoach-ai-c862c.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1073742422983",REACT_APP_FIREBASE_APP_ID:"1:1073742422983:web:83ade2a0d12c332874efe2",REACT_APP_OPENAI_API_KEY:"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",REACT_APP_N8N_WEBHOOK_URL:"https://hook.us1.make.com/iei6j5s5a34rqkrkcdematixarkgc38h",REACT_APP_N8N_WEBHOOK_SECRET:"my-secret-key-2024",REACT_APP_FROM_EMAIL:"smkaufman@gmail.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(cb){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(cb){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(cb))}},h=e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=e=>{const t=h(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=d())||void 0===t?void 0:t["_".concat(e)]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function v(e){return e.endsWith(".cloudworkstations.dev")}async function y(e){return(await fetch(e,{credentials:"include"})).ok}const b={};let x=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!v(window.location.host)||b[e]===t||b[e]||x)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{x=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function E(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){var e;const t=null===(e=d())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(cb){return!1}}function k(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){try{return"object"===typeof indexedDB}catch(cb){return!1}}class N extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(_,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new N(n,i,t)}}const _=/\{\$([^}]+)}/g;function T(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(I(n)&&I(i)){if(!T(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function I(e){return null!==e&&"object"===typeof e}function j(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class P{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(cb){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(cb){"undefined"!==typeof console&&console.error&&console.error(cb)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function O(){}function M(e){return e&&e._delegate?e._delegate:e}class L{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const F="[DEFAULT]";class U{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(cb){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(cb){if(r)return null;throw cb}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:F})}catch(cb){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(cb){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===F?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.component?this.component.multipleInstances?e:F:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class B{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new U(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const z=[];var H;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(H||(H={}));const V={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},W=H.INFO,G={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},q=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=G[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Q{constructor(e){this.name=e,this._logLevel=W,this._logHandler=q,this._userLogHandler=null,z.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...t),this._logHandler(this,H.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...t),this._logHandler(this,H.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.INFO,...t),this._logHandler(this,H.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.WARN,...t),this._logHandler(this,H.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.ERROR,...t),this._logHandler(this,H.ERROR,...t)}}function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Y(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}function X(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let $,ee;const te=new WeakMap,ne=new WeakMap,re=new WeakMap,se=new WeakMap,ie=new WeakMap;let ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ue(this),n),ce(te.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(e.apply(ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(ue(this),t,...r);return re.set(i,t.sort?t.sort():[t]),ce(i)}}function le(e){return"function"===typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(ne.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)}));ne.set(e,t)}(e),t=e,($||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ae):e);var t}function ce(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ce(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&te.set(t,e)})).catch((()=>{})),ie.set(t,e),t}(e);if(se.has(e))return se.get(e);const t=le(e);return t!==e&&(se.set(e,t),ie.set(t,e)),t}const ue=e=>ie.get(e);const de=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],fe=new Map;function pe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fe.get(t))return fe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=he.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!de.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return fe.set(t,i),i}ae=(e=>J(J({},e),{},{get:(t,n,r)=>pe(t,n)||e.get(t,n,r),has:(t,n)=>!!pe(t,n)||e.has(t,n)}))(ae);class me{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ge="@firebase/app",ve="0.13.1",ye=new Q("@firebase/app"),be="@firebase/app-compat",xe="@firebase/analytics-compat",we="@firebase/analytics",Ee="@firebase/app-check-compat",Se="@firebase/app-check",ke="@firebase/auth",Ce="@firebase/auth-compat",Ne="@firebase/database",Ae="@firebase/data-connect",_e="@firebase/database-compat",Te="@firebase/functions",Ie="@firebase/functions-compat",je="@firebase/installations",De="@firebase/installations-compat",Re="@firebase/messaging",Pe="@firebase/messaging-compat",Oe="@firebase/performance",Me="@firebase/performance-compat",Le="@firebase/remote-config",Fe="@firebase/remote-config-compat",Ue="@firebase/storage",Be="@firebase/storage-compat",ze="@firebase/firestore",He="@firebase/ai",Ve="@firebase/firestore-compat",We="firebase",Ge="[DEFAULT]",qe={[ge]:"fire-core",[be]:"fire-core-compat",[we]:"fire-analytics",[xe]:"fire-analytics-compat",[Se]:"fire-app-check",[Ee]:"fire-app-check-compat",[ke]:"fire-auth",[Ce]:"fire-auth-compat",[Ne]:"fire-rtdb",[Ae]:"fire-data-connect",[_e]:"fire-rtdb-compat",[Te]:"fire-fn",[Ie]:"fire-fn-compat",[je]:"fire-iid",[De]:"fire-iid-compat",[Re]:"fire-fcm",[Pe]:"fire-fcm-compat",[Oe]:"fire-perf",[Me]:"fire-perf-compat",[Le]:"fire-rc",[Fe]:"fire-rc-compat",[Ue]:"fire-gcs",[Be]:"fire-gcs-compat",[ze]:"fire-fst",[Ve]:"fire-fst-compat",[He]:"fire-vertex","fire-js":"fire-js",[We]:"fire-js-all"},Qe=new Map,Ke=new Map,Ye=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(cb){ye.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),cb)}}function Ze(e){const t=e.name;if(Ye.has(t))return ye.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ye.set(t,e);for(const n of Qe.values())Xe(n,e);for(const n of Ke.values())Xe(n,e);return!0}function Je(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $e(e){return null!==e&&void 0!==e&&void 0!==e.settings}const et=new A("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class tt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new L("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}const nt="11.9.0";function rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ge,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw et.create("bad-app-name",{appName:String(s)});if(n||(n=p()),!n)throw et.create("no-options");const i=Qe.get(s);if(i){if(T(n,i.options)&&T(r,i.config))return i;throw et.create("duplicate-app",{appName:s})}const a=new B(s);for(const l of Ye.values())a.addComponent(l);const o=new tt(n,r,a);return Qe.set(s,o),o}function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;const t=Qe.get(e);if(!t&&e===Ge&&p())return rt();if(!t)throw et.create("no-app",{appName:e});return t}function it(e,t,n){var r;let s=null!==(r=qe[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ye.warn(e.join(" "))}Ze(new L("".concat(s,"-version"),(()=>({library:s,version:t})),"VERSION"))}const at="firebase-heartbeat-store";let ot=null;function lt(){return ot||(ot=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ce(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ce(a.result),e.oldVersion,e.newVersion,ce(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{i&&e.addEventListener("close",(()=>i())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(at)}catch(cb){console.warn(cb)}}}).catch((e=>{throw et.create("idb-open",{originalErrorMessage:e.message})}))),ot}async function ct(e,t){try{const n=(await lt()).transaction(at,"readwrite"),r=n.objectStore(at);await r.put(t,ut(e)),await n.done}catch(cb){if(cb instanceof N)ye.warn(cb.message);else{const t=et.create("idb-set",{originalErrorMessage:null===cb||void 0===cb?void 0:cb.message});ye.warn(t.message)}}}function ut(e){return"".concat(e.name,"!").concat(e.options.appId)}class dt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ft(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ht();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(cb){ye.warn(cb)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ht(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),pt(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(cb){return ye.warn(cb),""}}}function ht(){return(new Date).toISOString().substring(0,10)}class ft{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!C()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await lt()).transaction(at),n=await t.objectStore(at).get(ut(e));return await t.done,n}catch(cb){if(cb instanceof N)ye.warn(cb.message);else{const t=et.create("idb-get",{originalErrorMessage:null===cb||void 0===cb?void 0:cb.message});ye.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pt(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var mt;mt="",Ze(new L("platform-logger",(e=>new me(e)),"PRIVATE")),Ze(new L("heartbeat",(e=>new dt(e)),"PRIVATE")),it(ge,ve,mt),it(ge,ve,"esm2017"),it("fire-js","");function gt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function vt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yt=vt,bt=new A("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xt=new Q("@firebase/auth");function wt(e){if(xt.logLevel<=H.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xt.error("Auth (".concat(nt,"): ").concat(e),...n)}}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw At(e,...n)}function St(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return At(e,...n)}function kt(e,t,n){const r=Object.assign(Object.assign({},yt()),{[t]:n});return new A("auth","Firebase",r).create(t,{appName:e.name})}function Ct(e){return kt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Et(e,"argument-error"),kt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return bt.create(e,...n)}function _t(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw At(t,...r)}}function Tt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw wt(t),new Error(t)}function It(e,t){e||Tt(t)}function jt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dt(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Pt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Dt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ot{constructor(e,t){this.shortDelay=e,this.longDelay=t,It(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Pt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mt(e,t){It(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Lt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ut=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Bt=new Ot(3e4,6e4);function zt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ht(e,t,n,r){return Vt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=j(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&v(e.emulatorConfig.host)&&(l.credentials="include"),Lt.fetch()(await Gt(e,e.config.apiHost,n,a),l)}))}async function Vt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ft),t);try{const t=new Qt(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Kt(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Kt(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Kt(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Kt(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw kt(e,o,a);Et(e,o)}}catch(cb){if(cb instanceof N)throw cb;Et(e,"network-request-failed",{message:String(cb)})}}async function Wt(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Ht(e,t,n,r,s);return"mfaPendingCredential"in i&&Et(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Gt(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?Mt(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(Ut.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function qt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(St(this.auth,"network-request-failed"))),Bt.get())}))}}function Kt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=St(e,t,r);return s.customData._tokenResponse=n,s}function Yt(e){return void 0!==e&&void 0!==e.enterprise}class Xt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Zt(e,t){return Ht(e,"GET","/v2/recaptchaConfig",zt(e,t))}async function Jt(e,t){return Ht(e,"POST","/v1/accounts:lookup",t)}function $t(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(cb){}}function en(e){return 1e3*Number(e)}function tn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return wt("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(wt("Failed to decode base64 JWT payload"),null)}catch(cb){return wt("Caught error parsing JWT payload as JSON",null===cb||void 0===cb?void 0:cb.toString()),null}}function nn(e){const t=tn(e);return _t(t,"internal-error"),_t("undefined"!==typeof t.exp,"internal-error"),_t("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function rn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(cb){throw cb instanceof N&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(cb)&&e.auth.currentUser===e&&await e.auth.signOut(),cb}}class sn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(cb){return void((null===cb||void 0===cb?void 0:cb.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class an{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$t(this.lastLoginAt),this.creationTime=$t(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function on(e){var t;const n=e.auth,r=await e.getIdToken(),s=await rn(e,Jt(n,{idToken:r}));_t(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?ln(i.providerUserInfo):[],o=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new an(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function ln(e){return e.map((e=>{var{providerId:t}=e,n=gt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t("undefined"!==typeof e.idToken,"internal-error"),_t("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):nn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_t(0!==e.length,"internal-error");const t=nn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Vt(e,{},(async()=>{const n=j({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Gt(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&v(e.emulatorConfig.host)&&(o.credentials="include"),Lt.fetch()(i,o)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new cn;return n&&(_t("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(_t("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(_t("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cn,this.toJSON())}_performRefresh(){return Tt("not implemented")}}function un(e,t){_t("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class dn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=gt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new an(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await rn(this,this.stsTokenManager.getToken(this.auth,e));return _t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=M(e),r=await n.getIdToken(t),s=tn(r);_t(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$t(en(s.auth_time)),issuedAtTime:$t(en(s.iat)),expirationTime:$t(en(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=M(e);await on(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await on(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($e(this.auth.app))return Promise.reject(Ct(this.auth));const e=await this.getIdToken();return await rn(this,async function(e,t){return Ht(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:E}=t;_t(y&&E,e,"internal-error");const S=cn.fromJSON(this.name,E);_t("string"===typeof y,e,"internal-error"),un(u,e.name),un(d,e.name),_t("boolean"===typeof b,e,"internal-error"),_t("boolean"===typeof x,e,"internal-error"),un(h,e.name),un(f,e.name),un(p,e.name),un(m,e.name),un(g,e.name),un(v,e.name);const k=new dn({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(k.providerData=w.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new cn;r.updateFromServerResponse(t);const s=new dn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await on(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];_t(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?ln(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new cn;a.updateFromIdToken(n);const o=new dn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new an(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const hn=new Map;function fn(e){It(e instanceof Function,"Expected a class definition");let t=hn.get(e);return t?(It(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,hn.set(e,t),t)}class pn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pn.type="NONE";const mn=pn;function gn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class vn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=gn(this.userKey,r.apiKey,s),this.fullPersistenceKey=gn("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Jt(this.auth,{idToken:e}).catch((()=>{}));return t?dn._fromGetAccountInfoResponse(this.auth,t,e):null}return dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new vn(fn(mn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||fn(mn);const i=gn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await Jt(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await dn._fromGetAccountInfoResponse(e,r,t)}else n=dn._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(i)}catch(l){}}))),new vn(s,e,n)):new vn(s,e,n)}}function yn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(En(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kn(t))return"Blackberry";if(Cn(t))return"Webos";if(xn(t))return"Safari";if((t.includes("chrome/")||wn(t))&&!t.includes("edge/"))return"Chrome";if(Sn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/firefox\//i.test(e)}function xn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/crios\//i.test(e)}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/iemobile/i.test(e)}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/android/i.test(e)}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/blackberry/i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/webos/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function An(){return function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return Nn(e)||Sn(e)||Cn(e)||kn(e)||/windows phone/i.test(e)||En(e)}function Tn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=yn(E());break;case"Worker":t="".concat(yn(E()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}class In{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(cb){r(cb)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(cb){t.reverse();for(const n of t)try{n()}catch(yb){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===cb||void 0===cb?void 0:cb.message})}}}class jn{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Dn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pn(this),this.idTokenSubscription=new Pn(this),this.beforeStateQueue=new In(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fn(t)),this._initializationPromise=this.queue((async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await vn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(cb){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Jt(this,{idToken:e}),n=await dn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($e(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(cb){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(cb)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(cb){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await on(e)}catch(cb){if((null===cb||void 0===cb?void 0:cb.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($e(this.app))return Promise.reject(Ct(this));const t=e?M(e):null;return t&&_t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return $e(this.app)?Promise.reject(Ct(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $e(this.app)?Promise.reject(Ct(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(fn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ht(e,"GET","/v2/passwordPolicy",zt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new jn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new A("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ht(e,"POST","/v2/accounts:revokeToken",zt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fn(e)||this._popupRedirectResolver;_t(t,this,"argument-error"),this.redirectPersistenceManager=await vn.create(this,[fn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(a,this,"internal-error"),a.then((()=>{i||s(this.currentUser)})),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if($e(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(xt.logLevel<=H.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xt.warn("Auth (".concat(nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Rn(e){return M(e)}class Pn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new P(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let On={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mn(e){return On.loadJS(e)}function Ln(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Fn{constructor(){this.enterprise=new Un}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Un{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Bn="NO_RECAPTCHA";class zn{constructor(e){this.type="recaptcha-enterprise",this.auth=Rn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Yt(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Bn)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Fn).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Zt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Xt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&Yt(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=On.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Mn(t).then((()=>{n(s,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Hn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new zn(e);let a;if(s)a=Bn;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Vn(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Hn(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch((async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Hn(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)}))}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await Hn(e,t,n);return r(e,s).catch((async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Hn(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)}))}{const s=await Hn(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Wn(e){const t=Rn(e),n=await Zt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Xt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new zn(t).verify()}}function Gn(e,t,n){const r=Rn(e);_t(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=qn(t),{host:a,port:o}=function(e){const t=qn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Qn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Qn(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return _t(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void _t(T(c,r.config.emulator)&&T(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,v(a)?(y("".concat(i,"//").concat(a).concat(l)),w("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function qn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Kn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tt("not implemented")}_getIdTokenResponse(e){return Tt("not implemented")}_linkToIdToken(e,t){return Tt("not implemented")}_getReauthenticationResolver(e){return Tt("not implemented")}}async function Yn(e,t){return Ht(e,"POST","/v1/accounts:signUp",t)}async function Xn(e,t){return Wt(e,"POST","/v1/accounts:signInWithPassword",zt(e,t))}class Zn extends Kn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Zn(e,t,"password")}static _fromEmailAndCode(e,t){return new Zn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Vn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithEmailLink",zt(e,t))}(e,{email:this._email,oobCode:this._password});default:Et(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Vn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithEmailLink",zt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Et(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jn(e,t){return Wt(e,"POST","/v1/accounts:signInWithIdp",zt(e,t))}class $n extends Kn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Et("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=gt(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new $n(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Jn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Jn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=j(t)}return e}}async function er(e,t){return Ht(e,"POST","/v1/accounts:sendVerificationCode",zt(e,t))}const tr={USER_NOT_FOUND:"user-not-found"};class nr extends Kn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new nr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new nr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithPhoneNumber",zt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Wt(e,"POST","/v1/accounts:signInWithPhoneNumber",zt(e,t));if(n.temporaryProof)throw Kt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithPhoneNumber",zt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),tr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new nr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class rr{constructor(e){var t,n,r,s,i,a;const o=D(R(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);_t(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=D(R(e)).link,n=t?D(R(t)).deep_link_id:null,r=D(R(e)).deep_link_id;return(r?D(R(r)).link:null)||r||n||t||e}(e);try{return new rr(t)}catch(n){return null}}}class sr{constructor(){this.providerId=sr.PROVIDER_ID}static credential(e,t){return Zn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=rr.parseLink(t);return _t(n,"argument-error"),Zn._fromEmailAndCode(e,n.code,n.tenantId)}}sr.PROVIDER_ID="password",sr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ir{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ar extends ir{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class or extends ar{constructor(){super("facebook.com")}static credential(e){return $n._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return or.credential(t.oauthAccessToken)}catch(n){return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com",or.PROVIDER_ID="facebook.com";class lr extends ar{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $n._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return lr.credential(n,r)}catch(s){return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com",lr.PROVIDER_ID="google.com";class cr extends ar{constructor(){super("github.com")}static credential(e){return $n._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cr.credential(t.oauthAccessToken)}catch(n){return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com",cr.PROVIDER_ID="github.com";class ur extends ar{constructor(){super("twitter.com")}static credential(e,t){return $n._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ur.credential(n,r)}catch(s){return null}}}async function dr(e,t){return Wt(e,"POST","/v1/accounts:signUp",zt(e,t))}ur.TWITTER_SIGN_IN_METHOD="twitter.com",ur.PROVIDER_ID="twitter.com";class hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await dn._fromIdTokenResponse(e,n,r),i=fr(n);return new hr({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=fr(n);return new hr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function fr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class pr extends N{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,pr.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new pr(e,t,n,r)}}function mr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw pr._fromErrorAndOperation(e,n,t,r);throw n}))}async function gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await rn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return hr._forOperation(e,"link",r)}async function vr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if($e(r.app))return Promise.reject(Ct(r));const s="reauthenticate";try{const i=await rn(e,mr(r,s,t,e),n);_t(i.idToken,r,"internal-error");const a=tn(i.idToken);_t(a,r,"internal-error");const{sub:o}=a;return _t(e.uid===o,r,"user-mismatch"),hr._forOperation(e,s,i)}catch(cb){throw(null===cb||void 0===cb?void 0:cb.code)==="auth/".concat("user-not-found")&&Et(r,"user-mismatch"),cb}}async function yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Ct(e));const r="signIn",s=await mr(e,r,t),i=await hr._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function br(e,t){return yr(Rn(e),t)}async function xr(e){const t=Rn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function wr(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=M(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await rn(s,async function(e,t){return Ht(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function Er(e,t,n,r){return M(e).onAuthStateChanged(t,n,r)}function Sr(e,t){return Ht(e,"POST","/v2/accounts/mfaEnrollment:start",zt(e,t))}new WeakMap;const kr="__sak";class Cr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kr,"1"),this.storage.removeItem(kr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Nr extends Cr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_n(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);An()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nr.type="LOCAL";const Ar=Nr;function _r(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Tr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Ir{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Tr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return _r(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Tr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Tr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=_r(n);const s=setInterval((()=>{const e=_r(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(s)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ir.type="COOKIE";class jr extends Cr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jr.type="SESSION";const Dr=jr;class Rr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Rr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map((async e=>e(t.origin,s))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Rr.receivers=[];class Or{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise(((a,o)=>{const l=Pr("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}function Mr(){return window}function Lr(){return"undefined"!==typeof Mr().WorkerGlobalScope&&"function"===typeof Mr().importScripts}const Fr="firebaseLocalStorageDb",Ur="firebaseLocalStorage",Br="fbase_key";class zr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Hr(e,t){return e.transaction([Ur],t?"readwrite":"readonly").objectStore(Ur)}function Vr(){const e=indexedDB.open(Fr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ur,{keyPath:Br})}catch(cb){n(cb)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ur)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Fr);return new zr(e).toPromise()}(),t(await Vr()))}))}))}async function Wr(e,t,n){const r=Hr(e,!0).put({[Br]:t,value:n});return new zr(r).toPromise()}function Gr(e,t){const n=Hr(e,!0).delete(t);return new zr(n).toPromise()}class qr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Vr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(cb){if(t++>3)throw cb;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rr._getInstance(Lr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Or(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vr();return await Wr(e,kr,"1"),await Gr(e,kr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Hr(e,!1).get(t),r=await new zr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Gr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Hr(e,!1).getAll();return new zr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}qr.type="LOCAL";const Qr=qr;function Kr(e,t){return Ht(e,"POST","/v2/accounts/mfaSignIn:start",zt(e,t))}Ln("rcb"),new Ot(3e4,6e4);const Yr="recaptcha";async function Xr(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Wn(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){_t("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Vn(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Bn){_t((null===n||void 0===n?void 0:n.type)===Yr,e,"argument-error");return Sr(e,await Zr(e,t,n))}return Sr(e,t)}),"PHONE_PROVIDER");return(await i.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{_t("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;_t(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Vn(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Bn){_t((null===n||void 0===n?void 0:n.type)===Yr,e,"argument-error");return Kr(e,await Zr(e,t,n))}return Kr(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Vn(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Bn){_t((null===n||void 0===n?void 0:n.type)===Yr,e,"argument-error");return er(e,await Zr(e,t,n))}return er(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Zr(e,t,n){_t(n.type===Yr,e,"argument-error");const r=await n.verify();_t("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Jr{constructor(e){this.providerId=Jr.PROVIDER_ID,this.auth=Rn(e)}verifyPhoneNumber(e,t){return Xr(this.auth,e,M(t))}static credential(e,t){return nr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Jr.credentialFromTaggedObject(t)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?nr._fromTokenResponse(n,r):null}}function $r(e,t){return t?fn(t):(_t(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jr.PROVIDER_ID="phone",Jr.PHONE_SIGN_IN_METHOD="phone";class es extends Kn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ts(e){return yr(e.auth,new es(e),e.bypassAuthState)}function ns(e){const{auth:t,user:n}=e;return _t(n,t,"internal-error"),vr(n,new es(e),e.bypassAuthState)}async function rs(e){const{auth:t,user:n}=e;return _t(n,t,"internal-error"),gr(n,new es(e),e.bypassAuthState)}class ss{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(cb){this.reject(cb)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(cb){this.reject(cb)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ts;case"linkViaPopup":case"linkViaRedirect":return rs;case"reauthViaPopup":case"reauthViaRedirect":return ns;default:Et(this.auth,"internal-error")}}resolve(e){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const is=new Ot(2e3,1e4);class as extends ss{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){It(1===this.filter.length,"Popup operations only handle one event");const e=Pr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(St(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,is.get())};e()}}as.currentPopupAction=null;const os=new Map;class ls extends ss{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=os.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ds(t),r=us(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(cb){e=()=>Promise.reject(cb)}os.set(this.auth._key(),e)}return this.bypassAuthState||os.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function cs(e,t){os.set(e._key(),t)}function us(e){return fn(e._redirectPersistence)}function ds(e){return gn("pendingRedirect",e.config.apiKey,e.name)}async function hs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Ct(e));const r=Rn(e),s=$r(r,t),i=new ls(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class fs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ms(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ms(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(St(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ps(e))}saveEventToCache(e){this.cachedEventUids.add(ps(e)),this.lastProcessedEventTime=Date.now()}}function ps(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ms(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const gs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vs=/^https?/;async function ys(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ht(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(bs(r))return}catch(n){}Et(e,"unauthorized-domain")}function bs(e){const t=jt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!vs.test(n))return!1;if(gs.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const xs=new Ot(3e4,6e4);function ws(){const e=Mr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Es(e){return new Promise(((t,n)=>{var r,s,i;function a(){ws(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ws(),n(St(e,"network-request-failed"))},timeout:xs.get()})}if(null===(s=null===(r=Mr().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Mr().gapi)||void 0===i?void 0:i.load)){const t=Ln("iframefcb");return Mr()[t]=()=>{gapi.load?a():n(St(e,"network-request-failed"))},Mn("".concat(On.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Ss=null,e}))}let Ss=null;const ks=new Ot(5e3,15e3),Cs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ns=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function As(e){const t=e.config;_t(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Mt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nt},s=Ns.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(j(r).slice(1))}async function _s(e){const t=await function(e){return Ss=Ss||Es(e),Ss}(e),n=Mr().gapi;return _t(n,e,"internal-error"),t.open({where:document.body,url:As(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cs,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=St(e,"network-request-failed"),i=Mr().setTimeout((()=>{r(s)}),ks.get());function a(){Mr().clearTimeout(i),n(t)}t.ping(a).then(a,(()=>{r(s)}))}))))}const Ts={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Is{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(cb){}}}function js(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ts),{width:r.toString(),height:s.toString(),top:i,left:a}),c=E().toLowerCase();n&&(o=wn(c)?"_blank":n),bn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Is(null);const d=window.open(t||"",o,u);_t(d,e,"popup-blocked");try{d.focus()}catch(cb){}return new Is(d)}const Ds="__/auth/handler",Rs="emulator/auth/handler",Ps=encodeURIComponent("fac");async function Os(e,t,n,r,s,i){_t(e.config.authDomain,e,"auth-domain-config-required"),_t(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:s};if(t instanceof ir){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof ar){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ps,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ds);return Mt(t,Rs)}(e),"?").concat(j(o).slice(1)).concat(c)}const Ms="webStorageSupport";const Ls=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dr,this._completeRedirectFn=hs,this._overrideRedirectResult=cs}async _openPopup(e,t,n,r){var s;It(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return js(e,await Os(e,t,n,jt(),r),Pr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Mr().location.href=e}(await Os(e,t,n,jt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(It(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _s(e),n=new fs(e);return t.register("authEvent",(t=>{_t(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ms,{type:Ms},(n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ms];void 0!==s&&t(!!s),Et(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ys(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _n()||xn()||Nn()}};var Fs="@firebase/auth",Us="1.10.7";class Bs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const zs=m("authIdTokenMaxAge")||300;let Hs=null;var Vs;!function(e){On=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=St("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Vs="Browser",Ze(new L("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;_t(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Vs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tn(Vs)},c=new Dn(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ze(new L("auth-internal",(e=>(e=>new Bs(e))(Rn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),it(Fs,Us,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vs)),it(Fs,Us,"esm2017");it("firebase","11.9.1","app");var Ws,Gs,qs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Qs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var s=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function v(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Gs=Qs.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Ws=Qs.Integer=r}).apply("undefined"!==typeof qs?qs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ks,Ys,Xs,Zs,Js,$s,ei,ti,ni="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ri={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ni&&ni];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(e,t){return t}))}}));var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){s.setTimeout((()=>{throw e}),0)}function k(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new N),(e=>e.reset()));class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let A,_=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);A=()=>{e.then(j)}};var j=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(db){S(db)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_=!1};function D(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(db){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var s=!0;break e}catch(lb){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var M={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function H(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=V(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),G={};function q(e,t,n,r,s){if(r&&r.once)return K(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)q(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,s):Q(e,t,n,!1,r,s)}function Q(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=$(e);if(l||(e[W]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Z(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.L(t,n,a(r)?!!r.capture:!!r,s):Q(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=V(i=e.g[t],n,r,s))&&(B(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])H(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Z(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$(t))?(H(n,e),0==n.h&&(n.src=null,t[W]=null)):B(e)}}}function Z(e){return e in G?G[e]:G[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function $(e){return(e=e[W])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;w(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&H(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,D),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}d(le,D);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function be(){R.call(this,"c")}d(ye,R),d(be,R);var xe={},we=null;function Ee(){return we=we||new ne}function Se(e){R.call(this,xe.La,e)}function ke(e){const t=Ee();re(t,new Se(t))}function Ce(e,t){R.call(this,xe.STAT_EVENT,e),this.stat=t}function Ne(e){const t=Ee();re(t,new Ce(t,e))}function Ae(e,t){R.call(this,xe.Ma,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}function Te(){this.g=!0}function Ie(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(wb){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",d(Se,R),xe.STAT_EVENT="statevent",d(Ce,R),xe.Ma="timingevent",d(Ae,R),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var je,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Pe,pe),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},je=new Pe;var Le={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),Ve(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=q(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,s,i){e.info((function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function He(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_e(c(e.ba,e),t)}function Ge(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||on(e.j,e)}function Qe(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||$e(n.h,e)))if(!e.K&&$e(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(nb){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}nn(n),Ne(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=_e(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(nb){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Ge(o),Ve(o)),r.g=a}else tn(r);0<n.i.length&&Zt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(nb){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=h||7==t||ke(),Ge(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Gt(this.g);e="";var i=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qe(this),qe(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ne(12),Qe(this),qe(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=He(this,o),e==Fe){4==h&&(this.s=4,Ne(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ne(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ke(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),rn(d),d.M=!0,Ne(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Qe(this),qe(this)}else Ie(this.i,this.l,o,null),Ke(this,o);4==h&&Qe(this),this.o&&!this.J&&(4==h?on(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Qe(this),qe(this)}}}catch(Eb){}},Oe.prototype.cancel=function(){this.J=!0,Qe(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(ke(),Ne(17)),Qe(this),this.s=2,qe(this)):We(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ze(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function $e(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,yt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){wt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return wt(e),t=Ct(e,t),e.g.has(t)}function kt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),h(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(lb){}}function At(){this.g=new fe}function _t(e,t,n){const r=n||"";try{rt(e,(function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(cb){throw t.push(r+"type="+encodeURIComponent("_badmap")),cb}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function jt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){wt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,St(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Tt,pe),Tt.prototype.g=function(){return new It(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),d(It,ne),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&jt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Lt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),Ht(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Lt.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Wt(e)?e.g.statusText:""}catch(wb){o=""}e.l=o+" ["+e.Z()+"]",Bt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){Vt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(cb){}}}function Vt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(bb){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),$t(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(s.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Zt(e){if(!Ze(e.h)&&!e.s){e.s=!0;var t=e.Ga;A||I(),_||(A(),_=!0),T.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),$t(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function $t(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{_t(o,e,"req"+n+"_")}catch(Eb){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;A||I(),_||(A(),_=!0),T.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=_e(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),$t(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Be(n,e)}function an(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!$e(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ee(),new Ae(r,n)),Zt(e)}else tn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=_e(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Nt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout((()=>{n.abort(),Nt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Nt(0,0,!1,t)}))}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),$t(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Tt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function mn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function yn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?me(this.o):me(je),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(lb){return void Ut(this,lb)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vt(this),this.u=!0,this.g.send(e),this.u=!1}catch(lb){Ut(this,lb)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(fb){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(fb){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Zt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),$t(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Pt(i)))+"&"+t:this.m&&Ot(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ue(s,n,null)):Ue(s,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Ze(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=_e(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Zt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ye),d(vn,be),d(yn,fn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,ti=ri.createWebChannelTransport=function(){return new pn},ei=ri.getStatEventTarget=function(){return Ee()},$s=ri.Event=xe,Js=ri.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Zs=ri.ErrorCode=De,Re.COMPLETE="complete",Xs=ri.EventType=Re,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ys=ri.WebChannel=ge,ri.FetchXmlHttpFactory=Tt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Ks=ri.XhrIo=Mt}).apply("undefined"!==typeof ni?ni:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const si="@firebase/firestore",ii="4.7.17";class ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");let oi="11.9.0";const li=new Q("@firebase/firestore");function ci(){return li.logLevel}function ui(e){if(li.logLevel<=H.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(fi);li.debug("Firestore (".concat(oi,"): ").concat(e),...s)}}function di(e){if(li.logLevel<=H.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(fi);li.error("Firestore (".concat(oi,"): ").concat(e),...s)}}function hi(e){if(li.logLevel<=H.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(fi);li.warn("Firestore (".concat(oi,"): ").concat(e),...s)}}function fi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(ib){return e}}function pi(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,mi(e,r,n)}function mi(e,t,n){let r="FIRESTORE (".concat(oi,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw di(r),new Error(r)}function gi(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||mi(t,s,r)}function vi(e,t){return e}const yi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bi extends N{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class wi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ei{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ai.UNAUTHENTICATED)))}shutdown(){}}class Si{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ki{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gi(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xi,e.enqueueRetryable((()=>r(this.currentUser)))};const i=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{ui("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ui("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xi)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ui("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(gi("string"==typeof t.accessToken,31837,{l:t}),new wi(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gi(null===e||"string"==typeof e,2055,{h:e}),new ai(e)}}class Ci{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ni{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ci(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ai.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ai{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _i{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$e(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gi(void 0===this.o,3512);const n=e=>{null!=e.error&&ui("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ui("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ui("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ui("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ai(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(gi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ai(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ti(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Ii(){return new TextEncoder}class ji{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ti(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Di(e,t){return e<t?-1:e>t?1:0}function Ri(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Di(r,s);{const i=Ii(),a=Oi(i.encode(Pi(e,n)),i.encode(Pi(t,n)));return 0!==a?a:Di(r,s)}}n+=r>65535?2:1}return Di(e.length,t.length)}function Pi(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Oi(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Di(e[n],t[n]);return Di(e.length,t.length)}function Mi(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Li=-62135596800,Fi=1e6;class Ui{static now(){return Ui.fromMillis(Date.now())}static fromDate(e){return Ui.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Fi);return new Ui(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bi(yi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bi(yi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Li)throw new bi(yi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bi(yi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fi}_compareTo(e){return this.seconds===e.seconds?Di(this.nanoseconds,e.nanoseconds):Di(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Li;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bi{static fromTimestamp(e){return new Bi(e)}static min(){return new Bi(new Ui(0,0))}static max(){return new Bi(new Ui(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zi="__name__";class Hi{constructor(e,t,n){void 0===t?t=0:t>e.length&&pi(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&pi(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Hi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Hi.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Di(e.length,t.length)}static compareSegments(e,t){const n=Hi.isNumericId(e),r=Hi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Hi.extractNumericId(e).compare(Hi.extractNumericId(t)):Ri(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class Vi extends Hi{construct(e,t,n){return new Vi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new bi(yi.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter((e=>e.length>0)))}return new Vi(e)}static emptyPath(){return new Vi([])}}const Wi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends Hi{construct(e,t,n){return new Gi(e,t,n)}static isValidIdentifier(e){return Wi.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===zi}static keyField(){return new Gi([zi])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new bi(yi.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new bi(yi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new bi(yi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new bi(yi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gi(t)}static emptyPath(){return new Gi([])}}class qi{constructor(e){this.path=e}static fromPath(e){return new qi(Vi.fromString(e))}static fromName(e){return new qi(Vi.fromString(e).popFirst(5))}static empty(){return new qi(Vi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qi(new Vi(e.slice()))}}const Qi=-1;class Ki{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Ki.UNKNOWN_ID=-1;function Yi(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Bi.fromTimestamp(1e9===r?new Ui(n+1,0):new Ui(n,r));return new Zi(s,qi.empty(),t)}function Xi(e){return new Zi(e.readTime,e.key,Qi)}class Zi{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Zi(Bi.min(),qi.empty(),Qi)}static max(){return new Zi(Bi.max(),qi.empty(),Qi)}}function Ji(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=qi.comparator(e.documentKey,t.documentKey),0!==n?n:Di(e.largestBatchId,t.largestBatchId))}const $i="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ea{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ta(e){if(e.code!==yi.FAILED_PRECONDITION||e.message!==$i)throw e;ui("LocalStore","Unexpectedly lost primary lease")}class na{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new na(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof na?t:na.resolve(t)}catch(e){return na.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):na.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):na.reject(t)}static resolve(e){return new na(((t,n)=>{t(e)}))}static reject(e){return new na(((t,n)=>{n(e)}))}static waitFor(e){return new na(((t,n)=>{let r=0,s=0,i=!1;e.forEach((e=>{++r,e.next((()=>{++s,i&&s===r&&t()}),(e=>n(e)))})),i=!0,s===r&&t()}))}static or(e){let t=na.resolve(!1);for(const n of e)t=t.next((e=>e?na.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new na(((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next((e=>{i[l]=e,++a,a===s&&n(i)}),(e=>r(e)))}}))}static doWhile(e,t){return new na(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function ra(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sa(e){return"IndexedDbTransactionError"===e.name}class ia{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ia.le=-1;const aa=-1;function oa(e){return null==e}function la(e){return 0===e&&1/e==-1/0}function ca(e){return"number"==typeof e&&Number.isInteger(e)&&!la(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ua="\x01";function da(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=fa(t)),t=ha(e.get(n),t);return fa(t)}function ha(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case ua:n+="\x01\x11";break;default:n+=t}}return n}function fa(e){return e+ua+"\x01"}const pa="remoteDocuments",ma="owner",ga="mutationQueues",va="mutations";const ya="documentMutations",ba="remoteDocumentsV14",xa="remoteDocumentGlobal",wa="targets",Ea="targetDocuments",Sa="targetGlobal",ka="collectionParents",Ca="clientMetadata",Na="bundles",Aa="namedQueries",_a="indexConfiguration",Ta="indexState",Ia="indexEntries",ja="documentOverlays",Da="globals",Ra=[ga,va,ya,pa,wa,ma,Sa,Ea,Ca,xa,ka,Na,Aa],Pa=[ga,va,ya,ba,wa,ma,Sa,Ea,Ca,xa,ka,Na,Aa,ja],Oa=Pa,Ma=[...Oa,_a,Ta,Ia];function La(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ua(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ba{constructor(e,t){this.comparator=e,this.root=t||Ha.EMPTY}insert(e,t){return new Ba(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ha.BLACK,null,null))}remove(e){return new Ba(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ha.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}}class za{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ha{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Ha.RED,this.left=null!=r?r:Ha.EMPTY,this.right=null!=s?s:Ha.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Ha(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ha.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ha.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ha.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ha.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pi(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pi(27949);return e+(this.isRed()?0:1)}}Ha.EMPTY=null,Ha.RED=!0,Ha.BLACK=!1,Ha.EMPTY=new class{constructor(){this.size=0}get key(){throw pi(57766)}get value(){throw pi(16141)}get color(){throw pi(16727)}get left(){throw pi(29726)}get right(){throw pi(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Ha(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Va{constructor(e){this.comparator=e,this.data=new Ba(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wa(this.data.getIterator())}getIteratorFrom(e){return new Wa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Va))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Va(this.comparator);return t.data=e,t}}class Wa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ga{constructor(e){this.fields=e,e.sort(Gi.comparator)}static empty(){return new Ga([])}unionWith(e){let t=new Va(Gi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ga(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class qa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qa("Invalid base64 string: "+e):e}}(e);return new Qa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Qa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Di(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qa.EMPTY_BYTE_STRING=new Qa("");const Ka=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ya(e){if(gi(!!e,39018),"string"==typeof e){let t=0;const n=Ka.exec(e);if(gi(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xa(e.seconds),nanos:Xa(e.nanos)}}function Xa(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Za(e){return"string"==typeof e?Qa.fromBase64String(e):Qa.fromUint8Array(e)}const Ja="server_timestamp",$a="__type__",eo="__previous_value__",to="__local_write_time__";function no(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[$a])||void 0===n?void 0:n.stringValue)===Ja}function ro(e){const t=e.mapValue.fields[eo];return no(t)?ro(t):t}function so(e){const t=Ya(e.mapValue.fields[to].timestampValue);return new Ui(t.seconds,t.nanos)}class io{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const ao="(default)";class oo{constructor(e,t){this.projectId=e,this.database=t||ao}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===ao}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}const lo="__type__",co="__max__",uo={mapValue:{fields:{__type__:{stringValue:co}}}},ho="__vector__",fo="value";function po(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?no(e)?4:jo(e)?9007199254740991:To(e)?10:11:pi(28295,{value:e})}function mo(e,t){if(e===t)return!0;const n=po(e);if(n!==po(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return so(e).isEqual(so(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ya(e.timestampValue),r=Ya(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Za(e.bytesValue).isEqual(Za(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xa(e.geoPointValue.latitude)===Xa(t.geoPointValue.latitude)&&Xa(e.geoPointValue.longitude)===Xa(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xa(e.integerValue)===Xa(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Xa(e.doubleValue),r=Xa(t.doubleValue);return n===r?la(n)===la(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Mi(e.arrayValue.values||[],t.arrayValue.values||[],mo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(La(n)!==La(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!mo(n[s],r[s])))return!1;return!0}(e,t);default:return pi(52216,{left:e})}}function go(e,t){return void 0!==(e.values||[]).find((e=>mo(e,t)))}function vo(e,t){if(e===t)return 0;const n=po(e),r=po(t);if(n!==r)return Di(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Di(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Xa(e.integerValue||e.doubleValue),r=Xa(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return yo(e.timestampValue,t.timestampValue);case 4:return yo(so(e),so(t));case 5:return Ri(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Za(e),r=Za(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Di(n[s],r[s]);if(0!==e)return e}return Di(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Di(Xa(e.latitude),Xa(t.latitude));return 0!==n?n:Di(Xa(e.longitude),Xa(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return bo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[fo])||void 0===n?void 0:n.arrayValue,c=null===(r=o[fo])||void 0===r?void 0:r.arrayValue,u=Di((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:bo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===uo.mapValue&&t===uo.mapValue)return 0;if(e===uo.mapValue)return 1;if(t===uo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Ri(r[a],i[a]);if(0!==e)return e;const t=vo(n[r[a]],s[i[a]]);if(0!==t)return t}return Di(r.length,i.length)}(e.mapValue,t.mapValue);default:throw pi(23264,{Pe:n})}}function yo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Di(e,t);const n=Ya(e),r=Ya(t),s=Di(n.seconds,r.seconds);return 0!==s?s:Di(n.nanos,r.nanos)}function bo(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=vo(n[s],r[s]);if(e)return e}return Di(n.length,r.length)}function xo(e){return wo(e)}function wo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ya(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Za(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return qi.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=wo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(wo(e.fields[s]));return n+"}"}(e.mapValue):pi(61005,{value:e})}function Eo(e){switch(po(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ro(e);return t?16+Eo(t):16;case 5:return 2*e.stringValue.length;case 6:return Za(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Eo(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Fa(e.fields,((e,n)=>{t+=e.length+Eo(n)})),t}(e.mapValue);default:throw pi(13486,{value:e})}}function So(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ko(e){return!!e&&"integerValue"in e}function Co(e){return!!e&&"arrayValue"in e}function No(e){return!!e&&"nullValue"in e}function Ao(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _o(e){return!!e&&"mapValue"in e}function To(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[lo])||void 0===n?void 0:n.stringValue)===ho}function Io(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fa(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Io(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Io(e.arrayValue.values[n]);return t}return Object.assign({},e)}function jo(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===co}class Do{constructor(e){this.value=e}static empty(){return new Do({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_o(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Io(t)}setAll(e){let t=Gi.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Io(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());_o(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_o(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fa(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Do(Io(this.value))}}function Ro(e){const t=[];return Fa(e.fields,((e,n)=>{const r=new Gi([e]);if(_o(n)){const e=Ro(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ga(t)}class Po{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Po(e,0,Bi.min(),Bi.min(),Bi.min(),Do.empty(),0)}static newFoundDocument(e,t,n,r){return new Po(e,1,t,Bi.min(),n,r,0)}static newNoDocument(e,t){return new Po(e,2,t,Bi.min(),Bi.min(),Do.empty(),0)}static newUnknownDocument(e,t){return new Po(e,3,t,Bi.min(),Bi.min(),Do.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Do.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Do.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Po&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Po(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Oo{constructor(e,t){this.position=e,this.inclusive=t}}function Mo(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?qi.comparator(qi.fromName(a.referenceValue),n.key):vo(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Lo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!mo(e.position[n],t.position[n]))return!1;return!0}class Fo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Uo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Bo{}class zo extends Bo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Yo(e,t,n):"array-contains"===t?new $o(e,n):"in"===t?new el(e,n):"not-in"===t?new tl(e,n):"array-contains-any"===t?new nl(e,n):new zo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Xo(e,n):new Zo(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(vo(t,this.value)):null!==t&&po(this.value)===po(t)&&this.matchesComparison(vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ho extends Bo{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ho(e,t)}matches(e){return Vo(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Vo(e){return"and"===e.op}function Wo(e){return Go(e)&&Vo(e)}function Go(e){for(const t of e.filters)if(t instanceof Ho)return!1;return!0}function qo(e){if(e instanceof zo)return e.field.canonicalString()+e.op.toString()+xo(e.value);if(Wo(e))return e.filters.map((e=>qo(e))).join(",");{const t=e.filters.map((e=>qo(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Qo(e,t){return e instanceof zo?function(e,t){return t instanceof zo&&e.op===t.op&&e.field.isEqual(t.field)&&mo(e.value,t.value)}(e,t):e instanceof Ho?function(e,t){return t instanceof Ho&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Qo(n,t.filters[r])),!0)}(e,t):void pi(19439)}function Ko(e){return e instanceof zo?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xo(e.value))}(e):e instanceof Ho?function(e){return e.op.toString()+" {"+e.getFilters().map(Ko).join(" ,")+"}"}(e):"Filter"}class Yo extends zo{constructor(e,t,n){super(e,t,n),this.key=qi.fromName(n.referenceValue)}matches(e){const t=qi.comparator(e.key,this.key);return this.matchesComparison(t)}}class Xo extends zo{constructor(e,t){super(e,"in",t),this.keys=Jo("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Zo extends zo{constructor(e,t){super(e,"not-in",t),this.keys=Jo("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>qi.fromName(e.referenceValue)))}class $o extends zo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Co(t)&&go(t.arrayValue,this.value)}}class el extends zo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&go(this.value.arrayValue,t)}}class tl extends zo{constructor(e,t){super(e,"not-in",t)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!go(this.value.arrayValue,t)}}class nl extends zo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Co(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>go(this.value.arrayValue,e)))}}class rl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Ie=null}}function sl(e){return new rl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function il(e){const t=vi(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>qo(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),oa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>xo(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>xo(e))).join(",")),t.Ie=e}return t.Ie}function al(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Uo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Qo(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lo(e.startAt,t.startAt)&&Lo(e.endAt,t.endAt)}function ol(e){return qi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ll{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function cl(e,t,n,r,s,i,a,o){return new ll(e,t,n,r,s,i,a,o)}function ul(e){return new ll(e)}function dl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hl(e){return null!==e.collectionGroup}function fl(e){const t=vi(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Va(Gi.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Fo(r,n))})),e.has(Gi.keyField().canonicalString())||t.Ee.push(new Fo(Gi.keyField(),n))}return t.Ee}function pl(e){const t=vi(e);return t.de||(t.de=ml(t,fl(e))),t.de}function ml(e,t){if("F"===e.limitType)return sl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Fo(e.field,t)}));const n=e.endAt?new Oo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Oo(e.startAt.position,e.startAt.inclusive):null;return sl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function gl(e,t){const n=e.filters.concat([t]);return new ll(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function vl(e,t,n){return new ll(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yl(e,t){return al(pl(e),pl(t))&&e.limitType===t.limitType}function bl(e){return"".concat(il(pl(e)),"|lt:").concat(e.limitType)}function xl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Ko(e))).join(", "),"]")),oa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>xo(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>xo(e))).join(",")),"Target(".concat(t,")")}(pl(e)),"; limitType=").concat(e.limitType,")")}function wl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):qi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of fl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Mo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,fl(e),t))&&!(e.endAt&&!function(e,t,n){const r=Mo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,fl(e),t))}(e,t)}function El(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Sl(e){return(t,n)=>{let r=!1;for(const s of fl(e)){const e=kl(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function kl(e,t,n){const r=e.field.isKeyField()?qi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?vo(r,s):pi(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pi(19790,{direction:e.dir})}}class Cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return Ua(this.inner)}size(){return this.innerSize}}const Nl=new Ba(qi.comparator);function Al(){return Nl}const _l=new Ba(qi.comparator);function Tl(){let e=_l;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Il(e){let t=_l;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function jl(){return Rl()}function Dl(){return Rl()}function Rl(){return new Cl((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Pl=new Ba(qi.comparator),Ol=new Va(qi.comparator);function Ml(){let e=Ol;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Ll=new Va(Di);function Fl(){return Ll}function Ul(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:la(t)?"-0":t}}function Bl(e){return{integerValue:""+e}}function zl(e,t){return ca(t)?Bl(t):Ul(e,t)}class Hl{constructor(){this._=void 0}}function Vl(e,t,n){return e instanceof ql?function(e,t){const n={fields:{[$a]:{stringValue:Ja},[to]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&no(t)&&(t=ro(t)),t&&(n.fields[eo]=t),{mapValue:n}}(n,t):e instanceof Ql?Kl(e,t):e instanceof Yl?Xl(e,t):function(e,t){const n=Gl(e,t),r=Jl(n)+Jl(e.Re);return ko(n)&&ko(e.Re)?Bl(r):Ul(e.serializer,r)}(e,t)}function Wl(e,t,n){return e instanceof Ql?Kl(e,t):e instanceof Yl?Xl(e,t):n}function Gl(e,t){return e instanceof Zl?function(e){return ko(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ql extends Hl{}class Ql extends Hl{constructor(e){super(),this.elements=e}}function Kl(e,t){const n=$l(t);for(const r of e.elements)n.some((e=>mo(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Yl extends Hl{constructor(e){super(),this.elements=e}}function Xl(e,t){let n=$l(t);for(const r of e.elements)n=n.filter((e=>!mo(e,r)));return{arrayValue:{values:n}}}class Zl extends Hl{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Jl(e){return Xa(e.integerValue||e.doubleValue)}function $l(e){return Co(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ec{constructor(e,t){this.field=e,this.transform=t}}class tc{constructor(e,t){this.version=e,this.transformResults=t}}class nc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nc}static exists(e){return new nc(void 0,e)}static updateTime(e){return new nc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sc{}function ic(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new mc(e.key,nc.none()):new uc(e.key,e.data,nc.none());{const n=e.data,r=Do.empty();let s=new Va(Gi.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new dc(e.key,r,new Ga(s.toArray()),nc.none())}}function ac(e,t,n){e instanceof uc?function(e,t,n){const r=e.value.clone(),s=fc(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof dc?function(e,t,n){if(!rc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=fc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(hc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function oc(e,t,n,r){return e instanceof uc?function(e,t,n,r){if(!rc(e.precondition,t))return n;const s=e.value.clone(),i=pc(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof dc?function(e,t,n,r){if(!rc(e.precondition,t))return n;const s=pc(e.fieldTransforms,r,t),i=t.data;return i.setAll(hc(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return rc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function lc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Gl(r.transform,e||null);null!=s&&(null===n&&(n=Do.empty()),n.set(r.field,s))}return n||null}function cc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Mi(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ql&&t instanceof Ql||e instanceof Yl&&t instanceof Yl?Mi(e.elements,t.elements,mo):e instanceof Zl&&t instanceof Zl?mo(e.Re,t.Re):e instanceof ql&&t instanceof ql}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class uc extends sc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class dc extends sc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function fc(e,t,n){const r=new Map;gi(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Wl(a,o,n[s]))}return r}function pc(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Vl(e,i,t))}return r}class mc extends sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gc extends sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ac(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=oc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=oc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Dl();return this.mutations.forEach((r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=ic(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Bi.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ml())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,((e,t)=>cc(e,t)))&&Mi(this.baseMutations,e.baseMutations,((e,t)=>cc(e,t)))}}class yc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){gi(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Pl;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new yc(e,t,n,r)}}class bc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class xc{constructor(e,t){this.count=e,this.unchangedNames=t}}var wc,Ec;function Sc(e){switch(e){case yi.OK:return pi(64938);case yi.CANCELLED:case yi.UNKNOWN:case yi.DEADLINE_EXCEEDED:case yi.RESOURCE_EXHAUSTED:case yi.INTERNAL:case yi.UNAVAILABLE:case yi.UNAUTHENTICATED:return!1;case yi.INVALID_ARGUMENT:case yi.NOT_FOUND:case yi.ALREADY_EXISTS:case yi.PERMISSION_DENIED:case yi.FAILED_PRECONDITION:case yi.ABORTED:case yi.OUT_OF_RANGE:case yi.UNIMPLEMENTED:case yi.DATA_LOSS:return!0;default:return pi(15467,{code:e})}}function kc(e){if(void 0===e)return di("GRPC error has no .code"),yi.UNKNOWN;switch(e){case wc.OK:return yi.OK;case wc.CANCELLED:return yi.CANCELLED;case wc.UNKNOWN:return yi.UNKNOWN;case wc.DEADLINE_EXCEEDED:return yi.DEADLINE_EXCEEDED;case wc.RESOURCE_EXHAUSTED:return yi.RESOURCE_EXHAUSTED;case wc.INTERNAL:return yi.INTERNAL;case wc.UNAVAILABLE:return yi.UNAVAILABLE;case wc.UNAUTHENTICATED:return yi.UNAUTHENTICATED;case wc.INVALID_ARGUMENT:return yi.INVALID_ARGUMENT;case wc.NOT_FOUND:return yi.NOT_FOUND;case wc.ALREADY_EXISTS:return yi.ALREADY_EXISTS;case wc.PERMISSION_DENIED:return yi.PERMISSION_DENIED;case wc.FAILED_PRECONDITION:return yi.FAILED_PRECONDITION;case wc.ABORTED:return yi.ABORTED;case wc.OUT_OF_RANGE:return yi.OUT_OF_RANGE;case wc.UNIMPLEMENTED:return yi.UNIMPLEMENTED;case wc.DATA_LOSS:return yi.DATA_LOSS;default:return pi(39323,{code:e})}}(Ec=wc||(wc={}))[Ec.OK=0]="OK",Ec[Ec.CANCELLED=1]="CANCELLED",Ec[Ec.UNKNOWN=2]="UNKNOWN",Ec[Ec.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ec[Ec.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ec[Ec.NOT_FOUND=5]="NOT_FOUND",Ec[Ec.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ec[Ec.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ec[Ec.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ec[Ec.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ec[Ec.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ec[Ec.ABORTED=10]="ABORTED",Ec[Ec.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ec[Ec.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ec[Ec.INTERNAL=13]="INTERNAL",Ec[Ec.UNAVAILABLE=14]="UNAVAILABLE",Ec[Ec.DATA_LOSS=15]="DATA_LOSS";let Cc=null;const Nc=new Ws([4294967295,4294967295],0);function Ac(e){const t=Ii().encode(e),n=new Gs;return n.update(t),new Uint8Array(n.digest())}function _c(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Ws([n,r],0),new Ws([s,i],0)]}class Tc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ic("Invalid padding: ".concat(t));if(n<0)throw new Ic("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Ic("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Ic("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=Ws.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Ws.fromNumber(n)));return 1===r.compare(Nc)&&(r=new Ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Ac(e),[n,r]=_c(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Tc(s,r,t);return n.forEach((e=>i.insert(e))),i}insert(e){if(0===this.pe)return;const t=Ac(e),[n,r]=_c(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jc{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new jc(Bi.min(),r,new Ba(Di),Al(),Ml())}}class Dc{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Dc(n,t,Ml(),Ml(),Ml())}}class Rc{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Pc{constructor(e,t){this.targetId=e,this.Ce=t}}class Oc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qa.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Mc{constructor(){this.Fe=0,this.Me=Uc(),this.xe=Qa.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ml(),t=Ml(),n=Ml();return this.Me.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:pi(38017,{changeType:s})}})),new Dc(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=Uc()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,gi(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Lc{constructor(e){this.ze=e,this.je=new Map,this.He=Al(),this.Je=Fc(),this.Ye=Fc(),this.Ze=new Ba(Di)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:pi(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(ol(s))if(0===n){const e=new qi(s.path);this.tt(t,e,Po.newNoDocument(e,Bi.min()))}else gi(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Cc||Cc.ht(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,s))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Za(n).toUint8Array()}catch(e){if(e instanceof qa)return hi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Tc(i,r,s)}catch(e){return hi(e instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.pe?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const s=this.ze.Pt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const s=this._t(r);if(s){if(n.current&&ol(s.target)){const t=new qi(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Po.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Ml();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new jc(e,t,this.Ze,this.He,n);return this.He=Al(),this.Je=Fc(),this.Ye=Fc(),this.Ze=new Ba(Di),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Mc,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Va(Di),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Va(Di),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||ui("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Mc),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Fc(){return new Ba(qi.comparator)}function Uc(){return new Ba(qi.comparator)}const Bc={asc:"ASCENDING",desc:"DESCENDING"},zc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hc={and:"AND",or:"OR"};class Vc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wc(e,t){return e.useProto3Json||oa(t)?t:{value:t}}function Gc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function qc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Qc(e,t){return Gc(e,t.toTimestamp())}function Kc(e){return gi(!!e,49232),Bi.fromTimestamp(function(e){const t=Ya(e);return new Ui(t.seconds,t.nanos)}(e))}function Yc(e,t){return Xc(e,t).canonicalString()}function Xc(e,t){const n=function(e){return new Vi(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Zc(e){const t=Vi.fromString(e);return gi(vu(t),10190,{key:t.toString()}),t}function Jc(e,t){return Yc(e.databaseId,t.path)}function $c(e,t){const n=Zc(t);if(n.get(1)!==e.databaseId.projectId)throw new bi(yi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bi(yi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new qi(ru(n))}function eu(e,t){return Yc(e.databaseId,t)}function tu(e){const t=Zc(e);return 4===t.length?Vi.emptyPath():ru(t)}function nu(e){return new Vi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ru(e){return gi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function su(e,t,n){return{name:Jc(e,t),fields:n.value.mapValue.fields}}function iu(e,t){let n;if(t instanceof uc)n={update:su(e,t.key,t.value)};else if(t instanceof mc)n={delete:Jc(e,t.key)};else if(t instanceof dc)n={update:su(e,t.key,t.data),updateMask:gu(t.fieldMask)};else{if(!(t instanceof gc))return pi(16599,{ft:t.type});n={verify:Jc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ql)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ql)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Yl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Zl)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw pi(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:pi(27497)}(e,t.precondition)),n}function au(e,t){return{documents:[eu(e,t.path)]}}function ou(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eu(e,s);const i=function(e){if(0!==e.length)return mu(Ho.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:fu(e.field),direction:uu(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Wc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function lu(e){let t=tu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){gi(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=cu(e);return t instanceof Ho&&Wo(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Fo(pu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,oa(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Oo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Oo(n,t)}(n.endAt)),cl(t,s,a,i,o,"F",l,c)}function cu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pu(e.unaryFilter.field);return zo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=pu(e.unaryFilter.field);return zo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pu(e.unaryFilter.field);return zo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=pu(e.unaryFilter.field);return zo.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pi(61313);default:return pi(60726)}}(e):void 0!==e.fieldFilter?function(e){return zo.create(pu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pi(58110);default:return pi(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ho.create(e.compositeFilter.filters.map((e=>cu(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return pi(1026)}}(e.compositeFilter.op))}(e):pi(30097,{filter:e})}function uu(e){return Bc[e]}function du(e){return zc[e]}function hu(e){return Hc[e]}function fu(e){return{fieldPath:e.canonicalString()}}function pu(e){return Gi.fromServerFormat(e.fieldPath)}function mu(e){return e instanceof zo?function(e){if("=="===e.op){if(Ao(e.value))return{unaryFilter:{field:fu(e.field),op:"IS_NAN"}};if(No(e.value))return{unaryFilter:{field:fu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ao(e.value))return{unaryFilter:{field:fu(e.field),op:"IS_NOT_NAN"}};if(No(e.value))return{unaryFilter:{field:fu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fu(e.field),op:du(e.op),value:e.value}}}(e):e instanceof Ho?function(e){const t=e.getFilters().map((e=>mu(e)));return 1===t.length?t[0]:{compositeFilter:{op:hu(e.op),filters:t}}}(e):pi(54877,{filter:e})}function gu(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function vu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class yu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bi.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Bi.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qa.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bu{constructor(e){this.wt=e}}function xu(e){const t=lu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vl(t,t.limit,"L"):t}class wu{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Xa(e.integerValue));else if("doubleValue"in e){const n=Xa(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),la(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Ya(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Za(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?jo(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):To(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):pi(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const s=e.fields||{};this.Mt(t,53);const i=fo,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Xa(a)),this.Nt(i,t),this.Ct(s[i],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),qi.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}wu.Wt=new wu;class Eu{constructor(){this.Cn=new Su}addToCollectionParentIndex(e,t){return this.Cn.add(t),na.resolve()}getCollectionParents(e,t){return na.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return na.resolve()}deleteFieldIndex(e,t){return na.resolve()}deleteAllFieldIndexes(e){return na.resolve()}createTargetIndexes(e,t){return na.resolve()}getDocumentsMatchingTarget(e,t){return na.resolve(null)}getIndexType(e,t){return na.resolve(0)}getFieldIndexes(e,t){return na.resolve([])}getNextCollectionGroupToUpdate(e){return na.resolve(null)}getMinOffset(e,t){return na.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,t){return na.resolve(Zi.min())}updateCollectionGroup(e,t,n){return na.resolve()}updateIndexEntries(e,t){return na.resolve()}}class Su{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Va(Vi.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Va(Vi.comparator)).toArray()}}new Uint8Array(0);const ku={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cu=41943040;class Nu{static withCacheSize(e){return new Nu(e,Nu.DEFAULT_COLLECTION_PERCENTILE,Nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Nu.DEFAULT_COLLECTION_PERCENTILE=10,Nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nu.DEFAULT=new Nu(Cu,Nu.DEFAULT_COLLECTION_PERCENTILE,Nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nu.DISABLED=new Nu(-1,0,0);class Au{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Au(0)}static lr(){return new Au(-1)}}const _u="LruGarbageCollector",Tu=1048576;function Iu(e,t){let[n,r]=e,[s,i]=t;const a=Di(n,s);return 0===a?Di(r,i):a}class ju{constructor(e){this.Er=e,this.buffer=new Va(Iu),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Iu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Du{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){ui(_u,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){sa(e)?ui(_u,"Ignoring IndexedDB error during garbage collection: ",e):await ta(e)}await this.mr(3e5)}))}}class Ru{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return na.resolve(ia.le);const n=new ju(t);return this.gr.forEachTarget(e,(e=>n.Rr(e.sequenceNumber))).next((()=>this.gr.yr(e,(e=>n.Rr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ui("LruGarbageCollector","Garbage collection skipped; disabled"),na.resolve(ku)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ui("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ku):this.wr(e,t)))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ui("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ci()<=H.DEBUG&&ui("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),na.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}function Pu(e,t){return new Ru(e,t)}class Ou{constructor(){this.changes=new Cl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Po.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?na.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Mu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Lu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&oc(n.mutation,e,Ga.empty(),Ui.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ml()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ml();const r=jl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Tl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=jl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ml())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=Al();const i=Rl(),a=Rl();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof dc)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),oc(a.mutation,t,a.mutation.getFieldMask(),Ui.now())):i.set(t.key,Ga.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>i.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Mu(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Rl();let r=new Ba(((e,t)=>e-t)),s=Ml();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Ga.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Ml()).add(e);r=r.insert(s.batchId,o)}))})).next((()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Dl();l.forEach((e=>{if(!s.has(e)){const r=ic(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return na.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return qi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):na.resolve(jl());let a=Qi,o=s;return i.next((t=>na.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?na.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,Ml()))).next((e=>({batchId:a,changes:Il(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qi(t)).next((e=>{let t=Tl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Tl();return this.indexManager.getCollectionParents(e,s).next((a=>na.forEach(a,(a=>{const o=function(e,t){return new ll(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((e=>{s.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Po.newInvalidDocument(r)))}));let n=Tl();return e.forEach(((e,r)=>{const i=s.get(e);void 0!==i&&oc(i.mutation,r,Ga.empty(),Ui.now()),wl(t,r)&&(n=n.insert(e,r))})),n}))}}class Fu{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return na.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Kc(e.createTime)}}(t)),na.resolve()}getNamedQuery(e,t){return na.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:xu(e.bundledQuery),readTime:Kc(e.readTime)}}(t)),na.resolve()}}class Uu{constructor(){this.overlays=new Ba(qi.comparator),this.Qr=new Map}getOverlay(e,t){return na.resolve(this.overlays.get(t))}getOverlays(e,t){const n=jl();return na.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),na.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),na.resolve()}getOverlaysForCollection(e,t,n){const r=jl(),s=t.length+1,i=new qi(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return na.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Ba(((e,t)=>e-t));const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=jl(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=jl(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return na.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new bc(t,n));let s=this.Qr.get(t);void 0===s&&(s=Ml(),this.Qr.set(t,s)),this.Qr.set(t,s.add(n.key))}}class Bu{constructor(){this.sessionToken=Qa.EMPTY_BYTE_STRING}getSessionToken(e){return na.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,na.resolve()}}class zu{constructor(){this.$r=new Va(Hu.Ur),this.Kr=new Va(Hu.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new Hu(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new Hu(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new qi(new Vi([])),n=new Hu(t,e),r=new Hu(t,e+1),s=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),s.push(e.key)})),s}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new qi(new Vi([])),n=new Hu(t,e),r=new Hu(t,e+1);let s=Ml();return this.Kr.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new Hu(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Hu{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return qi.comparator(e.key,t.key)||Di(e.Zr,t.Zr)}static Wr(e,t){return Di(e.Zr,t.Zr)||qi.comparator(e.key,t.key)}}class Vu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Va(Hu.Ur)}checkEmpty(e){return na.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new vc(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Xr=this.Xr.add(new Hu(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return na.resolve(i)}lookupMutationBatch(e,t){return na.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),s=r<0?0:r;return na.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return na.resolve(0===this.mutationQueue.length?aa:this.nr-1)}getAllMutationBatches(e){return na.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Hu(t,0),r=new Hu(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);s.push(t)})),na.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Va(Di);return t.forEach((e=>{const t=new Hu(e,0),r=new Hu(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),na.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;qi.isDocumentKey(s)||(s=s.child(""));const i=new Hu(new qi(s),0);let a=new Va(Di);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Zr)),!0)}),i),na.resolve(this.ni(a))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){gi(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return na.forEach(t.mutations,(r=>{const s=new Hu(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new Hu(t,0),r=this.Xr.firstAfterOrEqual(n);return na.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,na.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Wu{constructor(e){this.ii=e,this.docs=new Ba(qi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return na.resolve(n?n.document.mutableCopy():Po.newInvalidDocument(t))}getEntries(e,t){let n=Al();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Po.newInvalidDocument(e))})),na.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Al();const i=t.path,a=new qi(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Ji(Xi(a),n)<=0||(r.has(a.key)||wl(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return na.resolve(s)}getAllFromCollectionGroup(e,t,n,r){pi(9500)}si(e,t){return na.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Gu(this)}getSize(e){return na.resolve(this.size)}}class Gu extends Ou{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),na.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class qu{constructor(e){this.persistence=e,this.oi=new Cl((e=>il(e)),al),this.lastRemoteSnapshotVersion=Bi.min(),this.highestTargetId=0,this._i=0,this.ai=new zu,this.targetCount=0,this.ui=Au.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),na.resolve()}getLastRemoteSnapshotVersion(e){return na.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return na.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),na.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),na.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Au(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,na.resolve()}updateTargetData(e,t){return this.Tr(t),na.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,na.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.oi.forEach(((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.oi.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),na.waitFor(s).next((()=>r))}getTargetCount(e){return na.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return na.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),na.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),na.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),na.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return na.resolve(n)}containsKey(e,t){return na.resolve(this.ai.containsKey(t))}}class Qu{constructor(e,t){this.ci={},this.overlays={},this.li=new ia(0),this.hi=!1,this.hi=!0,this.Pi=new Bu,this.referenceDelegate=e(this),this.Ti=new qu(this),this.indexManager=new Eu,this.remoteDocumentCache=function(e){return new Wu(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new bu(t),this.Ei=new Fu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new Vu(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){ui("MemoryPersistence","Starting transaction:",e);const r=new Ku(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return na.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class Ku extends ea{constructor(e){super(),this.currentSequenceNumber=e}}class Yu{constructor(e){this.persistence=e,this.Vi=new zu,this.mi=null}static fi(e){return new Yu(e)}get gi(){if(this.mi)return this.mi;throw pi(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),na.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),na.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),na.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return na.forEach(this.gi,(n=>{const r=qi.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,Bi.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return na.or([()=>na.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Xu{constructor(e,t){this.persistence=e,this.yi=new Cl((e=>da(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Pu(this,t)}static fi(e,t){return new Xu(e,t)}di(){}Ai(e){return na.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}br(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}yr(e,t){return na.forEach(this.yi,((n,r)=>this.Dr(e,n,r).next((e=>e?na.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,(r=>this.Dr(e,r,t).next((e=>{e||(n++,s.removeEntry(r,Bi.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),na.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),na.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),na.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),na.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Eo(e.data.value)),t}Dr(e,t,n){return na.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return na.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Zu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Ml(),r=Ml();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Zu(e,t.fromCache,n,r)}}class Ju{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $u{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=k()?8:ra(E())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ws(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.bs(e,t,r,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new Ju;return this.Ss(e,t,n).next((r=>{if(s.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>s.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(ci()<=H.DEBUG&&ui("QueryEngine","SDK will not create cache indexes for query:",xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),na.resolve()):(ci()<=H.DEBUG&&ui("QueryEngine","Query:",xl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(ci()<=H.DEBUG&&ui("QueryEngine","The SDK decides to create cache indexes for query:",xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pl(t))):na.resolve())}ws(e,t){if(dl(t))return na.resolve(null);let n=pl(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=vl(t,null,"F"),n=pl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=Ml(...r);return this.ys.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const i=this.vs(t,r);return this.Cs(t,i,s,n.readTime)?this.ws(e,vl(t,null,"F")):this.Fs(e,i,t,n)}))))})))))}bs(e,t,n,r){return dl(t)||r.isEqual(Bi.min())?na.resolve(null):this.ys.getDocuments(e,n).next((s=>{const i=this.vs(t,s);return this.Cs(t,i,n,r)?na.resolve(null):(ci()<=H.DEBUG&&ui("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xl(t)),this.Fs(e,i,t,Yi(r,Qi)).next((e=>e)))}))}vs(e,t){let n=new Va(Sl(e));return t.forEach(((t,r)=>{wl(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return ci()<=H.DEBUG&&ui("QueryEngine","Using full collection scan to execute query:",xl(t)),this.ys.getDocumentsMatchingQuery(e,t,Zi.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const ed="LocalStore";class td{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Ba(Di),this.Os=new Cl((e=>il(e)),al),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lu(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function nd(e,t,n,r){return new td(e,t,n,r)}async function rd(e,t){const n=vi(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],i=[];let a=Ml();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({ks:e,removedBatchIds:s,addedBatchIds:i})))}))}))}function sd(e){const t=vi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ti.getLastRemoteSnapshotVersion(e)))}function id(e,t,n){let r=Ml(),s=Ml();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Al();return n.forEach(((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Bi.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ui(ed,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),{qs:r,Qs:s}}))}function ad(e,t){const n=vi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=aa),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function od(e,t){const n=vi(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ti.getTargetData(e,t).next((s=>s?(r=s,na.resolve(r)):n.Ti.allocateTargetId(e).next((s=>(r=new yu(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}async function ld(e,t,n){const r=vi(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!sa(e))throw e;ui(ed,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function cd(e,t,n){const r=vi(e);let s=Bi.min(),i=Ml();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=vi(e),s=r.Os.get(n);return void 0!==s?na.resolve(r.xs.get(s)):r.Ti.getTargetData(t,n)}(r,e,pl(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((e=>{i=e}))})).next((()=>r.Ms.getDocumentsMatchingQuery(e,t,n?s:Bi.min(),n?i:Ml()))).next((e=>(ud(r,El(t),e),{documents:e,$s:i})))))}function ud(e,t,n){let r=e.Ns.get(t)||Bi.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}class dd{constructor(){this.activeTargetIds=Fl()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hd{constructor(){this.xo=new dd,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new dd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fd{No(e){}shutdown(){}}const pd="ConnectivityMonitor";class md{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ui(pd,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ui(pd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gd=null;function vd(){return null===gd?gd=268435456+Math.round(2147483648*Math.random()):gd++,"0x"+gd.toString(16)}const yd="RestConnection",bd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xd{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===ao?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,s){const i=vd(),a=this.jo(e,t.toUriEncodedString());ui(yd,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(o,r,s);const{host:l}=new URL(a),c=v(l);return this.Jo(e,a,o,n,c).then((t=>(ui(yd,"Received RPC '".concat(e,"' ").concat(i,": "),t),t)),(t=>{throw hi(yd,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t}))}Yo(e,t,n,r,s,i){return this.zo(e,t,n,r,s)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+oi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=bd[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class wd{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const Ed="WebChannelConnection";class Sd extends xd{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=vd();return new Promise(((s,a)=>{const o=new Ks;o.setWithCredentials(!0),o.listenOnce(Xs.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Zs.NO_ERROR:const t=o.getResponseJson();ui(Ed,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Zs.TIMEOUT:ui(Ed,"RPC '".concat(e,"' ").concat(i," timed out")),a(new bi(yi.DEADLINE_EXCEEDED,"Request time out"));break;case Zs.HTTP_ERROR:const n=o.getStatus();if(ui(Ed,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(yi).indexOf(t)>=0?t:yi.UNKNOWN}(t.status);a(new bi(e,t.message))}else a(new bi(yi.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bi(yi.UNAVAILABLE,"Connection failed."));break;default:pi(9055,{h_:e,streamId:i,P_:o.getLastErrorCode(),T_:o.getLastError()})}}finally{ui(Ed,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);ui(Ed,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)}))}I_(e,t,n){const r=vd(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ti(),a=ei(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");ui(Ed,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.E_(u);let d=!1,h=!1;const f=new wd({Zo:t=>{h?ui(Ed,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ui(Ed,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ui(Ed,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ys.EventType.OPEN,(()=>{h||(ui(Ed,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.__())})),p(u,Ys.EventType.CLOSE,(()=>{h||(h=!0,ui(Ed,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.u_(),this.d_(u))})),p(u,Ys.EventType.ERROR,(t=>{h||(h=!0,hi(Ed,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.u_(new bi(yi.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ys.EventType.MESSAGE,(t=>{var n;if(!h){const s=t.data[0];gi(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){ui(Ed,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=wc[e];if(void 0!==t)return kc(t)}(t),s=a.message;void 0===n&&(n=yi.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.u_(new bi(n,s)),u.close()}else ui(Ed,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.c_(s)}})),p(a,$s.STAT_EVENT,(t=>{t.stat===Js.PROXY?ui(Ed,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Js.NOPROXY&&ui(Ed,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.a_()}),0),f}terminate(){this.l_.forEach((e=>e.close())),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter((t=>t===e))}}function kd(){return"undefined"!=typeof document?document:null}function Cd(e){return new Vc(e,!0)}class Nd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&ui("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.g_=Date.now(),e()))),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}const Ad="PersistentStream";class _d{constructor(e,t,n,r,s,i,a,o){this.xi=e,this.S_=n,this.D_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Nd(e,t)}O_(){return 1===this.state||5===this.state||this.N_()}N_(){return 2===this.state||3===this.state}start(){this.M_=0,4!==this.state?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,(()=>this.q_())))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==e?this.x_.reset():t&&t.code===yi.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===yi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.v_===t&&this.z_(n,r)}),(t=>{e((()=>{const e=new bi(yi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.j_(e)}))}))}z_(e,t){const n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_((()=>{n((()=>this.listener.e_()))})),this.stream.n_((()=>{n((()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,(()=>(this.N_()&&(this.state=3),Promise.resolve()))),this.listener.n_())))})),this.stream.i_((e=>{n((()=>this.j_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.M_?this.J_(e):this.onNext(e)))}))}B_(){this.state=5,this.x_.y_((async()=>{this.state=0,this.start()}))}j_(e){return ui(Ad,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget((()=>this.v_===e?t():(ui(Ad,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Td extends _d{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:pi(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(gi(void 0===t||"string"==typeof t,58123),Qa.fromBase64String(t||"")):(gi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Qa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?yi.UNKNOWN:kc(e.code);return new bi(t,e.message||"")}(a);n=new Oc(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=$c(e,r.document.name),i=Kc(r.document.updateTime),a=r.document.createTime?Kc(r.document.createTime):Bi.min(),o=new Do({mapValue:{fields:r.document.fields}}),l=Po.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Rc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=$c(e,r.document),i=r.readTime?Kc(r.readTime):Bi.min(),a=Po.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Rc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=$c(e,r.document),i=r.removedTargetIds||[];n=new Rc([],i,s,null)}else{if(!("filter"in t))return pi(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new xc(r,s),a=e.targetId;n=new Pc(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Bi.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Bi.min():t.readTime?Kc(t.readTime):Bi.min()}(e);return this.listener.Y_(t,n)}Z_(e){const t={};t.database=nu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ol(r)?{documents:au(e,r)}:{query:ou(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=qc(e,t.resumeToken);const r=Wc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Bi.min())>0){n.readTime=Gc(e,t.snapshotVersion.toTimestamp());const r=Wc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pi(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){const t={};t.database=nu(this.serializer),t.removeTarget=e,this.Q_(t)}}class Id extends _d{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return gi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gi(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}onNext(e){gi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=function(e,t){return e&&e.length>0?(gi(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?Kc(e.updateTime):Kc(t);return n.isEqual(Bi.min())&&(n=Kc(t)),new tc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Kc(e.commitTime);return this.listener.ra(n,t)}ia(){const e={};e.database=nu(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>iu(this.serializer,e)))};this.Q_(t)}}class jd{}class Dd extends jd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new bi(yi.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[i,a]=s;return this.connection.zo(e,Xc(t,n),r,i,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bi(yi.UNKNOWN,e.toString())}))}Yo(e,t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[a,o]=i;return this.connection.Yo(e,Xc(t,n),r,a,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bi(yi.UNKNOWN,e.toString())}))}terminate(){this.sa=!0,this.connection.terminate()}}class Rd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve()))))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(di(t),this.ua=!1):ui("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const Pd="RemoteStore";class Od{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No((e=>{n.enqueueAndForget((async()=>{Wd(this)&&(ui(Pd,"Restarting streams for network reachability change."),await async function(e){const t=vi(e);t.da.add(4),await Ld(t),t.Va.set("Unknown"),t.da.delete(4),await Md(t)}(this))}))})),this.Va=new Rd(n,r)}}async function Md(e){if(Wd(e))for(const t of e.Aa)await t(!0)}async function Ld(e){for(const t of e.Aa)await t(!1)}function Fd(e,t){const n=vi(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Vd(n)?Hd(n):ch(n).N_()&&Bd(n,t))}function Ud(e,t){const n=vi(e),r=ch(n);n.Ea.delete(t),r.N_()&&zd(n,t),0===n.Ea.size&&(r.N_()?r.k_():Wd(n)&&n.Va.set("Unknown"))}function Bd(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ch(e).Z_(t)}function zd(e,t){e.ma.Ke(t),ch(e).X_(t)}function Hd(e){e.ma=new Lc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),ch(e).start(),e.Va.ca()}function Vd(e){return Wd(e)&&!ch(e).O_()&&e.Ea.size>0}function Wd(e){return 0===vi(e).da.size}function Gd(e){e.ma=void 0}async function qd(e){e.Va.set("Online")}async function Qd(e){e.Ea.forEach(((t,n)=>{Bd(e,t)}))}async function Kd(e,t){Gd(e),Vd(e)?(e.Va.Pa(t),Hd(e)):e.Va.set("Unknown")}async function Yd(e,t,n){if(e.Va.set("Online"),t instanceof Oc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ea.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ea.delete(r),e.ma.removeTarget(r))}(e,t)}catch(n){ui(Pd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Xd(e,n)}else if(t instanceof Rc?e.ma.Xe(t):t instanceof Pc?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Bi.min()))try{const t=await sd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ma.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ea.get(r);s&&e.Ea.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Ea.get(t);if(!r)return;e.Ea.set(t,r.withResumeToken(Qa.EMPTY_BYTE_STRING,r.snapshotVersion)),zd(e,t);const s=new yu(r.target,t,n,r.sequenceNumber);Bd(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ui(Pd,"Failed to raise snapshot:",t),await Xd(e,t)}}async function Xd(e,t,n){if(!sa(t))throw t;e.da.add(1),await Ld(e),e.Va.set("Offline"),n||(n=()=>sd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ui(Pd,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Md(e)}))}function Zd(e,t){return t().catch((n=>Xd(e,n,t)))}async function Jd(e){const t=vi(e),n=uh(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:aa;for(;$d(t);)try{const e=await ad(t.localStore,r);if(null===e){0===t.Ia.length&&n.k_();break}r=e.batchId,eh(t,e)}catch(e){await Xd(t,e)}th(t)&&nh(t)}function $d(e){return Wd(e)&&e.Ia.length<10}function eh(e,t){e.Ia.push(t);const n=uh(e);n.N_()&&n.ea&&n.ta(t.mutations)}function th(e){return Wd(e)&&!uh(e).O_()&&e.Ia.length>0}function nh(e){uh(e).start()}async function rh(e){uh(e).ia()}async function sh(e){const t=uh(e);for(const n of e.Ia)t.ta(n.mutations)}async function ih(e,t,n){const r=e.Ia.shift(),s=yc.from(r,t,n);await Zd(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Jd(e)}async function ah(e,t){t&&uh(e).ea&&await async function(e,t){if(function(e){return Sc(e)&&e!==yi.ABORTED}(t.code)){const n=e.Ia.shift();uh(e).L_(),await Zd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Jd(e)}}(e,t),th(e)&&nh(e)}async function oh(e,t){const n=vi(e);n.asyncQueue.verifyOperationInProgress(),ui(Pd,"RemoteStore received new credentials");const r=Wd(n);n.da.add(3),await Ld(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Md(n)}async function lh(e,t){const n=vi(e);t?(n.da.delete(2),await Md(n)):t||(n.da.add(2),await Ld(n),n.Va.set("Unknown"))}function ch(e){return e.fa||(e.fa=function(e,t,n){const r=vi(e);return r.oa(),new Td(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:qd.bind(null,e),n_:Qd.bind(null,e),i_:Kd.bind(null,e),Y_:Yd.bind(null,e)}),e.Aa.push((async t=>{t?(e.fa.L_(),Vd(e)?Hd(e):e.Va.set("Unknown")):(await e.fa.stop(),Gd(e))}))),e.fa}function uh(e){return e.ga||(e.ga=function(e,t,n){const r=vi(e);return r.oa(),new Id(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:rh.bind(null,e),i_:ah.bind(null,e),na:sh.bind(null,e),ra:ih.bind(null,e)}),e.Aa.push((async t=>{t?(e.ga.L_(),await Jd(e)):(await e.ga.stop(),e.Ia.length>0&&(ui(Pd,"Stopping write stream with ".concat(e.Ia.length," pending writes")),e.Ia=[]))}))),e.ga}class dh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new dh(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bi(yi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hh(e,t){if(di("AsyncQueue","".concat(t,": ").concat(e)),sa(e))return new bi(yi.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class fh{static emptySet(e){return new fh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||qi.comparator(t.key,n.key):(e,t)=>qi.comparator(e.key,t.key),this.keyedMap=Tl(),this.sortedSet=new Ba(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new fh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ph{constructor(){this.pa=new Ba(qi.comparator)}track(e){const t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):pi(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal(((t,n)=>{e.push(n)})),e}}class mh{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new mh(e,t,fh.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class gh{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some((e=>e.va()))}}class vh{constructor(){this.queries=yh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=vi(e),r=n.queries;n.queries=yh(),r.forEach(((e,n)=>{for(const r of n.Sa)r.onError(t)}))}(this,new bi(yi.ABORTED,"Firestore shutting down"))}}function yh(){return new Cl((e=>bl(e)),yl)}async function bh(e,t){const n=vi(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new gh,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=hh(e,"Initialization of query '".concat(xl(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&Sh(n)}async function xh(e,t){const n=vi(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wh(e,t){const n=vi(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Ma(s)&&(r=!0);t.ba=s}}r&&Sh(n)}function Eh(e,t,n){const r=vi(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Sh(e){e.Ca.forEach((e=>{e.next()}))}var kh,Ch;(Ch=kh||(kh={})).xa="default",Ch.Cache="cache";class Nh{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new mh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache)return!0;if(!this.va())return!0;const n="Offline"!==t;return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qa(e){e=mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==kh.Cache}}class Ah{constructor(e){this.key=e}}class _h{constructor(e){this.key=e}}class Th{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ml(),this.mutatedKeys=Ml(),this.Za=Sl(e),this.Xa=new fh(this.Za)}get eu(){return this.Ha}tu(e,t){const n=t?t.nu:new ph,r=t?t.Xa:this.Xa;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=wl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ru(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Za(u,o)>0||l&&this.Za(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Xa:i,nu:n,Cs:a,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const i=e.nu.wa();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pi(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Za(e.doc,t.doc))),this.iu(n),r=null!=r&&r;const a=t&&!r?this.su():[],o=0===this.Ya.size&&this.current&&!r?1:0,l=o!==this.Ja;return this.Ja=o,0!==i.length||l?{snapshot:new mh(this.query,e.Xa,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ph,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ml(),this.Xa.forEach((e=>{this._u(e.key)&&(this.Ya=this.Ya.add(e.key))}));const t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new _h(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new Ah(n))})),t}au(e){this.Ha=e.$s,this.Ya=Ml();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return mh.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}const Ih="SyncEngine";class jh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dh{constructor(e){this.key=e,this.cu=!1}}class Rh{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.lu={},this.hu=new Cl((e=>bl(e)),yl),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ba(qi.comparator),this.Eu=new Map,this.du=new zu,this.Au={},this.Ru=new Map,this.Vu=Au.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}async function Ph(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=tf(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await Mh(r,t,n,!0),s}async function Oh(e,t){const n=tf(e);await Mh(n,t,!0,!1)}async function Mh(e,t,n,r){const s=await od(e.localStore,pl(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Lh(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Fd(e.remoteStore,s),o}async function Lh(e,t,n,r,s){e.fu=(t,n,r)=>async function(e,t,n,r){let s=t.view.tu(n);s.Cs&&(s=await cd(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.tu(n,s)})));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Yh(e,t.targetId,o.ou),o.snapshot}(e,t,n,r);const i=await cd(e.localStore,t,!0),a=new Th(t,i.$s),o=a.tu(i.documents),l=Dc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Yh(e,n,c.ou);const u=new jh(t,n,a);return e.hu.set(t,u),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function Fh(e,t,n){const r=vi(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter((e=>!yl(e,t)))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ld(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ud(r.remoteStore,s.targetId),Qh(r,s.targetId)})).catch(ta)):(Qh(r,s.targetId),await ld(r.localStore,s.targetId,!0))}async function Uh(e,t){const n=vi(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ud(n.remoteStore,r.targetId))}async function Bh(e,t){const n=vi(e);try{const e=await function(e,t){const n=vi(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const i=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];t.targetChanges.forEach(((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ti.removeMatchingKeys(e,i.removedDocuments,o).next((()=>n.Ti.addMatchingKeys(e,i.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Qa.EMPTY_BYTE_STRING,Bi.min()).withLastLimboFreeSnapshotVersion(Bi.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Ti.updateTargetData(e,c))}));let o=Al(),l=Ml();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(id(e,i,t.documentUpdates).next((e=>{o=e.qs,l=e.Qs}))),!r.isEqual(Bi.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next((t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return na.waitFor(a).next((()=>i.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.xs=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Eu.get(t);r&&(gi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.cu=!0:e.modifiedDocuments.size>0?gi(r.cu,14607):e.removedDocuments.size>0&&(gi(r.cu,42227),r.cu=!1))})),await Jh(n,e,t)}catch(e){await ta(e)}}function zh(e,t,n){const r=vi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.hu.forEach(((n,r)=>{const s=r.view.Fa(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=vi(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.Sa)s.Fa(t)&&(r=!0)})),r&&Sh(n)}(r.eventManager,t),e.length&&r.lu.Y_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Hh(e,t,n){const r=vi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new Ba(qi.comparator);e=e.insert(i,Po.newNoDocument(i,Bi.min()));const n=Ml().add(i),s=new jc(Bi.min(),new Map,new Ba(Di),e,n);await Bh(r,s),r.Iu=r.Iu.remove(i),r.Eu.delete(t),Zh(r)}else await ld(r.localStore,t,!1).then((()=>Qh(r,t,n))).catch(ta)}async function Vh(e,t){const n=vi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=vi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=na.resolve();return i.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const i=n.docVersions.get(e);gi(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ml();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);qh(n,r,null),Gh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jh(n,e)}catch(e){await ta(e)}}async function Wh(e,t,n){const r=vi(e);try{const e=await function(e,t){const n=vi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(gi(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);qh(r,t,n),Gh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Jh(r,e)}catch(n){await ta(n)}}function Gh(e,t){(e.Ru.get(t)||[]).forEach((e=>{e.resolve()})),e.Ru.delete(t)}function qh(e,t,n){const r=vi(e);let s=r.Au[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Au[r.currentUser.toKey()]=s}}function Qh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach((t=>{e.du.containsKey(t)||Kh(e,t)}))}function Kh(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);null!==n&&(Ud(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),Zh(e))}function Yh(e,t,n){for(const r of n)r instanceof Ah?(e.du.addReference(r.key,t),Xh(e,r)):r instanceof _h?(ui(Ih,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Kh(e,r.key)):pi(19791,{pu:r})}function Xh(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(ui(Ih,"New document in limbo: "+n),e.Tu.add(r),Zh(e))}function Zh(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new qi(Vi.fromString(t)),r=e.Vu.next();e.Eu.set(r,new Dh(n)),e.Iu=e.Iu.insert(n,r),Fd(e.remoteStore,new yu(pl(ul(n.path)),r,"TargetPurposeLimboResolution",ia.le))}}async function Jh(e,t,n){const r=vi(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach(((e,o)=>{a.push(r.fu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Zu.Rs(o.targetId,e);i.push(t)}})))})),await Promise.all(a),r.lu.Y_(s),await async function(e,t){const n=vi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>na.forEach(t,(t=>na.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>na.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!sa(e))throw e;ui(ed,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,s)}}}(r.localStore,i))}async function $h(e,t){const n=vi(e);if(!n.currentUser.isEqual(t)){ui(Ih,"User change. New user:",t.toKey());const e=await rd(n.localStore,t);n.currentUser=t,function(e,t){e.Ru.forEach((e=>{e.forEach((e=>{e.reject(new bi(yi.CANCELLED,t))}))})),e.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Jh(n,e.ks)}}function ef(e,t){const n=vi(e),r=n.Eu.get(t);if(r&&r.cu)return Ml().add(r.key);{let e=Ml();const r=n.Pu.get(t);if(!r)return e;for(const t of r){const r=n.hu.get(t);e=e.unionWith(r.view.eu)}return e}}function tf(e){const t=vi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ef.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hh.bind(null,t),t.lu.Y_=wh.bind(null,t.eventManager),t.lu.gu=Eh.bind(null,t.eventManager),t}function nf(e){const t=vi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wh.bind(null,t),t}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return nd(this.persistence,new $u,e.initialUser,this.serializer)}Su(e){return new Qu(Yu.fi,this.serializer)}bu(e){return new hd}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class sf extends rf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){gi(this.persistence.referenceDelegate instanceof Xu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Du(n,e.asyncQueue,t)}Su(e){const t=void 0!==this.cacheSizeBytes?Nu.withCacheSize(this.cacheSizeBytes):Nu.DEFAULT;return new Qu((e=>Xu.fi(e,t)),this.serializer)}}class af{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>zh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=$h.bind(null,this.syncEngine),await lh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vh}createDatastore(e){const t=Cd(e.databaseInfo.databaseId),n=function(e){return new Sd(e)}(e.databaseInfo);return function(e,t,n,r){return new Dd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Od(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>zh(this.syncEngine,e,0)),md.C()?new md:new fd)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Rh(e,t,n,r,s,i);return a&&(o.mu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=vi(e);ui(Pd,"RemoteStore shutting down."),t.da.add(5),await Ld(t),t.Ra.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}af.provider={build:()=>new af};class of{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const lf="FirestoreClient";class cf{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ai.UNAUTHENTICATED,this.clientId=ji.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async e=>{ui(lf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ui(lf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(ib){const n=hh(ib,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function uf(e,t){e.asyncQueue.verifyOperationInProgress(),ui(lf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await rd(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function df(e,t){e.asyncQueue.verifyOperationInProgress();const n=await hf(e);ui(lf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>oh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>oh(t.remoteStore,n))),e._onlineComponents=t}async function hf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ui(lf,"Using user provided OfflineComponentProvider");try{await uf(e,e._uninitializedComponentsProvider._offline)}catch(ib){const n=ib;if(!function(e){return"FirebaseError"===e.name?e.code===yi.FAILED_PRECONDITION||e.code===yi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;hi("Error using user provided cache. Falling back to memory cache: "+n),await uf(e,new rf)}}else ui(lf,"Using default OfflineComponentProvider"),await uf(e,new sf(void 0));return e._offlineComponents}async function ff(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ui(lf,"Using user provided OnlineComponentProvider"),await df(e,e._uninitializedComponentsProvider._online)):(ui(lf,"Using default OnlineComponentProvider"),await df(e,new af))),e._onlineComponents}function pf(e){return ff(e).then((e=>e.syncEngine))}async function mf(e){const t=await ff(e),n=t.eventManager;return n.onListen=Ph.bind(null,t.syncEngine),n.onUnlisten=Fh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Oh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Uh.bind(null,t.syncEngine),n}function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new xi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const i=new of({next:o=>{i.xu(),t.enqueueAndForget((()=>xh(e,a)));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new bi(yi.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new bi(yi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Nh(ul(n.path),i,{includeMetadataChanges:!0,Qa:!0});return bh(e,a)}(await mf(e),e.asyncQueue,t,n,r))),r.promise}function vf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new xi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const i=new of({next:n=>{i.xu(),t.enqueueAndForget((()=>xh(e,a))),n.fromCache&&"server"===r.source?s.reject(new bi(yi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Nh(n,i,{includeMetadataChanges:!0,Qa:!0});return bh(e,a)}(await mf(e),e.asyncQueue,t,n,r))),r.promise}function yf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const bf=new Map;function xf(e,t,n){if(!n)throw new bi(yi.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wf(e){if(!qi.isDocumentKey(e))throw new bi(yi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ef(e){if(qi.isDocumentKey(e))throw new bi(yi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":pi(12329,{type:typeof e})}function kf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bi(yi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(e);throw new bi(yi.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Cf(e,t){if(t<=0)throw new bi(yi.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const Nf="firestore.googleapis.com",Af=!0;class _f{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new bi(yi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nf,this.ssl=Af}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Af;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Cu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Tu)throw new bi(yi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new bi(yi.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new bi(yi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new bi(yi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new bi(yi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _f({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bi(yi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bi(yi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _f(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ei;switch(e.type){case"firstParty":return new Ni(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new bi(yi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bf.get(e);t&&(ui("ComponentProvider","Removing Datastore"),bf.delete(e),t.terminate())}(this),Promise.resolve()}}function If(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=kf(e,Tf);const i=v(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);i&&(y("https://".concat(c)),w("Firestore",!0)),a.host!==Nf&&a.host!==c&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!T(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ai.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new bi(yi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ai(i)}e._authCredentials=new Si(new wi(t,n))}}class jf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jf(this.firestore,e,this._query)}}class Df{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Df(this.firestore,e,this._key)}}class Rf extends jf{constructor(e,t,n){super(e,t,ul(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Df(this.firestore,null,new qi(e))}withConverter(e){return new Rf(this.firestore,e,this._path)}}function Pf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=M(e),xf("collection","path",t),e instanceof Tf){const n=Vi.fromString(t,...r);return Ef(n),new Rf(e,null,n)}{if(!(e instanceof Df||e instanceof Rf))throw new bi(yi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Vi.fromString(t,...r));return Ef(n),new Rf(e.firestore,null,n)}}function Of(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=M(e),1===arguments.length&&(t=ji.newId()),xf("doc","path",t),e instanceof Tf){const n=Vi.fromString(t,...r);return wf(n),new Df(e,null,new qi(n))}{if(!(e instanceof Df||e instanceof Rf))throw new bi(yi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Vi.fromString(t,...r));return wf(n),new Df(e.firestore,e instanceof Rf?e.converter:null,new qi(n))}}const Mf="AsyncQueue";class Lf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Nd(this,"async_queue_retry"),this.rc=()=>{const e=kd();e&&ui(Mf,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;const t=kd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=kd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise((()=>{}));const t=new xi;return this._c((()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ju.push(e),this.ac())))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(cb){if(!sa(cb))throw cb;ui(Mf,"Operation failed with retryable error: "+cb)}this.Ju.length>0&&this.x_.y_((()=>this.ac()))}}_c(e){const t=this.sc.then((()=>(this.ec=!0,e().catch((e=>{throw this.Xu=e,this.ec=!1,di("INTERNAL UNHANDLED ERROR: ",Ff(e)),e})).then((e=>(this.ec=!1,e))))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const r=dh.createAndSchedule(this,e,t,n,(e=>this.uc(e)));return this.Zu.push(r),r}oc(){this.Xu&&pi(47125,{cc:Ff(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do{e=this.sc,await e}while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then((()=>{this.Zu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Zu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()}))}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function Ff(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Uf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Bf extends Tf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Lf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lf(e),this._firestoreClient=void 0,await e}}}function zf(e){if(e._terminated)throw new bi(yi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Hf(e),e._firestoreClient}function Hf(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new io(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,yf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new cf(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Vf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vf(Qa.fromBase64String(e))}catch(e){throw new bi(yi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Vf(Qa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new bi(yi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gf{constructor(e){this._methodName=e}}class qf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bi(yi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bi(yi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Di(this._lat,e._lat)||Di(this._long,e._long)}}class Qf{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Kf=/^__.*__$/;class Yf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new uc(e,this.data,t,this.fieldTransforms)}}class Xf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pi(40011,{Ic:e})}}class Jf{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return pp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(Zf(this.Ic)&&Kf.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class $f{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Cd(e)}bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Jf({Ic:e,methodName:t,wc:n,path:Gi.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ep(e){const t=e._freezeSettings(),n=Cd(e._databaseId);return new $f(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tp(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.bc(i.merge||i.mergeFields?2:0,t,n,s);up("Data must be an object, but it was:",a,r);const o=lp(r,a);let l,c;if(i.merge)l=new Ga(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=dp(t,r,n);if(!a.contains(s))throw new bi(yi.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));mp(e,s)||e.push(s)}l=new Ga(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Yf(new Do(o),l,c)}class np extends Gf{_toFieldTransform(e){if(2!==e.Ic)throw 1===e.Ic?e.gc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof np}}class rp extends Gf{_toFieldTransform(e){return new ec(e.path,new ql)}isEqual(e){return e instanceof rp}}function sp(e,t,n,r){const s=e.bc(1,t,n);up("Data must be an object, but it was:",s,r);const i=[],a=Do.empty();Fa(r,((e,r)=>{const o=fp(t,e,n);r=M(r);const l=s.mc(o);if(r instanceof np)i.push(o);else{const e=op(r,l);null!=e&&(i.push(o),a.set(o,e))}}));const o=new Ga(i);return new Xf(a,o,s.fieldTransforms)}function ip(e,t,n,r,s,i){const a=e.bc(1,t,n),o=[dp(t,r,n)],l=[s];if(i.length%2!=0)throw new bi(yi.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(dp(t,i[h])),l.push(i[h+1]);const c=[],u=Do.empty();for(let h=o.length-1;h>=0;--h)if(!mp(c,o[h])){const e=o[h];let t=l[h];t=M(t);const n=a.mc(e);if(t instanceof np)c.push(e);else{const r=op(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Ga(c);return new Xf(u,d,a.fieldTransforms)}function ap(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return op(n,e.bc(r?4:3,t))}function op(e,t){if(cp(e=M(e)))return up("Unsupported field value:",t,e),lp(e,t);if(e instanceof Gf)return function(e,t){if(!Zf(t.Ic))throw t.gc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=op(s,t.fc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=M(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return zl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ui.fromDate(e);return{timestampValue:Gc(t.serializer,n)}}if(e instanceof Ui){const n=new Ui(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Gc(t.serializer,n)}}if(e instanceof qf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Vf)return{bytesValue:qc(t.serializer,e._byteString)};if(e instanceof Df){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.gc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Yc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Qf)return function(e,t){return{mapValue:{fields:{[lo]:{stringValue:ho},[fo]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return Ul(t.serializer,e)}))}}}}}}(e,t);throw t.gc("Unsupported field value: ".concat(Sf(e)))}(e,t)}function lp(e,t){const n={};return Ua(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fa(e,((e,r)=>{const s=op(r,t.Ac(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function cp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ui||e instanceof qf||e instanceof Vf||e instanceof Df||e instanceof Gf||e instanceof Qf)}function up(e,t,n){if(!cp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Sf(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function dp(e,t,n){if((t=M(t))instanceof Wf)return t._internalPath;if("string"==typeof t)return fp(e,t);throw pp("Field path arguments must be of type string or ",e,!1,void 0,n)}const hp=new RegExp("[~\\*/\\[\\]]");function fp(e,t,n){if(t.search(hp)>=0)throw pp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Wf(...t.split("."))._internalPath}catch(ab){throw pp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function pp(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new bi(yi.INVALID_ARGUMENT,o+e+l)}function mp(e,t){return e.some((e=>e.isEqual(t)))}class gp{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Df(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vp extends gp{data(){return super.data()}}function yp(e,t){return"string"==typeof t?fp(e,t):t instanceof Wf?t._internalPath:t._delegate._internalPath}function bp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bi(yi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xp{}class wp extends xp{}function Ep(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof xp&&n.push(t),n=n.concat(s),function(e){const t=e.filter((e=>e instanceof Cp)).length,n=e.filter((e=>e instanceof Sp)).length;if(t>1||t>0&&n>0)throw new bi(yi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Sp extends wp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Sp(e,t,n)}_apply(e){const t=this._parse(e);return jp(e._query,t),new jf(e.firestore,e.converter,gl(e._query,t))}_parse(e){const t=ep(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new bi(yi.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Ip(a,i);const t=[];for(const n of a)t.push(Tp(r,e,n));o={arrayValue:{values:t}}}else o=Tp(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Ip(a,i),o=ap(n,t,a,"in"===i||"not-in"===i);return zo.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function kp(e,t,n){const r=t,s=yp("where",e);return Sp._create(s,r,n)}class Cp extends xp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cp(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ho.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)jp(n,s),n=gl(n,s)}(e._query,t),new jf(e.firestore,e.converter,gl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Np extends wp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Np(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new bi(yi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bi(yi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fo(t,n)}(e._query,this._field,this._direction);return new jf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ll(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ap(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yp("orderBy",e);return Np._create(n,t)}class _p extends wp{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new _p(e,t,n)}_apply(e){return new jf(e.firestore,e.converter,vl(e._query,this._limit,this._limitType))}}function Tp(e,t,n){if("string"==typeof(n=M(n))){if(""===n)throw new bi(yi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hl(t)&&-1!==n.indexOf("/"))throw new bi(yi.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Vi.fromString(n));if(!qi.isDocumentKey(r))throw new bi(yi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return So(e,new qi(r))}if(n instanceof Df)return So(e,n._key);throw new bi(yi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Sf(n),"."))}function Ip(e,t){if(!Array.isArray(e)||0===e.length)throw new bi(yi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function jp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new bi(yi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bi(yi.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Dp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pi(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Fa(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[fo].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Xa(e.doubleValue)));return new Qf(s)}convertGeoPoint(e){return new qf(Xa(e.latitude),Xa(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ro(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const t=Ya(e);return new Ui(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Vi.fromString(e);gi(vu(n),9688,{name:e});const r=new oo(n.get(1),n.get(3)),s=new qi(n.popFirst(5));return r.isEqual(t)||di("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Rp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Op extends gp{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Mp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(yp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Mp extends Op{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Lp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Mp(this._firestore,this._userDataWriter,n.key,n,new Pp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new bi(yi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Mp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Pp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Mp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Fp(t.type),doc:r,oldIndex:s,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Fp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pi(61501,{type:e})}}function Up(e){e=kf(e,Df);const t=kf(e.firestore,Bf);return gf(zf(t),e._key).then((n=>Kp(t,e,n)))}class Bp extends Dp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Df(this.firestore,null,t)}}function zp(e){e=kf(e,jf);const t=kf(e.firestore,Bf),n=zf(t),r=new Bp(t);return bp(e._query),vf(n,e._query).then((n=>new Lp(t,r,e,n)))}function Hp(e,t,n){e=kf(e,Df);const r=kf(e.firestore,Bf),s=Rp(e.converter,t,n);return Qp(r,[tp(ep(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,nc.none())])}function Vp(e,t,n){e=kf(e,Df);const r=kf(e.firestore,Bf),s=ep(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=M(t))||t instanceof Wf?ip(s,"updateDoc",e._key,t,n,o):sp(s,"updateDoc",e._key,t),Qp(r,[i.toMutation(e._key,nc.exists(!0))])}function Wp(e){return Qp(kf(e.firestore,Bf),[new mc(e._key,nc.none())])}function Gp(e,t){const n=kf(e.firestore,Bf),r=Of(e),s=Rp(e.converter,t);return Qp(n,[tp(ep(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,nc.exists(!1))]).then((()=>r))}function qp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=M(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Uf(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Uf(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof Df)d=kf(e.firestore,Bf),h=ul(e._key.path),u={next:t=>{n[l]&&n[l](Kp(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=kf(e,jf);d=kf(t.firestore,Bf),h=t._query;const r=new Bp(d);u={next:e=>{n[l]&&n[l](new Lp(d,r,t,e))},error:n[l+1],complete:n[l+2]},bp(e._query)}return function(e,t,n,r){const s=new of(r),i=new Nh(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>bh(await mf(e),i))),()=>{s.xu(),e.asyncQueue.enqueueAndForget((async()=>xh(await mf(e),i)))}}(zf(d),h,c,u)}function Qp(e,t){return function(e,t){const n=new xi;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=nf(e);try{const e=await function(e,t){const n=vi(e),r=Ui.now(),s=t.reduce(((e,t)=>e.add(t.key)),Ml());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Al(),l=Ml();return n.Bs.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{i=s;const a=[];for(const e of t){const t=lc(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new dc(e.key,t,Ro(t.value.mapValue),nc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Il(i)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Au[e.currentUser.toKey()];r||(r=new Ba(Di)),r=r.insert(t,n),e.Au[e.currentUser.toKey()]=r}(r,e.batchId,n),await Jh(r,e.changes),await Jd(r.remoteStore)}catch(e){const t=hh(e,"Failed to persist write");n.reject(t)}}(await pf(e),t,n))),n.promise}(zf(e),t)}function Kp(e,t,n){const r=n.docs.get(t._key),s=new Bp(e);return new Op(e,s,t._key,r,new Pp(n.hasPendingWrites,n.fromCache),t.converter)}class Yp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ep(e)}set(e,t,n){this._verifyNotCommitted();const r=Xp(e,this._firestore),s=Rp(r.converter,t,n),i=tp(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,nc.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Xp(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=M(t))||t instanceof Wf?ip(this._dataReader,"WriteBatch.update",r._key,t,n,a):sp(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,nc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xp(e,this._firestore);return this._mutations=this._mutations.concat(new mc(t._key,nc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bi(yi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xp(e,t){if((e=M(e)).firestore!==t)throw new bi(yi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Zp(){return new rp("serverTimestamp")}function Jp(e){return zf(e=kf(e,Bf)),new Yp(e,(t=>Qp(e,t)))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){oi=e}(nt),Ze(new L("firestore",((e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Bf(new ki(e.getProvider("auth-internal")),new _i(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bi(yi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),it(si,ii,e),it(si,ii,"esm2017")}();const $p="functions";class em{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,$e(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then((e=>this.auth=e),(()=>{})),this.messaging||n.get().then((e=>this.messaging=e),(()=>{})),this.appCheck||null===r||void 0===r||r.get().then((e=>this.appCheck=e),(()=>{}))}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(cb){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(cb){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const tm="us-central1";class nm{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tm,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new em(e,t,n,r),this.cancelAllRequests=new Promise((e=>{this.deleteService=()=>Promise.resolve(e())}));try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=tm}catch(cb){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}const rm="@firebase/functions",sm="0.12.8";!function(e){Ze(new L($p,((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new nm(r,s,i,a,n)}),"PUBLIC").setMultipleInstances(!0)),it(rm,sm,e),it(rm,sm,"esm2017")}();const im={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production",REACT_APP_API_URL:"https://your-api-domain.com",REACT_APP_FIREBASE_PROJECT_ID:"lifecoach-ai-c862c",REACT_APP_FIREBASE_API_KEY:"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",REACT_APP_FIREBASE_AUTH_DOMAIN:"lifecoach-ai-c862c.firebaseapp.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"lifecoach-ai-c862c.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1073742422983",REACT_APP_FIREBASE_APP_ID:"1:1073742422983:web:83ade2a0d12c332874efe2",REACT_APP_OPENAI_API_KEY:"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",REACT_APP_N8N_WEBHOOK_URL:"https://hook.us1.make.com/iei6j5s5a34rqkrkcdematixarkgc38h",REACT_APP_N8N_WEBHOOK_SECRET:"my-secret-key-2024",REACT_APP_FROM_EMAIL:"smkaufman@gmail.com"}.VITE_FIREBASE_API_KEY||"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production",REACT_APP_API_URL:"https://your-api-domain.com",REACT_APP_FIREBASE_PROJECT_ID:"lifecoach-ai-c862c",REACT_APP_FIREBASE_API_KEY:"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",REACT_APP_FIREBASE_AUTH_DOMAIN:"lifecoach-ai-c862c.firebaseapp.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"lifecoach-ai-c862c.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1073742422983",REACT_APP_FIREBASE_APP_ID:"1:1073742422983:web:83ade2a0d12c332874efe2",REACT_APP_OPENAI_API_KEY:"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",REACT_APP_N8N_WEBHOOK_URL:"https://hook.us1.make.com/iei6j5s5a34rqkrkcdematixarkgc38h",REACT_APP_N8N_WEBHOOK_SECRET:"my-secret-key-2024",REACT_APP_FROM_EMAIL:"smkaufman@gmail.com"}.VITE_FIREBASE_AUTH_DOMAIN||"lifecoach-ai-c862c.firebaseapp.com",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production",REACT_APP_API_URL:"https://your-api-domain.com",REACT_APP_FIREBASE_PROJECT_ID:"lifecoach-ai-c862c",REACT_APP_FIREBASE_API_KEY:"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",REACT_APP_FIREBASE_AUTH_DOMAIN:"lifecoach-ai-c862c.firebaseapp.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"lifecoach-ai-c862c.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1073742422983",REACT_APP_FIREBASE_APP_ID:"1:1073742422983:web:83ade2a0d12c332874efe2",REACT_APP_OPENAI_API_KEY:"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",REACT_APP_N8N_WEBHOOK_URL:"https://hook.us1.make.com/iei6j5s5a34rqkrkcdematixarkgc38h",REACT_APP_N8N_WEBHOOK_SECRET:"my-secret-key-2024",REACT_APP_FROM_EMAIL:"smkaufman@gmail.com"}.VITE_FIREBASE_PROJECT_ID||"lifecoach-ai-c862c",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production",REACT_APP_API_URL:"https://your-api-domain.com",REACT_APP_FIREBASE_PROJECT_ID:"lifecoach-ai-c862c",REACT_APP_FIREBASE_API_KEY:"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",REACT_APP_FIREBASE_AUTH_DOMAIN:"lifecoach-ai-c862c.firebaseapp.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"lifecoach-ai-c862c.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1073742422983",REACT_APP_FIREBASE_APP_ID:"1:1073742422983:web:83ade2a0d12c332874efe2",REACT_APP_OPENAI_API_KEY:"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",REACT_APP_N8N_WEBHOOK_URL:"https://hook.us1.make.com/iei6j5s5a34rqkrkcdematixarkgc38h",REACT_APP_N8N_WEBHOOK_SECRET:"my-secret-key-2024",REACT_APP_FROM_EMAIL:"smkaufman@gmail.com"}.VITE_FIREBASE_STORAGE_BUCKET||"lifecoach-ai-c862c.firebasestorage.app",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production",REACT_APP_API_URL:"https://your-api-domain.com",REACT_APP_FIREBASE_PROJECT_ID:"lifecoach-ai-c862c",REACT_APP_FIREBASE_API_KEY:"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",REACT_APP_FIREBASE_AUTH_DOMAIN:"lifecoach-ai-c862c.firebaseapp.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"lifecoach-ai-c862c.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1073742422983",REACT_APP_FIREBASE_APP_ID:"1:1073742422983:web:83ade2a0d12c332874efe2",REACT_APP_OPENAI_API_KEY:"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",REACT_APP_N8N_WEBHOOK_URL:"https://hook.us1.make.com/iei6j5s5a34rqkrkcdematixarkgc38h",REACT_APP_N8N_WEBHOOK_SECRET:"my-secret-key-2024",REACT_APP_FROM_EMAIL:"smkaufman@gmail.com"}.VITE_FIREBASE_MESSAGING_SENDER_ID||"1073742422983",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production",REACT_APP_API_URL:"https://your-api-domain.com",REACT_APP_FIREBASE_PROJECT_ID:"lifecoach-ai-c862c",REACT_APP_FIREBASE_API_KEY:"AIzaSyDUUUd2fBZfFMMbNToVzjWEgeEH59Leze0",REACT_APP_FIREBASE_AUTH_DOMAIN:"lifecoach-ai-c862c.firebaseapp.com",REACT_APP_FIREBASE_STORAGE_BUCKET:"lifecoach-ai-c862c.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1073742422983",REACT_APP_FIREBASE_APP_ID:"1:1073742422983:web:83ade2a0d12c332874efe2",REACT_APP_OPENAI_API_KEY:"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",REACT_APP_N8N_WEBHOOK_URL:"https://hook.us1.make.com/iei6j5s5a34rqkrkcdematixarkgc38h",REACT_APP_N8N_WEBHOOK_SECRET:"my-secret-key-2024",REACT_APP_FROM_EMAIL:"smkaufman@gmail.com"}.VITE_FIREBASE_APP_ID||"1:1073742422983:web:83ade2a0d12c332874efe2"};let am=null,om=null,lm=null,cm=null;try{am=rt(im),om=function(e,t){const n="object"==typeof e?e:st(),r="string"==typeof e?e:t||ao,s=Je(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=f("firestore");e&&If(s,...e)}return s}(am),lm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();const t=Je(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Je(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(T(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Et(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ls,persistence:[Qr,Ar,Dr]}),r=m("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>zs)return;const r=null===t||void 0===t?void 0:t.token;Hs!==r&&(Hs=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){M(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){M(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var s;const i=h("auth");return i&&Gn(n,"http://".concat(i)),n}(am),cm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tm;const n=Je(M(e),$p).getImmediate({identifier:t}),r=f("functions");return r&&function(e,t,n){!function(e,t,n){const r=v(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&(y(e.emulatorOrigin),w("Functions",!0))}(M(e),t,n)}(n,...r),n}(am),console.log("\ud83d\udd25 Firebase initialized with real credentials")}catch(pD){console.warn("Firebase initialization failed:",pD),console.log("\ud83c\udfad Running in offline demo mode")}function um(){const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!lm)return console.log("\ud83c\udfad No Firebase credentials found, enabling demo mode"),s(!1),void t(null);return Er(lm,(e=>{var n;e?t({id:e.uid,email:e.email||"",name:e.displayName||(null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||"User",photoURL:e.photoURL||void 0}):t(null);s(!1)}))}),[]);return{user:e,loading:n,error:i,signInWithEmail:async(e,t)=>{if(!lm)return a("Firebase not configured. Please use demo mode."),null;try{s(!0),a(null);const n=await function(e,t,n){return $e(e.app)?Promise.reject(Ct(e)):br(M(e),sr.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t}))}(lm,e,t);return n.user}catch(i){throw a(i.message),i}finally{s(!1)}},signUpWithEmail:async(e,t,n)=>{if(!lm)return a("Firebase not configured. Please use demo mode."),null;try{s(!0),a(null);const r=await async function(e,t,n){if($e(e.app))return Promise.reject(Ct(e));const r=Rn(e),s=Vn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dr,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t})),a=await hr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(lm,e,t);return n&&r.user&&await wr(r.user,{displayName:n}),r.user}catch(i){throw a(i.message),i}finally{s(!1)}},signInWithGoogle:async()=>{if(!lm)return a("Firebase not configured. Please use demo mode."),null;try{s(!0),a(null);const e=new lr,t=await async function(e,t,n){if($e(e.app))return Promise.reject(St(e,"operation-not-supported-in-this-environment"));const r=Rn(e);Nt(e,t,ir);const s=$r(r,n);return new as(r,"signInViaPopup",t,s).executeNotNull()}(lm,e);return t.user}catch(i){throw a(i.message),i}finally{s(!1)}},signOut:async()=>{try{a(null),await function(e){return M(e).signOut()}(lm)}catch(i){throw a(i.message),i}}}}function dm(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}n(358);const hm=["sri"],fm=["page"],pm=["page","matches"],mm=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gm=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vm=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var ym="popstate";function bm(){return Nm((function(e,t){let{pathname:n,search:r,hash:s}=e.location;return Sm("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:km(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function xm(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function wm(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(cb){}}}function Em(e,t){return{usr:e.state,key:e.key,idx:t}}function Sm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return J(J({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Cm(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function km(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Cm(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Nm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o="POP",l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e){return Am(e)}null==c&&(c=0,a.replaceState(J(J({},a.state),{},{idx:c}),""));let f={get action(){return o},get location(){return e(s,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ym,d),l=e,()=>{s.removeEventListener(ym,d),l=null}},createHref:e=>t(s,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=Sm(f.location,e,t);n&&n(r,e),c=u()+1;let d=Em(r,c),h=f.createHref(r);try{a.pushState(d,"",h)}catch(pD){if(pD instanceof DOMException&&"DataCloneError"===pD.name)throw pD;s.location.assign(h)}i&&l&&l({action:o,location:f.location,delta:1})},replace:function(e,t){o="REPLACE";let r=Sm(f.location,e,t);n&&n(r,e),c=u();let s=Em(r,c),d=f.createHref(r);a.replaceState(s,"",d),i&&l&&l({action:o,location:f.location,delta:0})},go:e=>a.go(e)};return f}function Am(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),xm(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:km(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function _m(e,t){return Tm(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function Tm(e,t,n,r){let s=Wm(("string"===typeof t?Cm(t):t).pathname||"/",n);if(null==s)return null;let i=Im(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=Vm(s);a=Bm(i[o],e,r)}return a}function Im(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(xm(a.relativePath.startsWith(r),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(r.length));let o=Ym([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(xm(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),Im(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Um(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of jm(e.path))s(e,t,r);else s(e,t)})),t}function jm(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=jm(r.join("/")),o=[];return o.push(...a.map((e=>""===e?i:[i,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var Dm=/^:[\w-]+$/,Rm=3,Pm=2,Om=1,Mm=10,Lm=-2,Fm=e=>"*"===e;function Um(e,t){let n=e.split("/"),r=n.length;return n.some(Fm)&&(r+=Lm),t&&(r+=Pm),n.filter((e=>!Fm(e))).reduce(((e,t)=>e+(Dm.test(t)?Rm:""===t?Om:Mm)),r)}function Bm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=zm({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=zm({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:Ym([i,u.pathname]),pathnameBase:Xm(Ym([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=Ym([i,u.pathnameBase]))}return a}function zm(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Hm(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function Hm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];wm("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Vm(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(pD){return wm(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(pD,").")),e}}function Wm(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Gm(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function qm(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Qm(e){let t=qm(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function Km(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=Cm(e):(r=J({},e),xm(!r.pathname||!r.pathname.includes("?"),Gm("?","pathname","search",r)),xm(!r.pathname||!r.pathname.includes("#"),Gm("#","pathname","hash",r)),xm(!r.search||!r.search.includes("#"),Gm("#","search","hash",r)));let i,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)i=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:s=""}="string"===typeof e?Cm(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:Zm(r),hash:Jm(s)}}(r,i),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Ym=e=>e.join("/").replace(/\/\/+/g,"/"),Xm=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zm=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Jm=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $m(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var eg=["POST","PUT","PATCH","DELETE"],tg=(new Set(eg),["GET",...eg]);new Set(tg),Symbol("ResetLoaderData");var ng=r.createContext(null);ng.displayName="DataRouter";var rg=r.createContext(null);rg.displayName="DataRouterState";var sg=r.createContext({isTransitioning:!1});sg.displayName="ViewTransition";var ig=r.createContext(new Map);ig.displayName="Fetchers";var ag=r.createContext(null);ag.displayName="Await";var og=r.createContext(null);og.displayName="Navigation";var lg=r.createContext(null);lg.displayName="Location";var cg=r.createContext({outlet:null,matches:[],isDataRoute:!1});cg.displayName="Route";var ug=r.createContext(null);ug.displayName="RouteError";function dg(){return null!=r.useContext(lg)}function hg(){return xm(dg(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(lg).location}var fg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pg(e){r.useContext(og).static||r.useLayoutEffect(e)}function mg(){let{isDataRoute:e}=r.useContext(cg);return e?function(){let{router:e}=kg("useNavigate"),t=Ng("useNavigate"),n=r.useRef(!1);pg((()=>{n.current=!0}));let s=r.useCallback((async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wm(n.current,fg),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,J({fromRouteId:t},s)))}),[e,t]);return s}():function(){xm(dg(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(ng),{basename:t,navigator:n}=r.useContext(og),{matches:s}=r.useContext(cg),{pathname:i}=hg(),a=JSON.stringify(Qm(s)),o=r.useRef(!1);pg((()=>{o.current=!0}));let l=r.useCallback((function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(wm(o.current,fg),!o.current)return;if("number"===typeof r)return void n.go(r);let l=Km(r,JSON.parse(a),i,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Ym([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)}),[t,n,a,i,e]);return l}()}r.createContext(null);function gg(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(cg),{pathname:s}=hg(),i=JSON.stringify(Qm(n));return r.useMemo((()=>Km(e,JSON.parse(i),s,"path"===t)),[e,i,s,t])}function vg(e,t,n,s){xm(dg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=r.useContext(og),{matches:a}=r.useContext(cg),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let e=d&&d.path||"";Tg(c,!d||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(c,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,f=hg();if(t){var p;let e="string"===typeof t?Cm(t):t;xm("/"===u||(null===(p=e.pathname)||void 0===p?void 0:p.startsWith(u)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(u,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=f;let m=h.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=_m(e,{pathname:g});wm(d||null!=v,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),wm(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let y=Eg(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Ym([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Ym([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,s);return t&&y?r.createElement(lg.Provider,{value:{location:J({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},y):y}function yg(){let e=Ag(),t=$m(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,o)}var bg=r.createElement(yg,null),xg=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(cg.Provider,{value:this.props.routeContext},r.createElement(ug.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wg(e){let{routeContext:t,match:n,children:s}=e,i=r.useContext(ng);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(cg.Provider,{value:t},s)}function Eg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=s.findIndex((e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id])));xm(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,o=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight(((e,l,c)=>{let u,d=!1,h=null,f=null;n&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||bg,a&&(o<0&&0===c?(Tg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=l.route.hydrateFallbackElement||null)));let p=t.concat(s.slice(0,c+1)),m=()=>{let t;return t=u?h:d?f:l.route.Component?r.createElement(l.route.Component,null):l.route.element?l.route.element:e,r.createElement(wg,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?r.createElement(xg,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()}),null)}function Sg(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function kg(e){let t=r.useContext(ng);return xm(t,Sg(e)),t}function Cg(e){let t=r.useContext(rg);return xm(t,Sg(e)),t}function Ng(e){let t=function(e){let t=r.useContext(cg);return xm(t,Sg(e)),t}(e),n=t.matches[t.matches.length-1];return xm(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ag(){var e;let t=r.useContext(ug),n=Cg("useRouteError"),s=Ng("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[s]}var _g={};function Tg(e,t,n){t||_g[e]||(_g[e]=!0,wm(!1,n))}r.memo((function(e){let{routes:t,future:n,state:r}=e;return vg(t,void 0,r,n)}));function Ig(e){let{to:t,replace:n,state:s,relative:i}=e;xm(dg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=r.useContext(og);wm(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=r.useContext(cg),{pathname:l}=hg(),c=mg(),u=Km(t,Qm(o),l,"path"===i),d=JSON.stringify(u);return r.useEffect((()=>{c(JSON.parse(d),{replace:n,state:s,relative:i})}),[c,d,i,n,s]),null}function jg(e){xm(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dg(e){let{basename:t="/",children:n=null,location:s,navigationType:i="POP",navigator:a,static:o=!1}=e;xm(!dg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=r.useMemo((()=>({basename:l,navigator:a,static:o,future:{}})),[l,a,o]);"string"===typeof s&&(s=Cm(s));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=s,m=r.useMemo((()=>{let e=Wm(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:i}}),[l,u,d,h,f,p,i]);return wm(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:r.createElement(og.Provider,{value:c},r.createElement(lg.Provider,{children:n,value:m}))}function Rg(e){let{children:t,location:n}=e;return vg(Pg(t),n)}r.Component;function Pg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,((e,s)=>{if(!r.isValidElement(e))return;let i=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,Pg(e.props.children,i));xm(e.type===jg,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),xm(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Pg(e.props.children,i)),n.push(a)})),n}var Og="get",Mg="application/x-www-form-urlencoded";function Lg(e){return null!=e&&"string"===typeof e.tagName}var Fg=null;var Ug=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bg(e){return null==e||Ug.has(e)?e:(wm(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Mg,'"')),null)}function zg(e,t){let n,r,s,i,a;if(Lg(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?Wm(a,t):null,n=e.getAttribute("method")||Og,s=Bg(e.getAttribute("enctype"))||Mg,i=new FormData(e)}else if(function(e){return Lg(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Lg(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?Wm(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Og,s=Bg(e.getAttribute("formenctype"))||Bg(a.getAttribute("enctype"))||Mg,i=new FormData(a,e),!function(){if(null===Fg)try{new FormData(document.createElement("form"),0),Fg=!1}catch(cb){Fg=!0}return Fg}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,r)}}else{if(Lg(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Og,r=null,s=Mg,a=e}var o;return i&&"text/plain"===s&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}function Hg(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Vg(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(pD){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(pD),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Wg(e){return null!=e&&"string"===typeof e.page}function Gg(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function qg(e,t,n,r,s,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter(((e,t)=>a(e,t)||o(e,t))):"data"===i?t.filter(((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Qg(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s})).flat(1),[...new Set(r)];var r}function Kg(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,s)=>{if(t&&!Wg(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(i)||(n.add(i),e.push({key:i,link:s})),e}),[])}function Yg(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Xg=new Set([100,101,204,205]);function Zg(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===Wm(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}r.Component;function Jg(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let s,i=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($m(t))return r.createElement($g,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)s=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);s=new Error(e)}return r.createElement($g,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),i)}function $g(e){var t;let{title:n,renderScripts:s,isOutsideRemixApp:i,children:a}=e,{routeModules:o}=sv();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!i?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,s?r.createElement(dv,null):null)))}function ev(e,t){return"lazy"===e.mode&&!0===t}function tv(){let e=r.useContext(ng);return Hg(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nv(){let e=r.useContext(rg);return Hg(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rv=r.createContext(void 0);function sv(){let e=r.useContext(rv);return Hg(e,"You must render this element inside a <HydratedRouter> element"),e}function iv(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function av(e,t,n){if(n&&!uv)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function ov(e){let{page:t}=e,n=dm(e,fm),{router:s}=tv(),i=r.useMemo((()=>_m(s.routes,t,s.basename)),[s.routes,t,s.basename]);return i?r.createElement(cv,J({page:t,matches:i},n)):null}function lv(e){let{manifest:t,routeModules:n}=sv(),[s,i]=r.useState([]);return r.useEffect((()=>{let r=!1;return async function(e,t,n){let r=await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Vg(r,n);return e.links?e.links():[]}return[]})));return Kg(r.flat(1).filter(Gg).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?J(J({},e),{},{rel:"prefetch",as:"style"}):J(J({},e),{},{rel:"prefetch"}))))}(e,t,n).then((e=>{r||i(e)})),()=>{r=!0}}),[e,t,n]),s}function cv(e){let{page:t,matches:n}=e,s=dm(e,pm),i=hg(),{manifest:a,routeModules:o}=sv(),{basename:l}=tv(),{loaderData:c,matches:u}=nv(),d=r.useMemo((()=>qg(t,n,u,a,i,"data")),[t,n,u,a,i]),h=r.useMemo((()=>qg(t,n,u,a,i,"assets")),[t,n,u,a,i]),f=r.useMemo((()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,r=!1;if(n.forEach((t=>{var n;let s=a.routes[t.route.id];s&&s.hasLoader&&(!d.some((e=>e.route.id===t.route.id))&&t.route.id in c&&null!==(n=o[t.route.id])&&void 0!==n&&n.shouldRevalidate||s.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let s=Zg(t,l);return r&&e.size>0&&s.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[s.pathname+s.search]}),[l,c,i,a,d,n,t,o]),p=r.useMemo((()=>Qg(h,a)),[h,a]),m=lv(h);return r.createElement(r.Fragment,null,f.map((e=>r.createElement("link",J({key:e,rel:"prefetch",as:"fetch",href:e},s)))),p.map((e=>r.createElement("link",J({key:e,rel:"modulepreload",href:e},s)))),m.map((e=>{let{key:t,link:n}=e;return r.createElement("link",J({key:t},n))})))}rv.displayName="FrameworkContext";var uv=!1;function dv(e){let{manifest:t,serverHandoffString:n,isSpaMode:s,renderMeta:i,routeDiscovery:a,ssr:o}=sv(),{router:l,static:c,staticContext:u}=tv(),{matches:d}=nv(),h=ev(a,o);i&&(i.didRenderScripts=!0);let f=av(d,null,s);r.useEffect((()=>{uv=!0}),[]);let p=r.useMemo((()=>{var s;let i=u?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=c?"".concat(null!==(s=t.hmr)&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(h?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(f.map(((e,n)=>{let r="route".concat(n),s=t.routes[e.route.id];Hg(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...i?[{module:i,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(r," = {").concat(u.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(h?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=dm(e,hm),s=new Set(t.state.matches.map((e=>e.route.id))),i=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(i.pop();i.length>0;)a.push("/".concat(i.join("/"))),i.pop();a.forEach((e=>{let n=_m(t.routes,e,t.basename);n&&n.forEach((e=>s.add(e.route.id)))}));let o=[...s].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return J(J({},r),{},{routes:o,sri:!!n||void 0})}(t,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(f.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",J(J({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Yg(i),type:void 0})),r.createElement("script",J(J({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Yg(a),type:"module",async:!0})))}),[]),m=uv?[]:(g=t.entry.imports.concat(Qg(f,t,{includeHydrateFallback:!0})),[...new Set(g)]);var g;let v="object"===typeof t.sri?t.sri:{};return uv?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:v})}}):null,h?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:v[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:v[t.entry.module],suppressHydrationWarning:!0}),m.map((t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:v[t],suppressHydrationWarning:!0}))),p)}function hv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var fv="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{fv&&(window.__reactRouterVersion="7.6.2")}catch(cb){}function pv(e){let{basename:t,children:n,window:s}=e,i=r.useRef();null==i.current&&(i.current=bm({window:s,v5Compat:!0}));let a=i.current,[o,l]=r.useState({action:a.action,location:a.location}),c=r.useCallback((e=>{r.startTransition((()=>l(e)))}),[l]);return r.useLayoutEffect((()=>a.listen(c)),[a,c]),r.createElement(Dg,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var mv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gv=r.forwardRef((function(e,t){let n,{onClick:s,discover:i="render",prefetch:a="none",relative:o,reloadDocument:l,replace:c,state:u,target:d,to:h,preventScrollReset:f,viewTransition:p}=e,m=dm(e,mm),{basename:g}=r.useContext(og),v="string"===typeof h&&mv.test(h),y=!1;if("string"===typeof h&&v&&(n=h,fv))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=Wm(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(cb){wm(!1,'<Link to="'.concat(h,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xm(dg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=r.useContext(og),{hash:i,pathname:a,search:o}=gg(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:Ym([n,a])),s.createHref({pathname:l,search:o,hash:i})}(h,{relative:o}),[x,w,E]=function(e,t){let n=r.useContext(rv),[s,i]=r.useState(!1),[a,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),r.useEffect((()=>{if(s){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[s]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:iv(l,p),onBlur:iv(c,m),onMouseEnter:iv(u,p),onMouseLeave:iv(d,m),onTouchStart:iv(h,p)}]:[!1,f,{}]}(a,m),S=function(e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=mg(),c=hg(),u=gg(e,{relative:a});return r.useCallback((r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:km(c)===km(u);l(e,{replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:o})}}),[c,l,u,n,s,t,e,i,a,o])}(h,{replace:c,state:u,target:d,preventScrollReset:f,relative:o,viewTransition:p});let k=r.createElement("a",J(J(J({},m),E),{},{href:n||b,onClick:y||l?s:function(e){s&&s(e),e.defaultPrevented||S(e)},ref:hv(t,w),target:d,"data-discover":v||"render"!==i?void 0:"true"}));return x&&!v?r.createElement(r.Fragment,null,k,r.createElement(ov,{page:b})):k}));gv.displayName="Link",r.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:c,children:u}=e,d=dm(e,gm),h=gg(l,{relative:d.relative}),f=hg(),p=r.useContext(rg),{navigator:m,basename:g}=r.useContext(og),v=null!=p&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(sg);xm(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=bv("useViewTransitionState"),i=gg(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=Wm(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Wm(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=zm(i.pathname,o)||null!=zm(i.pathname,a)}(h)&&!0===c,y=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,b=f.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(b=b.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&g&&(x=Wm(x,g)||x);const w="/"!==y&&y.endsWith("/")?y.length-1:y.length;let E,S=b===y||!a&&b.startsWith(y)&&"/"===b.charAt(w),k=null!=x&&(x===y||!a&&x.startsWith(y)&&"/"===x.charAt(y.length)),C={isActive:S,isPending:k,isTransitioning:v},N=S?n:void 0;E="function"===typeof i?i(C):[i,S?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof o?o(C):o;return r.createElement(gv,J(J({},d),{},{"aria-current":N,className:E,ref:t,style:A,to:l,viewTransition:c}),"function"===typeof u?u(C):u)})).displayName="NavLink";var vv=r.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:s,navigate:i,reloadDocument:a,replace:o,state:l,method:c=Og,action:u,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:p}=e,m=dm(e,vm),g=Ev(),v=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(og),s=r.useContext(cg);xm(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a=J({},gg(e||".",{relative:t})),o=hg();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:Ym([n,a.pathname]));return km(a)}(u,{relative:h}),y="get"===c.toLowerCase()?"get":"post",b="string"===typeof u&&mv.test(u);return r.createElement("form",J(J({ref:t,method:y,action:v,onSubmit:a?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||c;g(t||e.currentTarget,{fetcherKey:s,method:n,navigate:i,replace:o,state:l,relative:h,preventScrollReset:f,viewTransition:p})}},m),{},{"data-discover":b||"render"!==n?void 0:"true"}))}));function yv(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function bv(e){let t=r.useContext(ng);return xm(t,yv(e)),t}vv.displayName="Form";var xv=0,wv=()=>"__".concat(String(++xv),"__");function Ev(){let{router:e}=bv("useSubmit"),{basename:t}=r.useContext(og),n=Ng("useRouteId");return r.useCallback((async function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:o,formData:l,body:c}=zg(r,t);if(!1===s.navigate){let t=s.fetcherKey||wv();await e.fetch(t,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})}),[e,t,n])}const Sv=["title","titleId"];function kv(e,t){let{title:n,titleId:s}=e,i=dm(e,Sv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const Cv=r.forwardRef(kv),Nv=["title","titleId"];function Av(e,t){let{title:n,titleId:s}=e,i=dm(e,Nv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const _v=r.forwardRef(Av),Tv=["title","titleId"];function Iv(e,t){let{title:n,titleId:s}=e,i=dm(e,Tv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const jv=r.forwardRef(Iv),Dv=["title","titleId"];function Rv(e,t){let{title:n,titleId:s}=e,i=dm(e,Dv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Pv=r.forwardRef(Rv),Ov=["title","titleId"];function Mv(e,t){let{title:n,titleId:s}=e,i=dm(e,Ov);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Lv=r.forwardRef(Mv),Fv=["title","titleId"];function Uv(e,t){let{title:n,titleId:s}=e,i=dm(e,Fv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"}))}const Bv=r.forwardRef(Uv),zv=["title","titleId"];function Hv(e,t){let{title:n,titleId:s}=e,i=dm(e,zv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const Vv=r.forwardRef(Hv),Wv=["title","titleId"];function Gv(e,t){let{title:n,titleId:s}=e,i=dm(e,Wv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const qv=r.forwardRef(Gv),Qv=["title","titleId"];function Kv(e,t){let{title:n,titleId:s}=e,i=dm(e,Qv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Yv=r.forwardRef(Kv),Xv=["title","titleId"];function Zv(e,t){let{title:n,titleId:s}=e,i=dm(e,Xv);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const Jv=r.forwardRef(Zv);var $v=n(579);const ey=[{id:"today",name:"Today",path:"/today",icon:Cv,description:"What matters now"},{id:"planning",name:"Planning",path:"/planning",icon:_v,description:"Schedule & organize"},{id:"capture",name:"Capture",path:"/capture",icon:jv,description:"Brain dump & process"}],ty=[{id:"dashboard",name:"Dashboard",path:"/dashboard",icon:Pv,description:"Overview & widgets"},{id:"sop-manager",name:"SOPs",path:"/sop-manager",icon:Lv,description:"Build workflows"},{id:"meals",name:"Meal Planner",path:"/meals",icon:Bv,description:"Plan weekly meals"},{id:"projects",name:"Projects",path:"/projects",icon:Vv,description:"Project details"},{id:"finance",name:"Finance",path:"/finance",icon:qv,description:"Budget tracking"},{id:"settings",name:"Settings",path:"/settings",icon:Yv,description:"Family & preferences"}],ny=e=>{let{children:t}=e;const n=mg(),s=hg(),[i,a]=(0,r.useState)(!1);return(0,$v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,$v.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,$v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,$v.jsxs)("div",{className:"flex justify-between",children:[(0,$v.jsx)("div",{className:"flex space-x-8",children:ey.map((e=>{const t=e.icon,r=s.pathname===e.path;return(0,$v.jsxs)("button",{onClick:()=>n(e.path),className:"flex items-center space-x-2 py-4 px-2 border-b-2 transition-colors ".concat(r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,$v.jsx)(t,{className:"w-5 h-5"}),(0,$v.jsxs)("div",{className:"text-left",children:[(0,$v.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,$v.jsx)("div",{className:"text-xs text-gray-400",children:e.description})]})]},e.id)}))}),(0,$v.jsxs)("div",{className:"relative",children:[(0,$v.jsxs)("button",{onClick:()=>a(!i),className:"flex items-center space-x-2 py-4 px-2 border-b-2 transition-colors ".concat(ty.some((e=>s.pathname===e.path))?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,$v.jsx)(Jv,{className:"w-5 h-5"}),(0,$v.jsxs)("div",{className:"text-left",children:[(0,$v.jsx)("div",{className:"text-sm font-medium",children:"Tools"}),(0,$v.jsx)("div",{className:"text-xs text-gray-400",children:"Specialized apps"})]})]}),i&&(0,$v.jsx)("div",{className:"absolute top-full right-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,$v.jsx)("div",{className:"p-2",children:ty.map((e=>{const t=e.icon,r=s.pathname===e.path;return(0,$v.jsxs)("button",{onClick:()=>{n(e.path),a(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ".concat(r?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"),children:[(0,$v.jsx)(t,{className:"w-5 h-5"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,$v.jsx)("div",{className:"text-xs text-gray-400",children:e.description})]})]},e.id)}))})})]})]})})}),i&&(0,$v.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),(0,$v.jsx)("main",{className:"flex-1",children:t})]})},ry=["title","titleId"];function sy(e,t){let{title:n,titleId:s}=e,i=dm(e,ry);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const iy=r.forwardRef(sy),ay=["title","titleId"];function oy(e,t){let{title:n,titleId:s}=e,i=dm(e,ay);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const ly=r.forwardRef(oy),cy=[{name:"Create SOP",description:"New standard operating procedure",icon:Lv,color:"blue",path:"/sop-manager"},{name:"Schedule Event",description:"Add to calendar",icon:_v,color:"green",path:"/calendar"},{name:"New Project",description:"Start a project",icon:Vv,color:"purple",path:"/projects"},{name:"Plan Meals",description:"Weekly meal planning",icon:Bv,color:"orange",path:"/meals"}],uy=e=>{let{contextId:t,userId:n}=e;const r=mg();return(0,$v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsxs)("div",{className:"mb-8",children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,$v.jsx)("p",{className:"text-gray-600",children:"Your life management hub"})]}),(0,$v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:cy.map((e=>{const t=e.icon;return(0,$v.jsx)("button",{onClick:()=>r(e.path),className:"p-6 bg-white rounded-lg border border-gray-200 hover:border-".concat(e.color,"-300 hover:shadow-md transition-all text-left group"),children:(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("div",{className:"p-3 bg-".concat(e.color,"-100 rounded-lg group-hover:bg-").concat(e.color,"-200 transition-colors"),children:(0,$v.jsx)(t,{className:"w-6 h-6 text-".concat(e.color,"-600")})}),(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,$v.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,$v.jsx)(iy,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600"})]})},e.name)}))}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsx)("h3",{className:"font-medium text-gray-900",children:"Recent SOPs"}),(0,$v.jsx)("button",{onClick:()=>r("/sop-manager"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"font-medium text-sm text-gray-900",children:"Morning Routine"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"Last executed 2 hours ago"})]}),(0,$v.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"font-medium text-sm text-gray-900",children:"Weekly Planning"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"Scheduled for 2:00 PM"})]})]}),(0,$v.jsx)("button",{onClick:()=>r("/sop-manager"),className:"w-full mt-4 p-2 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-blue-300 hover:text-blue-600 transition-colors",children:(0,$v.jsx)(ly,{className:"w-4 h-4 mx-auto"})})]}),(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsx)("h3",{className:"font-medium text-gray-900",children:"Today's Schedule"}),(0,$v.jsx)("button",{onClick:()=>r("/calendar"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"font-medium text-sm text-gray-900",children:"Team Meeting"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"10:00 AM - 11:00 AM"})]}),(0,$v.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"font-medium text-sm text-gray-900",children:"Lunch Break"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"12:00 PM - 1:00 PM"})]})]}),(0,$v.jsx)("button",{onClick:()=>r("/calendar"),className:"w-full mt-4 p-2 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-green-300 hover:text-green-600 transition-colors",children:(0,$v.jsx)(ly,{className:"w-4 h-4 mx-auto"})})]}),(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsx)("h3",{className:"font-medium text-gray-900",children:"Active Projects"}),(0,$v.jsx)("button",{onClick:()=>r("/projects"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"font-medium text-sm text-gray-900",children:"Home Setup"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"3 tasks remaining"})]}),(0,$v.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"font-medium text-sm text-gray-900",children:"Work Projects"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"7 tasks remaining"})]})]}),(0,$v.jsx)("button",{onClick:()=>r("/projects"),className:"w-full mt-4 p-2 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-purple-300 hover:text-purple-600 transition-colors",children:(0,$v.jsx)(ly,{className:"w-4 h-4 mx-auto"})})]})]})]})},dy=["title","titleId"];function hy(e,t){let{title:n,titleId:s}=e,i=dm(e,dy);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const fy=r.forwardRef(hy),py=["title","titleId"];function my(e,t){let{title:n,titleId:s}=e,i=dm(e,py);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const gy=r.forwardRef(my),vy=["title","titleId"];function yy(e,t){let{title:n,titleId:s}=e,i=dm(e,vy);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const by=r.forwardRef(yy),xy=["title","titleId"];function wy(e,t){let{title:n,titleId:s}=e,i=dm(e,xy);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Ey=r.forwardRef(wy),Sy=["title","titleId"];function ky(e,t){let{title:n,titleId:s}=e,i=dm(e,Sy);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Cy=r.forwardRef(ky),Ny=["title","titleId"];function Ay(e,t){let{title:n,titleId:s}=e,i=dm(e,Ny);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const _y=r.forwardRef(Ay),Ty=["title","titleId"];function Iy(e,t){let{title:n,titleId:s}=e,i=dm(e,Ty);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const jy=r.forwardRef(Iy),Dy=["title","titleId"];function Ry(e,t){let{title:n,titleId:s}=e,i=dm(e,Dy);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Py=r.forwardRef(Ry),Oy=e=>e instanceof Ui?e.toDate():null!==e&&void 0!==e&&e.seconds?new Date(1e3*e.seconds):new Date,My=()=>"step_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),Ly=async e=>{let t=0;for(const s of e)if("embedded_sop"===s.type&&s.embeddedSOPId){const e=await Fy(s.embeddedSOPId);var n,r;if(e)t+=null!==(n=null===(r=s.embeddedSOPOverrides)||void 0===r?void 0:r.estimatedDuration)&&void 0!==n?n:e.estimatedDuration;else t+=s.estimatedDuration}else t+=s.estimatedDuration;return t},Fy=async e=>{try{const t=await Up(Of(om,"sops",e));if(!t.exists())return null;const n=t.data();return{id:t.id,contextId:n.contextId,name:n.name,description:n.description,category:n.category,tags:n.tags||[],estimatedDuration:n.estimatedDuration,difficulty:n.difficulty,status:n.status,assignableMembers:n.assignableMembers||[],defaultAssignee:n.defaultAssignee,requiresConfirmation:n.requiresConfirmation||!1,canBeEmbedded:n.canBeEmbedded||!1,isStandalone:!1!==n.isStandalone,embeddedSOPs:n.embeddedSOPs||[],steps:n.steps||[],executionOrder:n.executionOrder||"sequential",isRecurring:n.isRecurring||!1,recurrence:n.recurrence,averageCompletionTime:n.averageCompletionTime,completionRate:n.completionRate,lastOptimized:n.lastOptimized?Oy(n.lastOptimized):void 0,createdBy:n.createdBy,createdAt:Oy(n.createdAt),updatedAt:Oy(n.updatedAt),version:n.version||1}}catch(pD){return console.error("Error fetching SOP:",pD),null}},Uy={getCategoryColor:e=>({morning:"#F59E0B",evening:"#6366F1",leaving:"#EF4444",cleanup:"#10B981","meal-prep":"#F97316",work:"#059669",custom:"#8B5CF6"}[e]||"#6B7280"),async createSOP(e,t){var n,r;const s=t.steps.map((e=>J(J({},e),{},{id:My(),type:e.type||"standard"}))),i=await Ly(s),a=s.filter((e=>"embedded_sop"===e.type&&e.embeddedSOPId)).map((e=>e.embeddedSOPId)),o=J(J({},t),{},{canBeEmbedded:null===(n=t.canBeEmbedded)||void 0===n||n,isStandalone:null===(r=t.isStandalone)||void 0===r||r,embeddedSOPs:a}),l=J(J({},Object.fromEntries(Object.entries(o).filter((e=>{let[t,n]=e;return void 0!==n})))),{},{contextId:e,steps:s,estimatedDuration:i,version:1,createdAt:Zp(),updatedAt:Zp()});return J(J({id:(await Gp(Pf(om,"sops"),l)).id},o),{},{contextId:e,steps:s,estimatedDuration:i,version:1,createdAt:new Date,updatedAt:new Date})},async getSOPsForContext(e){const t=Ep(Pf(om,"sops"),kp("contextId","==",e)),n=(await zp(t)).docs.map((e=>{const t=e.data();return{id:e.id,contextId:t.contextId,name:t.name,description:t.description,category:t.category,tags:t.tags||[],estimatedDuration:t.estimatedDuration,difficulty:t.difficulty,status:t.status,assignableMembers:t.assignableMembers||[],defaultAssignee:t.defaultAssignee,requiresConfirmation:t.requiresConfirmation||!1,canBeEmbedded:t.canBeEmbedded||!1,isStandalone:!1!==t.isStandalone,embeddedSOPs:t.embeddedSOPs||[],steps:t.steps||[],executionOrder:t.executionOrder||"sequential",isRecurring:t.isRecurring||!1,recurrence:t.recurrence,averageCompletionTime:t.averageCompletionTime,completionRate:t.completionRate,lastOptimized:t.lastOptimized?Oy(t.lastOptimized):void 0,createdBy:t.createdBy,createdAt:Oy(t.createdAt),updatedAt:Oy(t.updatedAt),version:t.version||1}}));return n.filter((e=>"archived"!==e.status)).sort(((e,t)=>e.status!==t.status?e.status.localeCompare(t.status):e.category!==t.category?e.category.localeCompare(t.category):e.name.localeCompare(t.name)))},async getSOPsByCategory(e,t){const n=Ep(Pf(om,"sops"),kp("contextId","==",e),kp("category","==",t)),r=(await zp(n)).docs.map((e=>{const t=e.data();return{id:e.id,contextId:t.contextId,name:t.name,description:t.description,category:t.category,tags:t.tags||[],estimatedDuration:t.estimatedDuration,difficulty:t.difficulty,status:t.status,assignableMembers:t.assignableMembers||[],defaultAssignee:t.defaultAssignee,requiresConfirmation:t.requiresConfirmation||!1,canBeEmbedded:t.canBeEmbedded||!1,isStandalone:!1!==t.isStandalone,embeddedSOPs:t.embeddedSOPs||[],steps:t.steps||[],executionOrder:t.executionOrder||"sequential",isRecurring:t.isRecurring||!1,recurrence:t.recurrence,averageCompletionTime:t.averageCompletionTime,completionRate:t.completionRate,lastOptimized:t.lastOptimized?Oy(t.lastOptimized):void 0,createdBy:t.createdBy,createdAt:Oy(t.createdAt),updatedAt:Oy(t.updatedAt),version:t.version||1}}));return r.filter((e=>"active"===e.status)).sort(((e,t)=>e.name.localeCompare(t.name)))},async getEmbeddableSOPs(e){return(await this.getSOPsForContext(e)).filter((e=>e.canBeEmbedded&&"active"===e.status))},async getExpandedSteps(e){const t=await this.getSOPById(e);if(!t)return[];const n=[];for(const r of t.steps)if("embedded_sop"===r.type&&r.embeddedSOPId){const e=await Fy(r.embeddedSOPId);if(e){const t=e.steps.map(((e,t)=>J(J({},e),{},{id:"".concat(r.id,"_embedded_").concat(e.id),stepNumber:t+1,title:"".concat(r.title,": ").concat(e.title),parentStepId:r.id,isEmbedded:!0})));n.push(...t)}else n.push(r)}else n.push(r);return n},async updateSOP(e,t){const n=J(J({},t),{},{updatedAt:Zp()});if(t.steps){n.estimatedDuration=await Ly(t.steps),n.version=(t.version||1)+1;const e=t.steps.filter((e=>"embedded_sop"===e.type&&e.embeddedSOPId)).map((e=>e.embeddedSOPId));n.embeddedSOPs=e}const r=Of(om,"sops",e);await Vp(r,n)},async getSOPById(e){const t=await Up(Of(om,"sops",e));if(!t.exists())return null;const n=t.data();return{id:t.id,contextId:n.contextId,name:n.name,description:n.description,category:n.category,tags:n.tags||[],estimatedDuration:n.estimatedDuration,difficulty:n.difficulty,status:n.status,assignableMembers:n.assignableMembers||[],defaultAssignee:n.defaultAssignee,requiresConfirmation:n.requiresConfirmation||!1,canBeEmbedded:n.canBeEmbedded||!1,isStandalone:!1!==n.isStandalone,embeddedSOPs:n.embeddedSOPs||[],steps:n.steps||[],executionOrder:n.executionOrder||"sequential",isRecurring:n.isRecurring||!1,recurrence:n.recurrence,averageCompletionTime:n.averageCompletionTime,completionRate:n.completionRate,lastOptimized:n.lastOptimized?Oy(n.lastOptimized):void 0,createdBy:n.createdBy,createdAt:Oy(n.createdAt),updatedAt:Oy(n.updatedAt),version:n.version||1}},async deleteSOP(e){const t=Of(om,"sops",e);await Vp(t,{status:"archived",updatedAt:Zp()})},async permanentlyDeleteSOP(e){await Wp(Of(om,"sops",e))},async createSOPCompletion(e){const t=J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()});return J(J({id:(await Gp(Pf(om,"sop_completions"),t)).id},e),{},{createdAt:new Date,updatedAt:new Date})},async getCompletionsForDateRange(e,t,n){const r=Ep(Pf(om,"sop_completions"),kp("contextId","==",e),kp("scheduledDate",">=",t),kp("scheduledDate","<=",n),Ap("scheduledDate","asc"),Ap("scheduledTime","asc"));return(await zp(r)).docs.map((e=>{const t=e.data();return{id:e.id,sopId:t.sopId,contextId:t.contextId,assignedTo:t.assignedTo,completedBy:t.completedBy,scheduledDate:t.scheduledDate,scheduledTime:t.scheduledTime,startedAt:t.startedAt?Oy(t.startedAt):void 0,completedAt:t.completedAt?Oy(t.completedAt):void 0,actualDuration:t.actualDuration,completedSteps:t.completedSteps||[],skippedSteps:t.skippedSteps||[],stepNotes:t.stepNotes||{},status:t.status,completionNotes:t.completionNotes,rating:t.rating,issues:t.issues,suggestions:t.suggestions,createdAt:Oy(t.createdAt),updatedAt:Oy(t.updatedAt)}}))},async updateCompletion(e,t){const n=J(J({},t),{},{updatedAt:Zp()}),r=Of(om,"sop_completions",e);await Vp(r,n)},async getSOPTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;const t=Ep(Pf(om,"sop_templates"),kp("isPublic","==",!0),Ap("usageCount","desc"),Ap("rating","desc"));return(await zp(t)).docs.slice(0,e).map((e=>{const t=e.data();return{id:e.id,name:t.name,description:t.description,category:t.category,tags:t.tags||[],steps:t.steps||[],estimatedDuration:t.estimatedDuration,difficulty:t.difficulty,isPublic:t.isPublic,usageCount:t.usageCount||0,rating:t.rating||0,createdBy:t.createdBy,createdAt:Oy(t.createdAt)}}))},async createSOPFromTemplate(e,t,n,r){const s=await Up(Of(om,"sop_templates",t));if(!s.exists())throw new Error("Template not found");const i=s.data(),a=i.steps.map(((e,t)=>J(J({},e),{},{id:My(),stepNumber:t+1,type:"standard"}))),o={contextId:e,name:(null===r||void 0===r?void 0:r.name)||i.name,description:i.description,category:i.category,tags:i.tags,difficulty:i.difficulty,status:"active",assignableMembers:(null===r||void 0===r?void 0:r.assignableMembers)||[],defaultAssignee:null===r||void 0===r?void 0:r.defaultAssignee,requiresConfirmation:!1,canBeEmbedded:!0,isStandalone:!0,embeddedSOPs:[],steps:a,executionOrder:"sequential",isRecurring:!1,createdBy:n},l=Of(om,"sop_templates",t);return await Vp(l,{usageCount:(i.usageCount||0)+1}),this.createSOP(e,o)}};const By=new class{constructor(){this.tasks=[],this.listeners=new Set,this.unsubscribes=new Map,this.COLLECTION_NAME="tasks",this.STORAGE_KEY="symphony_tasks",this.authInitialized=!1,this.loadFromLocalStorage(),this.initializeAuth().catch(console.error)}loadFromLocalStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);this.tasks=t.map((e=>J(J({},e),{},{createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),scheduledDate:e.scheduledDate?new Date(e.scheduledDate):void 0,completedAt:e.completedAt?new Date(e.completedAt):void 0}))),console.log("\ud83d\udcf1 Loaded ".concat(this.tasks.length," tasks from localStorage"))}}catch(pD){console.error("Error loading from localStorage:",pD)}}saveToLocalStorage(){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.tasks)),console.log("\ud83d\udcbe Saved ".concat(this.tasks.length," tasks to localStorage"))}catch(pD){console.error("Error saving to localStorage:",pD)}}async initializeAuth(){if(lm&&!this.authInitialized)return new Promise((e=>{try{Er(lm,(async t=>{if(t)console.log("\u2705 User authenticated:",t.uid),this.authInitialized=!0,e();else{console.log("\u26a0\ufe0f User not authenticated, signing in anonymously...");try{await async function(e){var t;if($e(e.app))return Promise.reject(Ct(e));const n=Rn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new hr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await dr(n,{returnSecureToken:!0}),s=await hr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}(lm),console.log("\u2705 Anonymous sign-in successful")}catch(pD){console.error("Anonymous sign-in failed:",pD),this.authInitialized=!0,e()}}}))}catch(pD){console.error("Auth initialization failed:",pD),this.authInitialized=!0,e()}}))}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notifyListeners(){this.listeners.forEach((e=>e())),this.saveToLocalStorage()}async addTasksFromCapture(e,t,n){if(!om)return console.warn("Firebase not available, using in-memory storage"),this.addTasksFromCaptureLocal(e,t,n);const r=[];for(const s of e)try{const e={id:s.id,title:s.title,type:s.type,context:"auto-detected"===s.context?"personal":s.context,priority:s.priority,status:"pending",scheduledDate:s.scheduledDate?Ui.fromDate(s.scheduledDate):null,scheduledTime:s.scheduledTime,duration:s.duration,assignedTo:s.assignedTo,createdBy:n,contextId:t,tags:s.tags||[],confidence:s.confidence,source:"ai_capture",createdAt:Zp(),updatedAt:Zp()},i=await Gp(Pf(om,this.COLLECTION_NAME),e),a=J(J({},e),{},{docId:i.id,scheduledDate:s.scheduledDate,createdAt:new Date,updatedAt:new Date});r.push(a)}catch(pD){console.error("Error adding task to Firestore:",pD)}return r}addTasksFromCaptureLocal(e,t,n){const r=e.map((e=>({id:e.id,title:e.title,type:e.type,context:"auto-detected"===e.context?"personal":e.context,priority:e.priority,status:"pending",scheduledDate:e.scheduledDate,scheduledTime:e.scheduledTime,duration:e.duration,assignedTo:e.assignedTo,createdBy:n,contextId:t,tags:e.tags||[],confidence:e.confidence,source:"ai_capture",createdAt:new Date,updatedAt:new Date})));return this.tasks.push(...r),this.notifyListeners(),r}getAllTasks(e){return e?this.tasks.filter((t=>t.contextId===e)):this.tasks}getTodayTasks(e){const t=new Date,n=t.toDateString();return this.tasks.filter((r=>r.contextId===e&&(r.scheduledDate&&r.scheduledDate.toDateString()===n||r.scheduledDate&&r.scheduledDate<t&&"completed"!==r.status||!r.scheduledDate&&"pending"===r.status)))}getUnscheduledTasks(e){const t=this.tasks.filter((t=>t.contextId===e&&!t.scheduledDate&&"pending"===t.status));return console.log("\ud83d\udccb Found ".concat(t.length," unscheduled tasks for context ").concat(e)),t}getScheduledTasks(e){return this.tasks.filter((t=>t.contextId===e&&t.scheduledDate&&"cancelled"!==t.status))}async updateTask(e,t){if(!om)return console.warn("Firebase not available, using in-memory storage"),this.updateTaskLocal(e,t);try{const n=this.tasks.find((t=>t.id===e));if(null===n||void 0===n||!n.docId)return console.warn("Task not in Firestore, updating locally only:",e),this.updateTaskLocal(e,t);const r=J(J({},this.removeUndefinedValues(t)),{},{updatedAt:Zp()});t.scheduledDate&&(r.scheduledDate=Ui.fromDate(t.scheduledDate)),"completed"===t.status&&(r.completedAt=Zp()),await Vp(Of(om,this.COLLECTION_NAME,n.docId),r)}catch(pD){console.error("Error updating task in Firestore:",pD)}}removeUndefinedValues(e){if(null===e||void 0===e)return null;if(Array.isArray(e))return e.map((e=>this.removeUndefinedValues(e)));if("object"===typeof e){const t={};for(const[n,r]of Object.entries(e))void 0!==r&&(t[n]=this.removeUndefinedValues(r));return t}return e}updateTaskLocal(e,t){const n=this.tasks.findIndex((t=>t.id===e));-1!==n&&(this.tasks[n]=J(J(J({},this.tasks[n]),t),{},{updatedAt:new Date}),"completed"===t.status&&(this.tasks[n].completedAt=new Date),this.notifyListeners())}async scheduleTask(e,t,n){await this.updateTask(e,{scheduledDate:t,scheduledTime:n})}async unscheduleTask(e){await this.updateTask(e,{scheduledDate:void 0,scheduledTime:void 0})}async completeTask(e){await this.updateTask(e,{status:"completed"})}async deleteTask(e){if(!om)return console.warn("Firebase not available, using in-memory storage"),this.tasks=this.tasks.filter((t=>t.id!==e)),void this.notifyListeners();try{const t=this.tasks.find((t=>t.id===e));null!==t&&void 0!==t&&t.docId&&await Wp(Of(om,this.COLLECTION_NAME,t.docId))}catch(pD){console.error("Error deleting task from Firestore:",pD)}}getTask(e){return this.tasks.find((t=>t.id===e))}async addSubStep(e,t){const n=this.getTask(e);if(!n)return;const r={id:"substep_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),title:t.title,description:t.description||"",isCompleted:!1,isOptional:t.isOptional||!1},s=n.subSteps||[];await this.updateTask(e,{subSteps:[...s,r]})}async updateSubStep(e,t,n){const r=this.getTask(e);if(null===r||void 0===r||!r.subSteps)return;const s=r.subSteps.map((e=>e.id===t?J(J({},e),n):e));await this.updateTask(e,{subSteps:s})}async deleteSubStep(e,t){const n=this.getTask(e);if(null===n||void 0===n||!n.subSteps)return;const r=n.subSteps.filter((e=>e.id!==t));await this.updateTask(e,{subSteps:r})}async addList(e,t){var n,r;console.log("TaskManager.addList called for taskId:",e);const s=this.getTask(e);if(!s)return void console.error("Task not found for ID:",e);console.log("Found task:",s.title,"current lists:",(null===(n=s.lists)||void 0===n?void 0:n.length)||0);const i={id:"list_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),title:t.title,type:t.type,items:[]},a=s.lists||[];console.log("Adding list:",i,"to existing lists:",a.length),await this.updateTask(e,{lists:[...a,i]});const o=this.getTask(e);console.log("Task updated, new list count:",(null===o||void 0===o||null===(r=o.lists)||void 0===r?void 0:r.length)||0)}async updateList(e,t,n){const r=this.getTask(e);if(null===r||void 0===r||!r.lists)return;const s=r.lists.map((e=>e.id===t?J(J({},e),n):e));await this.updateTask(e,{lists:s})}async deleteList(e,t){const n=this.getTask(e);if(null===n||void 0===n||!n.lists)return;const r=n.lists.filter((e=>e.id!==t));await this.updateTask(e,{lists:r})}async addListItem(e,t,n){const r=this.getTask(e);if(null===r||void 0===r||!r.lists)return;const s={id:"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),text:n.text,isChecked:!1,quantity:n.quantity,notes:n.notes},i=r.lists.map((e=>e.id===t?J(J({},e),{},{items:[...e.items,s]}):e));await this.updateTask(e,{lists:i})}async updateListItem(e,t,n,r){const s=this.getTask(e);if(null===s||void 0===s||!s.lists)return;const i=s.lists.map((e=>e.id===t?J(J({},e),{},{items:e.items.map((e=>e.id===n?J(J({},e),r):e))}):e));await this.updateTask(e,{lists:i})}async deleteListItem(e,t,n){const r=this.getTask(e);if(null===r||void 0===r||!r.lists)return;const s=r.lists.map((e=>e.id===t?J(J({},e),{},{items:e.items.filter((e=>e.id!==n))}):e));await this.updateTask(e,{lists:s})}async createTask(e){if(console.log("Creating task with data:",e),console.log("Firebase DB available:",!!om),!om){console.warn("Firebase not available, using in-memory storage");const t=J(J({},e),{},{createdAt:new Date,updatedAt:new Date});return this.tasks.push(t),this.notifyListeners(),console.log("Task created in memory:",t),t}try{const t=J(J({},Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return void 0!==n})))),{},{scheduledDate:e.scheduledDate?Ui.fromDate(e.scheduledDate):null,createdAt:Zp(),updatedAt:Zp()}),n=await Gp(Pf(om,this.COLLECTION_NAME),t),r=J(J({},e),{},{docId:n.id,createdAt:new Date,updatedAt:new Date});return this.tasks.push(r),this.notifyListeners(),console.log("Task created and added to cache:",r),r}catch(pD){console.error("Error creating task in Firestore:",pD),console.error("Task data that failed:",e),console.error("Firebase error details:",pD),console.warn("\ud83d\udd34 Falling back to in-memory storage due to Firestore error");const n=J(J({},e),{},{createdAt:new Date,updatedAt:new Date});return this.tasks.push(n),this.notifyListeners(),console.log("\u2705 Task created in memory as fallback:",n),console.log("\ud83d\udcca Total tasks in cache after creation:",this.tasks.length),n}}subscribeToTasks(e){if(!om)return console.warn("Firebase not available, no real-time updates"),()=>{};if(!this.authInitialized)return console.log("\u23f3 Waiting for authentication before subscribing..."),this.initializeAuth().then((()=>{this.authInitialized&&this.subscribeToTasks(e)})),()=>{};const t=this.unsubscribes.get(e);t&&t();const n=qp(Ep(Pf(om,this.COLLECTION_NAME),kp("contextId","==",e),Ap("createdAt","desc")),(t=>{const n=[];t.forEach((e=>{var t,r,s,i;const a=e.data(),o=J(J({},a),{},{docId:e.id,scheduledDate:(null===(t=a.scheduledDate)||void 0===t?void 0:t.toDate())||void 0,createdAt:(null===(r=a.createdAt)||void 0===r?void 0:r.toDate())||new Date,updatedAt:(null===(s=a.updatedAt)||void 0===s?void 0:s.toDate())||new Date,completedAt:(null===(i=a.completedAt)||void 0===i?void 0:i.toDate())||void 0});n.push(o)})),this.tasks=this.tasks.filter((t=>t.contextId!==e)).concat(n),this.notifyListeners()}),(e=>{console.error("Error in task subscription:",e)}));return this.unsubscribes.set(e,n),n}async loadTasks(e){if(om){this.authInitialized||(console.log("\u23f3 Waiting for authentication..."),await this.initializeAuth());try{const t=Ep(Pf(om,this.COLLECTION_NAME),kp("contextId","==",e),Ap("createdAt","desc")),n=await zp(t),r=[];n.forEach((e=>{var t,n,s,i;const a=e.data(),o=J(J({},a),{},{docId:e.id,scheduledDate:(null===(t=a.scheduledDate)||void 0===t?void 0:t.toDate())||void 0,createdAt:(null===(n=a.createdAt)||void 0===n?void 0:n.toDate())||new Date,updatedAt:(null===(s=a.updatedAt)||void 0===s?void 0:s.toDate())||new Date,completedAt:(null===(i=a.completedAt)||void 0===i?void 0:i.toDate())||void 0});r.push(o)}));const s=this.tasks.filter((t=>t.contextId===e));r.length>0?(this.tasks=this.tasks.filter((t=>t.contextId!==e)).concat(r),console.log("\ud83d\udce5 Loaded ".concat(r.length," tasks from Firestore")),this.notifyListeners()):0===s.length?console.log("\ud83d\udccb No tasks found locally or in Firestore"):console.log("\ud83d\udccb Keeping ".concat(s.length," local tasks, Firestore was empty"))}catch(pD){console.error("Error loading tasks:",pD)}}else console.warn("Firebase not available, no data to load")}},zy=[{value:"all",label:"All SOPs",icon:"\ud83d\udccb"},{value:"morning",label:"Morning",icon:"\ud83c\udf05"},{value:"evening",label:"Evening",icon:"\ud83c\udf19"},{value:"leaving",label:"Leaving House",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{value:"cleanup",label:"Cleanup",icon:"\ud83e\uddf9"},{value:"meal-prep",label:"Meal Prep",icon:"\ud83d\udc68\u200d\ud83c\udf73"},{value:"work",label:"Work",icon:"\ud83d\udcbc"},{value:"custom",label:"Custom",icon:"\u2699\ufe0f"}],Hy=e=>{var t;let{sops:n,contextId:s,userId:i,onSOPUpdated:a,onSOPEdit:o}=e;const[l,c]=(0,r.useState)("all"),[u,d]=(0,r.useState)(""),h=n.filter((e=>{var t;const n="all"===l||e.category===l,r=""===u||e.name.toLowerCase().includes(u.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||e.tags.some((e=>e.toLowerCase().includes(u.toLowerCase())));return n&&r&&"active"===e.status})),f=e=>{if(e<60)return"".concat(e,"m");const t=Math.floor(e/60),n=e%60;return n>0?"".concat(t,"h ").concat(n,"m"):"".concat(t,"h")},p=e=>{switch(e){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,$v.jsxs)("div",{className:"space-y-4",children:[(0,$v.jsx)("div",{children:(0,$v.jsx)("input",{type:"text",placeholder:"Search SOPs...",value:u,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-2",children:zy.map((e=>(0,$v.jsxs)("button",{onClick:()=>c(e.value),className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat(l===e.value?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,$v.jsx)("span",{children:e.icon}),(0,$v.jsx)("span",{children:e.label})]},e.value)))})]})}),(0,$v.jsx)("div",{className:"space-y-4",children:0===h.length?(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[(0,$v.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udccb"}),(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No SOPs found"}),(0,$v.jsx)("p",{className:"text-gray-500",children:u?'No SOPs match "'.concat(u,'"'):"all"===l?"Create your first SOP to get started":"No ".concat(null===(t=zy.find((e=>e.value===l)))||void 0===t?void 0:t.label," SOPs")})]}):h.map((e=>(0,$v.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:border-gray-300 transition-colors",children:(0,$v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,$v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.name}),(0,$v.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:Uy.getCategoryColor(e.category)},title:e.category}),(0,$v.jsx)("span",{className:"text-xs px-2 py-1 rounded-full flex-shrink-0 ".concat(p(e.difficulty)),children:e.difficulty})]}),e.description&&(0,$v.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,$v.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mb-4",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$v.jsx)(gy,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:f(e.estimatedDuration)})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$v.jsx)(by,{className:"w-4 h-4"}),(0,$v.jsxs)("span",{children:[e.steps.length," steps"]})]}),e.assignableMembers.length>0&&(0,$v.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$v.jsx)(Ey,{className:"w-4 h-4"}),(0,$v.jsxs)("span",{children:[e.assignableMembers.length," assignee(s)"]})]}),e.isRecurring&&(0,$v.jsx)("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs",children:"Recurring"})]}),e.tags.length>0&&(0,$v.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,5).map((e=>(0,$v.jsx)("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:e},e))),e.tags.length>5&&(0,$v.jsxs)("span",{className:"text-gray-400 text-xs",children:["+",e.tags.length-5," more"]})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 ml-6",children:[(0,$v.jsx)("div",{className:"p-2 text-gray-400 hover:text-gray-600 cursor-move",title:"Drag to schedule (coming soon)",onClick:()=>alert("Drag-and-drop scheduling coming soon! Use Execute button to add to tasks."),children:(0,$v.jsx)(Cy,{className:"w-5 h-5"})}),(0,$v.jsxs)("button",{onClick:()=>(async e=>{console.log("Executing SOP:",e),console.log("Context ID:",s),console.log("User ID:",i);try{const t={id:"sop_task_".concat(e.id,"_").concat(Date.now()),title:"Execute: ".concat(e.name),type:"sop",context:"family",priority:"medium",status:"pending",duration:e.estimatedDuration,assignedTo:e.defaultAssignee||i,createdBy:i,contextId:s,tags:[...e.tags,"sop-execution"],notes:"SOP ID: ".concat(e.id,"\n\nSteps:\n").concat(e.steps.map(((e,t)=>"".concat(t+1,". ").concat(e.title," (").concat(e.estimatedDuration,"min)"))).join("\n")),source:"manual"};if(!await By.createTask(t))throw new Error("Failed to create task");console.log('\u2705 SOP "'.concat(e.name,'" added to your task list!')),alert('\u2705 SOP "'.concat(e.name,'" has been added to your tasks! Check the Today or Planning view to schedule it.'))}catch(pD){console.error("Error creating SOP task:",pD),console.error("Error details:",pD),alert("\u274c Failed to create SOP task. Error: ".concat(pD instanceof Error?pD.message:"Unknown error",". Check console for details."))}})(e),className:"flex items-center space-x-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,$v.jsx)(_y,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Execute"})]}),(0,$v.jsx)("button",{onClick:()=>(e=>{console.log("Edit SOP:",e.name),o(e)})(e),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:(0,$v.jsx)(jy,{className:"w-4 h-4"})}),(0,$v.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await Uy.deleteSOP(e.id),a()}catch(pD){console.error("Error deleting SOP:",pD),alert("Failed to delete SOP. Please try again.")}})(e),className:"p-2 text-red-400 hover:text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:(0,$v.jsx)(Py,{className:"w-4 h-4"})})]})]})},e.id)))})]})},Vy=["title","titleId"];function Wy(e,t){let{title:n,titleId:s}=e,i=dm(e,Vy);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Gy=r.forwardRef(Wy),qy=[{value:"morning",label:"Morning",icon:"\ud83c\udf05"},{value:"evening",label:"Evening",icon:"\ud83c\udf19"},{value:"leaving",label:"Leaving House",icon:"\ud83c\udfc3\u200d\u2642\ufe0f"},{value:"cleanup",label:"Cleanup",icon:"\ud83e\uddf9"},{value:"meal-prep",label:"Meal Prep",icon:"\ud83d\udc68\u200d\ud83c\udf73"},{value:"work",label:"Work",icon:"\ud83d\udcbc"},{value:"custom",label:"Custom",icon:"\u2699\ufe0f"}],Qy=[{value:"easy",label:"Easy",color:"text-green-600"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"hard",label:"Hard",color:"text-red-600"}],Ky=e=>{let{isOpen:t,onClose:n,contextId:s,userId:i,onSOPCreated:a,editingSOP:o}=e;const[l,c]=(0,r.useState)({name:"",description:"",category:"morning",difficulty:"easy",tags:[],steps:[{stepNumber:1,title:"",description:"",estimatedDuration:5,isOptional:!1,type:"standard"}],assignableMembers:[],requiresConfirmation:!1,canBeEmbedded:!0,isRecurring:!1}),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)("");if((0,r.useEffect)((()=>{var e;o&&c({name:o.name,description:o.description||"",category:o.category,difficulty:o.difficulty,tags:o.tags||[],steps:(null===(e=o.steps)||void 0===e?void 0:e.map((e=>({stepNumber:e.stepNumber,title:e.title,description:e.description||"",estimatedDuration:e.estimatedDuration,isOptional:e.isOptional,type:e.type}))))||[{stepNumber:1,title:"",description:"",estimatedDuration:5,isOptional:!1,type:"standard"}],assignableMembers:o.assignableMembers||[],defaultAssignee:o.defaultAssignee,requiresConfirmation:o.requiresConfirmation||!1,canBeEmbedded:o.canBeEmbedded||!0,isRecurring:o.isRecurring||!1})}),[o]),!t)return null;const g=(e,t,n)=>{c((r=>J(J({},r),{},{steps:r.steps.map(((r,s)=>s===e?J(J({},r),{},{[t]:n}):r))})))},v=()=>{u.trim()&&!l.tags.includes(u.trim())&&(c((e=>J(J({},e),{},{tags:[...e.tags,u.trim()]}))),d(""))};return(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,$v.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,$v.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.name.trim())if(0!==l.steps.length&&l.steps[0].title.trim()){f(!0),m("");try{if(o){const e=l.steps.map(((e,t)=>{var n,r;return J(J({},e),{},{id:(null===(n=o.steps)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.id)||"step_".concat(Date.now(),"_").concat(t)})}));await Uy.updateSOP(o.id,J(J({},l),{},{steps:e,updatedAt:new Date}))}else await Uy.createSOP(s,J(J({contextId:s},l),{},{createdBy:i,status:"active",isStandalone:!0,executionOrder:"sequential"}));a(),n()}catch(t){console.error(o?"Error updating SOP:":"Error creating SOP:",t),m(o?"Failed to update SOP. Please try again.":"Failed to create SOP. Please try again.")}finally{f(!1)}}else m("At least one step is required");else m("Name is required")},children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,$v.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o?"Edit SOP":"Create New SOP"}),(0,$v.jsx)("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(Gy,{className:"w-6 h-6"})})]}),(0,$v.jsxs)("div",{className:"p-6 space-y-6",children:[p&&(0,$v.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:p}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,$v.jsx)("input",{type:"text",value:l.name,onChange:e=>c((t=>J(J({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Morning Routine",required:!0})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,$v.jsx)("select",{value:l.category,onChange:e=>c((t=>J(J({},t),{},{category:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:qy.map((e=>(0,$v.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,$v.jsx)("textarea",{value:l.description,onChange:e=>c((t=>J(J({},t),{},{description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe what this SOP accomplishes..."})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),(0,$v.jsx)("div",{className:"flex space-x-4",children:Qy.map((e=>(0,$v.jsxs)("label",{className:"flex items-center",children:[(0,$v.jsx)("input",{type:"radio",value:e.value,checked:l.difficulty===e.value,onChange:e=>c((t=>J(J({},t),{},{difficulty:e.target.value}))),className:"mr-2"}),(0,$v.jsx)("span",{className:e.color,children:e.label})]},e.value)))})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,$v.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),v()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add a tag..."}),(0,$v.jsx)("button",{type:"button",onClick:v,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Add"})]}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e=>(0,$v.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded",children:[e,(0,$v.jsx)("button",{type:"button",onClick:()=>(e=>{c((t=>J(J({},t),{},{tags:t.tags.filter((t=>t!==e))})))})(e),className:"ml-1 text-blue-600 hover:text-blue-800",children:"\xd7"})]},e)))})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Steps *"}),(0,$v.jsxs)("button",{type:"button",onClick:()=>{c((e=>J(J({},e),{},{steps:[...e.steps,{stepNumber:e.steps.length+1,title:"",description:"",estimatedDuration:5,isOptional:!1,type:"standard"}]})))},className:"flex items-center space-x-1 px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Add Step"})]})]}),(0,$v.jsx)("div",{className:"space-y-4",children:l.steps.map(((e,t)=>(0,$v.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$v.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Step ",e.stepNumber]}),l.steps.length>1&&(0,$v.jsx)("button",{type:"button",onClick:()=>(e=>{l.steps.length<=1||c((t=>J(J({},t),{},{steps:t.steps.filter(((t,n)=>n!==e)).map(((e,t)=>J(J({},e),{},{stepNumber:t+1})))})))})(t),className:"text-red-400 hover:text-red-600",children:(0,$v.jsx)(Py,{className:"w-4 h-4"})})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,$v.jsx)("div",{className:"md:col-span-2",children:(0,$v.jsx)("input",{type:"text",value:e.title,onChange:e=>g(t,"title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Step title...",required:!0})}),(0,$v.jsx)("div",{children:(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("input",{type:"number",value:e.estimatedDuration,onChange:e=>g(t,"estimatedDuration",parseInt(e.target.value)||5),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",max:"480"}),(0,$v.jsx)("span",{className:"text-sm text-gray-500",children:"min"})]})})]}),(0,$v.jsx)("textarea",{value:e.description||"",onChange:e=>g(t,"description",e.target.value),className:"w-full mt-3 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Step description (optional)..."}),(0,$v.jsxs)("label",{className:"flex items-center mt-3",children:[(0,$v.jsx)("input",{type:"checkbox",checked:e.isOptional,onChange:e=>g(t,"isOptional",e.target.checked),className:"mr-2"}),(0,$v.jsx)("span",{className:"text-sm text-gray-700",children:"Optional step"})]})]},t)))})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$v.jsxs)("label",{className:"flex items-center",children:[(0,$v.jsx)("input",{type:"checkbox",checked:l.requiresConfirmation,onChange:e=>c((t=>J(J({},t),{},{requiresConfirmation:e.target.checked}))),className:"mr-2"}),(0,$v.jsx)("span",{className:"text-sm text-gray-700",children:"Requires confirmation"})]}),(0,$v.jsxs)("label",{className:"flex items-center",children:[(0,$v.jsx)("input",{type:"checkbox",checked:l.canBeEmbedded,onChange:e=>c((t=>J(J({},t),{},{canBeEmbedded:e.target.checked}))),className:"mr-2"}),(0,$v.jsx)("span",{className:"text-sm text-gray-700",children:"Can be embedded"})]})]})]}),(0,$v.jsxs)("div",{className:"flex items-center justify-end space-x-4 p-6 border-t border-gray-200",children:[(0,$v.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",disabled:h,children:"Cancel"}),(0,$v.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:h,children:h?"Creating...":"Create SOP"})]})]})})})},Yy=e=>{let{contextId:t,userId:n}=e;const r=mg();return(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsxs)("h3",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[(0,$v.jsx)(_v,{className:"w-5 h-5 text-blue-600"}),(0,$v.jsx)("span",{children:"Today's Schedule"})]}),(0,$v.jsx)("button",{onClick:()=>r("/calendar"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Morning Routine"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"9:00 AM - 9:30 AM"})]}),(0,$v.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Scheduled"})]})}),(0,$v.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Weekly Planning"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"2:00 PM - 2:45 PM"})]}),(0,$v.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Upcoming"})]})}),(0,$v.jsxs)("button",{onClick:()=>r("/calendar"),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-blue-300 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Schedule SOP"})]})]})]}),(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsxs)("h3",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[(0,$v.jsx)(Vv,{className:"w-5 h-5 text-green-600"}),(0,$v.jsx)("span",{children:"Active Projects"})]}),(0,$v.jsx)("button",{onClick:()=>r("/projects"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Home Setup"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"3 tasks remaining"})]}),(0,$v.jsx)(iy,{className:"w-4 h-4 text-gray-400"})]})}),(0,$v.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Work Projects"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"7 tasks remaining"})]}),(0,$v.jsx)(iy,{className:"w-4 h-4 text-gray-400"})]})}),(0,$v.jsxs)("button",{onClick:()=>r("/projects"),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-green-300 hover:text-green-600 transition-colors flex items-center justify-center space-x-2",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Create Project"})]})]})]}),(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,$v.jsxs)("div",{className:"space-y-2",children:[(0,$v.jsxs)("button",{onClick:()=>r("/calendar"),className:"w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,$v.jsx)(_v,{className:"w-5 h-5 text-blue-600"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Schedule SOPs"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"Plan your procedures"})]})]}),(0,$v.jsxs)("button",{onClick:()=>r("/projects"),className:"w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,$v.jsx)(Vv,{className:"w-5 h-5 text-green-600"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Link to Projects"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"Connect with tasks"})]})]})]})]})]})},Xy=["title","titleId"];function Zy(e,t){let{title:n,titleId:s}=e,i=dm(e,Xy);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Jy=r.forwardRef(Zy),$y=e=>{let{sops:t,contextId:n,userId:s,onSOPsUpdated:i}=e;const[a,o]=(0,r.useState)(!1),l=t.filter((e=>"active"===e.status)),c=l.reduce(((e,t)=>e+t.estimatedDuration),0),u=l.length>0?Math.round(c/l.length):0;return(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Stats"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{className:"flex justify-between",children:[(0,$v.jsx)("span",{className:"text-sm text-gray-600",children:"Total SOPs:"}),(0,$v.jsx)("span",{className:"font-medium",children:t.length})]}),(0,$v.jsxs)("div",{className:"flex justify-between",children:[(0,$v.jsx)("span",{className:"text-sm text-gray-600",children:"Active:"}),(0,$v.jsx)("span",{className:"font-medium text-green-600",children:l.length})]}),(0,$v.jsxs)("div",{className:"flex justify-between",children:[(0,$v.jsx)("span",{className:"text-sm text-gray-600",children:"Avg Duration:"}),(0,$v.jsxs)("span",{className:"font-medium",children:[u,"m"]})]}),(0,$v.jsxs)("div",{className:"flex justify-between",children:[(0,$v.jsx)("span",{className:"text-sm text-gray-600",children:"Total Time:"}),(0,$v.jsxs)("span",{className:"font-medium",children:[Math.round(c/60),"h ",c%60,"m"]})]})]}),0===t.length&&(0,$v.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)(Jy,{className:"w-8 h-8 text-blue-500 mx-auto mb-3"}),(0,$v.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Get Started"}),(0,$v.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Create your first SOPs or try our samples"}),(0,$v.jsxs)("button",{onClick:async()=>{o(!0);const e=[{name:"Morning Routine",description:"Start the day right with a structured morning routine",category:"morning",difficulty:"easy",tags:["daily","morning","wellness"],steps:[{stepNumber:1,title:"Make the bed",description:"Straighten sheets and arrange pillows",estimatedDuration:3,isOptional:!1,type:"standard"},{stepNumber:2,title:"Brush teeth",description:"Brush for at least 2 minutes",estimatedDuration:3,isOptional:!1,type:"standard"},{stepNumber:3,title:"Review daily goals",description:"Check calendar and set 3 priorities",estimatedDuration:5,isOptional:!1,type:"standard"}],assignableMembers:[],requiresConfirmation:!1,canBeEmbedded:!0,isRecurring:!0,createdBy:s,status:"active",isStandalone:!0,executionOrder:"sequential"},{name:"Evening Wind Down",description:"Prepare for a good night's sleep",category:"evening",difficulty:"easy",tags:["daily","evening","sleep"],steps:[{stepNumber:1,title:"Tidy living spaces",description:"Quick 10-minute pickup of main areas",estimatedDuration:10,isOptional:!1,type:"standard"},{stepNumber:2,title:"Plan tomorrow",description:"Review calendar and set out clothes",estimatedDuration:5,isOptional:!1,type:"standard"},{stepNumber:3,title:"Read or meditate",description:"Quiet activity before bed",estimatedDuration:15,isOptional:!0,type:"standard"}],assignableMembers:[],requiresConfirmation:!1,canBeEmbedded:!0,isRecurring:!0,createdBy:s,status:"active",isStandalone:!0,executionOrder:"sequential"},{name:"Weekly Meal Prep",description:"Prepare healthy meals for the week ahead",category:"meal-prep",difficulty:"medium",tags:["weekly","cooking","health"],steps:[{stepNumber:1,title:"Plan meals",description:"Choose 3-4 recipes for the week",estimatedDuration:15,isOptional:!1,type:"standard"},{stepNumber:2,title:"Create shopping list",description:"List all ingredients needed",estimatedDuration:10,isOptional:!1,type:"standard"},{stepNumber:3,title:"Prep ingredients",description:"Wash, chop, and portion ingredients",estimatedDuration:45,isOptional:!1,type:"standard"},{stepNumber:4,title:"Cook and store",description:"Prepare meals and store in containers",estimatedDuration:60,isOptional:!1,type:"standard"}],assignableMembers:[],requiresConfirmation:!1,canBeEmbedded:!1,isRecurring:!0,createdBy:s,status:"active",isStandalone:!0,executionOrder:"sequential"}];try{for(const t of e)await Uy.createSOP(n,J({contextId:n},t));i(),alert("\u2705 Sample SOPs created successfully!")}catch(pD){console.error("Error creating sample SOPs:",pD),alert("Failed to create sample SOPs. Please try again.")}finally{o(!1)}},disabled:a,className:"flex items-center space-x-2 mx-auto px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:a?"Creating...":"Add Sample SOPs"})]})]})})]})},eb=e=>{let{contextId:t,userId:n}=e;const[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(0),p=(0,r.useCallback)((async()=>{try{o(!0);const e=await Uy.getSOPsForContext(t);i(e)}catch(pD){console.error("Error loading SOPs:",pD)}finally{o(!1)}}),[t]);(0,r.useEffect)((()=>{p()}),[p]),(0,r.useEffect)((()=>{h>0&&p()}),[h,p]);return a?(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,$v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsx)("div",{className:"mb-8",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,$v.jsx)(Lv,{className:"w-8 h-8 text-blue-600"})}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"SOP Manager"}),(0,$v.jsx)("p",{className:"text-gray-600",children:"Create, manage, and execute your standard operating procedures"})]})]}),(0,$v.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,$v.jsx)(ly,{className:"w-5 h-5"}),(0,$v.jsx)("span",{children:"New SOP"})]})]})}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,$v.jsx)("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,$v.jsx)(Lv,{className:"w-6 h-6 text-blue-600"})}),(0,$v.jsxs)("div",{className:"ml-4",children:[(0,$v.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total SOPs"}),(0,$v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]})]})}),(0,$v.jsx)("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,$v.jsx)(fy,{className:"w-6 h-6 text-green-600"})}),(0,$v.jsxs)("div",{className:"ml-4",children:[(0,$v.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active"}),(0,$v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.filter((e=>"active"===e.status)).length})]})]})}),(0,$v.jsx)("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,$v.jsx)(_v,{className:"w-6 h-6 text-purple-600"})}),(0,$v.jsxs)("div",{className:"ml-4",children:[(0,$v.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Scheduled"}),(0,$v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"2"})]})]})}),(0,$v.jsx)("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,$v.jsx)(gy,{className:"w-6 h-6 text-orange-600"})}),(0,$v.jsxs)("div",{className:"ml-4",children:[(0,$v.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Avg Duration"}),(0,$v.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[s.length>0?Math.round(s.reduce(((e,t)=>e+t.estimatedDuration),0)/s.length):0,"m"]})]})]})})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,$v.jsx)("div",{className:"lg:col-span-3",children:(0,$v.jsx)(Hy,{sops:s,contextId:t,userId:n,onSOPUpdated:()=>f((e=>e+1)),onSOPEdit:e=>{d(e),c(!0)}})}),(0,$v.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,$v.jsx)($y,{sops:s,contextId:t,userId:n,onSOPsUpdated:()=>f((e=>e+1))}),(0,$v.jsx)(Yy,{contextId:t,userId:n})]})]}),l&&(0,$v.jsx)(Ky,{isOpen:l,onClose:()=>{c(!1),d(null)},contextId:t,userId:n,onSOPCreated:()=>{c(!1),d(null),f((e=>e+1))},editingSOP:u})]})};var tb,nb,rb,sb,ib,ab,ob,lb,cb,ub=n(950),db={},hb=[],fb=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function pb(e,t){for(var n in t)e[n]=t[n];return e}function mb(e){var t=e.parentNode;t&&t.removeChild(e)}function gb(e,t,n){var r,s,i,a={};for(i in t)"key"==i?r=t[i]:"ref"==i?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?tb.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return vb(e,a,r,s,null)}function vb(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++rb:s};return null==s&&null!=nb.vnode&&nb.vnode(i),i}function yb(e){return e.children}function bb(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||fb.test(t)?n:n+"px"}function xb(e,t,n,r,s){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||bb(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||bb(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?Eb:wb,i):e.removeEventListener(t,i?Eb:wb,i);else if("dangerouslySetInnerHTML"!==t){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function wb(e){ib=!0;try{return this.l[e.type+!1](nb.event?nb.event(e):e)}finally{ib=!1}}function Eb(e){ib=!0;try{return this.l[e.type+!0](nb.event?nb.event(e):e)}finally{ib=!1}}function Sb(e,t){this.props=e,this.context=t}function kb(e,t){if(null==t)return e.__?kb(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?kb(e):null}function Cb(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Cb(e)}}function Nb(e){ib?setTimeout(e):lb(e)}function Ab(e){(!e.__d&&(e.__d=!0)&&ab.push(e)&&!_b.__r++||ob!==nb.debounceRendering)&&((ob=nb.debounceRendering)||Nb)(_b)}function _b(){var e,t,n,r,s,i,a,o;for(ab.sort((function(e,t){return e.__v.__b-t.__v.__b}));e=ab.shift();)e.__d&&(t=ab.length,r=void 0,s=void 0,a=(i=(n=e).__v).__e,(o=n.__P)&&(r=[],(s=pb({},i)).__v=i.__v+1,Pb(o,i,s,n.__n,void 0!==o.ownerSVGElement,null!=i.__h?[a]:null,r,null==a?kb(i):a,i.__h),Ob(r,i),i.__e!=a&&Cb(i)),ab.length>t&&ab.sort((function(e,t){return e.__v.__b-t.__v.__b})));_b.__r=0}function Tb(e,t,n,r,s,i,a,o,l,c){var u,d,h,f,p,m,g,v=r&&r.__k||hb,y=v.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(f=n.__k[u]=null==(f=t[u])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?vb(null,f,null,null,f):Array.isArray(f)?vb(yb,{children:f},null,null,null):f.__b>0?vb(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(h=v[u])||h&&f.key==h.key&&f.type===h.type)v[u]=void 0;else for(d=0;d<y;d++){if((h=v[d])&&f.key==h.key&&f.type===h.type){v[d]=void 0;break}h=null}Pb(e,f,h=h||db,s,i,a,o,l,c),p=f.__e,(d=f.ref)&&h.ref!=d&&(g||(g=[]),h.ref&&g.push(h.ref,null,f),g.push(d,f.__c||p,f)),null!=p?(null==m&&(m=p),"function"==typeof f.type&&f.__k===h.__k?f.__d=l=Ib(f,l,e):l=Db(e,f,h,v,p,l),"function"==typeof n.type&&(n.__d=l)):l&&h.__e==l&&l.parentNode!=e&&(l=kb(h))}for(n.__e=m,u=y;u--;)null!=v[u]&&("function"==typeof n.type&&null!=v[u].__e&&v[u].__e==n.__d&&(n.__d=Rb(r).nextSibling),Fb(v[u],v[u]));if(g)for(u=0;u<g.length;u++)Lb(g[u],g[++u],g[++u])}function Ib(e,t,n){for(var r,s=e.__k,i=0;s&&i<s.length;i++)(r=s[i])&&(r.__=e,t="function"==typeof r.type?Ib(r,t,n):Db(n,r,r,s,r.__e,t));return t}function jb(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){jb(e,t)})):t.push(e)),t}function Db(e,t,n,r,s,i){var a,o,l;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||s!=i||null==s.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(s),a=null;else{for(o=i,l=0;(o=o.nextSibling)&&l<r.length;l+=1)if(o==s)break e;e.insertBefore(s,i),a=i}return void 0!==a?a:s.nextSibling}function Rb(e){var t,n,r;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=Rb(n)))return r;return null}function Pb(e,t,n,r,s,i,a,o,l){var c,u,d,h,f,p,m,g,v,y,b,x,w,E,S,k=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,o=t.__e=n.__e,t.__h=null,i=[o]),(c=nb.__b)&&c(t);try{e:if("function"==typeof k){if(g=t.props,v=(c=k.contextType)&&r[c.__c],y=c?v?v.props.value:c.__:r,n.__c?m=(u=t.__c=n.__c).__=u.__E:("prototype"in k&&k.prototype.render?t.__c=u=new k(g,y):(t.__c=u=new Sb(g,y),u.constructor=k,u.render=Ub),v&&v.sub(u),u.props=g,u.state||(u.state={}),u.context=y,u.__n=r,d=u.__d=!0,u.__h=[],u._sb=[]),null==u.__s&&(u.__s=u.state),null!=k.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=pb({},u.__s)),pb(u.__s,k.getDerivedStateFromProps(g,u.__s))),h=u.props,f=u.state,u.__v=t,d)null==k.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==k.getDerivedStateFromProps&&g!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,y),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,y)||t.__v===n.__v){for(t.__v!==n.__v&&(u.props=g,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<u._sb.length;b++)u.__h.push(u._sb[b]);u._sb=[],u.__h.length&&a.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,y),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(h,f,p)}))}if(u.context=y,u.props=g,u.__P=e,x=nb.__r,w=0,"prototype"in k&&k.prototype.render){for(u.state=u.__s,u.__d=!1,x&&x(t),c=u.render(u.props,u.state,u.context),E=0;E<u._sb.length;E++)u.__h.push(u._sb[E]);u._sb=[]}else do{u.__d=!1,x&&x(t),c=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++w<25);u.state=u.__s,null!=u.getChildContext&&(r=pb(pb({},r),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(p=u.getSnapshotBeforeUpdate(h,f)),S=null!=c&&c.type===yb&&null==c.key?c.props.children:c,Tb(e,Array.isArray(S)?S:[S],t,n,r,s,i,a,o,l),u.base=t.__e,t.__h=null,u.__h.length&&a.push(u),m&&(u.__E=u.__=null),u.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Mb(n.__e,t,n,r,s,i,a,l);(c=nb.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=i)&&(t.__e=o,t.__h=!!l,i[i.indexOf(o)]=null),nb.__e(e,t,n)}}function Ob(e,t){nb.__c&&nb.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){nb.__e(e,t.__v)}}))}function Mb(e,t,n,r,s,i,a,o){var l,c,u,d=n.props,h=t.props,f=t.type,p=0;if("svg"===f&&(s=!0),null!=i)for(;p<i.length;p++)if((l=i[p])&&"setAttribute"in l==!!f&&(f?l.localName===f:3===l.nodeType)){e=l,i[p]=null;break}if(null==e){if(null===f)return document.createTextNode(h);e=s?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,h.is&&h),i=null,o=!1}if(null===f)d===h||o&&e.data===h||(e.data=h);else{if(i=i&&tb.call(e.childNodes),c=(d=n.props||db).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!o){if(null!=i)for(d={},p=0;p<e.attributes.length;p++)d[e.attributes[p].name]=e.attributes[p].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,r,s){var i;for(i in n)"children"===i||"key"===i||i in t||xb(e,i,null,n[i],r);for(i in t)s&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||xb(e,i,t[i],n[i],r)}(e,h,d,s,o),u)t.__k=[];else if(p=t.props.children,Tb(e,Array.isArray(p)?p:[p],t,n,r,s&&"foreignObject"!==f,i,a,i?i[0]:n.__k&&kb(n,0),o),null!=i)for(p=i.length;p--;)null!=i[p]&&mb(i[p]);o||("value"in h&&void 0!==(p=h.value)&&(p!==e.value||"progress"===f&&!p||"option"===f&&p!==d.value)&&xb(e,"value",p,d.value,!1),"checked"in h&&void 0!==(p=h.checked)&&p!==e.checked&&xb(e,"checked",p,d.checked,!1))}return e}function Lb(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){nb.__e(e,n)}}function Fb(e,t,n){var r,s;if(nb.unmount&&nb.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Lb(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){nb.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&Fb(r[s],t,n||"function"!=typeof e.type);n||null==e.__e||mb(e.__e),e.__=e.__e=e.__d=void 0}function Ub(e,t,n){return this.constructor(e,n)}function Bb(e,t,n){var r,s,i;nb.__&&nb.__(e,t),s=(r="function"==typeof n)?null:n&&n.__k||t.__k,i=[],Pb(t,e=(!r&&n||t).__k=gb(yb,null,[e]),s||db,db,void 0!==t.ownerSVGElement,!r&&n?[n]:s?null:t.firstChild?tb.call(t.childNodes):null,i,!r&&n?n:s?s.__e:t.firstChild,r),Ob(i,e)}function zb(e,t){var n={__c:t="__cC"+cb++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,Ab(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}tb=hb.slice,nb={__e:function(e,t,n,r){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&null!=i.getDerivedStateFromError&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(e,r||{}),a=s.__d),a)return s.__E=s}catch(t){e=t}throw e}},rb=0,sb=function(e){return null!=e&&void 0===e.constructor},ib=!1,Sb.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=pb({},this.state),"function"==typeof e&&(e=e(pb({},n),this.props)),e&&pb(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),Ab(this))},Sb.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ab(this))},Sb.prototype.render=yb,ab=[],lb="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_b.__r=0,cb=0;var Hb,Vb,Wb,Gb=[],qb=[],Qb=nb.__b,Kb=nb.__r,Yb=nb.diffed,Xb=nb.__c,Zb=nb.unmount;function Jb(){for(var e;e=Gb.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(tx),e.__H.__h.forEach(nx),e.__H.__h=[]}catch(ab){e.__H.__h=[],nb.__e(ab,e.__v)}}nb.__b=function(e){Hb=null,Qb&&Qb(e)},nb.__r=function(e){Kb&&Kb(e);var t=(Hb=e.__c).__H;t&&(Vb===Hb?(t.__h=[],Hb.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=qb,e.__N=e.i=void 0}))):(t.__h.forEach(tx),t.__h.forEach(nx),t.__h=[])),Vb=Hb},nb.diffed=function(e){Yb&&Yb(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Gb.push(t)&&Wb===nb.requestAnimationFrame||((Wb=nb.requestAnimationFrame)||ex)(Jb)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==qb&&(e.__=e.__V),e.i=void 0,e.__V=qb}))),Vb=Hb=null},nb.__c=function(e,t){t.some((function(e){try{e.__h.forEach(tx),e.__h=e.__h.filter((function(e){return!e.__||nx(e)}))}catch(rb){t.some((function(e){e.__h&&(e.__h=[])})),t=[],nb.__e(rb,e.__v)}})),Xb&&Xb(e,t)},nb.unmount=function(e){Zb&&Zb(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{tx(e)}catch(e){t=e}})),n.__H=void 0,t&&nb.__e(t,n.__v))};var $b="function"==typeof requestAnimationFrame;function ex(e){var t,n=function(){clearTimeout(r),$b&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);$b&&(t=requestAnimationFrame(n))}function tx(e){var t=Hb,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Hb=t}function nx(e){var t=Hb;e.__c=e.__(),Hb=t}function rx(e,t){for(var n in t)e[n]=t[n];return e}function sx(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function ix(e){this.props=e}(ix.prototype=new Sb).isPureReactComponent=!0,ix.prototype.shouldComponentUpdate=function(e,t){return sx(this.props,e)||sx(this.state,t)};var ax=nb.__b;nb.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ax&&ax(e)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var ox=nb.__e;nb.__e=function(e,t,n,r){if(e.then)for(var s,i=t;i=i.__;)if((s=i.__c)&&s.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),s.__c(e,t);ox(e,t,n,r)};var lx=nb.unmount;function cx(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=rx({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return cx(e,t,n)}))),e}function ux(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return ux(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function dx(){this.__u=0,this.t=null,this.__b=null}function hx(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function fx(){this.u=null,this.o=null}nb.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),lx&&lx(e)},(dx.prototype=new Sb).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var s=hx(r.__v),i=!1,a=function(){i||(i=!0,n.__R=null,s?s(o):o())};n.__R=a;var o=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=ux(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}},l=!0===t.__h;r.__u++||l||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},dx.prototype.componentWillUnmount=function(){this.t=[]},dx.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=cx(this.__b,n,r.__O=r.__P)}this.__b=null}var s=t.__a&&gb(yb,null,e.fallback);return s&&(s.__h=null),[gb(yb,null,t.__a?null:e.children),s]};var px=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function mx(e){return this.getChildContext=function(){return e.context},e.children}function gx(e){var t=this,n=e.i;t.componentWillUnmount=function(){Bb(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),Bb(gb(mx,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function vx(e,t){var n=gb(gx,{__v:e,i:t});return n.containerInfo=t,n}(fx.prototype=new Sb).__a=function(e){var t=this,n=hx(t.__v),r=t.o.get(e);return r[0]++,function(s){var i=function(){t.props.revealOrder?(r.push(s),px(t,e,r)):s()};n?n(i):i()}},fx.prototype.render=function(e){this.u=null,this.o=new Map;var t=jb(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},fx.prototype.componentDidUpdate=fx.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){px(e,n,t)}))};var yx="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,bx=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,xx="undefined"!=typeof document,wx=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};Sb.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(Sb.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Ex=nb.event;function Sx(){}function kx(){return this.cancelBubble}function Cx(){return this.defaultPrevented}nb.event=function(e){return Ex&&(e=Ex(e)),e.persist=Sx,e.isPropagationStopped=kx,e.isDefaultPrevented=Cx,e.nativeEvent=e};var Nx={configurable:!0,get:function(){return this.class}},Ax=nb.vnode;nb.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var s=-1===t.indexOf("-");for(var i in r={},n){var a=n[i];xx&&"children"===i&&"noscript"===t||"value"===i&&"defaultValue"in n&&null==a||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===a?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!wx(n.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():s&&bx.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===a&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),r[i]&&(i="oninputCapture")),r[i]=a)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=jb(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=jb(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r,n.class!=n.className&&(Nx.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Nx))}e.$$typeof=yx,Ax&&Ax(e)};var _x=nb.__r;nb.__r=function(e){_x&&_x(e),e.__c};const Tx=[],Ix=new Map;function jx(e){Tx.push(e),Ix.forEach((t=>{Rx(t,e)}))}function Dx(e){let t=Ix.get(e);if(!t||!t.isConnected){if(t=e.querySelector("style[data-fullcalendar]"),!t){t=document.createElement("style"),t.setAttribute("data-fullcalendar","");const n=function(){void 0===Px&&(Px=function(){const e=document.querySelector('meta[name="csp-nonce"]');if(e&&e.hasAttribute("content"))return e.getAttribute("content");const t=document.querySelector("script[nonce]");if(t)return t.nonce||"";return""}());return Px}();n&&(t.nonce=n);const r=e===document?document.head:e,s=e===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(t,s)}Ix.set(e,t),function(e){for(const t of Tx)Rx(e,t)}(t)}}function Rx(e,t){const{sheet:n}=e,r=n.cssRules.length;t.split("}").forEach(((e,t)=>{(e=e.trim())&&n.insertRule(e+"}",r+t)}))}let Px;"undefined"!==typeof document&&Dx(document);jx(':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}');class Ox{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==e?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,{pauseDepths:n}=this;if(e in n){if(t)delete n[e];else{n[e]-=1,n[e]<=0&&delete n[e]}this.tryDrain()}}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Mx(e){e.parentNode&&e.parentNode.removeChild(e)}function Lx(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(Fx(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}function Fx(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector).call(e,t)}const Ux=/(top|left|right|bottom|width|height)$/i;function Bx(e,t){for(let n in t)zx(e,n,t[n])}function zx(e,t,n){null==n?e.style[t]="":"number"===typeof n&&Ux.test(t)?e.style[t]="".concat(n,"px"):e.style[t]=n}function Hx(e){var t,n;return null!==(n=null===(t=e.composedPath)||void 0===t?void 0:t.call(e)[0])&&void 0!==n?n:e.target}let Vx=0;function Wx(){return Vx+=1,"fc-dom-"+Vx}function Gx(e){e.preventDefault()}function qx(e,t,n,r){let s=function(e,t){return n=>{let r=Lx(n.target,e);r&&t.call(r,n,r)}}(n,r);return e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}}const Qx=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function Kx(e){return Object.assign({onClick:e},Yx(e))}function Yx(e){return{tabIndex:0,onKeyDown(t){"Enter"!==t.key&&" "!==t.key||(e(t),t.preventDefault())}}}let Xx=0;function Zx(){return Xx+=1,String(Xx)}function Jx(){document.body.classList.add("fc-not-allowed")}function $x(){document.body.classList.remove("fc-not-allowed")}function ew(e,t,n){return n.func?n.func(e,t):function(e,t){if(!e&&!t)return 0;if(null==t)return-1;if(null==e)return 1;if("string"===typeof e||"string"===typeof t)return String(e).localeCompare(String(t));return e-t}(e[n.field],t[n.field])*(n.order||1)}function tw(e,t){let n=String(e);return"000".substr(0,t-n.length)+n}function nw(e,t,n){return"function"===typeof e?e(...t):"string"===typeof e?t.reduce(((e,t,n)=>e.replace("$"+n,t||"")),e):n}function rw(e,t){return e-t}function sw(e){return e%1===0}function iw(e){let t=e.querySelector(".fc-scrollgrid-shrink-frame"),n=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+n.getBoundingClientRect().width}const aw=["years","months","days","milliseconds"],ow=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function lw(e,t){return"string"===typeof e?function(e){let t=ow.exec(e);if(t){let e=t[1]?-1:1;return{years:0,months:0,days:e*(t[2]?parseInt(t[2],10):0),milliseconds:e*(60*(t[3]?parseInt(t[3],10):0)*60*1e3+60*(t[4]?parseInt(t[4],10):0)*1e3+1e3*(t[5]?parseInt(t[5],10):0)+(t[6]?parseInt(t[6],10):0))}}return null}(e):"object"===typeof e&&e?cw(e):"number"===typeof e?cw({[t||"milliseconds"]:e}):null}function cw(e){let t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:60*(e.hours||e.hour||0)*60*1e3+60*(e.minutes||e.minute||0)*1e3+1e3*(e.seconds||e.second||0)+(e.milliseconds||e.millisecond||e.ms||0)},n=e.weeks||e.week;return n&&(t.days+=7*n,t.specifiedWeeks=!0),t}function uw(e,t){return{years:e.years+t.years,months:e.months+t.months,days:e.days+t.days,milliseconds:e.milliseconds+t.milliseconds}}function dw(e){return hw(e)/864e5}function hw(e){return 31536e6*e.years+2592e6*e.months+864e5*e.days+e.milliseconds}function fw(e,t){let n=null;for(let r=0;r<aw.length;r+=1){let s=aw[r];if(t[s]){let r=e[s]/t[s];if(!sw(r)||null!==n&&n!==r)return null;n=r}else if(e[s])return null}return n}function pw(e){let t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%6e4!==0)return{unit:"second",value:t/1e3};if(t%36e5!==0)return{unit:"minute",value:t/6e4};if(t)return{unit:"hour",value:t/36e5}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function mw(e,t,n){if(e===t)return!0;let r,s=e.length;if(s!==t.length)return!1;for(r=0;r<s;r+=1)if(!(n?n(e[r],t[r]):e[r]===t[r]))return!1;return!0}const gw=["sun","mon","tue","wed","thu","fri","sat"];function vw(e,t){let n=Aw(e);return n[2]+=7*t,_w(n)}function yw(e,t){let n=Aw(e);return n[2]+=t,_w(n)}function bw(e,t){let n=Aw(e);return n[6]+=t,_w(n)}function xw(e,t){return(t.valueOf()-e.valueOf())/864e5}function ww(e,t){return Iw(e)===Iw(t)?Math.round(xw(e,t)):null}function Ew(e){return _w([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function Sw(e,t,n,r){let s=_w([t,0,1+kw(t,n,r)]),i=Ew(e),a=Math.round(xw(s,i));return Math.floor(a/7)+1}function kw(e,t,n){let r=7+t-n;return-((7+_w([e,0,r]).getUTCDay()-t)%7)+r-1}function Cw(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function Nw(e){return new Date(e[0],e[1]||0,null==e[2]?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function Aw(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function _w(e){return 1===e.length&&(e=e.concat([0])),new Date(Date.UTC(...e))}function Tw(e){return!isNaN(e.valueOf())}function Iw(e){return 1e3*e.getUTCHours()*60*60+1e3*e.getUTCMinutes()*60+1e3*e.getUTCSeconds()+e.getUTCMilliseconds()}function jw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(null==t?r=r.replace("Z",""):0!==t&&(r=r.replace("Z",Rw(t,!0)))),r}function Dw(e){return e.toISOString().replace(/T.*$/,"")}function Rw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e<0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),i=Math.round(r%60);return t?"".concat(n+tw(s,2),":").concat(tw(i,2)):"GMT".concat(n).concat(s).concat(i?":".concat(tw(i,2)):"")}function Pw(e,t,n){let r,s;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];if(r){if(!mw(r,a)){n&&n(s);let r=e.apply(this,a);t&&t(r,s)||(s=r)}}else s=e.apply(this,a);return r=a,s}}function Ow(e,t,n){let r,s;return i=>{if(r){if(!fE(r,i)){n&&n(s);let r=e.call(this,i);t&&t(r,s)||(s=r)}}else s=e.call(this,i);return r=i,s}}const Mw={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Lw={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Fw=/\s*([ap])\.?m\.?/i,Uw=/,/g,Bw=/\s+/g,zw=/\u200e/g,Hw=/UTC|GMT/;class Vw{constructor(e){let t={},n={},r=9;for(let s in e)if(s in Mw){n[s]=e[s];Mw[s]<9&&(r=Math.min(Mw[s],r))}else t[s]=e[s],s in Lw&&(r=Math.min(Lw[s],r));this.standardDateProps=t,this.extendedSettings=n,this.smallestUnitNum=r,this.buildFormattingFunc=Pw(Ww)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,n,r){let{standardDateProps:s,extendedSettings:i}=this,a=function(e,t,n){if(n.getMarkerYear(e)!==n.getMarkerYear(t))return 5;if(n.getMarkerMonth(e)!==n.getMarkerMonth(t))return 4;if(n.getMarkerDay(e)!==n.getMarkerDay(t))return 2;if(Iw(e)!==Iw(t))return 1;return 0}(e.marker,t.marker,n.calendarSystem);if(!a)return this.format(e,n);let o=a;!(o>1)||"numeric"!==s.year&&"2-digit"!==s.year||"numeric"!==s.month&&"2-digit"!==s.month||"numeric"!==s.day&&"2-digit"!==s.day||(o=1);let l=this.format(e,n),c=this.format(t,n);if(l===c)return l;let u=Ww(function(e,t){let n={};for(let r in e)(!(r in Lw)||Lw[r]<=t)&&(n[r]=e[r]);return n}(s,o),i,n),d=u(e),h=u(t),f=function(e,t,n,r){let s=0;for(;s<e.length;){let i=e.indexOf(t,s);if(-1===i)break;let a=e.substr(0,i);s=i+t.length;let o=e.substr(s),l=0;for(;l<n.length;){let e=n.indexOf(r,l);if(-1===e)break;let t=n.substr(0,e);l=e+r.length;let s=n.substr(l);if(a===t&&o===s)return{before:a,after:o}}}return null}(l,d,c,h),p=i.separator||r||n.defaultSeparator||"";return f?f.before+d+p+h+f.after:l+p+c}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Ww(e,t,n){let r=Object.keys(e).length;return 1===r&&"short"===e.timeZoneName?e=>Rw(e.timeZoneOffset):0===r&&t.week?e=>function(e,t,n,r,s){let i=[];"long"===s?i.push(n):"short"!==s&&"narrow"!==s||i.push(t);"long"!==s&&"short"!==s||i.push(" ");i.push(r.simpleNumberFormat.format(e)),"rtl"===r.options.direction&&i.reverse();return i.join("")}(n.computeWeekNumber(e.marker),n.weekText,n.weekTextLong,n.locale,t.week):function(e,t,n){e=Object.assign({},e),t=Object.assign({},t),function(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit"));"long"===e.timeZoneName&&(e.timeZoneName="short");t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}(e,t),e.timeZone="UTC";let r,s=new Intl.DateTimeFormat(n.locale.codes,e);if(t.omitZeroMinute){let t=Object.assign({},e);delete t.minute,r=new Intl.DateTimeFormat(n.locale.codes,t)}return i=>{let a,{marker:o}=i;return a=r&&!o.getUTCMinutes()?r:s,function(e,t,n,r,s){e=e.replace(zw,""),"short"===n.timeZoneName&&(e=function(e,t){let n=!1;e=e.replace(Hw,(()=>(n=!0,t))),n||(e+=" ".concat(t));return e}(e,"UTC"===s.timeZone||null==t.timeZoneOffset?"UTC":Rw(t.timeZoneOffset)));r.omitCommas&&(e=e.replace(Uw,"").trim());r.omitZeroMinute&&(e=e.replace(":00",""));!1===r.meridiem?e=e.replace(Fw,"").trim():"narrow"===r.meridiem?e=e.replace(Fw,((e,t)=>t.toLocaleLowerCase())):"short"===r.meridiem?e=e.replace(Fw,((e,t)=>"".concat(t.toLocaleLowerCase(),"m"))):"lowercase"===r.meridiem&&(e=e.replace(Fw,(e=>e.toLocaleLowerCase())));return e=e.replace(Bw," "),e=e.trim(),e}(a.format(o),i,e,t,n)}}(e,t,n)}function Gw(e,t){let n=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function qw(e,t,n,r){let s=Gw(e,n.calendarSystem);return{date:s,start:s,end:t?Gw(t,n.calendarSystem):null,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class Qw{constructor(e){this.cmdStr=e}format(e,t,n){return t.cmdFormatter(this.cmdStr,qw(e,null,t,n))}formatRange(e,t,n,r){return n.cmdFormatter(this.cmdStr,qw(e,t,n,r))}}class Kw{constructor(e){this.func=e}format(e,t,n){return this.func(qw(e,null,t,n))}formatRange(e,t,n,r){return this.func(qw(e,t,n,r))}}function Yw(e){return"object"===typeof e&&e?new Vw(e):"string"===typeof e?new Qw(e):"function"===typeof e?new Kw(e):null}const Xw={navLinkDayClick:aE,navLinkWeekClick:aE,duration:lw,bootstrapFontAwesome:aE,buttonIcons:aE,customButtons:aE,defaultAllDayEventDuration:lw,defaultTimedEventDuration:lw,nextDayThreshold:lw,scrollTime:lw,scrollTimeReset:Boolean,slotMinTime:lw,slotMaxTime:lw,dayPopoverFormat:Yw,slotDuration:lw,snapDuration:lw,headerToolbar:aE,footerToolbar:aE,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Yw,dayHeaderClassNames:aE,dayHeaderContent:aE,dayHeaderDidMount:aE,dayHeaderWillUnmount:aE,dayCellClassNames:aE,dayCellContent:aE,dayCellDidMount:aE,dayCellWillUnmount:aE,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:aE,weekNumbers:Boolean,weekNumberClassNames:aE,weekNumberContent:aE,weekNumberDidMount:aE,weekNumberWillUnmount:aE,editable:Boolean,viewClassNames:aE,viewDidMount:aE,viewWillUnmount:aE,nowIndicator:Boolean,nowIndicatorClassNames:aE,nowIndicatorContent:aE,nowIndicatorDidMount:aE,nowIndicatorWillUnmount:aE,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:aE,locale:aE,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:aE,eventOrder:function(e){let t,n,r=[],s=[];for("string"===typeof e?s=e.split(/\s*,\s*/):"function"===typeof e?s=[e]:Array.isArray(e)&&(s=e),t=0;t<s.length;t+=1)n=s[t],"string"===typeof n?r.push("-"===n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"===typeof n&&r.push({func:n});return r},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:aE,contentHeight:aE,direction:String,weekNumberFormat:Yw,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:aE,initialDate:aE,now:aE,eventDataTransform:aE,stickyHeaderDates:aE,stickyFooterScrollbar:aE,viewHeight:aE,defaultAllDay:Boolean,eventSourceFailure:aE,eventSourceSuccess:aE,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:aE,eventConstraint:aE,eventAllow:aE,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:aE,eventContent:aE,eventDidMount:aE,eventWillUnmount:aE,selectConstraint:aE,selectOverlap:aE,selectAllow:aE,droppable:Boolean,unselectCancel:String,slotLabelFormat:aE,slotLaneClassNames:aE,slotLaneContent:aE,slotLaneDidMount:aE,slotLaneWillUnmount:aE,slotLabelClassNames:aE,slotLabelContent:aE,slotLabelDidMount:aE,slotLabelWillUnmount:aE,dayMaxEvents:aE,dayMaxEventRows:aE,dayMinWidth:Number,slotLabelInterval:lw,allDayText:String,allDayClassNames:aE,allDayContent:aE,allDayDidMount:aE,allDayWillUnmount:aE,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Yw,rerenderDelay:Number,moreLinkText:aE,moreLinkHint:aE,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:aE,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:lw,hiddenDays:aE,fixedWeekCount:Boolean,validRange:aE,visibleRange:aE,titleFormat:aE,eventInteractive:Boolean,noEventsText:String,viewHint:aE,navLinkHint:aE,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:aE,moreLinkClassNames:aE,moreLinkContent:aE,moreLinkDidMount:aE,moreLinkWillUnmount:aE,monthStartFormat:Yw,handleCustomRendering:aE,customRenderingMetaMap:aE,customRenderingReplaces:Boolean},Zw={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},Jw={datesSet:aE,eventsSet:aE,eventAdd:aE,eventChange:aE,eventRemove:aE,windowResize:aE,eventClick:aE,eventMouseEnter:aE,eventMouseLeave:aE,select:aE,unselect:aE,loading:aE,_unmount:aE,_beforeprint:aE,_afterprint:aE,_noEventDrop:aE,_noEventResize:aE,_resize:aE,_scrollRequest:aE},$w={buttonText:aE,buttonHints:aE,views:aE,plugins:aE,initialEvents:aE,events:aE,eventSources:aE},eE={headerToolbar:tE,footerToolbar:tE,buttonText:tE,buttonHints:tE,buttonIcons:tE,dateIncrement:tE,plugins:nE,events:nE,eventSources:nE,resources:nE};function tE(e,t){return"object"===typeof e&&"object"===typeof t&&e&&t?fE(e,t):e===t}function nE(e,t){return Array.isArray(e)&&Array.isArray(t)?mw(e,t):e===t}const rE={type:String,component:aE,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:aE,usesMinMaxTime:Boolean,classNames:aE,content:aE,didMount:aE,willUnmount:aE};function sE(e){return lE(e,eE)}function iE(e,t){let n={},r={};for(let s in t)s in e&&(n[s]=t[s](e[s]));for(let s in e)s in t||(r[s]=e[s]);return{refined:n,extra:r}}function aE(e){return e}const{hasOwnProperty:oE}=Object.prototype;function lE(e,t){let n={};if(t)for(let r in t)if(t[r]===tE){let t=[];for(let s=e.length-1;s>=0;s-=1){let i=e[s][r];if("object"===typeof i&&i)t.unshift(i);else if(void 0!==i){n[r]=i;break}}t.length&&(n[r]=lE(t))}for(let r=e.length-1;r>=0;r-=1){let t=e[r];for(let e in t)e in n||(n[e]=t[e])}return n}function cE(e,t){let n={};for(let r in e)t(e[r],r)&&(n[r]=e[r]);return n}function uE(e,t){let n={};for(let r in e)n[r]=t(e[r],r);return n}function dE(e){let t={};for(let n of e)t[n]=!0;return t}function hE(e){let t=[];for(let n in e)t.push(e[n]);return t}function fE(e,t){if(e===t)return!0;for(let n in e)if(oE.call(e,n)&&!(n in t))return!1;for(let n in t)if(oE.call(t,n)&&e[n]!==t[n])return!1;return!0}const pE=/^on[A-Z]/;function mE(e,t){let n=[];for(let r in e)oE.call(e,r)&&(r in t||n.push(r));for(let r in t)oE.call(t,r)&&e[r]!==t[r]&&n.push(r);return n}function gE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;for(let r in t)if(!(r in e)||!vE(e[r],t[r],n[r]))return!1;for(let r in e)if(!(r in t))return!1;return!0}function vE(e,t,n){return e===t||!0===n||!!n&&n(e,t)}let yE={};var bE,xE;bE="gregory",xE=class{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return _w(e)}markerToArray(e){return Aw(e)}},yE[bE]=xE;const wE=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;class EE{constructor(e){let t=this.timeZone=e.timeZone,n="local"!==t&&"UTC"!==t;e.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=Boolean(!n||this.namedTimeZoneImpl),this.calendarSystem=function(e){return new yE[e]}(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,"ISO"===e.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"===typeof e.firstDay&&(this.weekDow=e.firstDay),"function"===typeof e.weekNumberCalculation&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=null!=e.weekText?e.weekText:e.locale.options.weekText,this.weekTextLong=(null!=e.weekTextLong?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return null===t?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):_w(Cw(new Date))}createMarkerMeta(e){if("string"===typeof e)return this.parse(e);let t=null;return"number"===typeof e?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=_w(e)),null!==t&&Tw(t)?{marker:t,isTimeUnspecified:!1,forcedTzo:null}:null}parse(e){let t=function(e){let t=wE.exec(e);if(t){let e=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?1e3*Number("0.".concat(t[12])):0));if(Tw(e)){let n=null;return t[13]&&(n=("-"===t[15]?-1:1)*(60*Number(t[16]||0)+Number(t[18]||0))),{marker:e,isTimeUnspecified:!t[6],timeZoneOffset:n}}}return null}(e);if(null===t)return null;let{marker:n}=t,r=null;return null!==t.timeZoneOffset&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-60*t.timeZoneOffset*1e3):r=t.timeZoneOffset),{marker:n,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:r}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let n=this.calendarSystem.markerToArray(e);return n[0]+=t.years,n[1]+=t.months,n[2]+=t.days,n[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(n)}subtract(e,t){let n=this.calendarSystem.markerToArray(e);return n[0]-=t.years,n[1]-=t.months,n[2]-=t.days,n[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(n)}addYears(e,t){let n=this.calendarSystem.markerToArray(e);return n[0]+=t,this.calendarSystem.arrayToMarker(n)}addMonths(e,t){let n=this.calendarSystem.markerToArray(e);return n[1]+=t,this.calendarSystem.arrayToMarker(n)}diffWholeYears(e,t){let{calendarSystem:n}=this;return Iw(e)===Iw(t)&&n.getMarkerDay(e)===n.getMarkerDay(t)&&n.getMarkerMonth(e)===n.getMarkerMonth(t)?n.getMarkerYear(t)-n.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:n}=this;return Iw(e)===Iw(t)&&n.getMarkerDay(e)===n.getMarkerDay(t)?n.getMarkerMonth(t)-n.getMarkerMonth(e)+12*(n.getMarkerYear(t)-n.getMarkerYear(e)):null}greatestWholeUnit(e,t){let n=this.diffWholeYears(e,t);return null!==n?{unit:"year",value:n}:(n=this.diffWholeMonths(e,t),null!==n?{unit:"month",value:n}:(n=function(e,t){let n=ww(e,t);return null!==n&&n%7===0?n/7:null}(e,t),null!==n?{unit:"week",value:n}:(n=ww(e,t),null!==n?{unit:"day",value:n}:(n=function(e,t){return(t.valueOf()-e.valueOf())/36e5}(e,t),sw(n)?{unit:"hour",value:n}:(n=function(e,t){return(t.valueOf()-e.valueOf())/6e4}(e,t),sw(n)?{unit:"minute",value:n}:(n=function(e,t){return(t.valueOf()-e.valueOf())/1e3}(e,t),sw(n)?{unit:"second",value:n}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,n){let r;return n.years&&(r=this.diffWholeYears(e,t),null!==r)?r/(dw(n)/365):n.months&&(r=this.diffWholeMonths(e,t),null!==r)?r/function(e){return dw(e)/30}(n):n.days&&(r=ww(e,t),null!==r)?r/dw(n):(t.valueOf()-e.valueOf())/hw(n)}startOf(e,t){return"year"===t?this.startOfYear(e):"month"===t?this.startOfMonth(e):"week"===t?this.startOfWeek(e):"day"===t?Ew(e):"hour"===t?function(e){return _w([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}(e):"minute"===t?function(e){return _w([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}(e):"second"===t?function(e){return _w([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):function(e,t,n){let r=e.getUTCFullYear(),s=Sw(e,r,t,n);if(s<1)return Sw(e,r-1,t,n);let i=Sw(e,r+1,t,n);return i>=1?Math.min(s,i):s}(e,this.weekDow,this.weekDoy)}format(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.format({marker:e,timeZoneOffset:null!=n.forcedTzo?n.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r.isEndExclusive&&(t=bw(t,-1)),n.formatRange({marker:e,timeZoneOffset:null!=r.forcedStartTzo?r.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:null!=r.forcedEndTzo?r.forcedEndTzo:this.offsetForMarker(t)},this,r.defaultSeparator)}formatIso(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;return t.omitTimeZoneOffset||(n=null!=t.forcedTzo?t.forcedTzo:this.offsetForMarker(e)),jw(e,n,t.omitTime)}timestampToMarker(e){return"local"===this.timeZone?_w(Cw(new Date(e))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?_w(this.namedTimeZoneImpl.timestampToArray(e)):new Date(e)}offsetForMarker(e){return"local"===this.timeZone?-Nw(Aw(e)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Aw(e)):null}toDate(e,t){return"local"===this.timeZone?Nw(Aw(e)):"UTC"===this.timeZone?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(Aw(e))*60):new Date(e.valueOf()-(t||0))}}class SE{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,n;if("object"===typeof e&&e){for(n in t=Object.assign({},this.iconClasses),e)t[n]=this.applyIconOverridePrefix(e[n]);this.iconClasses=t}else!1===e&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&0!==e.indexOf(t)&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let n;return n=t&&this.rtlIconClasses&&this.rtlIconClasses[e]||this.iconClasses[e],n?"".concat(this.baseIconClass," ").concat(n):""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?"".concat(this.baseIconClass," ").concat(this.applyIconOverridePrefix(t)):""}}function kE(e){e();let t=nb.debounceRendering,n=[];for(nb.debounceRendering=function(e){n.push(e)},Bb(gb(CE,{}),document.createElement("div"));n.length;)n.shift()();nb.debounceRendering=t}SE.prototype.classes={},SE.prototype.iconClasses={},SE.prototype.baseIconClass="",SE.prototype.iconOverridePrefix="";class CE extends Sb{render(){return gb("div",{})}componentDidMount(){this.setState({})}}function NE(e){let t=zb(e),n=t.Provider;return t.Provider=function(){let e=!this.getChildContext,t=n.apply(this,arguments);if(e){let e=[];this.shouldComponentUpdate=t=>{this.props.value!==t.value&&e.forEach((e=>{e.context=t.value,e.forceUpdate()}))},this.sub=t=>{e.push(t);let n=t.componentWillUnmount;t.componentWillUnmount=()=>{e.splice(e.indexOf(t),1),n&&n.call(t)}}}return t},t}class AE{constructor(e,t,n,r){this.execFunc=e,this.emitter=t,this.scrollTime=n,this.scrollTimeReset=r,this.handleScrollRequest=e=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},e),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const _E=NE({});function TE(e,t,n,r,s,i,a,o,l,c,u,d,h,f){return{dateEnv:s,nowManager:i,options:n,pluginHooks:o,emitter:u,dispatch:l,getCurrentData:c,calendarApi:d,viewSpec:e,viewApi:t,dateProfileGenerator:r,theme:a,isRtl:"rtl"===n.direction,addResizeHandler(e){u.on("_resize",e)},removeResizeHandler(e){u.off("_resize",e)},createScrollResponder:e=>new AE(e,u,lw(n.scrollTime),n.scrollTimeReset),registerInteractiveComponent:h,unregisterInteractiveComponent:f}}class IE extends Sb{shouldComponentUpdate(e,t){return this.debug&&console.log(mE(e,this.props),mE(t,this.state)),!gE(this.props,e,this.propEquality)||!gE(this.state,t,this.stateEquality)}safeSetState(e){gE(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}IE.addPropsEquality=function(e){let t=Object.create(this.prototype.propEquality);Object.assign(t,e),this.prototype.propEquality=t},IE.addStateEquality=function(e){let t=Object.create(this.prototype.stateEquality);Object.assign(t,e),this.prototype.stateEquality=t},IE.contextType=_E,IE.prototype.propEquality={},IE.prototype.stateEquality={};class jE extends IE{}function DE(e,t){"function"===typeof e?e(t):e&&(e.current=t)}jE.contextType=_E;class RE extends jE{constructor(){super(...arguments),this.id=Zx(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:n}=this.props;t.customRenderingReplaces&&PE(n,t)||this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&DE(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:n}=t,{customGenerator:r,defaultGenerator:s,renderProps:i}=e,a=OE(e,[],this.handleEl);let o,l,c=!1,u=[];if(null!=r){const e="function"===typeof r?r(i,gb):r;if(!0===e)c=!0;else{const t=e&&"object"===typeof e;t&&"html"in e?a.dangerouslySetInnerHTML={__html:e.html}:t&&"domNodes"in e?u=Array.prototype.slice.call(e.domNodes):(t?sb(e):"function"!==typeof e)?o=e:l=e}}else c=!PE(e.generatorName,n);return c&&s&&(o=s(i)),this.queuedDomNodes=u,this.currentGeneratorMeta=l,gb(e.elTag,a,o)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:n,context:r}=this,{handleCustomRendering:s,customRenderingMetaMap:i}=r.options;if(s){const r=null!==(t=this.currentGeneratorMeta)&&void 0!==t?t:null===i||void 0===i?void 0:i[n.generatorName];r&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:r},n),{elClasses:(n.elClasses||[]).filter(ME)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,n=this.base;if(!mw(e,t)){t.forEach(Mx);for(let t of e)n.appendChild(t);this.currentDomNodes=e}}}function PE(e,t){var n;return Boolean(t.handleCustomRendering&&e&&(null===(n=t.customRenderingMetaMap)||void 0===n?void 0:n[e]))}function OE(e,t,n){const r=Object.assign(Object.assign({},e.elAttrs),{ref:n});return(e.elClasses||t)&&(r.className=(e.elClasses||[]).concat(t||[]).concat(r.className||[]).filter(Boolean).join(" ")),e.elStyle&&(r.style=e.elStyle),r}function ME(e){return Boolean(e)}RE.addPropsEquality({elClasses:mw,elStyle:fE,elAttrs:function(e,t){const n=mE(e,t);for(let r of n)if(!pE.test(r))return!1;return!0},renderProps:fE});const LE=NE(0);class FE extends Sb{constructor(){super(...arguments),this.InnerContent=UE.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(DE(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=function(e,t){const n="function"===typeof e?e(t):e||[];return"string"===typeof n?[n]:n}(e.classNameGenerator,e.renderProps);if(e.children){const n=OE(e,t,this.handleEl),r=e.children(this.InnerContent,e.renderProps,n);return e.elTag?gb(e.elTag,n,r):r}return gb(RE,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?null===(t=(e=this.props).didMount)||void 0===t||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;null===(t=(e=this.props).willUnmount)||void 0===t||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}function UE(e,t){const n=e.props;return gb(RE,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:e.context},t))}FE.contextType=LE;class BE extends jE{render(){let{props:e,context:t}=this,{options:n}=t,r={view:t.viewApi};return gb(FE,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...zE(e.viewSpec),...e.elClasses||[]],renderProps:r,classNameGenerator:n.viewClassNames,generatorName:void 0,didMount:n.viewDidMount,willUnmount:n.viewWillUnmount}),(()=>e.children))}}function zE(e){return["fc-".concat(e.type,"-view"),"fc-view"]}function HE(e,t){let n,r,s=[],{start:i}=t;for(e.sort(VE),n=0;n<e.length;n+=1)r=e[n],r.start>i&&s.push({start:i,end:r.start}),r.end>i&&(i=r.end);return i<t.end&&s.push({start:i,end:t.end}),s}function VE(e,t){return e.start.valueOf()-t.start.valueOf()}function WE(e,t){let{start:n,end:r}=e,s=null;return null!==t.start&&(n=null===n?t.start:new Date(Math.max(n.valueOf(),t.start.valueOf()))),null!=t.end&&(r=null===r?t.end:new Date(Math.min(r.valueOf(),t.end.valueOf()))),(null===n||null===r||n<r)&&(s={start:n,end:r}),s}function GE(e,t){return(null===e.end||null===t.start||e.end>t.start)&&(null===e.start||null===t.end||e.start<t.end)}function qE(e,t){return(null===e.start||null!==t.start&&t.start>=e.start)&&(null===e.end||null!==t.end&&t.end<=e.end)}function QE(e,t){return(null===e.start||t>=e.start)&&(null===e.end||t<e.end)}function KE(e){let t=Math.floor(xw(e.start,e.end))||1,n=Ew(e.start);return{start:n,end:yw(n,t)}}function YE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lw(0),n=null,r=null;if(e.end){r=Ew(e.end);let n=e.end.valueOf()-r.valueOf();n&&n>=hw(t)&&(r=yw(r,1))}return e.start&&(n=Ew(e.start),r&&r<=n&&(r=yw(n,1))),{start:n,end:r}}function XE(e,t,n,r){return"year"===r?lw(n.diffWholeYears(e,t),"year"):"month"===r?lw(n.diffWholeMonths(e,t),"month"):function(e,t){let n=Ew(e),r=Ew(t);return{years:0,months:0,days:Math.round(xw(n,r)),milliseconds:t.valueOf()-r.valueOf()-(e.valueOf()-n.valueOf())}}(e,t)}class ZE{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,n){let{dateEnv:r}=this.props,s=r.subtract(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,n)}buildNext(e,t,n){let{dateEnv:r}=this.props,s=r.add(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,n)}build(e,t){let n,r,s,i,a,o,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],{props:c}=this;var u,d;return n=this.buildValidRange(),n=this.trimHiddenDays(n),l&&(u=e,e=null!=(d=n).start&&u<d.start?d.start:null!=d.end&&u>=d.end?new Date(d.end.valueOf()-1):u),r=this.buildCurrentRangeInfo(e,t),s=/^(year|month|week|day)$/.test(r.unit),i=this.buildRenderRange(this.trimHiddenDays(r.range),r.unit,s),i=this.trimHiddenDays(i),a=i,c.showNonCurrentDates||(a=WE(a,r.range)),a=this.adjustActiveRange(a),a=WE(a,n),o=GE(r.range,n),QE(i,e)||(e=i.start),{currentDate:e,validRange:n,currentRange:r.range,currentRangeUnit:r.unit,isRangeAllDay:s,activeRange:a,renderRange:i,slotMinTime:c.slotMinTime,slotMaxTime:c.slotMaxTime,isValid:o,dateIncrement:this.buildDateIncrement(r.duration)}}buildValidRange(){let e=this.props.validRangeInput,t="function"===typeof e?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let n,{props:r}=this,s=null,i=null,a=null;return r.duration?(s=r.duration,i=r.durationUnit,a=this.buildRangeFromDuration(e,t,s,i)):(n=this.props.dayCount)?(i="day",a=this.buildRangeFromDayCount(e,t,n)):(a=this.buildCustomVisibleRange(e))?i=r.dateEnv.greatestWholeUnit(a.start,a.end).unit:(s=this.getFallbackDuration(),i=pw(s).unit,a=this.buildRangeFromDuration(e,t,s,i)),{duration:s,unit:i,range:a}}getFallbackDuration(){return lw({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:n,slotMinTime:r,slotMaxTime:s}=this.props,{start:i,end:a}=e;return n&&(dw(r)<0&&(i=Ew(i),i=t.add(i,r)),dw(s)>1&&(a=Ew(a),a=yw(a,-1),a=t.add(a,s))),{start:i,end:a}}buildRangeFromDuration(e,t,n,r){let s,i,a,{dateEnv:o,dateAlignment:l}=this.props;if(!l){let{dateIncrement:e}=this.props;l=e&&hw(e)<hw(n)?pw(e).unit:r}function c(){s=o.startOf(e,l),i=o.add(s,n),a={start:s,end:i}}return dw(n)<=1&&this.isHiddenDay(s)&&(s=this.skipHiddenDays(s,t),s=Ew(s)),c(),this.trimHiddenDays(a)||(e=this.skipHiddenDays(e,t),c()),a}buildRangeFromDayCount(e,t,n){let r,{dateEnv:s,dateAlignment:i}=this.props,a=0,o=e;i&&(o=s.startOf(o,i)),o=Ew(o),o=this.skipHiddenDays(o,t),r=o;do{r=yw(r,1),this.isHiddenDay(r)||(a+=1)}while(a<n);return{start:o,end:r}}buildCustomVisibleRange(e){let{props:t}=this,n=t.visibleRangeInput,r="function"===typeof n?n.call(t.calendarApi,t.dateEnv.toDate(e)):n,s=this.refineRange(r);return!s||null!=s.start&&null!=s.end?s:null}buildRenderRange(e,t,n){return e}buildDateIncrement(e){let t,{dateIncrement:n}=this.props;return n||((t=this.props.dateAlignment)?lw(1,t):e||lw({days:1}))}refineRange(e){if(e){let t=function(e,t){let n=null,r=null;return e.start&&(n=t.createMarker(e.start)),e.end&&(r=t.createMarker(e.end)),n||r?n&&r&&r<n?null:{start:n,end:r}:null}(e,this.props.dateEnv);return t&&(t=YE(t)),t}return null}initHiddenDays(){let e,t=this.props.hiddenDays||[],n=[],r=0;for(!1===this.props.weekends&&t.push(0,6),e=0;e<7;e+=1)(n[e]=-1!==t.indexOf(e))||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:t,end:n}=e;return t&&(t=this.skipHiddenDays(t)),n&&(n=this.skipHiddenDays(n,-1,!0)),null==t||null==n||t<n?{start:t,end:n}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(;this.isHiddenDayHash[(e.getUTCDay()+(n?t:0)+7)%7];)e=yw(e,t);return e}}function JE(e,t,n,r){return{instanceId:Zx(),defId:e,range:t,forcedStartTzo:null==n?null:n,forcedEndTzo:null==r?null:r}}function $E(e,t,n){let{dateEnv:r,pluginHooks:s,options:i}=n,{defs:a,instances:o}=e;o=cE(o,(e=>!a[e.defId].recurringDef));for(let l in a){let e=a[l];if(e.recurringDef){let{duration:n}=e.recurringDef;n||(n=e.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration);let a=eS(e,n,t,r,s.recurringTypes);for(let e of a){let t=JE(l,{start:e,end:r.add(e,n)});o[t.instanceId]=t}}}return{defs:a,instances:o}}function eS(e,t,n,r,s){let i=s[e.recurringDef.typeId].expand(e.recurringDef.typeData,{start:r.subtract(n.start,t),end:n.end},r);return e.allDay&&(i=i.map(Ew)),i}const tS={id:String,groupId:String,title:String,url:String,interactive:Boolean},nS={start:aE,end:aE,date:aE,allDay:Boolean},rS=Object.assign(Object.assign(Object.assign({},tS),nS),{extendedProps:aE});function sS(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:aS(n),i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,{refined:o,extra:l}=iS(e,n,s),c=function(e,t){let n=null;e&&(n=e.defaultAllDay);null==n&&(n=t.options.defaultAllDay);return n}(t,n),u=function(e,t,n,r){for(let s=0;s<r.length;s+=1){let i=r[s].parse(e,n);if(i){let{allDay:n}=e;return null==n&&(n=t,null==n&&(n=i.allDayGuess,null==n&&(n=!1))),{allDay:n,duration:i.duration,typeData:i.typeData,typeId:s}}}return null}(o,c,n.dateEnv,n.pluginHooks.recurringTypes);if(u){let e=oS(o,l,t?t.sourceId:"",u.allDay,Boolean(u.duration),n,i);return e.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:e,instance:null}}let d=function(e,t,n,r){let s,i,{allDay:a}=e,o=null,l=!1,c=null,u=null!=e.start?e.start:e.date;if(s=n.dateEnv.createMarkerMeta(u),s)o=s.marker;else if(!r)return null;null!=e.end&&(i=n.dateEnv.createMarkerMeta(e.end));null==a&&(a=null!=t?t:(!s||s.isTimeUnspecified)&&(!i||i.isTimeUnspecified));a&&o&&(o=Ew(o));i&&(c=i.marker,a&&(c=Ew(c)),o&&c<=o&&(c=null));c?l=!0:r||(l=n.options.forceEventDuration||!1,c=n.dateEnv.add(o,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration));return{allDay:a,hasEnd:l,range:{start:o,end:c},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:i?i.forcedTzo:null}}(o,c,n,r);if(d){let e=oS(o,l,t?t.sourceId:"",d.allDay,d.hasEnd,n,i),r=JE(e.defId,d.range,d.forcedStartTzo,d.forcedEndTzo);return a&&e.publicId&&a[e.publicId]&&(r.instanceId=a[e.publicId]),{def:e,instance:r}}return null}function iS(e,t){return iE(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:aS(t))}function aS(e){return Object.assign(Object.assign(Object.assign({},pS),rS),e.pluginHooks.eventRefiners)}function oS(e,t,n,r,s,i,a){let o={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:(a&&e.id?a[e.id]:"")||Zx(),sourceId:n,allDay:r,hasEnd:s,interactive:e.interactive,ui:gS(e,i),extendedProps:Object.assign(Object.assign({},e.extendedProps||{}),t)};for(let l of i.pluginHooks.eventDefMemberAdders)Object.assign(o,l(e));return Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),o}function lS(e,t,n,r,s,i){let a={defs:{},instances:{}},o=aS(n);for(let l of e){let e=sS(l,t,n,r,o,s,i);e&&cS(e,a)}return a}function cS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defs:{},instances:{}};return t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function uS(e,t){let n=e.instances[t];if(n){let t=e.defs[n.defId],r=hS(e,(e=>{return n=t,r=e,Boolean(n.groupId&&n.groupId===r.groupId);var n,r}));return r.defs[t.defId]=t,r.instances[n.instanceId]=n,r}return{defs:{},instances:{}}}function dS(e,t){return{defs:Object.assign(Object.assign({},e.defs),t.defs),instances:Object.assign(Object.assign({},e.instances),t.instances)}}function hS(e,t){let n=cE(e.defs,t),r=cE(e.instances,(e=>n[e.defId]));return{defs:n,instances:r}}function fS(e){return Array.isArray(e)?e:"string"===typeof e?e.split(/\s+/):[]}const pS={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:aE,overlap:aE,allow:aE,className:fS,classNames:fS,color:String,backgroundColor:String,borderColor:String,textColor:String},mS={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function gS(e,t){let n=function(e,t){return Array.isArray(e)?lS(e,null,t,!0):"object"===typeof e&&e?lS([e],null,t,!0):null!=e?String(e):null}(e.constraint,t);return{display:e.display||null,startEditable:null!=e.startEditable?e.startEditable:e.editable,durationEditable:null!=e.durationEditable?e.durationEditable:e.editable,constraints:null!=n?[n]:[],overlap:null!=e.overlap?e.overlap:null,allows:null!=e.allow?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function vS(e){return e.reduce(yS,mS)}function yS(e,t){return{display:null!=t.display?t.display:e.display,startEditable:null!=t.startEditable?t.startEditable:e.startEditable,durationEditable:null!=t.durationEditable?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:"boolean"===typeof t.overlap?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}const bS={id:String,defaultAllDay:Boolean,url:String,format:String,events:aE,eventDataTransform:aE,success:aE,failure:aE};function xS(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wS(t);if("string"===typeof e?n={url:e}:"function"===typeof e||Array.isArray(e)?n={events:e}:"object"===typeof e&&e&&(n=e),n){let{refined:s,extra:i}=iE(n,r),a=function(e,t){let n=t.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let t=n[r].parseMeta(e);if(t)return{sourceDefId:r,meta:t}}return null}(s,t);if(a)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:Zx(),sourceDefId:a.sourceDefId,meta:a.meta,ui:gS(s,t),extendedProps:i}}return null}function wS(e){return Object.assign(Object.assign(Object.assign({},pS),bS),e.pluginHooks.eventSourceRefiners)}function ES(e,t,n,r,s){switch(t.type){case"RECEIVE_EVENTS":return function(e,t,n,r,s,i){if(t&&n===t.latestFetchId){let n=lS(SS(s,t,i),t,i);return r&&(n=$E(n,r,i)),dS(NS(e,t.sourceId),n)}return e}(e,n[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,s);case"RESET_RAW_EVENTS":return function(e,t,n,r,s){const{defIdMap:i,instanceIdMap:a}=function(e){const{defs:t,instances:n}=e,r={},s={};for(let i in t){const e=t[i],{publicId:n}=e;n&&(r[n]=i)}for(let i in n){const e=t[n[i].defId],{publicId:r}=e;r&&(s[r]=i)}return{defIdMap:r,instanceIdMap:s}}(e);let o=lS(SS(n,t,s),t,s,!1,i,a);return $E(o,r,s)}(e,n[t.sourceId],t.rawEvents,r.activeRange,s);case"ADD_EVENTS":return function(e,t,n,r){n&&(t=$E(t,n,r));return dS(e,t)}(e,t.eventStore,r?r.activeRange:null,s);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return dS(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?$E(e,r.activeRange,s):e;case"REMOVE_EVENTS":return function(e,t){let{defs:n,instances:r}=e,s={},i={};for(let a in n)t.defs[a]||(s[a]=n[a]);for(let a in r)!t.instances[a]&&s[r[a].defId]&&(i[a]=r[a]);return{defs:s,instances:i}}(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return NS(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return hS(e,(e=>!e.sourceId));case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return e}}function SS(e,t,n){let r=n.options.eventDataTransform,s=t?t.eventDataTransform:null;return s&&(e=kS(e,s)),r&&(e=kS(e,r)),e}function kS(e,t){let n;if(t){n=[];for(let r of e){let e=t(r);e?n.push(e):null==e&&n.push(r)}}else n=e;return n}function CS(e,t,n){let{defs:r}=e,s=uE(e.instances,(e=>r[e.defId].allDay?e:Object.assign(Object.assign({},e),{range:{start:n.createMarker(t.toDate(e.range.start,e.forcedStartTzo)),end:n.createMarker(t.toDate(e.range.end,e.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:e.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:e.forcedEndTzo})));return{defs:r,instances:s}}function NS(e,t){return hS(e,(e=>e.sourceId!==t))}class AS{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){!function(e,t,n){(e[t]||(e[t]=[])).push(n)}(this.handlers,e,t)}off(e,t){!function(e,t,n){n?e[t]&&(e[t]=e[t].filter((e=>e!==n))):delete e[t]}(this.handlers,e,t)}trigger(e){let t=this.handlers[e]||[],n=this.options&&this.options[e],r=[].concat(n||[],t);for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];for(let o of r)o.apply(this.thisContext,i)}hasHandlers(e){return Boolean(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}const _S={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function TS(e,t){return lS(function(e){let t;t=!0===e?[{}]:Array.isArray(e)?e.filter((e=>e.daysOfWeek)):"object"===typeof e&&e?[e]:[];return t=t.map((e=>Object.assign(Object.assign({},_S),e))),t}(e),null,t)}function IS(e,t,n){n.emitter.trigger("select",Object.assign(Object.assign({},jS(e,n)),{jsEvent:t?t.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function jS(e,t){let n={};for(let i of t.pluginHooks.dateSpanTransforms)Object.assign(n,i(e,t));var r,s;return Object.assign(n,(r=e,s=t.dateEnv,Object.assign(Object.assign({},sk(r.range,s,r.allDay)),{allDay:r.allDay}))),n}function DS(e,t,n){let{dateEnv:r,options:s}=n,i=t;return e?(i=Ew(i),i=r.add(i,s.defaultAllDayEventDuration)):i=r.add(i,s.defaultTimedEventDuration),i}function RS(e,t,n,r){let s=VS(e.defs,t),i={defs:{},instances:{}};for(let a in e.defs){let t=e.defs[a];i.defs[a]=PS(t,s[a],n,r)}for(let a in e.instances){let t=e.instances[a],o=i.defs[t.defId];i.instances[a]=OS(t,o,s[t.defId],n,r)}return i}function PS(e,t,n,r){let s=n.standardProps||{};null==s.hasEnd&&t.durationEditable&&(n.startDelta||n.endDelta)&&(s.hasEnd=!0);let i=Object.assign(Object.assign(Object.assign({},e),s),{ui:Object.assign(Object.assign({},e.ui),s.ui)});n.extendedProps&&(i.extendedProps=Object.assign(Object.assign({},i.extendedProps),n.extendedProps));for(let a of r.pluginHooks.eventDefMutationAppliers)a(i,n,r);return!i.hasEnd&&r.options.forceEventDuration&&(i.hasEnd=!0),i}function OS(e,t,n,r,s){let{dateEnv:i}=s,a=r.standardProps&&!0===r.standardProps.allDay,o=r.standardProps&&!1===r.standardProps.hasEnd,l=Object.assign({},e);return a&&(l.range=KE(l.range)),r.datesDelta&&n.startEditable&&(l.range={start:i.add(l.range.start,r.datesDelta),end:i.add(l.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(l.range={start:i.add(l.range.start,r.startDelta),end:l.range.end}),r.endDelta&&n.durationEditable&&(l.range={start:l.range.start,end:i.add(l.range.end,r.endDelta)}),o&&(l.range={start:l.range.start,end:DS(t.allDay,l.range.start,s)}),t.allDay&&(l.range={start:Ew(l.range.start),end:Ew(l.range.end)}),l.range.end<l.range.start&&(l.range.end=DS(t.allDay,l.range.start,s)),l}class MS{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class LS{constructor(e,t,n){this._context=e,this._def=t,this._instance=n||null}setProp(e,t){if(e in nS)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===e)t=tS[e](t),this.mutate({standardProps:{publicId:t}});else if(e in tS)t=tS[e](t),this.mutate({standardProps:{[e]:t}});else if(e in pS){let n=pS[e](t);n="color"===e?{backgroundColor:t,borderColor:t}:"editable"===e?{startEditable:t,durationEditable:t}:{[e]:t},this.mutate({standardProps:{ui:n}})}else console.warn("Could not set prop '".concat(e,"'. Use setExtendedProp instead."))}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{dateEnv:n}=this._context,r=n.createMarker(e);if(r&&this._instance){let e=XE(this._instance.range.start,r,n,t.granularity);t.maintainDuration?this.mutate({datesDelta:e}):this.mutate({startDelta:e})}}setEnd(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{dateEnv:r}=this._context;if((null==e||(t=r.createMarker(e),t))&&this._instance)if(t){let e=XE(this._instance.range.end,t,r,n.granularity);this.mutate({endDelta:e})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{dateEnv:s}=this._context,i={allDay:r.allDay},a=s.createMarker(e);var o,l;if(a&&((null==t||(n=s.createMarker(t),n))&&this._instance)){let e=this._instance.range;!0===r.allDay&&(e=KE(e));let t=XE(e.start,a,s,r.granularity);if(n){let a=XE(e.end,n,s,r.granularity);l=a,(o=t).years===l.years&&o.months===l.months&&o.days===l.days&&o.milliseconds===l.milliseconds?this.mutate({datesDelta:t,standardProps:i}):this.mutate({startDelta:t,endDelta:a,standardProps:i})}else i.hasEnd=!1,this.mutate({datesDelta:t,standardProps:i})}}moveStart(e){let t=lw(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=lw(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=lw(e);t&&this.mutate({datesDelta:t})}setAllDay(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={allDay:e},{maintainDuration:r}=t;null==r&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(n.hasEnd=r),this.mutate({standardProps:n})}formatRange(e){let{dateEnv:t}=this._context,n=this._instance,r=Yw(e);return this._def.hasEnd?t.formatRange(n.range.start,n.range.end,r,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):t.format(n.range.start,r,{forcedTzo:n.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let n=this._def,r=this._context,{eventStore:s}=r.getCurrentData(),i=uS(s,t.instanceId);i=RS(i,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,r);let a=new LS(r,n,t);this._def=i.defs[n.defId],this._instance=i.instances[t.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:i}),r.emitter.trigger("eventChange",{oldEvent:a,event:this,relatedEvents:US(i,r,t),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,t=FS(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new MS(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._def,{ui:n}=t,{startStr:r,endStr:s}=this,i={allDay:t.allDay};return t.title&&(i.title=t.title),r&&(i.start=r),s&&(i.end=s),t.publicId&&(i.id=t.publicId),t.groupId&&(i.groupId=t.groupId),t.url&&(i.url=t.url),n.display&&"auto"!==n.display&&(i.display=n.display),e.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?i.color=n.backgroundColor:(n.backgroundColor&&(i.backgroundColor=n.backgroundColor),n.borderColor&&(i.borderColor=n.borderColor)),n.textColor&&(i.textColor=n.textColor),n.classNames.length&&(i.classNames=n.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(i,t.extendedProps):i.extendedProps=t.extendedProps),i}toJSON(){return this.toPlainObject()}}function FS(e){let t=e._def,n=e._instance;return{defs:{[t.defId]:t},instances:n?{[n.instanceId]:n}:{}}}function US(e,t,n){let{defs:r,instances:s}=e,i=[],a=n?n.instanceId:"";for(let o in s){let e=s[o],n=r[e.defId];e.instanceId!==a&&i.push(new LS(t,n,e))}return i}function BS(e,t,n,r){let s={},i={},a={},o=[],l=[],c=VS(e.defs,t);for(let u in e.defs){let t=e.defs[u];"inverse-background"===c[t.defId].display&&(t.groupId?(s[t.groupId]=[],a[t.groupId]||(a[t.groupId]=t)):i[u]=[])}for(let u in e.instances){let t=e.instances[u],a=e.defs[t.defId],d=c[a.defId],h=t.range,f=!a.allDay&&r?YE(h,r):h,p=WE(f,n);p&&("inverse-background"===d.display?a.groupId?s[a.groupId].push(p):i[t.defId].push(p):"none"!==d.display&&("background"===d.display?o:l).push({def:a,ui:d,instance:t,range:p,isStart:f.start&&f.start.valueOf()===p.start.valueOf(),isEnd:f.end&&f.end.valueOf()===p.end.valueOf()}))}for(let u in s){let e=HE(s[u],n);for(let t of e){let e=a[u],n=c[e.defId];o.push({def:e,ui:n,instance:null,range:t,isStart:!1,isEnd:!1})}}for(let u in i){let t=HE(i[u],n);for(let n of t)o.push({def:e.defs[u],ui:c[u],instance:null,range:n,isStart:!1,isEnd:!1})}return{bg:o,fg:l}}function zS(e,t){e.fcSeg=t}function HS(e){return e.fcSeg||e.parentNode.fcSeg||null}function VS(e,t){return uE(e,(e=>WS(e,t)))}function WS(e,t){let n=[];return t[""]&&n.push(t[""]),t[e.defId]&&n.push(t[e.defId]),n.push(e.ui),vS(n)}function GS(e,t){let n=e.map(qS);return n.sort(((e,n)=>function(e,t,n){let r,s;for(r=0;r<n.length;r+=1)if(s=ew(e,t,n[r]),s)return s;return 0}(e,n,t))),n.map((e=>e._seg))}function qS(e){let{eventRange:t}=e,n=t.def,r=t.instance?t.instance.range:t.range,s=r.start?r.start.valueOf():0,i=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:s,end:i,duration:i-s,allDay:Number(n.allDay),_seg:e})}function QS(e,t){let{pluginHooks:n}=t,r=n.isDraggableTransformers,{def:s,ui:i}=e.eventRange,a=i.startEditable;for(let o of r)a=o(a,s,i,t);return a}function KS(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function YS(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function XS(e,t,n,r,s,i,a){let{dateEnv:o,options:l}=n,{displayEventTime:c,displayEventEnd:u}=l,d=e.eventRange.def,h=e.eventRange.instance;null==c&&(c=!1!==r),null==u&&(u=!1!==s);let f=h.range.start,p=h.range.end,m=i||e.start||e.eventRange.range.start,g=a||e.end||e.eventRange.range.end,v=Ew(f).valueOf()===Ew(m).valueOf(),y=Ew(bw(p,-1)).valueOf()===Ew(bw(g,-1)).valueOf();return c&&!d.allDay&&(v||y)?(m=v?f:m,g=y?p:g,u&&d.hasEnd?o.formatRange(m,g,t,{forcedStartTzo:i?null:h.forcedStartTzo,forcedEndTzo:a?null:h.forcedEndTzo}):o.format(m,t,{forcedTzo:i?null:h.forcedStartTzo})):""}function ZS(e,t,n){let r=e.eventRange.range;return{isPast:r.end<=(n||t.start),isFuture:r.start>=(n||t.end),isToday:t&&QE(t,r.start)}}function JS(e){let t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function $S(e){return e.instance?e.instance.instanceId:"".concat(e.def.defId,":").concat(e.range.start.toISOString())}function ek(e,t){let{def:n,instance:r}=e.eventRange,{url:s}=n;if(s)return{href:s};let{emitter:i,options:a}=t,{eventInteractive:o}=a;return null==o&&(o=n.interactive,null==o&&(o=Boolean(i.hasHandlers("eventClick")))),o?Yx((e=>{i.trigger("eventClick",{el:e.target,event:new LS(t,n,r),jsEvent:e,view:t.viewApi})})):{}}const tk={start:aE,end:aE,allDay:Boolean};function nk(e,t,n){let r=function(e,t){let{refined:n,extra:r}=iE(e,tk),s=n.start?t.createMarkerMeta(n.start):null,i=n.end?t.createMarkerMeta(n.end):null,{allDay:a}=n;null==a&&(a=s&&s.isTimeUnspecified&&(!i||i.isTimeUnspecified));return Object.assign({range:{start:s?s.marker:null,end:i?i.marker:null},allDay:a},r)}(e,t),{range:s}=r;if(!s.start)return null;if(!s.end){if(null==n)return null;s.end=t.add(s.start,n)}return r}function rk(e,t,n){return Object.assign(Object.assign({},sk(e,t,n)),{timeZone:t.timeZone})}function sk(e,t,n){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:n}),endStr:t.formatIso(e.end,{omitTime:n})}}class ik extends Error{constructor(e,t){super(e),this.response=t}}function ak(e,t,n){const r={method:e=e.toUpperCase()};return"GET"===e?t+=(-1===t.indexOf("?")?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(t,r).then((e=>{if(e.ok)return e.json().then((t=>[t,e]),(()=>{throw new ik("Failure parsing JSON",e)}));throw new ik("Request failed",e)}))}let ok;function lk(){return null==ok&&(ok=function(){if("undefined"===typeof document)return!0;let e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);let t=e.querySelector("div").offsetHeight>0;return document.body.removeChild(e),t}()),ok}class ck extends jE{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{kE((()=>{this.setState({forPrint:!0})}))},this.handleAfterPrint=()=>{kE((()=>{this.setState({forPrint:!1})}))}}render(){let{props:e}=this,{options:t}=e,{forPrint:n}=this.state,r=n||"auto"===t.height||"auto"===t.contentHeight,s=r||null==t.height?"":t.height,i=["fc",n?"fc-media-print":"fc-media-screen","fc-direction-".concat(t.direction),e.theme.getClass("root")];return lk()||i.push("fc-liquid-hack"),e.children(i,s,r,n)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class uk{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function dk(e){return{[e.component.uid]:e}}const hk={};class fk extends Sb{constructor(e,t){super(e,t),this.handleRefresh=()=>{let e=this.computeTiming();e.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(e.state),this.clearTimeout(),this.setTimeout(e.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,n=t.nowManager.getDateMarker(),r=t.dateEnv.startOf(n,e.unit),s=t.dateEnv.add(r,lw(1,e.unit)).valueOf()-n.valueOf();return s=Math.min(864e5,s),{state:{nowDate:r,todayRange:pk(r)},waitMs:s}}setTimeout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.computeTiming().waitMs;this.timeoutId=setTimeout((()=>{const e=this.computeTiming();this.setState(e.state,(()=>{this.setTimeout(e.waitMs)}))}),e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}function pk(e){let t=Ew(e);return{start:t,end:yw(t,1)}}fk.contextType=_E;class mk{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:n}=this;n.currentCalendarOptionsRefiners[e]?n.emitter.on(e,t):console.warn("Unknown listener name '".concat(e,"'"))}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.currentDataManager.emitter.trigger(e,...n)}changeView(e,t){this.batchRendering((()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:n}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:n.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})}))}zoomTo(e,t){let n;t=t||"day",n=this.getCurrentData().viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),n?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:n.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let t,n,{viewSpecs:r,toolbarConfig:s}=this.getCurrentData(),i=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]);for(let a in r)i.push(a);for(t=0;t<i.length;t+=1)if(n=r[i[t]],n&&n.singleUnit===e)return n;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),n=lw(e);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,n)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:n}=this.getCurrentData();return n.format(n.createMarker(e),Yw(t))}formatRange(e,t,n){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(e),r.createMarker(t),Yw(n),n)}formatIso(e,t){let{dateEnv:n}=this.getCurrentData();return n.formatIso(n.createMarker(e),{omitTime:t})}select(e,t){let n;n=null==t?null!=e.start?e:{start:e,end:null}:{start:e,end:t};let r=this.getCurrentData(),s=nk(n,r.dateEnv,lw({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),IS(s,null,r))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}(e,t))}addEvent(e,t){if(e instanceof LS){let t=e._def,n=e._instance;return this.getCurrentData().eventStore.defs[t.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:cS({def:t,instance:n})}),this.triggerEventAdd(e)),e}let n,r=this.getCurrentData();if(t instanceof MS)n=t.internalEventSource;else if("boolean"===typeof t)t&&([n]=hE(r.eventSources));else if(null!=t){let e=this.getEventSourceById(t);if(!e)return console.warn('Could not find an event source with ID "'.concat(t,'"')),null;n=e.internalEventSource}let s=sS(e,n,r,!1);if(s){let e=new LS(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:cS(s)}),this.triggerEventAdd(e),e}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:FS(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:n,instances:r}=t.eventStore;e=String(e);for(let s in n){let i=n[s];if(i.publicId===e){if(i.recurringDef)return new LS(t,i,null);for(let e in r){let n=r[e];if(n.defId===i.defId)return new LS(t,i,n)}}}return null}getEvents(){let e=this.getCurrentData();return US(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,n=[];for(let r in t)n.push(new MS(e,t[r]));return n}getEventSourceById(e){let t=this.getCurrentData(),n=t.eventSources;e=String(e);for(let r in n)if(n[r].publicId===e)return new MS(t,n[r]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof MS)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let n=xS(e,t);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new MS(t,n)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=lw(e);t&&this.trigger("_scrollRequest",{time:t})}}function gk(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function vk(e,t){let n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom&&n}const yk={defs:{},instances:{}};class bk{constructor(){this.getKeysForEventDefs=Pw(this._getKeysForEventDefs),this.splitDateSelection=Pw(this._splitDateSpan),this.splitEventStore=Pw(this._splitEventStore),this.splitIndividualUi=Pw(this._splitIndividualUi),this.splitEventDrag=Pw(this._splitInteraction),this.splitEventResize=Pw(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let t=this.getKeyInfo(e),n=this.getKeysForEventDefs(e.eventStore),r=this.splitDateSelection(e.dateSelection),s=this.splitIndividualUi(e.eventUiBases,n),i=this.splitEventStore(e.eventStore,n),a=this.splitEventDrag(e.eventDrag),o=this.splitEventResize(e.eventResize),l={};this.eventUiBuilders=uE(t,((e,t)=>this.eventUiBuilders[t]||Pw(xk)));for(let c in t){let n=t[c],u=i[c]||yk,d=this.eventUiBuilders[c];l[c]={businessHours:n.businessHours||e.businessHours,dateSelection:r[c]||null,eventStore:u,eventUiBases:d(e.eventUiBases[""],n.ui,s[c]),eventSelection:u.instances[e.eventSelection]?e.eventSelection:"",eventDrag:a[c]||null,eventResize:o[c]||null}}return l}_splitDateSpan(e){let t={};if(e){let n=this.getKeysForDateSpan(e);for(let r of n)t[r]=e}return t}_getKeysForEventDefs(e){return uE(e.defs,(e=>this.getKeysForEventDef(e)))}_splitEventStore(e,t){let{defs:n,instances:r}=e,s={};for(let i in n)for(let e of t[i])s[e]||(s[e]={defs:{},instances:{}}),s[e].defs[i]=n[i];for(let i in r){let e=r[i];for(let n of t[e.defId])s[n]&&(s[n].instances[i]=e)}return s}_splitIndividualUi(e,t){let n={};for(let r in e)if(r)for(let s of t[r])n[s]||(n[s]={}),n[s][r]=e[r];return n}_splitInteraction(e){let t={};if(e){let n=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),r=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,r),i=r=>{t[r]||(t[r]={affectedEvents:n[r]||yk,mutatedEvents:s[r]||yk,isEvent:e.isEvent})};for(let e in n)i(e);for(let e in s)i(e)}return t}}function xk(e,t,n){let r=[];e&&r.push(e),t&&r.push(t);let s={"":vS(r)};return n&&Object.assign(s,n),s}function wk(e,t,n,r){return{dow:e.getUTCDay(),isDisabled:Boolean(r&&(!r.activeRange||!QE(r.activeRange,e))),isOther:Boolean(r&&!QE(r.currentRange,e)),isToday:Boolean(t&&QE(t,e)),isPast:Boolean(n?e<n:!!t&&e<t.start),isFuture:Boolean(n?e>n:!!t&&e>=t.end)}}function Ek(e,t){let n=["fc-day","fc-day-".concat(gw[e.dow])];return e.isDisabled?n.push("fc-day-disabled"):(e.isToday&&(n.push("fc-day-today"),n.push(t.getClass("today"))),e.isPast&&n.push("fc-day-past"),e.isFuture&&n.push("fc-day-future"),e.isOther&&n.push("fc-day-other")),n}const Sk=Yw({year:"numeric",month:"long",day:"numeric"}),kk=Yw({week:"long"});function Ck(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{dateEnv:s,options:i,calendarApi:a}=e;let o=s.format(t,"week"===n?kk:Sk);if(i.navLinks){let e=s.toDate(t);const l=e=>{let r="day"===n?i.navLinkDayClick:"week"===n?i.navLinkWeekClick:null;"function"===typeof r?r.call(a,s.toDate(t),e):("string"===typeof r&&(n=r),a.zoomTo(t,n))};return Object.assign({title:nw(i.navLinkHint,[o,e],o),"data-navlink":""},r?Kx(l):{onClick:l})}return{"aria-label":o}}let Nk,Ak=null;function _k(){return null===Ak&&(Ak=function(){let e=document.createElement("div");Bx(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);let t=e.firstChild.getBoundingClientRect().left>e.getBoundingClientRect().left;return Mx(e),t}()),Ak}function Tk(){return Nk||(Nk=function(){let e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);let t=Ik(e);return document.body.removeChild(e),t}()),Nk}function Ik(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function jk(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(arguments.length>2?arguments[2]:void 0)?e.getBoundingClientRect():Dk(e),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.getComputedStyle(e),r=parseInt(n.borderLeftWidth,10)||0,s=parseInt(n.borderRightWidth,10)||0,i=parseInt(n.borderTopWidth,10)||0,a=parseInt(n.borderBottomWidth,10)||0,o=Ik(e),l=o.y-r-s,c={borderLeft:r,borderRight:s,borderTop:i,borderBottom:a,scrollbarBottom:o.x-i-a,scrollbarLeft:0,scrollbarRight:0};return _k()&&"rtl"===n.direction?c.scrollbarLeft=l:c.scrollbarRight=l,t&&(c.paddingLeft=parseInt(n.paddingLeft,10)||0,c.paddingRight=parseInt(n.paddingRight,10)||0,c.paddingTop=parseInt(n.paddingTop,10)||0,c.paddingBottom=parseInt(n.paddingBottom,10)||0),c}(e,t),s={left:n.left+r.borderLeft+r.scrollbarLeft,right:n.right-r.borderRight-r.scrollbarRight,top:n.top+r.borderTop,bottom:n.bottom-r.borderBottom-r.scrollbarBottom};return t&&(s.left+=r.paddingLeft,s.right-=r.paddingRight,s.top+=r.paddingTop,s.bottom-=r.paddingBottom),s}function Dk(e){let t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY}}function Rk(e){let t=[];for(;e instanceof HTMLElement;){let n=window.getComputedStyle(e);if("fixed"===n.position)break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&t.push(e),e=e.parentNode}return t}class Pk{constructor(e,t,n,r){this.els=t;let s=this.originClientRect=e.getBoundingClientRect();n&&this.buildElHorizontals(s.left),r&&this.buildElVerticals(s.top)}buildElHorizontals(e){let t=[],n=[];for(let r of this.els){let s=r.getBoundingClientRect();t.push(s.left-e),n.push(s.right-e)}this.lefts=t,this.rights=n}buildElVerticals(e){let t=[],n=[];for(let r of this.els){let s=r.getBoundingClientRect();t.push(s.top-e),n.push(s.bottom-e)}this.tops=t,this.bottoms=n}leftToIndex(e){let t,{lefts:n,rights:r}=this,s=n.length;for(t=0;t<s;t+=1)if(e>=n[t]&&e<r[t])return t}topToIndex(e){let t,{tops:n,bottoms:r}=this,s=n.length;for(t=0;t<s;t+=1)if(e>=n[t]&&e<r[t])return t}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Ok(this.tops||[],e.tops||[])&&Ok(this.bottoms||[],e.bottoms||[])&&Ok(this.lefts||[],e.lefts||[])&&Ok(this.rights||[],e.rights||[])}}function Ok(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(Math.round(e[r])!==Math.round(t[r]))return!1;return!0}class Mk{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class Lk extends Mk{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Fk extends Mk{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Uk extends jE{constructor(){super(...arguments),this.uid=Zx()}prepareHits(){}queryHit(e,t,n,r){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Lx(e,".fc-event-mirror")}isValidDateDownEl(e){return!Lx(e,".fc-event:not(.fc-bg-event)")&&!Lx(e,".fc-more-link")&&!Lx(e,"a[data-navlink]")&&!Lx(e,".fc-popover")}}class Bk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.thickness||1;this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let n of e)this.insertEntry(n,t);return t}insertEntry(e,t){let n=this.findInsertion(e);this.isInsertionValid(n,e)?this.insertEntryAt(e,n):this.handleInvalidInsertion(n,e,t)}isInsertionValid(e,t){return(-1===this.maxCoord||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(-1===this.maxStackCnt||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,n){if(this.allowReslicing&&e.touchingEntry){const r=Object.assign(Object.assign({},t),{span:Vk(t.span,e.touchingEntry.span)});n.push(r),this.splitEntry(t,e.touchingEntry,n)}else n.push(t)}splitEntry(e,t,n){let r=e.span,s=t.span;r.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.start,end:s.start}},n),r.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:r.end}},n)}insertEntryAt(e,t){let{entriesByLevel:n,levelCoords:r}=this;-1===t.lateral?(Wk(r,t.level,t.levelCoord),Wk(n,t.level,[e])):Wk(n[t.level],t.lateral,e),this.stackCnts[Hk(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:n,strictOrder:r,stackCnts:s}=this,i=t.length,a=0,o=-1,l=-1,c=null,u=0;for(let f=0;f<i;f+=1){const i=t[f];if(!r&&i>=a+this.getEntryThickness(e))break;let d,h=n[f],p=Gk(h,e.span.start,zk),m=p[0]+p[1];for(;(d=h[m])&&d.span.start<e.span.end;){let e=i+this.getEntryThickness(d);e>a&&(a=e,c=d,o=f,l=m),e===a&&(u=Math.max(u,s[Hk(d)]+1)),m+=1}}let d=0;if(c)for(d=o+1;d<i&&t[d]<a;)d+=1;let h=-1;return d<i&&t[d]===a&&(h=Gk(n[d],e.span.end,zk)[0]),{touchingLevel:o,touchingLateral:l,touchingEntry:c,stackCnt:u,levelCoord:a,level:d,lateral:h}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,n=e.length,r=[];for(let s=0;s<n;s+=1){let n=e[s],i=t[s];for(let e of n)r.push(Object.assign(Object.assign({},e),{thickness:this.getEntryThickness(e),levelCoord:i}))}return r}}function zk(e){return e.span.end}function Hk(e){return e.index+":"+e.span.start}function Vk(e,t){let n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return n<r?{start:n,end:r}:null}function Wk(e,t,n){e.splice(t,0,n)}function Gk(e,t,n){let r=0,s=e.length;if(!s||t<n(e[r]))return[0,0];if(t>n(e[s-1]))return[s,0];for(;r<s;){let i=Math.floor(r+(s-r)/2),a=n(e[i]);if(t<a)s=i;else{if(!(t>a))return[i,1];r=i+1}}return[r,0]}class qk{constructor(e,t){this.emitter=new AS}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const Qk={},Kk={startTime:lw,duration:lw,create:Boolean,sourceId:String};function Yk(e){let{refined:t,extra:n}=iE(e,Kk);return{startTime:t.startTime||null,duration:t.duration||null,create:null==t.create||t.create,sourceId:t.sourceId,leftoverProps:n}}const Xk="fc-col-header-cell";function Zk(e){return e.text}class Jk extends jE{render(){let{dateEnv:e,options:t,theme:n,viewApi:r}=this.context,{props:s}=this,{date:i,dateProfile:a}=s,o=wk(i,s.todayRange,null,a),l=[Xk].concat(Ek(o,n)),c=e.format(i,s.dayHeaderFormat),u=!o.isDisabled&&s.colCnt>1?Ck(this.context,i):{},d=e.toDate(i);e.namedTimeZoneImpl&&(d=bw(d,36e5));let h=Object.assign(Object.assign(Object.assign({date:d,view:r},s.extraRenderProps),{text:c}),o);return gb(FE,{elTag:"th",elClasses:l,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":o.isDisabled?void 0:Dw(i)},s.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:Zk,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},(e=>gb("div",{className:"fc-scrollgrid-sync-inner"},!o.isDisabled&&gb(e,{elTag:"a",elAttrs:u,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]}))))}}const $k=Yw({weekday:"long"});class eC extends jE{render(){let{props:e}=this,{dateEnv:t,theme:n,viewApi:r,options:s}=this.context,i=yw(new Date(2592e5),e.dow),a={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},o=t.format(i,e.dayHeaderFormat),l=Object.assign(Object.assign(Object.assign(Object.assign({date:i},a),{view:r}),e.extraRenderProps),{text:o});return gb(FE,{elTag:"th",elClasses:[Xk,...Ek(a,n),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:l,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:Zk,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},(n=>gb("div",{className:"fc-scrollgrid-sync-inner"},gb(n,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(i,$k)}}))))}}class tC extends jE{constructor(){super(...arguments),this.createDayHeaderFormatter=Pw(nC)}render(){let{context:e}=this,{dates:t,dateProfile:n,datesRepDistinctDays:r,renderIntro:s}=this.props,i=this.createDayHeaderFormatter(e.options.dayHeaderFormat,r,t.length);return gb(fk,{unit:"day"},((e,a)=>gb("tr",{role:"row"},s&&s("day"),t.map((e=>r?gb(Jk,{key:e.toISOString(),date:e,dateProfile:n,todayRange:a,colCnt:t.length,dayHeaderFormat:i}):gb(eC,{key:e.getUTCDay(),dow:e.getUTCDay(),dayHeaderFormat:i}))))))}}function nC(e,t,n){return e||function(e,t){return Yw(!e||t>10?{weekday:"short"}:t>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(t,n)}class rC{constructor(e,t){let n=e.start,{end:r}=e,s=[],i=[],a=-1;for(;n<r;)t.isHiddenDay(n)?s.push(a+.5):(a+=1,s.push(a),i.push(n)),n=yw(n,1);this.dates=i,this.indices=s,this.cnt=i.length}sliceRange(e){let t=this.getDateDayIndex(e.start),n=this.getDateDayIndex(yw(e.end,-1)),r=Math.max(0,t),s=Math.min(this.cnt-1,n);return r=Math.ceil(r),s=Math.floor(s),r<=s?{firstIndex:r,lastIndex:s,isStart:t===r,isEnd:n===s}:null}getDateDayIndex(e){let{indices:t}=this,n=Math.floor(xw(this.dates[0],e));return n<0?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]}}class sC{constructor(e,t){let n,r,s,{dates:i}=e;if(t){for(r=i[0].getUTCDay(),n=1;n<i.length&&i[n].getUTCDay()!==r;n+=1);s=Math.ceil(i.length/n)}else s=1,n=i.length;this.rowCnt=s,this.colCnt=n,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let n=[];for(let e=0;e<this.colCnt;e+=1)n.push(this.buildCell(t,e));e.push(n)}return e}buildCell(e,t){let n=this.daySeries.dates[e*this.colCnt+t];return{key:n.toISOString(),date:n}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,n=this.daySeries.sliceRange(e),r=[];if(n){let{firstIndex:e,lastIndex:s}=n,i=e;for(;i<=s;){let a=Math.floor(i/t),o=Math.min((a+1)*t,s+1);r.push({row:a,firstCol:i%t,lastCol:(o-1)%t,isStart:n.isStart&&i===e,isEnd:n.isEnd&&o-1===s}),i=o}}return r}}class iC{constructor(){this.sliceBusinessHours=Pw(this._sliceBusinessHours),this.sliceDateSelection=Pw(this._sliceDateSpan),this.sliceEventStore=Pw(this._sliceEventStore),this.sliceEventDrag=Pw(this._sliceInteraction),this.sliceEventResize=Pw(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,n,r){let{eventUiBases:s}=e;for(var i=arguments.length,a=new Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];let l=this.sliceEventStore(e.eventStore,s,t,n,...a);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,n,s,r,...a),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,n,r,...a),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(e.eventDrag,s,t,n,...a),eventResize:this.sliceEventResize(e.eventResize,s,t,n,...a),eventSelection:e.eventSelection}}sliceNowDate(e,t,n,r){for(var s=arguments.length,i=new Array(s>4?s-4:0),a=4;a<s;a++)i[a-4]=arguments[a];return this._sliceDateSpan({range:{start:e,end:bw(e,1)},allDay:!1},t,n,{},r,...i)}_sliceBusinessHours(e,t,n,r){if(!e)return[];for(var s=arguments.length,i=new Array(s>4?s-4:0),a=4;a<s;a++)i[a-4]=arguments[a];return this._sliceEventStore($E(e,aC(t,Boolean(n)),r),{},t,n,...i).bg}_sliceEventStore(e,t,n,r){if(e){let o=BS(e,t,aC(n,Boolean(r)),r);for(var s=arguments.length,i=new Array(s>4?s-4:0),a=4;a<s;a++)i[a-4]=arguments[a];return{bg:this.sliceEventRanges(o.bg,i),fg:this.sliceEventRanges(o.fg,i)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,n,r){if(!e)return null;let s=BS(e.mutatedEvents,t,aC(n,Boolean(r)),r);for(var i=arguments.length,a=new Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];return{segs:this.sliceEventRanges(s.fg,a),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,n,r,s){if(!e)return[];let i=aC(t,Boolean(n)),a=WE(e.range,i);if(a){let t=function(e,t,n){let r=iS({editable:!1},n),s=oS(r.refined,r.extra,"",e.allDay,!0,n);return{def:s,ui:WS(s,t),instance:JE(s.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}(e=Object.assign(Object.assign({},e),{range:a}),r,s);for(var o=arguments.length,l=new Array(o>5?o-5:0),c=5;c<o;c++)l[c-5]=arguments[c];let n=this.sliceRange(e.range,...l);for(let e of n)e.eventRange=t;return n}return[]}sliceEventRanges(e,t){let n=[];for(let r of e)n.push(...this.sliceEventRange(r,t));return n}sliceEventRange(e,t){let n=e.range;this.forceDayIfListItem&&"list-item"===e.ui.display&&(n={start:n.start,end:yw(n.start,1)});let r=this.sliceRange(n,...t);for(let s of r)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return r}}function aC(e,t){let n=e.activeRange;return t?n:{start:bw(n.start,e.slotMinTime.milliseconds),end:bw(n.end,e.slotMaxTime.milliseconds-864e5)}}function oC(e,t,n){let{instances:r}=e.mutatedEvents;for(let s in r)if(!qE(t.validRange,r[s].range))return!1;return lC({eventDrag:e},n)}function lC(e,t){let n=t.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||cC)(r,t)}function cC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return!(e.eventDrag&&!function(e,t,n,r){let s=t.getCurrentData(),i=e.eventDrag,a=i.mutatedEvents,o=a.defs,l=a.instances,c=VS(o,i.isEvent?e.eventUiBases:{"":s.selectionConfig});r&&(c=uE(c,r));let u=(p=e.eventStore,m=i.affectedEvents.instances,{defs:p.defs,instances:cE(p.instances,(e=>!m[e.instanceId]))}),d=u.defs,h=u.instances,f=VS(d,e.eventUiBases);var p,m;for(let g in l){let r=l[g],a=r.range,p=c[r.defId],m=o[r.defId];if(!uC(p.constraints,a,u,e.businessHours,t))return!1;let{eventOverlap:v}=t.options,y="function"===typeof v?v:null;for(let e in h){let n=h[e];if(GE(a,n.range)){if(!1===f[n.defId].overlap&&i.isEvent)return!1;if(!1===p.overlap)return!1;if(y&&!y(new LS(t,d[n.defId],n),new LS(t,m,r)))return!1}}let b=s.eventStore;for(let e of p.allows){let s,i=Object.assign(Object.assign({},n),{range:r.range,allDay:m.allDay}),a=b.defs[m.defId],o=b.instances[g];if(s=a?new LS(t,a,o):new LS(t,m),!e(jS(i,t),s))return!1}}return!0}(e,t,n,r))&&!(e.dateSelection&&!function(e,t,n,r){let s=e.eventStore,i=s.defs,a=s.instances,o=e.dateSelection,l=o.range,{selectionConfig:c}=t.getCurrentData();r&&(c=r(c));if(!uC(c.constraints,l,s,e.businessHours,t))return!1;let{selectOverlap:u}=t.options,d="function"===typeof u?u:null;for(let h in a){let e=a[h];if(GE(l,e.range)){if(!1===c.overlap)return!1;if(d&&!d(new LS(t,i[e.defId],e),null))return!1}}for(let h of c.allows){if(!h(jS(Object.assign(Object.assign({},n),o),t),null))return!1}return!0}(e,t,n,r))}function uC(e,t,n,r,s){for(let i of e)if(!fC(dC(i,t,n,r,s),t))return!1;return!0}function dC(e,t,n,r,s){return"businessHours"===e?hC($E(r,t,s)):"string"===typeof e?hC(hS(n,(t=>t.groupId===e))):"object"===typeof e&&e?hC($E(e,t,s)):[]}function hC(e){let{instances:t}=e,n=[];for(let r in t)n.push(t[r].range);return n}function fC(e,t){for(let n of e)if(qE(n,t))return!0;return!1}const pC=/^(visible|hidden)$/;class mC extends jE{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,DE(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:n}=e,r=t&&n,s=["fc-scroller"];return t&&(n?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),gb("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(pC.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:n}=e;for(let r=0;r<n.length;r+=1){if(n[r].getBoundingClientRect().width>t)return!0}return!1}needsYScrolling(){if(pC.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:n}=e;for(let r=0;r<n.length;r+=1){if(n[r].getBoundingClientRect().height>t)return!0}return!1}getXScrollbarWidth(){return pC.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return pC.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class gC{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(e,t)=>{let{depths:n,currentMap:r}=this,s=!1,i=!1;null!==e?(s=t in r,r[t]=e,n[t]=(n[t]||0)+1,i=!0):(n[t]-=1,n[t]||(delete r[t],delete this.callbackMap[t],s=!0)),this.masterCallback&&(s&&this.masterCallback(null,String(t)),i&&this.masterCallback(e,String(t)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=t=>{this.handleValue(t,String(e))}),t}collect(e,t,n){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=[];null==n&&(n=Object.keys(e).length);for(let i=t;i<n;i+=r){let t=e[i];void 0!==t&&s.push(t)}return s}(this.currentMap,e,t,n)}getAll(){return hE(this.currentMap)}}function vC(e){let t=function(e,t){let n=e instanceof HTMLElement?[e]:e,r=[];for(let s=0;s<n.length;s+=1){let e=n[s].querySelectorAll(t);for(let t=0;t<e.length;t+=1)r.push(e[t])}return r}(e,".fc-scrollgrid-shrink"),n=0;for(let r of t)n=Math.max(n,iw(r));return Math.ceil(n)}function yC(e,t){return e.liquid&&t.liquid}function bC(e,t){return mw(e,t,fE)}function xC(e,t){let n=[];for(let r of e){let e=r.span||1;for(let s=0;s<e;s+=1)n.push(gb("col",{style:{width:"shrink"===r.width?wC(t):r.width||"",minWidth:r.minWidth||""}}))}return gb("colgroup",{},...n)}function wC(e){return null==e?4:e}function EC(e,t){let n=["fc-scrollgrid-section","fc-scrollgrid-section-".concat(e.type),e.className];return t&&e.liquid&&null==e.maxHeight&&n.push("fc-scrollgrid-section-liquid"),e.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function SC(e){return gb("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function kC(e){let{stickyHeaderDates:t}=e;return null!=t&&"auto"!==t||(t="auto"===e.height||"auto"===e.viewHeight),t}function CC(e){let{stickyFooterScrollbar:t}=e;return null!=t&&"auto"!==t||(t="auto"===e.height||"auto"===e.viewHeight),t}class NC extends jE{constructor(){super(...arguments),this.processCols=Pw((e=>e),bC),this.renderMicroColGroup=Pw(xC),this.scrollerRefs=new gC,this.scrollerElRefs=new gC(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:n}=this,r=e.sections||[],s=this.processCols(e.cols),i=this.renderMicroColGroup(s,t.shrinkWidth),a=function(e,t){let n=["fc-scrollgrid",t.theme.getClass("table")];return e&&n.push("fc-scrollgrid-liquid"),n}(e.liquid,n);e.collapsibleWidth&&a.push("fc-scrollgrid-collapsible");let o,l=r.length,c=0,u=[],d=[],h=[];for(;c<l&&"header"===(o=r[c]).type;)u.push(this.renderSection(o,i,!0)),c+=1;for(;c<l&&"body"===(o=r[c]).type;)d.push(this.renderSection(o,i,!1)),c+=1;for(;c<l&&"footer"===(o=r[c]).type;)h.push(this.renderSection(o,i,!0)),c+=1;let f=!lk();const p={role:"rowgroup"};return gb("table",{role:"grid",className:a.join(" "),style:{height:e.height}},Boolean(!f&&u.length)&&gb("thead",p,...u),Boolean(!f&&d.length)&&gb("tbody",p,...d),Boolean(!f&&h.length)&&gb("tfoot",p,...h),f&&gb("tbody",p,...u,...d,...h))}renderSection(e,t,n){return"outerContent"in e?gb(yb,{key:e.key},e.outerContent):gb("tr",{key:e.key,role:"presentation",className:EC(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,n))}renderChunkTd(e,t,n,r){if("outerContent"in n)return n.outerContent;let{props:s}=this,{forceYScrollbars:i,scrollerClientWidths:a,scrollerClientHeights:o}=this.state,l=function(e,t){return null!=t.maxHeight||yC(e,t)}(s,e),c=yC(s,e),u=s.liquid?i?"scroll":l?"auto":"hidden":"visible",d=e.key,h=function(e,t,n,r){let{expandRows:s}=n;return"function"===typeof t.content?t.content(n):gb("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:s?n.clientHeight:""}},n.tableColGroupNode,gb(r?"thead":"tbody",{role:"presentation"},"function"===typeof t.rowContent?t.rowContent(n):t.rowContent))}(e,n,{tableColGroupNode:t,tableMinWidth:"",clientWidth:s.collapsibleWidth||void 0===a[d]?null:a[d],clientHeight:void 0!==o[d]?o[d]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return gb(r?"th":"td",{ref:n.elRef,role:"presentation"},gb("div",{className:"fc-scroller-harness".concat(c?" fc-scroller-harness-liquid":"")},gb(mC,{ref:this.scrollerRefs.createRef(d),elRef:this.scrollerElRefs.createRef(d),overflowY:u,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:c,liquidIsAbsolute:!0},h)))}_handleScrollerEl(e,t){let n=function(e,t){for(let n of e)if(n.key===t)return n;return null}(this.props.sections,t);n&&DE(n.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return function(e){for(let t of e)if("shrink"===t.width)return!0;return!1}(this.props.cols)?vC(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=Tk(),{scrollerRefs:t,scrollerElRefs:n}=this,r=!1,s={},i={};for(let a in t.currentMap){let e=t.currentMap[a];if(e&&e.needsYScrolling()){r=!0;break}}for(let a of this.props.sections){let t=a.key,o=n.currentMap[t];if(o){let n=o.parentNode;s[t]=Math.floor(n.getBoundingClientRect().width-(r?e.y:0)),i[t]=Math.floor(n.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:s,scrollerClientHeights:i}}}NC.addStateEquality({scrollerClientWidths:fE,scrollerClientHeights:fE});class AC extends jE{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&zS(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:n}=t,{seg:r}=e,{eventRange:s}=r,{ui:i}=s,a={event:new LS(t,s.def,s.instance),view:t.viewApi,timeText:e.timeText,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,isDraggable:!e.disableDragging&&QS(r,t),isStartResizable:!e.disableResizing&&KS(r,t),isEndResizable:!e.disableResizing&&YS(r),isMirror:Boolean(e.isDragging||e.isResizing||e.isDateSelecting),isStart:Boolean(r.isStart),isEnd:Boolean(r.isEnd),isPast:Boolean(e.isPast),isFuture:Boolean(e.isFuture),isToday:Boolean(e.isToday),isSelected:Boolean(e.isSelected),isDragging:Boolean(e.isDragging),isResizing:Boolean(e.isResizing)};return gb(FE,Object.assign({},e,{elRef:this.handleEl,elClasses:[...JS(a),...r.eventRange.ui.classNames,...e.elClasses||[]],renderProps:a,generatorName:"eventContent",customGenerator:n.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:n.eventClassNames,didMount:n.eventDidMount,willUnmount:n.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&zS(this.el,this.props.seg)}}class _C extends jE{render(){let{props:e,context:t}=this,{options:n}=t,{seg:r}=e,{ui:s}=r.eventRange,i=XS(r,n.eventTimeFormat||e.defaultTimeFormat,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return gb(AC,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:ek(r,t),defaultGenerator:TC,timeText:i}),((e,t)=>gb(yb,null,gb(e,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:t.textColor}}),Boolean(t.isStartResizable)&&gb("div",{className:"fc-event-resizer fc-event-resizer-start"}),Boolean(t.isEndResizable)&&gb("div",{className:"fc-event-resizer fc-event-resizer-end"}))))}}function TC(e){return gb("div",{className:"fc-event-main-frame"},e.timeText&&gb("div",{className:"fc-event-time"},e.timeText),gb("div",{className:"fc-event-title-container"},gb("div",{className:"fc-event-title fc-sticky"},e.event.title||gb(yb,null,"\xa0"))))}const IC=e=>gb(_E.Consumer,null,(t=>{let{options:n}=t,r={isAxis:e.isAxis,date:t.dateEnv.toDate(e.date),view:t.viewApi};return gb(FE,Object.assign({},e,{elTag:e.elTag||"div",renderProps:r,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount}))})),jC=Yw({day:"numeric"});class DC extends jE{constructor(){super(...arguments),this.refineRenderProps=Ow(PC)}render(){let{props:e,context:t}=this,{options:n}=t,r=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:n.monthStartFormat});return gb(FE,Object.assign({},e,{elClasses:[...Ek(r,t.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),r.isDisabled?{}:{"data-date":Dw(e.date)}),renderProps:r,generatorName:"dayCellContent",customGenerator:n.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.isDisabled?void 0:n.dayCellClassNames,didMount:n.dayCellDidMount,willUnmount:n.dayCellWillUnmount}))}}function RC(e){return Boolean(e.dayCellContent||PE("dayCellContent",e))}function PC(e){let{date:t,dateEnv:n,dateProfile:r,isMonthStart:s}=e,i=wk(t,e.todayRange,null,r),a=e.showDayNumber?n.format(t,s?e.monthStartFormat:jC):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(t),view:e.viewApi},i),{isMonthStart:s,dayNumberText:a}),e.extraRenderProps)}class OC extends jE{render(){let{props:e}=this,{seg:t}=e;return gb(AC,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:MC,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function MC(e){let{title:t}=e.event;return t&&gb("div",{className:"fc-event-title"},e.event.title)}function LC(e){return gb("div",{className:"fc-".concat(e)})}const FC=e=>gb(_E.Consumer,null,(t=>{let{dateEnv:n,options:r}=t,{date:s}=e,i=r.weekNumberFormat||e.defaultFormat,a={num:n.computeWeekNumber(s),text:n.format(s,i),date:s};return gb(FE,Object.assign({},e,{renderProps:a,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:UC,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount}))}));function UC(e){return e.text}class BC extends jE{constructor(){super(...arguments),this.state={titleId:Wx()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&DE(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=Hx(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{"Escape"===e.key&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:n,state:r}=this,s=["fc-popover",e.getClass("popover")].concat(n.extraClassNames||[]);return vx(gb("div",Object.assign({},n.extraAttrs,{id:n.id,className:s.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),gb("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},gb("span",{className:"fc-popover-title",id:r.titleId},n.title),gb("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),gb("div",{className:"fc-popover-body "+e.getClass("popoverContent")},n.children)),n.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:n}=this.props,{rootEl:r}=this,s=function(e){let t=Rk(e),n=e.getBoundingClientRect();for(let r of t){let e=vk(n,r.getBoundingClientRect());if(!e)return null;n=e}return n}(t);if(s){let i=r.getBoundingClientRect(),a=n?Lx(t,".fc-scrollgrid").getBoundingClientRect().top:s.top,o=e?s.right-i.width:s.left;a=Math.max(a,10),o=Math.min(o,document.documentElement.clientWidth-10-i.width),o=Math.max(o,10);let l=r.offsetParent.getBoundingClientRect();Bx(r,{top:a-l.top,left:o-l.left})}}}class zC extends Uk{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:n}=this,{startDate:r,todayRange:s,dateProfile:i}=n,a=t.format(r,e.dayPopoverFormat);return gb(DC,{elRef:this.handleRootEl,date:r,dateProfile:i,todayRange:s},((t,r,s)=>gb(BC,{elRef:s.ref,id:n.id,title:a,extraClassNames:["fc-more-popover"].concat(s.className||[]),extraAttrs:s,parentEl:n.parentEl,alignmentEl:n.alignmentEl,alignGridTop:n.alignGridTop,onClose:n.onClose},RC(e)&&gb(t,{elTag:"div",elClasses:["fc-more-popover-misc"]}),n.children)))}queryHit(e,t,n,r){let{rootEl:s,props:i}=this;return e>=0&&e<n&&t>=0&&t<r?{dateProfile:i.dateProfile,dateSpan:Object.assign({allDay:!i.forceTimed,range:{start:i.startDate,end:i.endDate}},i.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:n,bottom:r},layer:1}:null}}class HC extends jE{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Wx()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&DE(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:n}=this,{moreLinkClick:r}=n.options,s=WC(t).start;function i(e){let{def:t,instance:r,range:s}=e.eventRange;return{event:new LS(n,t,r),start:n.dateEnv.toDate(s.start),end:n.dateEnv.toDate(s.end),isStart:e.isStart,isEnd:e.isEnd}}"function"===typeof r&&(r=r({date:s,allDay:Boolean(t.allDayDate),allSegs:t.allSegs.map(i),hiddenSegs:t.hiddenSegs.map(i),jsEvent:e,view:n.viewApi})),r&&"popover"!==r?"string"===typeof r&&n.calendarApi.zoomTo(s,r):this.setState({isPopoverOpen:!0})},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return gb(_E.Consumer,null,(n=>{let{viewApi:r,options:s,calendarApi:i}=n,{moreLinkText:a}=s,{moreCnt:o}=e,l=WC(e),c="function"===typeof a?a.call(i,o):"+".concat(o," ").concat(a),u=nw(s.moreLinkHint,[o],c),d={num:o,shortText:"+".concat(o),text:c,view:r};return gb(yb,null,Boolean(e.moreCnt)&&gb(FE,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),Kx(this.handleClick)),{title:u,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:d,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||VC,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),t.isPopoverOpen&&gb(zC,{id:t.popoverId,startDate:l.start,endDate:l.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))}))}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Lx(this.linkEl,".fc-view-harness"))}}function VC(e){return e.text}function WC(e){if(e.allDayDate)return{start:e.allDayDate,end:yw(e.allDayDate,1)};let{hiddenSegs:t}=e;return{start:GC(t),end:(n=t,n.reduce(QC).eventRange.range.end)};var n}function GC(e){return e.reduce(qC).eventRange.range.start}function qC(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function QC(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}class KC{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),void 0!==this.currentValue&&e(this.currentValue)}}class YC extends KC{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let n=!1;e.isActive?(t.set(e.id,e),n=!0):t.has(e.id)&&(t.delete(e.id),n=!0),n&&this.set(t)}}const XC=[],ZC={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},JC=Object.assign(Object.assign({},ZC),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(e,t)=>"day"===t?"Today":"This ".concat(e)},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:e=>"Show ".concat(e," more event").concat(1===e?"":"s")});function $C(e){let t=e.length>0?e[0].code:"en",n=XC.concat(e),r={en:JC};for(let s of n)r[s.code]=s;return{map:r,defaultCode:t}}function eN(e,t){return"object"!==typeof e||Array.isArray(e)?function(e,t){let n=[].concat(e||[]),r=function(e,t){for(let n=0;n<e.length;n+=1){let r=e[n].toLocaleLowerCase().split("-");for(let e=r.length;e>0;e-=1){let n=r.slice(0,e).join("-");if(t[n])return t[n]}}return null}(n,t)||JC;return tN(e,n,r)}(e,t):tN(e.code,[e.code],e)}function tN(e,t,n){let r=lE([ZC,n],["buttonText"]);delete r.code;let{week:s}=r;return delete r.week,{codeArg:e,codes:t,week:s,simpleNumberFormat:new Intl.NumberFormat(e),options:r}}function nN(e){return{id:Zx(),name:e.name,premiumReleaseDate:e.premiumReleaseDate?new Date(e.premiumReleaseDate):void 0,deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function rN(){let e,t=[],n=[];return(r,s)=>(e&&mw(r,t)&&mw(s,n)||(e=function(e,t){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(e){for(let a of e){const e=a.name,o=n[e];void 0===o?(n[e]=a.id,s(a.deps),i=a,r={premiumReleaseDate:sN((t=r).premiumReleaseDate,i.premiumReleaseDate),reducers:t.reducers.concat(i.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(i.isLoadingFuncs),contextInit:t.contextInit.concat(i.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),i.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(i.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),i.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(i.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(i.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(i.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(i.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(i.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(i.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),i.views),viewPropsTransformers:t.viewPropsTransformers.concat(i.viewPropsTransformers),isPropsValid:i.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(i.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(i.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(i.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(i.calendarInteractions),componentInteractions:t.componentInteractions.concat(i.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),i.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(i.eventSourceDefs),cmdFormatter:i.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(i.recurringTypes),namedTimeZonedImpl:i.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||i.initialView,elementDraggingImpl:t.elementDraggingImpl||i.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),i.optionChangeHandlers),scrollGridImpl:i.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),i.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),i.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),i.propSetHandlers)}):o!==a.id&&console.warn("Duplicate plugin '".concat(e,"'"))}var t,i}return e&&s(e),s(t),r}(r,s)),t=r,n=s,e)}function sN(e,t){return void 0===e?t:void 0===t?e:new Date(Math.max(e.valueOf(),t.valueOf()))}class iN extends SE{}function aN(e,t,n,r){if(t[e])return t[e];let s=function(e,t,n,r){let s=n[e],i=r[e],a=e=>s&&null!==s[e]?s[e]:i&&null!==i[e]?i[e]:null,o=a("component"),l=a("superType"),c=null;if(l){if(l===e)throw new Error("Can't have a custom view type that references itself");c=aN(l,t,n,r)}!o&&c&&(o=c.component);if(!o)return null;return{type:e,component:o,defaults:Object.assign(Object.assign({},c?c.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},c?c.overrides:{}),i?i.rawOptions:{})}}(e,t,n,r);return s&&(t[e]=s),s}function oN(e){return uE(e,lN)}function lN(e){let t="function"===typeof e?{component:e}:e,{component:n}=t;return t.content?n=cN(t):!n||n.prototype instanceof jE||(n=cN(Object.assign(Object.assign({},t),{content:n}))),{superType:t.type,component:n,rawOptions:t}}function cN(e){return t=>gb(_E.Consumer,null,(n=>gb(FE,{elTag:"div",elClasses:zE(n.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:e.content,classNameGenerator:e.classNames,didMount:e.didMount,willUnmount:e.willUnmount})))}function uN(e,t,n,r){let s=oN(e),i=oN(t.views),a=function(e,t){let n,r={};for(n in e)aN(n,r,e,t);for(n in t)aN(n,r,e,t);return r}(s,i);return uE(a,(e=>function(e,t,n,r,s){let i=e.overrides.duration||e.defaults.duration||r.duration||n.duration,a=null,o="",l="",c={};if(i&&(a=function(e){let t=JSON.stringify(e),n=dN[t];void 0===n&&(n=lw(e),dN[t]=n);return n}(i),a)){let e=pw(a);o=e.unit,1===e.value&&(l=o,c=t[o]?t[o].rawOptions:{})}let u=t=>{let n=t.buttonText||{},r=e.defaults.buttonTextKey;return null!=r&&null!=n[r]?n[r]:null!=n[e.type]?n[e.type]:null!=n[l]?n[l]:null},d=t=>{let n=t.buttonHints||{},r=e.defaults.buttonTextKey;return null!=r&&null!=n[r]?n[r]:null!=n[e.type]?n[e.type]:null!=n[l]?n[l]:null};return{type:e.type,component:e.component,duration:a,durationUnit:o,singleUnit:l,optionDefaults:e.defaults,optionOverrides:Object.assign(Object.assign({},c),e.overrides),buttonTextOverride:u(r)||u(n)||e.overrides.buttonText,buttonTextDefault:u(s)||e.defaults.buttonText||u(Zw)||e.type,buttonTitleOverride:d(r)||d(n)||e.overrides.buttonHint,buttonTitleDefault:d(s)||e.defaults.buttonHint||d(Zw)}}(e,i,t,n,r)))}iN.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},iN.prototype.baseIconClass="fc-icon",iN.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},iN.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},iN.prototype.iconOverrideOption="buttonIcons",iN.prototype.iconOverrideCustomButtonOption="icon",iN.prototype.iconOverridePrefix="fc-icon-";let dN={};function hN(e,t,n){let r=t?t.activeRange:null;return mN({},function(e,t){let n=wS(t),r=[].concat(e.eventSources||[]),s=[];e.initialEvents&&r.unshift(e.initialEvents);e.events&&r.unshift(e.events);for(let i of r){let e=xS(i,t,n);e&&s.push(e)}return s}(e,n),r,n)}function fN(e,t,n,r){let s=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return mN(e,t.sources,s,r);case"REMOVE_EVENT_SOURCE":return i=e,a=t.sourceId,cE(i,(e=>e.sourceId!==a));case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?gN(e,s,r):e;case"FETCH_EVENT_SOURCES":return vN(e,t.sourceIds?dE(t.sourceIds):bN(e,r),s,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function(e,t,n,r){let s=e[t];if(s&&n===s.latestFetchId)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:r})});return e}(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}var i,a}function pN(e){for(let t in e)if(e[t].isFetching)return!0;return!1}function mN(e,t,n,r){let s={};for(let i of t)s[i.sourceId]=i;return n&&(s=gN(s,n,r)),Object.assign(Object.assign({},e),s)}function gN(e,t,n){return vN(e,cE(e,(e=>function(e,t,n){if(!xN(e,n))return!e.latestFetchId;return!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end}(e,t,n))),t,!1,n)}function vN(e,t,n,r,s){let i={};for(let a in e){let o=e[a];t[a]?i[a]=yN(o,n,r,s):i[a]=o}return i}function yN(e,t,n,r){let{options:s,calendarApi:i}=r,a=r.pluginHooks.eventSourceDefs[e.sourceDefId],o=Zx();return a.fetch({eventSource:e,range:t,isRefetch:n,context:r},(n=>{let{rawEvents:a}=n;s.eventSourceSuccess&&(a=s.eventSourceSuccess.call(i,a,n.response)||a),e.success&&(a=e.success.call(i,a,n.response)||a),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:o,fetchRange:t,rawEvents:a})}),(n=>{let a=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(i,n),a=!0),e.failure&&(e.failure(n),a=!0),a||console.warn(n.message,n),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:o,fetchRange:t,error:n})})),Object.assign(Object.assign({},e),{isFetching:!0,latestFetchId:o})}function bN(e,t){return cE(e,(e=>xN(e,t)))}function xN(e,t){return!t.pluginHooks.eventSourceDefs[e.sourceDefId].ignoreRange}function wN(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function EN(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function SN(e,t){let n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function kN(e,t){let n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function CN(e,t,n,r,s){return{header:e.headerToolbar?NN(e.headerToolbar,e,t,n,r,s):null,footer:e.footerToolbar?NN(e.footerToolbar,e,t,n,r,s):null}}function NN(e,t,n,r,s,i){let a={},o=[],l=!1;for(let c in e){let u=AN(e[c],t,n,r,s,i);a[c]=u.widgets,o.push(...u.viewsWithButtons),l=l||u.hasTitle}return{sectionWidgets:a,viewsWithButtons:o,hasTitle:l}}function AN(e,t,n,r,s,i){let a="rtl"===t.direction,o=t.customButtons||{},l=n.buttonText||{},c=t.buttonText||{},u=n.buttonHints||{},d=t.buttonHints||{},h=e?e.split(" "):[],f=[],p=!1;return{widgets:h.map((e=>e.split(",").map((e=>{if("title"===e)return p=!0,{buttonName:e};let n,h,m,g,v,y;if(n=o[e])m=e=>{n.click&&n.click.call(e.target,e,e.target)},(g=r.getCustomButtonIconClass(n))||(g=r.getIconClass(e,a))||(v=n.text),y=n.hint||n.text;else if(h=s[e]){f.push(e),m=()=>{i.changeView(e)},(v=h.buttonTextOverride)||(g=r.getIconClass(e,a))||(v=h.buttonTextDefault);let n=h.buttonTextOverride||h.buttonTextDefault;y=nw(h.buttonTitleOverride||h.buttonTitleDefault||t.viewHint,[n,e],n)}else if(i[e])if(m=()=>{i[e]()},(v=l[e])||(g=r.getIconClass(e,a))||(v=c[e]),"prevYear"===e||"nextYear"===e){let t="prevYear"===e?"prev":"next";y=nw(u[t]||d[t],[c.year||"year","year"],c[e])}else y=t=>nw(u[e]||d[e],[c[t]||t,t],c[e]);return{buttonName:e,buttonClick:m,buttonIcon:g,buttonText:v,buttonHint:y}})))),viewsWithButtons:f,hasTitle:p}}class _N{constructor(e,t,n){this.type=e,this.getCurrentData=t,this.dateEnv=n}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}const TN={daysOfWeek:aE,startTime:lw,endTime:lw,duration:lw,startRecur:aE,endRecur:aE};function IN(e,t){let n=hE(t.getCurrentData().eventSources);if(1===n.length&&1===e.length&&Array.isArray(n[0]._raw)&&Array.isArray(e[0]))return void t.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:e[0]});let r=[];for(let s of e){let e=!1;for(let t=0;t<n.length;t+=1)if(n[t]._raw===s){n.splice(t,1),e=!0;break}e||r.push(s)}for(let s of n)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of r)t.calendarApi.addEventSource(s)}const jN=[nN({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:e=>Array.isArray(e.events)?e.events:null,fetch(e,t){t({rawEvents:e.eventSource.meta})}}]}),nN({name:"func-event-source",eventSourceDefs:[{parseMeta:e=>"function"===typeof e.events?e.events:null,fetch(e,t,n){const{dateEnv:r}=e.context;!function(e,t,n){let r=!1,s=function(e){r||(r=!0,t(e))},i=function(e){r||(r=!0,n(e))},a=e(s,i);a&&"function"===typeof a.then&&a.then(s,i)}(e.eventSource.meta.bind(null,rk(e.range,r)),(e=>t({rawEvents:e})),n)}}]}),nN({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:aE,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:e=>!e.url||"json"!==e.format&&e.format?null:{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam},fetch(e,t,n){const{meta:r}=e.eventSource,s=function(e,t,n){let r,s,i,a,{dateEnv:o,options:l}=n,c={};r=e.startParam,null==r&&(r=l.startParam);s=e.endParam,null==s&&(s=l.endParam);i=e.timeZoneParam,null==i&&(i=l.timeZoneParam);a="function"===typeof e.extraParams?e.extraParams():e.extraParams||{};Object.assign(c,a),c[r]=o.formatIso(t.start),c[s]=o.formatIso(t.end),"local"!==o.timeZone&&(c[i]=o.timeZone);return c}(r,e.range,e.context);ak(r.method,r.url,s).then((e=>{let[n,r]=e;t({rawEvents:n,response:r})}),n)}}]}),nN({name:"simple-recurring-event",recurringTypes:[{parse(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){let s,i={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null,dateEnv:t};return e.duration&&(s=e.duration),!s&&e.startTime&&e.endTime&&(n=e.endTime,r=e.startTime,s={years:n.years-r.years,months:n.months-r.months,days:n.days-r.days,milliseconds:n.milliseconds-r.milliseconds}),{allDayGuess:Boolean(!e.startTime&&!e.endTime),duration:s,typeData:i}}var n,r;return null},expand(e,t,n){let r=WE(t,{start:e.startRecur,end:e.endRecur});return r?function(e,t,n,r,s){let i=e?dE(e):null,a=Ew(s.start),o=s.end,l=[];for(;a<o;){let e;i&&!i[a.getUTCDay()]||(e=t?r.add(a,t):a,l.push(r.createMarker(n.toDate(e)))),a=yw(a,1)}return l}(e.daysOfWeek,e.startTime,e.dateEnv,n,r):[]}}],eventRefiners:TN}),nN({name:"change-handler",optionChangeHandlers:{events(e,t){IN([e],t)},eventSources:IN}}),nN({name:"misc",isLoadingFuncs:[e=>pN(e.eventSources)],propSetHandlers:{dateProfile:function(e,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},rk(e.activeRange,t.dateEnv)),{view:t.viewApi}))},eventStore:function(e,t){let{emitter:n}=t;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",US(e,t))}}})];class DN{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Ox(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t,n=[];for(;t=e.shift();)this.runTask(t),n.push(t);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function RN(e,t,n){let r;return r=/^(year|month)$/.test(e.currentRangeUnit)?e.currentRange:e.activeRange,n.formatRange(r.start,r.end,Yw(t.titleFormat||function(e){let{currentRangeUnit:t}=e;if("year"===t)return{year:"numeric"};if("month"===t)return{year:"numeric",month:"long"};let n=ww(e.currentRange.start,e.currentRange.end);if(null!==n&&n>1)return{year:"numeric",month:"short",day:"numeric"};return{year:"numeric",month:"long",day:"numeric"}}(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}class PN{constructor(){this.resetListeners=new Set}handleInput(e,t){const n=this.dateEnv;if(e!==n&&("function"===typeof t?this.nowFn=t:n||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,n))for(const r of this.resetListeners.values())r()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class ON{constructor(e){this.computeCurrentViewData=Pw(this._computeCurrentViewData),this.organizeRawLocales=Pw($C),this.buildLocale=Pw(eN),this.buildPluginHooks=rN(),this.buildDateEnv=Pw(MN),this.buildTheme=Pw(LN),this.parseToolbars=Pw(CN),this.buildViewSpecs=Pw(uN),this.buildDateProfileGenerator=Ow(FN),this.buildViewApi=Pw(UN),this.buildViewUiProps=Ow(HN),this.buildEventUiBySource=Pw(BN,fE),this.buildEventUiBases=Pw(zN),this.parseContextBusinessHours=Ow(WN),this.buildTitle=Pw(RN),this.nowManager=new PN,this.emitter=new AS,this.actionRunner=new DN(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=e=>{this.actionRunner.request(e)},this.props=e,this.actionRunner.pause(),this.nowManager=new PN;let t={},n=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),r=n.calendarOptions.initialView||n.pluginHooks.initialView,s=this.computeCurrentViewData(r,n,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let i={nowManager:this.nowManager,dateEnv:n.dateEnv,options:n.calendarOptions,pluginHooks:n.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a=function(e,t,n){let r=e.initialDate;return null!=r?t.createMarker(r):n.getDateMarker()}(n.calendarOptions,n.dateEnv,this.nowManager),o=s.dateProfileGenerator.build(a);QE(o.activeRange,a)||(a=o.currentRange.start);for(let d of n.pluginHooks.contextInit)d(i);let l=hN(n.calendarOptions,o,i),c={dynamicOptionOverrides:t,currentViewType:r,currentDate:a,dateProfile:o,businessHours:this.parseContextBusinessHours(i),eventSources:l,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(i).selectionConfig},u=Object.assign(Object.assign({},i),c);for(let d of n.pluginHooks.reducers)Object.assign(c,d(null,null,u));VN(c,i)&&this.emitter.trigger("loading",!0),this.state=c,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:n}=this;void 0===t?n.optionOverrides=e:(n.optionOverrides=Object.assign(Object.assign({},n.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(void 0===t||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:n,emitter:r}=this,s=function(e,t){return"SET_OPTION"===t.type?Object.assign(Object.assign({},e),{[t.optionName]:t.rawOptionValue}):e}(n.dynamicOptionOverrides,e),i=this.computeOptionsData(t.optionOverrides,s,t.calendarApi),a=function(e,t){"CHANGE_VIEW_TYPE"===t.type&&(e=t.viewType);return e}(n.currentViewType,e),o=this.computeCurrentViewData(a,i,t.optionOverrides,s);t.calendarApi.currentDataManager=this,r.setThisContext(t.calendarApi),r.setOptions(o.options);let l={nowManager:this.nowManager,dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:c,dateProfile:u}=n;this.data&&this.data.dateProfileGenerator!==o.dateProfileGenerator&&(u=o.dateProfileGenerator.build(c)),c=function(e,t){return"CHANGE_DATE"===t.type?t.dateMarker:e}(c,e),u=function(e,t,n,r){let s;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if(s=r.buildPrev(e,n),s.isValid)return s;break;case"NEXT":if(s=r.buildNext(e,n),s.isValid)return s}return e}(u,e,c,o.dateProfileGenerator),"PREV"!==e.type&&"NEXT"!==e.type&&QE(u.currentRange,c)||(c=u.currentRange.start);let d=fN(n.eventSources,e,u,l),h=ES(n.eventStore,e,d,u,l),f=pN(d)&&!o.options.progressiveEventRendering&&n.renderableEventStore||h,{eventUiSingleBase:p,selectionConfig:m}=this.buildViewUiProps(l),g=this.buildEventUiBySource(d),v={dynamicOptionOverrides:s,currentViewType:a,currentDate:c,dateProfile:u,eventSources:d,eventStore:h,renderableEventStore:f,selectionConfig:m,eventUiBases:this.buildEventUiBases(f.defs,p,g),businessHours:this.parseContextBusinessHours(l),dateSelection:wN(n.dateSelection,e),eventSelection:EN(n.eventSelection,e),eventDrag:SN(n.eventDrag,e),eventResize:kN(n.eventResize,e)},y=Object.assign(Object.assign({},l),v);for(let w of i.pluginHooks.reducers)Object.assign(v,w(n,e,y));let b=VN(n,l),x=VN(v,l);!b&&x?r.trigger("loading",!0):b&&!x&&r.trigger("loading",!1),this.state=v,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,n=this.data,r=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(t.currentViewType,r,e.optionOverrides,t.dynamicOptionOverrides),i=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,s.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),s),t),a=r.pluginHooks.optionChangeHandlers,o=n&&n.calendarOptions,l=r.calendarOptions;if(o&&o!==l){o.timeZone!==l.timeZone&&(t.eventSources=i.eventSources=function(e,t,n){let r=t?t.activeRange:null;return vN(e,bN(e,n),r,!0,n)}(i.eventSources,t.dateProfile,i),t.eventStore=i.eventStore=CS(i.eventStore,n.dateEnv,i.dateEnv),t.renderableEventStore=i.renderableEventStore=CS(i.renderableEventStore,n.dateEnv,i.dateEnv));for(let e in a)-1===this.optionsForHandling.indexOf(e)&&o[e]===l[e]||a[e](l[e],i)}this.optionsForHandling=[],e.onData&&e.onData(i)}computeOptionsData(e,t,n){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:s,localeDefaults:i,availableLocaleData:a,extra:o}=this.processRawCalendarOptions(e,t);GN(o);let l=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,s,a,r.defaultRangeSeparator),c=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,i),u=this.buildTheme(r,s),d=this.parseToolbars(r,this.stableOptionOverrides,u,c,n);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:s,dateEnv:l,viewSpecs:c,theme:u,toolbarConfig:d,localeDefaults:i,availableRawLocales:a.map}}processRawCalendarOptions(e,t){let{locales:n,locale:r}=sE([Zw,e,t]),s=this.organizeRawLocales(n),i=s.map,a=this.buildLocale(r||s.defaultCode,i).options,o=this.buildPluginHooks(e.plugins||[],jN),l=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xw),Jw),$w),o.listenerRefiners),o.optionRefiners),c={},u=sE([Zw,a,e,t]),d={},h=this.currentCalendarOptionsInput,f=this.currentCalendarOptionsRefined,p=!1;for(let m in u)-1===this.optionsForRefining.indexOf(m)&&(u[m]===h[m]||eE[m]&&m in h&&eE[m](h[m],u[m]))?d[m]=f[m]:l[m]?(d[m]=l[m](u[m]),p=!0):c[m]=h[m];return p&&(this.currentCalendarOptionsInput=u,this.currentCalendarOptionsRefined=d,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:o,availableLocaleData:s,localeDefaults:a,extra:c}}_computeCurrentViewData(e,t,n,r){let s=t.viewSpecs[e];if(!s)throw new Error('viewType "'.concat(e,"\" is not available. Please make sure you've loaded all neccessary plugins"));let{refinedOptions:i,extra:a}=this.processRawViewOptions(s,t.pluginHooks,t.localeDefaults,n,r);return GN(a),this.nowManager.handleInput(t.dateEnv,i.now),{viewSpec:s,options:i,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,showNonCurrentDates:i.showNonCurrentDates,dayCount:i.dayCount,dateAlignment:i.dateAlignment,dateIncrement:i.dateIncrement,hiddenDays:i.hiddenDays,weekends:i.weekends,validRangeInput:i.validRange,visibleRangeInput:i.visibleRange,fixedWeekCount:i.fixedWeekCount}),viewApi:this.buildViewApi(e,this.getCurrentData,t.dateEnv)}}processRawViewOptions(e,t,n,r,s){let i=sE([Zw,e.optionDefaults,n,r,e.optionOverrides,s]),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xw),Jw),$w),rE),t.listenerRefiners),t.optionRefiners),o={},l=this.currentViewOptionsInput,c=this.currentViewOptionsRefined,u=!1,d={};for(let h in i)i[h]===l[h]||eE[h]&&eE[h](i[h],l[h])?o[h]=c[h]:(i[h]===this.currentCalendarOptionsInput[h]||eE[h]&&eE[h](i[h],this.currentCalendarOptionsInput[h])?h in this.currentCalendarOptionsRefined&&(o[h]=this.currentCalendarOptionsRefined[h]):a[h]?o[h]=a[h](i[h]):d[h]=i[h],u=!0);return u&&(this.currentViewOptionsInput=i,this.currentViewOptionsRefined=o),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:d}}}function MN(e,t,n,r,s,i,a,o){let l=eN(t||a.defaultCode,a.map);return new EE({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:i.namedTimeZonedImpl,locale:l,weekNumberCalculation:n,firstDay:r,weekText:s,cmdFormatter:i.cmdFormatter,defaultSeparator:o})}function LN(e,t){return new(t.themeClasses[e.themeSystem]||iN)(e)}function FN(e){return new(e.dateProfileGeneratorClass||ZE)(e)}function UN(e,t,n){return new _N(e,t,n)}function BN(e){return uE(e,(e=>e.ui))}function zN(e,t,n){let r={"":t};for(let s in e){let t=e[s];t.sourceId&&n[t.sourceId]&&(r[s]=n[t.sourceId])}return r}function HN(e){let{options:t}=e;return{eventUiSingleBase:gS({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:"boolean"===typeof t.eventOverlap?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:gS({constraint:t.selectConstraint,overlap:"boolean"===typeof t.selectOverlap?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function VN(e,t){for(let n of t.pluginHooks.isLoadingFuncs)if(n(e))return!0;return!1}function WN(e){return TS(e.options.businessHours,e)}function GN(e,t){for(let n in e)console.warn("Unknown option '".concat(n,"'")+(t?" for view '".concat(t,"'"):""))}class qN extends jE{render(){return gb("div",{className:"fc-toolbar-chunk"},...this.props.widgetGroups.map((e=>this.renderWidgetGroup(e))))}renderWidgetGroup(e){let{props:t}=this,{theme:n}=this.context,r=[],s=!0;for(let i of e){let{buttonName:e,buttonClick:a,buttonText:o,buttonIcon:l,buttonHint:c}=i;if("title"===e)s=!1,r.push(gb("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let s=e===t.activeButton,i=!t.isTodayEnabled&&"today"===e||!t.isPrevEnabled&&"prev"===e||!t.isNextEnabled&&"next"===e,u=["fc-".concat(e,"-button"),n.getClass("button")];s&&u.push(n.getClass("buttonActive")),r.push(gb("button",{type:"button",title:"function"===typeof c?c(t.navUnit):c,disabled:i,"aria-pressed":s,className:u.join(" "),onClick:a},o||(l?gb("span",{className:l,role:"img"}):"")))}}if(r.length>1){return gb("div",{className:s&&n.getClass("buttonGroup")||""},...r)}return r[0]}}class QN extends jE{render(){let e,t,{model:n,extraClassName:r}=this.props,s=!1,i=n.sectionWidgets,a=i.center;return i.left?(s=!0,e=i.left):e=i.start,i.right?(s=!0,t=i.right):t=i.end,gb("div",{className:[r||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",e||[]),this.renderSection("center",a||[]),this.renderSection("end",t||[]))}renderSection(e,t){let{props:n}=this;return gb(qN,{key:e,widgetGroups:t,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId})}}class KN extends jE{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,DE(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:n}=e,r=["fc-view-harness",n||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",i="";return n?null!==t.availableWidth?s=t.availableWidth/n:i="".concat(1/n*100,"%"):s=e.height||"",gb("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:s,paddingBottom:i}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class YN extends uk{constructor(e){super(e),this.handleSegClick=(e,t)=>{let{component:n}=this,{context:r}=n,s=HS(t);if(s&&n.isValidSegDownEl(e.target)){let i=Lx(e.target,".fc-event-forced-url"),a=i?i.querySelector("a[href]").href:"";r.emitter.trigger("eventClick",{el:t,event:new LS(n.context,s.eventRange.def,s.eventRange.instance),jsEvent:e,view:r.viewApi}),a&&!e.defaultPrevented&&(window.location.href=a)}},this.destroy=qx(e.el,"click",".fc-event",this.handleSegClick)}}class XN extends uk{constructor(e){super(e),this.handleEventElRemove=e=>{e===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(e,t)=>{HS(t)&&(this.currentSegEl=t,this.triggerEvent("eventMouseEnter",e,t))},this.handleSegLeave=(e,t)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",e,t))},this.removeHoverListeners=function(e,t,n,r){let s;return qx(e,"mouseover",t,((e,t)=>{if(t!==s){s=t,n(e,t);let i=e=>{s=null,r(e,t),t.removeEventListener("mouseleave",i)};t.addEventListener("mouseleave",i)}}))}(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,n){let{component:r}=this,{context:s}=r,i=HS(n);t&&!r.isValidSegDownEl(t.target)||s.emitter.trigger(e,{el:n,event:new LS(s,i.eventRange.def,i.eventRange.instance),jsEvent:t,view:s.viewApi})}}class ZN extends IE{constructor(){super(...arguments),this.buildViewContext=Pw(TE),this.buildViewPropTransformers=Pw($N),this.buildToolbarProps=Pw(JN),this.headerRef={current:null},this.footerRef={current:null},this.interactionsStore={},this.state={viewLabelId:Wx()},this.registerInteractiveComponent=(e,t)=>{let n=function(e,t){return{component:e,el:t.el,useEventCenter:null==t.useEventCenter||t.useEventCenter,isHitComboAllowed:t.isHitComboAllowed||null}}(e,t),r=[YN,XN].concat(this.props.pluginHooks.componentInteractions).map((e=>new e(n)));this.interactionsStore[e.uid]=r,hk[e.uid]=n},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let e of t)e.destroy();delete this.interactionsStore[e.uid]}delete hk[e.uid]},this.resizeRunner=new Ox((()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})})),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let e,{props:t}=this,{toolbarConfig:n,options:r}=t,s=!1,i="";t.isHeightAuto||t.forPrint?i="":null!=r.height?s=!0:null!=r.contentHeight?i=r.contentHeight:e=Math.max(r.aspectRatio,.5);let a=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.nowManager,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),o=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return gb(_E.Provider,{value:a},gb(fk,{unit:"day"},(r=>{let a=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,r,t.viewTitle);return gb(yb,null,n.header&&gb(QN,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:o},a)),gb(KN,{liquid:s,height:i,aspectRatio:e,labeledById:o},this.renderView(t),this.buildAppendContent()),n.footer&&gb(QN,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},a)))})))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map((t=>new t(e))),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let n in t)t[n](e[n],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:n}=t.pluginHooks;for(let r in n)t[r]!==e[r]&&n[r](t[r],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this;return gb(yb,{},...e.pluginHooks.viewContainerAppends.map((t=>t(e))))}renderView(e){let{pluginHooks:t}=e,{viewSpec:n}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(t.viewPropsTransformers);for(let i of s)Object.assign(r,i.transform(r,e));return gb(n.component,Object.assign({},r))}}function JN(e,t,n,r,s,i){let a=n.build(s,void 0,!1),o=n.buildPrev(t,r,!1),l=n.buildNext(t,r,!1);return{title:i,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:a.isValid&&!QE(t.currentRange,s),isPrevEnabled:o.isValid,isNextEnabled:l.isValid}}function $N(e){return e.map((e=>new e))}class eA extends mk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=e=>{switch(e.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=e=>{this.currentData=e,this.renderRunner.request(e.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:e}=this;kE((()=>{Bb(gb(ck,{options:e.calendarOptions,theme:e.theme,emitter:e.emitter},((t,n,r,s)=>(this.setClassNames(t),this.setHeight(n),gb(LE.Provider,{value:this.customContentRenderId},gb(ZN,Object.assign({isHeightAuto:r,forPrint:s},e)))))),this.el)}))}else this.isRendered&&(this.isRendered=!1,Bb(null,this.el),this.setClassNames([]),this.setHeight(""))},function(e){e.isConnected&&e.getRootNode&&Dx(e.getRootNode())}(e),this.el=e,this.renderRunner=new Ox(this.handleRenderRequest),new ON({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){kE((()=>{super.updateSize()}))}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!mw(e,this.currentClassNames)){let{classList:t}=this.el;for(let e of this.currentClassNames)t.remove(e);for(let n of e)t.add(n);this.currentClassNames=e}}setHeight(e){zx(this.el,"height",e)}}const tA=parseInt(String(r.version).split(".")[0])<18;class nA extends r.Component{constructor(){super(...arguments),this.elRef=(0,r.createRef)(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame((()=>{this.doResize()})))}}render(){const e=[];for(const t of this.state.customRenderingMap.values())e.push(r.createElement(rA,{key:t.id,customRendering:t}));return r.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new YC;let t;this.handleCustomRendering=e.handle.bind(e),this.calendar=new eA(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",(()=>{(0,ub.flushSync)((()=>{}))})),e.subscribe((e=>{const n=Date.now(),r=!t;(tA||r||this.isUpdating||this.isUnmounting||n-t<100?sA:ub.flushSync)((()=>{this.setState({customRenderingMap:e},(()=>{t=n,r?this.doResize():this.requestResize()}))}))}))}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){void 0!==this.resizeId&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}nA.act=sA;class rA extends r.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:t}=e,n="function"===typeof t?t(e.renderProps):t;return(0,ub.createPortal)(n,e.containerEl)}}function sA(e){e()}class iA extends Uk{constructor(){super(...arguments),this.headerElRef={current:null}}renderSimpleLayout(e,t){let{props:n,context:r}=this,s=[],i=kC(r.options);return e&&s.push({type:"header",key:"header",isSticky:i,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),gb(BE,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},gb(NC,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,t,n,r){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:i,context:a}=this,o=!i.forPrint&&kC(a.options),l=!i.forPrint&&CC(a.options),c=[];return e&&c.push({type:"header",key:"header",isSticky:o,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),c.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),l&&c.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:SC}]}),gb(BE,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},gb(s,{liquid:!i.isHeightAuto&&!i.forPrint,forPrint:i.forPrint,collapsibleWidth:i.forPrint,colGroups:[{cols:[{span:n,minWidth:r}]}],sections:c}))}}function aA(e,t){let n=[];for(let r=0;r<t;r+=1)n[r]=[];for(let r of e)n[r.row].push(r);return n}function oA(e,t){let n=[];for(let r=0;r<t;r+=1)n[r]=[];for(let r of e)n[r.firstCol].push(r);return n}function lA(e,t){let n=[];if(e){for(let r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let t of e.segs)n[t.row].segs.push(t)}else for(let r=0;r<t;r+=1)n[r]=null;return n}const cA=Yw({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function uA(e){let{display:t}=e.eventRange.ui;return"list-item"===t||"auto"===t&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class dA extends jE{render(){let{props:e}=this;return gb(_C,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:cA,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class hA extends jE{render(){let{props:e,context:t}=this,{options:n}=t,{seg:r}=e,s=XS(r,n.eventTimeFormat||cA,t,!0,e.defaultDisplayEventEnd);return gb(AC,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:ek(e.seg,t),defaultGenerator:fA,timeText:s,isResizing:!1,isDateSelecting:!1}))}}function fA(e){return gb(yb,null,gb("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&gb("div",{className:"fc-event-time"},e.timeText),gb("div",{className:"fc-event-title"},e.event.title||gb(yb,null,"\xa0")))}class pA extends jE{constructor(){super(...arguments),this.compileSegs=Pw(mA)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:n}=this.compileSegs(e.singlePlacements);return gb(HC,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:n,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let n=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return gb(yb,null,t.map((t=>{let r=t.eventRange.instance.instanceId;return gb("div",{className:"fc-daygrid-event-harness",key:r,style:{visibility:n[r]?"hidden":""}},uA(t)?gb(hA,Object.assign({seg:t,isDragging:!1,isSelected:r===e.eventSelection,defaultDisplayEventEnd:!1},ZS(t,e.todayRange))):gb(dA,Object.assign({seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:r===e.eventSelection,defaultDisplayEventEnd:!1},ZS(t,e.todayRange))))})))}})}}function mA(e){let t=[],n=[];for(let r of e)t.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:t,invisibleSegs:n}}const gA=Yw({week:"narrow"});class vA extends Uk{constructor(){super(...arguments),this.rootElRef={current:null},this.state={dayNumberId:Wx()},this.handleRootEl=e=>{DE(this.rootElRef,e),DE(this.props.elRef,e)}}render(){let{context:e,props:t,state:n,rootElRef:r}=this,{options:s,dateEnv:i}=e,{date:a,dateProfile:o}=t;const l=t.showDayNumber&&function(e,t,n){const{start:r,end:s}=t,i=bw(s,-1),a=n.getYear(r),o=n.getMonth(r),l=n.getYear(i),c=n.getMonth(i);return!(a===l&&o===c)&&Boolean(e.valueOf()===r.valueOf()||1===n.getDay(e)&&e.valueOf()<s.valueOf())}(a,o.currentRange,i);return gb(DC,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:yA,date:a,dateProfile:o,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:l,extraRenderProps:t.extraRenderProps},((i,o)=>gb("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&gb(FC,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Ck(e,a,"week"),date:a,defaultFormat:gA}),!o.isDisabled&&(t.showDayNumber||RC(s)||t.forceDayTop)?gb("div",{className:"fc-daygrid-day-top"},gb(i,{elTag:"a",elClasses:["fc-daygrid-day-number",l&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Ck(e,a)),{id:n.dayNumberId})})):t.showDayNumber?gb("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},gb("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,gb("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,gb("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},gb(pA,{allDayDate:a,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:r,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),gb("div",{className:"fc-daygrid-day-bg"},t.bgContent))))}}function yA(e){return e.dayNumberText||gb(yb,null,"\xa0")}function bA(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function xA(e){return bA(e)+":"+e.lastCol}function wA(e,t,n,r,s,i,a){let o=new SA((t=>{let n=e[t.index].eventRange.instance.instanceId+":"+t.span.start+":"+(t.span.end-1);return s[n]||1}));o.allowReslicing=!0,o.strictOrder=r,!0===t||!0===n?(o.maxCoord=i,o.hiddenConsumes=!0):"number"===typeof t?o.maxStackCnt=t:"number"===typeof n&&(o.maxStackCnt=n,o.hiddenConsumes=!0);let l=[],c=[];for(let v=0;v<e.length;v+=1){let t=e[v],n=xA(t);null!=s[n]?l.push({index:v,span:{start:t.firstCol,end:t.lastCol+1}}):c.push(t)}let u=o.addSegs(l),d=o.toRects(),{singleColPlacements:h,multiColPlacements:f,leftoverMargins:p}=function(e,t,n){let r=function(e,t){let n=[];for(let r=0;r<t;r+=1)n.push([]);for(let r of e)for(let e=r.span.start;e<r.span.end;e+=1)n[e].push(r);return n}(e,n.length),s=[],i=[],a=[];for(let o=0;o<n.length;o+=1){let e=r[o],l=[],c=0,u=0;for(let r of e){let e=t[r.index];l.push({seg:EA(e,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:r.levelCoord,marginTop:r.levelCoord-c}),c=r.levelCoord+r.thickness}let d=[];c=0,u=0;for(let r of e){let e=t[r.index],s=r.span.end-r.span.start>1,i=r.span.start===o;u+=r.levelCoord-c,c=r.levelCoord+r.thickness,s?(u+=r.thickness,i&&d.push({seg:EA(e,r.span.start,r.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:r.levelCoord,marginTop:0})):i&&(d.push({seg:EA(e,r.span.start,r.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:r.levelCoord,marginTop:u}),u=0)}s.push(l),i.push(d),a.push(u)}return{singleColPlacements:s,multiColPlacements:i,leftoverMargins:a}}(d,e,a),m=[],g=[];for(let v of c){f[v.firstCol].push({seg:v,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=v.firstCol;e<=v.lastCol;e+=1)h[e].push({seg:EA(v,e,e+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<a.length;v+=1)m.push(0);for(let v of u){let t=e[v.index],n=v.span;f[n.start].push({seg:EA(t,n.start,n.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=n.start;e<n.end;e+=1)m[e]+=1,h[e].push({seg:EA(t,e,e+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<a.length;v+=1)g.push(p[v]);return{singleColPlacements:h,multiColPlacements:f,moreCnts:m,moreMarginTops:g}}function EA(e,t,n,r){if(e.firstCol===t&&e.lastCol===n-1)return e;let s=e.eventRange,i=s.range,a=WE(i,{start:r[t].date,end:yw(r[n-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:n-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:a},isStart:e.isStart&&a.start.valueOf()===i.start.valueOf(),isEnd:e.isEnd&&a.end.valueOf()===i.end.valueOf()})}class SA extends Bk{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:n}=this,r=e=>!this.forceHidden[Hk(e)];for(let s=0;s<n.length;s+=1)n[s]=n[s].filter(r);return t}handleInvalidInsertion(e,t,n){const{entriesByLevel:r,forceHidden:s}=this,{touchingEntry:i,touchingLevel:a,touchingLateral:o}=e;if(this.hiddenConsumes&&i){const e=Hk(i);if(!s[e])if(this.allowReslicing){const e=Object.assign(Object.assign({},i),{span:Vk(i.span,t.span)});s[Hk(e)]=!0,r[a][o]=e,n.push(e),this.splitEntry(i,t,n)}else s[e]=!0,n.push(i)}super.handleInvalidInsertion(e,t,n)}}class kA extends Uk{constructor(){super(...arguments),this.cellElRefs=new gC,this.frameElRefs=new gC,this.fgElRefs=new gC,this.segHarnessRefs=new gC,this.rootElRef={current:null},this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:n}=this,{options:r}=n,s=e.cells.length,i=oA(e.businessHourSegs,s),a=oA(e.bgEventSegs,s),o=oA(this.getHighlightSegs(),s),l=oA(this.getMirrorSegs(),s),{singleColPlacements:c,multiColPlacements:u,moreCnts:d,moreMarginTops:h}=wA(GS(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),f=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return gb("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map(((t,n)=>{let r=this.renderFgSegs(n,e.forPrint?c[n]:u[n],e.todayRange,f),s=this.renderFgSegs(n,function(e,t){if(!e.length)return[];let n=function(e){let t={};for(let n of e)for(let e of n)t[e.seg.eventRange.instance.instanceId]=e.absoluteTop;return t}(t);return e.map((e=>({seg:e,isVisible:!0,isAbsolute:!0,absoluteTop:n[e.eventRange.instance.instanceId],marginTop:0})))}(l[n],u),e.todayRange,{},Boolean(e.eventDrag),Boolean(e.eventResize),!1);return gb(vA,{key:t.key,elRef:this.cellElRefs.createRef(t.key),innerElRef:this.frameElRefs.createRef(t.key),dateProfile:e.dateProfile,date:t.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&0===n,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:t.extraRenderProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,moreCnt:d[n],moreMarginTop:h[n],singlePlacements:c[n],fgContentElRef:this.fgElRefs.createRef(t.key),fgContent:gb(yb,null,gb(yb,null,r),gb(yb,null,s)),bgContent:gb(yb,null,this.renderFillSegs(o[n],"highlight"),this.renderFillSegs(i[n],"non-business"),this.renderFillSegs(a[n],"bg-event")),minHeight:e.cellMinHeight})})))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let n=this.props;this.updateSizing(!fE(e,n))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,n,r,s,i,a){let{context:o}=this,{eventSelection:l}=this.props,{framePositions:c}=this.state,u=1===this.props.cells.length,d=s||i||a,h=[];if(c)for(let f of t){let{seg:e}=f,{instanceId:t}=e.eventRange.instance,p=f.isVisible&&!r[t],m=f.isAbsolute,g="",v="";m&&(o.isRtl?(v=0,g=c.lefts[e.lastCol]-c.lefts[e.firstCol]):(g=0,v=c.rights[e.firstCol]-c.rights[e.lastCol])),h.push(gb("div",{className:"fc-daygrid-event-harness"+(m?" fc-daygrid-event-harness-abs":""),key:bA(e),ref:d?null:this.segHarnessRefs.createRef(xA(e)),style:{visibility:p?"":"hidden",marginTop:m?"":f.marginTop,top:m?f.absoluteTop:"",left:g,right:v}},uA(e)?gb(hA,Object.assign({seg:e,isDragging:s,isSelected:t===l,defaultDisplayEventEnd:u},ZS(e,n))):gb(dA,Object.assign({seg:e,isDragging:s,isResizing:i,isDateSelecting:a,isSelected:t===l,defaultDisplayEventEnd:u},ZS(e,n)))))}return h}renderFillSegs(e,t){let{isRtl:n}=this.context,{todayRange:r}=this.props,{framePositions:s}=this.state,i=[];if(s)for(let a of e){let e=n?{right:0,left:s.lefts[a.lastCol]-s.lefts[a.firstCol]}:{left:0,right:s.rights[a.firstCol]-s.rights[a.lastCol]};i.push(gb("div",{key:$S(a.eventRange),className:"fc-daygrid-bg-harness",style:e},"bg-event"===t?gb(OC,Object.assign({seg:a},ZS(a,r))):LC(t)))}return gb(yb,{},...i)}updateSizing(e){let{props:t,state:n,frameElRefs:r}=this;if(!t.forPrint&&null!==t.clientWidth){if(e){let e=t.cells.map((e=>r.currentMap[e.key]));if(e.length){let t=this.rootElRef.current,r=new Pk(t,e,!0,!1);n.framePositions&&n.framePositions.similarTo(r)||this.setState({framePositions:new Pk(t,e,!0,!1)})}}const s=this.state.segHeights,i=this.querySegHeights(),a=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},s),i),maxContentHeight:a?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let n in e){let r=Math.round(e[n].getBoundingClientRect().height);t[n]=Math.max(t[n]||0,r)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],n=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map((t=>e[t.key]))}}kA.addStateEquality({segHeights:fE});class CA extends Uk{constructor(){super(...arguments),this.splitBusinessHourSegs=Pw(aA),this.splitBgEventSegs=Pw(aA),this.splitFgEventSegs=Pw(aA),this.splitDateSelectionSegs=Pw(aA),this.splitEventDrag=Pw(lA),this.splitEventResize=Pw(lA),this.rowRefs=new gC}render(){let{props:e,context:t}=this,n=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,n),s=this.splitBgEventSegs(e.bgEventSegs,n),i=this.splitFgEventSegs(e.fgEventSegs,n),a=this.splitDateSelectionSegs(e.dateSelectionSegs,n),o=this.splitEventDrag(e.eventDrag,n),l=this.splitEventResize(e.eventResize,n),c=n>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return gb(fk,{unit:"day"},((t,u)=>gb(yb,null,e.cells.map(((t,d)=>gb(kA,{ref:this.rowRefs.createRef(d),key:t.length?t[0].date.toISOString():d,showDayNumbers:n>1,showWeekNumbers:e.showWeekNumbers,todayRange:u,dateProfile:e.dateProfile,cells:t,renderIntro:e.renderRowIntro,businessHourSegs:r[d],eventSelection:e.eventSelection,bgEventSegs:s[d].filter(NA),fgEventSegs:i[d],dateSelectionSegs:a[d],eventDrag:o[d],eventResize:l[d],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:c,forPrint:e.forPrint}))))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Pk(this.rootEl,this.rowRefs.collect().map((e=>e.getCellEls()[0])),!1,!0),this.colPositions=new Pk(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:n,rowPositions:r}=this,s=n.leftToIndex(e),i=r.topToIndex(t);if(null!=i&&null!=s){let e=this.props.cells[i][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(i,s),allDay:!0},e.extraDateSpan),dayEl:this.getCellEl(i,s),rect:{left:n.lefts[s],right:n.rights[s],top:r.tops[i],bottom:r.bottoms[i]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let n=this.props.cells[e][t].date;return{start:n,end:yw(n,1)}}}function NA(e){return e.eventRange.def.allDay}class AA extends Uk{constructor(){super(...arguments),this.elRef={current:null},this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:n,expandRows:r}=e,s=!0===n||!0===t;s&&!r&&(s=!1,t=null,n=null);let i=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return gb("div",{ref:this.elRef,className:i.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},gb("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,gb("tbody",{role:"presentation"},gb(CA,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:n,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=function(e,t){let n;t.currentRangeUnit.match(/year|month/)&&(n=e.querySelector('[data-date="'.concat(t.currentDate.toISOString().match(/^\d{4}-\d{2}/)[0],'-01"]')));n||(n=e.querySelector('[data-date="'.concat(Dw(t.currentDate),'"]')));return n}(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),n=t.closest(".fc-scroller"),r=e.getBoundingClientRect().top-t.getBoundingClientRect().top;n.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}class _A extends iC{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class TA extends Uk{constructor(){super(...arguments),this.slicer=new _A,this.tableRef={current:null}}render(){let{props:e,context:t}=this;return gb(AA,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}function IA(e,t){let n=new rC(e.renderRange,t);return new sC(n,/year|month|week/.test(e.currentRangeUnit))}jx(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var jA=nN({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class extends iA{constructor(){super(...arguments),this.buildDayTableModel=Pw(IA),this.headerRef={current:null},this.tableRef={current:null}}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:n}=this,r=this.buildDayTableModel(n.dateProfile,t),s=e.dayHeaders&&gb(tC,{ref:this.headerRef,dateProfile:n.dateProfile,dates:r.headerDates,datesRepDistinctDays:1===r.rowCnt}),i=t=>gb(TA,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:r,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:n.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,i,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,i)}},dateProfileGeneratorClass:class extends ZE{buildRenderRange(e,t,n){let r=super.buildRenderRange(e,t,n),{props:s}=this;return function(e){let t,{dateEnv:n,currentRange:r}=e,{start:s,end:i}=r;e.snapToWeek&&(s=n.startOfWeek(s),t=n.startOfWeek(i),t.valueOf()!==i.valueOf()&&(i=vw(t,1)));if(e.fixedWeekCount){let e=n.startOfWeek(n.startOfMonth(yw(r.end,-1)));i=vw(i,6-Math.ceil(xw(e,i)/7))}return{start:s,end:i}}({currentRange:r,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class DA extends bk{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?"background"===(t=e).ui.display||"inverse-background"===t.ui.display?["timed","allDay"]:["allDay"]:["timed"];var t}}const RA=Yw({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function PA(e){let t=["fc-timegrid-slot","fc-timegrid-slot-label",e.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return gb(_E.Consumer,null,(n=>{if(!e.isLabeled)return gb("td",{className:t.join(" "),"data-time":e.isoTimeStr});let{dateEnv:r,options:s,viewApi:i}=n,a=null==s.slotLabelFormat?RA:Array.isArray(s.slotLabelFormat)?Yw(s.slotLabelFormat[0]):Yw(s.slotLabelFormat),o={level:0,time:e.time,date:r.toDate(e.date),view:i,text:r.format(e.date,a)};return gb(FE,{elTag:"td",elClasses:t,elAttrs:{"data-time":e.isoTimeStr},renderProps:o,generatorName:"slotLabelContent",customGenerator:s.slotLabelContent,defaultGenerator:OA,classNameGenerator:s.slotLabelClassNames,didMount:s.slotLabelDidMount,willUnmount:s.slotLabelWillUnmount},(e=>gb("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},gb(e,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]}))))}))}function OA(e){return e.text}class MA extends jE{render(){return this.props.slatMetas.map((e=>gb("tr",{key:e.key},gb(PA,Object.assign({},e)))))}}const LA=Yw({week:"short"});class FA extends Uk{constructor(){var e;super(...arguments),e=this,this.allDaySplitter=new DA,this.headerElRef={current:null},this.rootElRef={current:null},this.scrollerElRef={current:null},this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let t=this.scrollerElRef.current;t&&(t.scrollTop=e)},this.renderHeadAxis=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{options:r}=e.context,{dateProfile:s}=e.props,i=s.renderRange,a=1===xw(i.start,i.end)?Ck(e.context,i.start,"week"):{};return r.weekNumbers&&"day"===t?gb(FC,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:i.start,defaultFormat:LA},(e=>gb("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},gb(e,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:a})))):gb("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},gb("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:t,viewApi:n}=this.context,r={text:t.allDayText,view:n};return gb(FE,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:r,generatorName:"allDayContent",customGenerator:t.allDayContent,defaultGenerator:UA,classNameGenerator:t.allDayClassNames,didMount:t.allDayDidMount,willUnmount:t.allDayWillUnmount},(t=>gb("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==e?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},gb(t,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]}))))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,t,n){let{context:r,props:s}=this,i=[],a=kC(r.options);return e&&i.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),t&&(i.push({type:"body",key:"all-day",chunk:{content:t}}),i.push({type:"body",key:"all-day-divider",outerContent:gb("tr",{role:"presentation",className:"fc-scrollgrid-section"},gb("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),i.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(r.options.expandRows),chunk:{scrollerElRef:this.scrollerElRef,content:n}}),gb(BE,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:r.viewSpec},gb(NC,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:i}))}renderHScrollLayout(e,t,n,r,s,i,a){let o=this.context.pluginHooks.scrollGridImpl;if(!o)throw new Error("No ScrollGrid implementation");let{context:l,props:c}=this,u=!c.forPrint&&kC(l.options),d=!c.forPrint&&CC(l.options),h=[];e&&h.push({type:"header",key:"header",isSticky:u,syncRowHeights:!0,chunks:[{key:"axis",rowContent:e=>gb("tr",{role:"presentation"},this.renderHeadAxis("day",e.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),t&&(h.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:e=>gb("tr",{role:"presentation"},this.renderTableRowAxis(e.rowSyncHeights[0]))},{key:"cols",content:t}]}),h.push({key:"all-day-divider",type:"body",outerContent:gb("tr",{role:"presentation",className:"fc-scrollgrid-section"},gb("td",{colSpan:2,className:"fc-timegrid-divider "+l.theme.getClass("tableCellShaded")}))}));let f=l.options.nowIndicator;return h.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(l.options.expandRows),chunks:[{key:"axis",content:e=>gb("div",{className:"fc-timegrid-axis-chunk"},gb("table",{"aria-hidden":!0,style:{height:e.expandRows?e.clientHeight:""}},e.tableColGroupNode,gb("tbody",null,gb(MA,{slatMetas:i}))),gb("div",{className:"fc-timegrid-now-indicator-container"},gb(fk,{unit:f?"minute":"day"},(e=>{let t=f&&a&&a.safeComputeTop(e);return"number"===typeof t?gb(IC,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:t},isAxis:!0,date:e}):null}))))},{key:"cols",scrollerElRef:this.scrollerElRef,content:n}]}),d&&h.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:SC},{key:"cols",content:SC}]}),gb(BE,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:l.viewSpec},gb(o,{liquid:!c.isHeightAuto&&!c.forPrint,forPrint:c.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:s}]}],sections:h}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:t}=this.context.options;return!0!==e&&!0!==t||(e=void 0,t=5),{dayMaxEvents:e,dayMaxEventRows:t}}}function UA(e){return e.text}class BA{constructor(e,t,n){this.positions=e,this.dateProfile=t,this.slotDuration=n}safeComputeTop(e){let{dateProfile:t}=this;if(QE(t.currentRange,e)){let n=Ew(e),r=e.valueOf()-n.valueOf();if(r>=hw(t.slotMinTime)&&r<hw(t.slotMaxTime))return this.computeTimeTop(lw(r))}return null}computeDateTop(e,t){return t||(t=Ew(e)),this.computeTimeTop(lw(e.valueOf()-t.valueOf()))}computeTimeTop(e){let t,n,{positions:r,dateProfile:s}=this,i=r.els.length,a=(e.milliseconds-hw(s.slotMinTime))/hw(this.slotDuration);return a=Math.max(0,a),a=Math.min(i,a),t=Math.floor(a),t=Math.min(t,i-1),n=a-t,r.tops[t]+r.getHeight(t)*n}}class zA extends jE{render(){let{props:e,context:t}=this,{options:n}=t,{slatElRefs:r}=e;return gb("tbody",null,e.slatMetas.map(((s,i)=>{let a={time:s.time,date:t.dateEnv.toDate(s.date),view:t.viewApi};return gb("tr",{key:s.key,ref:r.createRef(s.key)},e.axis&&gb(PA,Object.assign({},s)),gb(FE,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:a,generatorName:"slotLaneContent",customGenerator:n.slotLaneContent,classNameGenerator:n.slotLaneClassNames,didMount:n.slotLaneDidMount,willUnmount:n.slotLaneWillUnmount}))})))}}class HA extends jE{constructor(){super(...arguments),this.rootElRef={current:null},this.slatElRefs=new gC}render(){let{props:e,context:t}=this;return gb("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},gb("table",{"aria-hidden":!0,className:t.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,gb(zA,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:t}=this;if(t.onCoords&&null!==t.clientWidth){this.rootElRef.current.offsetHeight&&t.onCoords(new BA(new Pk(this.rootElRef.current,(n=this.slatElRefs.currentMap,t.slatMetas.map((e=>n[e.key]))),!1,!0),this.props.dateProfile,e.options.slotDuration))}var n}}function VA(e,t){let n,r=[];for(n=0;n<t;n+=1)r.push([]);if(e)for(n=0;n<e.length;n+=1)r[e[n].col].push(e[n]);return r}function WA(e,t){let n=[];if(e){for(let r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let t of e.segs)n[t.col].segs.push(t)}else for(let r=0;r<t;r+=1)n[r]=null;return n}class GA extends jE{render(){let{props:e}=this;return gb(HC,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>n_(e.hiddenSegs,e),defaultGenerator:qA,forceTimed:!0},(e=>gb(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]})))}}function qA(e){return e.shortText}function QA(e,t,n){let r=new Bk;null!=t&&(r.strictOrder=t),null!=n&&(r.maxStackCnt=n);let s=function(e){let t=[];for(let s of e){let e=[],i={span:s.span,entries:[s]};for(let s of t)Vk(s.span,i.span)?i={entries:s.entries.concat(i.entries),span:(n=s.span,r=i.span,{start:Math.min(n.start,r.start),end:Math.max(n.end,r.end)})}:e.push(s);e.push(i),t=e}var n,r;return t}(r.addSegs(e)),i=function(e){const{entriesByLevel:t}=e,n=ZA(((e,t)=>e+":"+t),((r,s)=>{let i=function(e,t,n){let{levelCoords:r,entriesByLevel:s}=e,i=s[t][n],a=r[t]+i.thickness,o=r.length,l=t;for(;l<o&&r[l]<a;l+=1);for(;l<o;l+=1){let e,t=s[l],n=Gk(t,i.span.start,zk),r=n[0]+n[1],a=r;for(;(e=t[a])&&e.span.start<i.span.end;)a+=1;if(r<a)return{level:l,lateralStart:r,lateralEnd:a}}return null}(e,r,s),a=KA(i,n),o=t[r][s];return[Object.assign(Object.assign({},o),{nextLevelNodes:a[0]}),o.thickness+a[1]]}));return KA(t.length?{level:0,lateralStart:0,lateralEnd:t[0].length}:null,n)[0]}(r);return i=function(e,t){const n=ZA(((e,t,n)=>Hk(e)),((e,r,s)=>{let i,{nextLevelNodes:a,thickness:o}=e,l=o+s,c=o/l,u=[];if(a.length)for(let t of a)if(void 0===i){let e=n(t,r,l);i=e[0],u.push(e[1])}else{let e=n(t,i,0);u.push(e[1])}else i=t;let d=(i-r)*c;return[i-d,Object.assign(Object.assign({},e),{thickness:d,nextLevelNodes:u})]}));return e.map((e=>n(e,0,0)[1]))}(i,1),{segRects:function(e){let t=[];const n=ZA(((e,t,n)=>Hk(e)),((e,n,s)=>{let i=Object.assign(Object.assign({},e),{levelCoord:n,stackDepth:s,stackForward:0});return t.push(i),i.stackForward=r(e.nextLevelNodes,n+e.thickness,s+1)+1}));function r(e,t,r){let s=0;for(let i of e)s=Math.max(n(i,t,r),s);return s}return r(e,0,0),t}(i),hiddenGroups:s}}function KA(e,t){if(!e)return[[],0];let{level:n,lateralStart:r,lateralEnd:s}=e,i=r,a=[];for(;i<s;)a.push(t(n,i)),i+=1;return a.sort(YA),[a.map(XA),a[0][1]]}function YA(e,t){return t[1]-e[1]}function XA(e){return e[0]}function ZA(e,t){const n={};return function(){let r=e(...arguments);return r in n?n[r]:n[r]=t(...arguments)}}function JA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=[];if(n)for(let i=0;i<e.length;i+=1){let a=e[i],o=n.computeDateTop(a.start,t),l=Math.max(o+(r||0),n.computeDateTop(a.end,t));s.push({start:Math.round(o),end:Math.round(l)})}return s}const $A=Yw({hour:"numeric",minute:"2-digit",meridiem:!1});class e_ extends jE{render(){return gb(_C,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:$A}))}}class t_ extends jE{constructor(){super(...arguments),this.sortEventSegs=Pw(GS)}render(){let{props:e,context:t}=this,{options:n}=t,r=n.selectMirror,s=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||r&&e.dateSelectionSegs||[],i=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},a=this.sortEventSegs(e.fgEventSegs,n.eventOrder);return gb(DC,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},(t=>gb("div",{className:"fc-timegrid-col-frame"},gb("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),gb("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(a,i,!1,!1,!1)),gb("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},Boolean(e.eventDrag),Boolean(e.eventResize),Boolean(r),"mirror")),gb("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),RC(n)&&gb(t,{elTag:"div",elClasses:["fc-timegrid-col-misc"]}))))}renderFgSegs(e,t,n,r,s,i){let{props:a}=this;return a.forPrint?n_(e,a):this.renderPositionedFgSegs(e,t,n,r,s,i)}renderPositionedFgSegs(e,t,n,r,s,i){let{eventMaxStack:a,eventShortHeight:o,eventOrderStrict:l,eventMinHeight:c}=this.context.options,{date:u,slatCoords:d,eventSelection:h,todayRange:f,nowDate:p}=this.props,m=n||r||s,g=JA(e,u,d,c),{segPlacements:v,hiddenGroups:y}=function(e,t,n,r){let s=[],i=[];for(let c=0;c<e.length;c+=1){let n=t[c];n?s.push({index:c,thickness:1,span:n}):i.push(e[c])}let{segRects:a,hiddenGroups:o}=QA(s,n,r),l=[];for(let c of a)l.push({seg:e[c.index],rect:c});for(let c of i)l.push({seg:c,rect:null});return{segPlacements:l,hiddenGroups:o}}(e,g,l,a);return gb(yb,null,this.renderHiddenGroups(y,e),v.map((e=>{let{seg:a,rect:l}=e,c=a.eventRange.instance.instanceId,u=m||Boolean(!t[c]&&l),d=r_(l&&l.span),g=!m&&l?this.computeSegHStyle(l):{left:0,right:0},v=Boolean(l)&&l.stackForward>0,y=Boolean(l)&&l.span.end-l.span.start<o;return gb("div",{className:"fc-timegrid-event-harness"+(v?" fc-timegrid-event-harness-inset":""),key:i||c,style:Object.assign(Object.assign({visibility:u?"":"hidden"},d),g)},gb(e_,Object.assign({seg:a,isDragging:n,isResizing:r,isDateSelecting:s,isSelected:c===h,isShort:y},ZS(a,f,p))))})))}renderHiddenGroups(e,t){let{extraDateSpan:n,dateProfile:r,todayRange:s,nowDate:i,eventSelection:a,eventDrag:o,eventResize:l}=this.props;return gb(yb,null,e.map((e=>{let c=r_(e.span),u=(d=e.entries,h=t,d.map((e=>h[e.index])));var d,h;return gb(GA,{key:jw(GC(u)),hiddenSegs:u,top:c.top,bottom:c.bottom,extraDateSpan:n,dateProfile:r,todayRange:s,nowDate:i,eventSelection:a,eventDrag:o,eventResize:l})})))}renderFillSegs(e,t){let{props:n,context:r}=this,s=JA(e,n.date,n.slatCoords,r.options.eventMinHeight).map(((r,s)=>{let i=e[s];return gb("div",{key:$S(i.eventRange),className:"fc-timegrid-bg-harness",style:r_(r)},"bg-event"===t?gb(OC,Object.assign({seg:i},ZS(i,n.todayRange,n.nowDate))):LC(t))}));return gb(yb,null,s)}renderNowIndicator(e){let{slatCoords:t,date:n}=this.props;return t?e.map(((e,r)=>gb(IC,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:t.computeDateTop(e.start,n)},isAxis:!1,date:n}))):null}computeSegHStyle(e){let t,n,{isRtl:r,options:s}=this.context,i=s.slotEventOverlap,a=e.levelCoord,o=e.levelCoord+e.thickness;i&&(o=Math.min(1,a+2*(o-a))),r?(t=1-o,n=a):(t=a,n=1-o);let l={zIndex:e.stackDepth+1,left:100*t+"%",right:100*n+"%"};return i&&!e.stackForward&&(l[r?"marginLeft":"marginRight"]=20),l}}function n_(e,t){let{todayRange:n,nowDate:r,eventSelection:s,eventDrag:i,eventResize:a}=t,o=(i?i.affectedInstances:null)||(a?a.affectedInstances:null)||{};return gb(yb,null,e.map((e=>{let t=e.eventRange.instance.instanceId;return gb("div",{key:t,style:{visibility:o[t]?"hidden":""}},gb(e_,Object.assign({seg:e,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:t===s,isShort:!1},ZS(e,n,r))))})))}function r_(e){return e?{top:e.start,bottom:-e.end}:{top:"",bottom:""}}class s_ extends jE{constructor(){super(...arguments),this.splitFgEventSegs=Pw(VA),this.splitBgEventSegs=Pw(VA),this.splitBusinessHourSegs=Pw(VA),this.splitNowIndicatorSegs=Pw(VA),this.splitDateSelectionSegs=Pw(VA),this.splitEventDrag=Pw(WA),this.splitEventResize=Pw(WA),this.rootElRef={current:null},this.cellElRefs=new gC}render(){let{props:e,context:t}=this,n=t.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),r=e.cells.length,s=this.splitFgEventSegs(e.fgEventSegs,r),i=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitBusinessHourSegs(e.businessHourSegs,r),o=this.splitNowIndicatorSegs(e.nowIndicatorSegs,r),l=this.splitDateSelectionSegs(e.dateSelectionSegs,r),c=this.splitEventDrag(e.eventDrag,r),u=this.splitEventResize(e.eventResize,r);return gb("div",{className:"fc-timegrid-cols",ref:this.rootElRef},gb("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,gb("tbody",{role:"presentation"},gb("tr",{role:"row"},e.axis&&gb("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},gb("div",{className:"fc-timegrid-col-frame"},gb("div",{className:"fc-timegrid-now-indicator-container"},"number"===typeof n&&gb(IC,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:n},isAxis:!0,date:e.nowDate})))),e.cells.map(((t,n)=>gb(t_,{key:t.key,elRef:this.cellElRefs.createRef(t.key),dateProfile:e.dateProfile,date:t.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:t.extraRenderProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,fgEventSegs:s[n],bgEventSegs:i[n],businessHourSegs:a[n],nowIndicatorSegs:o[n],dateSelectionSegs:l[n],eventDrag:c[n],eventResize:u[n],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint})))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;var t;e.onColCoords&&null!==e.clientWidth&&e.onColCoords(new Pk(this.rootElRef.current,(t=this.cellElRefs.currentMap,e.cells.map((e=>t[e.key]))),!0,!1))}}class i_ extends Uk{constructor(){super(...arguments),this.processSlotOptions=Pw(a_),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:t}=this.props,{slatCoords:n}=this.state;if(t&&n){if(e.time){let r=n.computeTimeTop(e.time);r=Math.ceil(r),r&&(r+=1),t(r)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:t}=this;return gb("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},gb(HA,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),gb(s_,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,t){let{dateEnv:n,options:r}=this.context,{colCoords:s}=this,{dateProfile:i}=this.props,{slatCoords:a}=this.state,{snapDuration:o,snapsPerSlot:l}=this.processSlotOptions(this.props.slotDuration,r.snapDuration),c=s.leftToIndex(e),u=a.positions.topToIndex(t);if(null!=c&&null!=u){let e=this.props.cells[c],r=a.positions.tops[u],d=a.positions.getHeight(u),h=(t-r)/d,f=u*l+Math.floor(h*l),p=this.props.cells[c].date,m=uw(i.slotMinTime,function(e,t){return{years:e.years*t,months:e.months*t,days:e.days*t,milliseconds:e.milliseconds*t}}(o,f)),g=n.add(p,m),v=n.add(g,o);return{dateProfile:i,dateSpan:Object.assign({range:{start:g,end:v},allDay:!1},e.extraDateSpan),dayEl:s.els[c],rect:{left:s.lefts[c],right:s.rights[c],top:r,bottom:r+d},layer:0}}return null}}function a_(e,t){let n=t||e,r=fw(e,n);return null===r&&(n=e,r=1),{snapDuration:n,snapsPerSlot:r}}class o_ extends iC{sliceRange(e,t){let n=[];for(let r=0;r<t.length;r+=1){let s=WE(e,t[r]);s&&n.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:r})}return n}}class l_ extends Uk{constructor(){super(...arguments),this.buildDayRanges=Pw(c_),this.slicer=new o_,this.timeColsRef={current:null}}render(){let{props:e,context:t}=this,{dateProfile:n,dayTableModel:r}=e,{nowIndicator:s,nextDayThreshold:i}=t.options,a=this.buildDayRanges(r,n,t.dateEnv);return gb(fk,{unit:s?"minute":"day"},((o,l)=>gb(i_,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,n,null,t,a),{forPrint:e.forPrint,axis:e.axis,dateProfile:n,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:r.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:o,nowIndicatorSegs:s&&this.slicer.sliceNowDate(o,n,i,t,a),todayRange:l,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords}))))}}function c_(e,t,n){let r=[];for(let s of e.headerDates)r.push({start:n.add(s,t.slotMinTime),end:n.add(s,t.slotMaxTime)});return r}const u_=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function d_(e,t,n,r,s){let i=new Date(0),a=e,o=lw(0),l=n||function(e){let t,n,r;for(t=u_.length-1;t>=0;t-=1)if(n=lw(u_[t]),r=fw(n,e),null!==r&&r>1)return n;return e}(r),c=[];for(;hw(a)<hw(t);){let e=s.add(i,a),t=null!==fw(o,l);c.push({date:e,time:a,key:e.toISOString(),isoTimeStr:(u=e,tw(u.getUTCHours(),2)+":"+tw(u.getUTCMinutes(),2)+":"+tw(u.getUTCSeconds(),2)),isLabeled:t}),a=uw(a,r),o=uw(o,r)}var u;return c}function h_(e,t){let n=new rC(e.renderRange,t);return new sC(n,!1)}jx('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');var f_=nN({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:{allDaySlot:Boolean},views:{timeGrid:{component:class extends FA{constructor(){super(...arguments),this.buildTimeColsModel=Pw(h_),this.buildSlatMetas=Pw(d_)}render(){let{options:e,dateEnv:t,dateProfileGenerator:n}=this.context,{props:r}=this,{dateProfile:s}=r,i=this.buildTimeColsModel(s,n),a=this.allDaySplitter.splitProps(r),o=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,e.slotLabelInterval,e.slotDuration,t),{dayMinWidth:l}=e,c=!l,u=l,d=e.dayHeaders&&gb(tC,{dates:i.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:c?this.renderHeadAxis:null}),h=!1!==e.allDaySlot&&(t=>gb(TA,Object.assign({},a.allDay,{dateProfile:s,dayTableModel:i,nextDayThreshold:e.nextDayThreshold,tableMinWidth:t.tableMinWidth,colGroupNode:t.tableColGroupNode,renderRowIntro:c?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:r.forPrint},this.getAllDayMaxEventProps()))),f=t=>gb(l_,Object.assign({},a.timed,{dayTableModel:i,dateProfile:s,axis:c,slotDuration:e.slotDuration,slatMetas:o,forPrint:r.forPrint,tableColGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,clientWidth:t.clientWidth,clientHeight:t.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:t.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return u?this.renderHScrollLayout(d,h,f,i.colCnt,l,o,this.state.slatCoords):this.renderSimpleLayout(d,h,f)}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});Qk.touchMouseIgnoreWait=500;let p_=0,m_=0,g_=!1;class v_{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{if(!this.shouldIgnoreMouse()&&function(e){return 0===e.button&&!e.ctrlKey}(e)&&this.tryStart(e)){let t=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=e=>{let t=this.createEventFromMouse(e);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup()},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let t=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t);let n=e.target;this.shouldIgnoreMove||n.addEventListener("touchmove",this.handleTouchMove),n.addEventListener("touchend",this.handleTouchEnd),n.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=e=>{let t=this.createEventFromTouch(e);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleTouchEnd=e=>{if(this.isDragging){let t=e.target;t.removeEventListener("touchmove",this.handleTouchMove),t.removeEventListener("touchend",this.handleTouchEnd),t.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,p_+=1,setTimeout((()=>{p_-=1}),Qk.touchMouseIgnoreWait)}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let t=window.scrollX-this.prevScrollX+this.prevPageX,n=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:t,pageY:n,deltaX:t-this.origPageX,deltaY:n-this.origPageY})}},this.containerEl=e,this.emitter=new AS,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),m_+=1,1===m_&&window.addEventListener("touchmove",y_,{passive:!1})}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),m_-=1,m_||window.removeEventListener("touchmove",y_,{passive:!1})}tryStart(e){let t=this.querySubjectEl(e),n=e.target;return!(!t||this.handleSelector&&!Lx(n,this.handleSelector))&&(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0)}cleanup(){g_=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Lx(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return p_||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(g_=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let n=0,r=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(n=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:n,deltaY:r}}createEventFromTouch(e,t){let n,r,s=e.touches,i=0,a=0;return s&&s.length?(n=s[0].pageX,r=s[0].pageY):(n=e.pageX,r=e.pageY),t?(this.origPageX=n,this.origPageY=r):(i=n-this.origPageX,a=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:n,pageY:r,deltaX:i,deltaY:a}}}function y_(e){g_&&e.preventDefault()}class b_{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,n){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=n-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let n=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)}doRevertAnimation(e,t){let n=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();n.style.transition="top "+t+"ms,left "+t+"ms",Bx(n,{left:r.left,top:r.top}),function(e,t){let n=r=>{t(r),Qx.forEach((t=>{e.removeEventListener(t,n)}))};Qx.forEach((t=>{e.addEventListener(t,n)}))}(n,(()=>{n.style.transition="",e()}))}cleanup(){this.mirrorEl&&(Mx(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Bx(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),Bx(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class x_ extends Mk{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class w_ extends x_{constructor(e,t){super(new Lk(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return jk(this.scrollController.el)}}class E_ extends x_{constructor(e){super(new Fk,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const S_="function"===typeof performance?performance.now:Date.now;class k_{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=S_();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let n=e-window.scrollX,r=t-window.scrollY,s=null===this.pointerScreenY?0:r-this.pointerScreenY,i=null===this.pointerScreenX?0:n-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),i<0?this.everMovedLeft=!0:i>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(S_()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:n}=e,{edgeThreshold:r}=this,s=r-e.distance,i=s*s/(r*r)*this.maxVelocity*t,a=1;switch(e.name){case"left":a=-1;case"right":n.setScrollLeft(n.getScrollLeft()+i*a);break;case"top":a=-1;case"bottom":n.setScrollTop(n.getScrollTop()+i*a)}}computeBestEdge(e,t){let{edgeThreshold:n}=this,r=null,s=this.scrollCaches||[];for(let i of s){let s=i.clientRect,a=e-s.left,o=s.right-e,l=t-s.top,c=s.bottom-t;a>=0&&o>=0&&l>=0&&c>=0&&(l<=n&&this.everMovedUp&&i.canScrollUp()&&(!r||r.distance>l)&&(r={scrollCache:i,name:"top",distance:l}),c<=n&&this.everMovedDown&&i.canScrollDown()&&(!r||r.distance>c)&&(r={scrollCache:i,name:"bottom",distance:c}),a<=n&&this.everMovedLeft&&i.canScrollLeft()&&(!r||r.distance>a)&&(r={scrollCache:i,name:"left",distance:a}),o<=n&&this.everMovedRight&&i.canScrollRight()&&(!r||r.distance>o)&&(r={scrollCache:i,name:"right",distance:o}))}return r}buildCaches(e){return this.queryScrollEls(e).map((e=>e===window?new E_(!1):new w_(e,!1)))}queryScrollEls(e){let t=[];for(let n of this.scrollQuery)"object"===typeof n?t.push(n):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(n)));return t}}class C_ extends qk{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=e=>{var t;this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,(t=document.body).style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Gx),function(e){e.addEventListener("contextmenu",Gx)}(document.body),e.isTouch||e.origEvent.preventDefault(),this.emitter.trigger("pointerdown",e),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(e.subjectEl,e.pageX,e.pageY),this.startDelay(e),this.minDistance||this.handleDistanceSurpassed(e)))},this.onPointerMove=e=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",e),!this.isDistanceSurpassed){let t,n=this.minDistance,{deltaX:r,deltaY:s}=e;t=r*r+s*s,t>=n*n&&this.handleDistanceSurpassed(e)}this.isDragging&&("scroll"!==e.origEvent.type&&(this.mirror.handleMove(e.pageX,e.pageY),this.autoScroller.handleMove(e.pageX,e.pageY)),this.emitter.trigger("dragmove",e))}},this.onPointerUp=e=>{var t;this.isInteracting&&(this.isInteracting=!1,(t=document.body).style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Gx),function(e){e.removeEventListener("contextmenu",Gx)}(document.body),this.emitter.trigger("pointerup",e),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(e)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let n=this.pointer=new v_(e);n.emitter.on("pointerdown",this.onPointerDown),n.emitter.on("pointermove",this.onPointerMove),n.emitter.on("pointerup",this.onPointerUp),t&&(n.selector=t),this.mirror=new b_,this.autoScroller=new k_}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){"number"===typeof this.delay?this.delayTimeoutId=setTimeout((()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)}),this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(this.pointer.wasTouchScroll&&!this.touchScrollAllowed||(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll()))}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class N_{constructor(e){this.el=e,this.origRect=Dk(e),this.scrollCaches=Rk(e).map((e=>new w_(e,!0)))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let n={left:e,top:t};for(let r of this.scrollCaches)if(!A_(r.getEventTarget())&&!gk(n,r.clientRect))return!1;return!0}}function A_(e){let t=e.tagName;return"HTML"===t||"BODY"===t}class __{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=e=>{let{dragging:t}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(e),this.initialHit||!this.requireInitial?(t.setIgnoreMove(!1),this.emitter.trigger("pointerdown",e)):t.setIgnoreMove(!0)},this.handleDragStart=e=>{this.emitter.trigger("dragstart",e),this.handleMove(e,!0)},this.handleDragMove=e=>{this.emitter.trigger("dragmove",e),this.handleMove(e)},this.handlePointerUp=e=>{this.releaseHits(),this.emitter.trigger("pointerup",e)},this.handleDragEnd=e=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,e),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",e)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new AS}processFirstCoord(e){let t,n={left:e.pageX,top:e.pageY},r=n,s=e.subjectEl;var i,a;s instanceof HTMLElement&&(t=Dk(s),i=r,a=t,r={left:Math.min(Math.max(i.left,a.left),a.right),top:Math.min(Math.max(i.top,a.top),a.bottom)});let o=this.initialHit=this.queryHitForOffset(r.left,r.top);if(o){if(this.useSubjectCenter&&t){let e=vk(t,o.rect);e&&(r=function(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}(e))}this.coordAdjust=(c=n,{left:(l=r).left-c.left,top:l.top-c.top})}else this.coordAdjust={left:0,top:0};var l,c}handleMove(e,t){let n=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);!t&&T_(this.movingHit,n)||(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,e))}prepareHits(){this.offsetTrackers=uE(this.droppableStore,(e=>(e.component.prepareHits(),new N_(e.el))))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:n,offsetTrackers:r}=this,s=null;for(let i in n){let a=n[i].component,o=r[i];if(o&&o.isWithinClipping(e,t)){let n=o.computeLeft(),r=o.computeTop(),l=e-n,c=t-r,{origRect:u}=o,d=u.right-u.left,h=u.bottom-u.top;if(l>=0&&l<d&&c>=0&&c<h){let e=a.queryHit(l,c,d,h);e&&qE(e.dateProfile.activeRange,e.dateSpan.range)&&(this.disablePointCheck||o.el.contains(o.el.getRootNode().elementFromPoint(l+n-window.scrollX,c+r-window.scrollY)))&&(!s||e.layer>s.layer)&&(e.componentId=i,e.context=a.context,e.rect.left+=n,e.rect.right+=n,e.rect.top+=r,e.rect.bottom+=r,s=e)}}}return s}}function T_(e,t){return!e&&!t||Boolean(e)===Boolean(t)&&function(e,t){return n=e.range,r=t.range,(null===n.start?null:n.start.valueOf())===(null===r.start?null:r.start.valueOf())&&(null===n.end?null:n.end.valueOf())===(null===r.end?null:r.end.valueOf())&&e.allDay===t.allDay&&function(e,t){for(let n in t)if("range"!==n&&"allDay"!==n&&e[n]!==t[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}(e,t);var n,r}(e.dateSpan,t.dateSpan)}function I_(e,t){let n={};for(let i of t.pluginHooks.datePointTransforms)Object.assign(n,i(e,t));var r,s;return Object.assign(n,(r=e,{date:(s=t.dateEnv).toDate(r.range.start),dateStr:s.formatIso(r.range.start,{omitTime:r.allDay}),allDay:r.allDay})),n}class j_ extends uk{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=e=>{let t=e.origEvent.target,{component:n,dragging:r}=this,{mirror:s}=r,{options:i}=n.context,a=n.context;this.subjectEl=e.subjectEl;let o=this.subjectSeg=HS(e.subjectEl),l=(this.eventRange=o.eventRange).instance.instanceId;this.relevantEvents=uS(a.getCurrentData().eventStore,l),r.minDistance=e.isTouch?0:i.eventDragMinDistance,r.delay=e.isTouch&&l!==n.props.eventSelection?function(e){let{options:t}=e.context,n=t.eventLongPressDelay;null==n&&(n=t.longPressDelay);return n}(n):null,i.fixedMirrorParent?s.parentNode=i.fixedMirrorParent:s.parentNode=Lx(t,".fc"),s.revertDuration=i.dragRevertDuration;let c=n.isValidSegDownEl(t)&&!Lx(t,".fc-event-resizer");r.setIgnoreMove(!c),this.isDragging=c&&e.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=e=>{let t=this.component.context,n=this.eventRange,r=n.instance.instanceId;e.isTouch?r!==this.component.props.eventSelection&&t.dispatch({type:"SELECT_EVENT",eventInstanceId:r}):t.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(t.calendarApi.unselect(e),t.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new LS(t,n.def,n.instance),jsEvent:e.origEvent,view:t.viewApi}))},this.handleHitUpdate=(e,t)=>{if(!this.isDragging)return;let n=this.relevantEvents,r=this.hitDragging.initialHit,s=this.component.context,i=null,a=null,o=null,l=!1,c={affectedEvents:n,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(e){i=e.context;let t=i.options;s===i||t.editable&&t.droppable?(a=function(e,t,n,r){let s=e.dateSpan,i=t.dateSpan,a=s.range.start,o=i.range.start,l={};s.allDay!==i.allDay&&(l.allDay=i.allDay,l.hasEnd=t.context.options.allDayMaintainDuration,a=i.allDay?Ew(n):n);let c=XE(a,o,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);c.milliseconds&&(l.allDay=!1);let u={datesDelta:c,standardProps:l};for(let d of r)d(u,e,t);return u}(r,e,this.eventRange.instance.range.start,i.getCurrentData().pluginHooks.eventDragMutationMassagers),a&&(o=RS(n,i.getCurrentData().eventUiBases,a,i),c.mutatedEvents=o,oC(c,e.dateProfile,i)||(l=!0,a=null,o=null,c.mutatedEvents={defs:{},instances:{}}))):i=null}this.displayDrag(i,c),l?Jx():$x(),t||(s===i&&T_(r,e)&&(a=null),this.dragging.setMirrorNeedsRevert(!a),this.dragging.setMirrorIsVisible(!e||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=i,this.validMutation=a,this.mutatedRelevantEvents=o)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=e=>{if(this.isDragging){let t=this.component.context,n=t.viewApi,{receivingContext:r,validMutation:s}=this,i=this.eventRange.def,a=this.eventRange.instance,o=new LS(t,i,a),l=this.relevantEvents,c=this.mutatedRelevantEvents,{finalHit:u}=this.hitDragging;if(this.clearDrag(),t.emitter.trigger("eventDragStop",{el:this.subjectEl,event:o,jsEvent:e.origEvent,view:n}),s){if(r===t){let r=new LS(t,c.defs[i.defId],a?c.instances[a.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:c});let u={oldEvent:o,event:r,relatedEvents:US(c,t,a),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:l})}},d={};for(let e of t.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(d,e(s,t));t.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},u),d),{el:e.subjectEl,delta:s.datesDelta,jsEvent:e.origEvent,view:n})),t.emitter.trigger("eventChange",u)}else if(r){let s={event:o,relatedEvents:US(l,t,a),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:l})}};t.emitter.trigger("eventLeave",Object.assign(Object.assign({},s),{draggedEl:e.subjectEl,view:n})),t.dispatch({type:"REMOVE_EVENTS",eventStore:l}),t.emitter.trigger("eventRemove",s);let d=c.defs[i.defId],h=c.instances[a.instanceId],f=new LS(r,d,h);r.dispatch({type:"MERGE_EVENTS",eventStore:c});let p={event:f,relatedEvents:US(c,r,h),revert(){r.dispatch({type:"REMOVE_EVENTS",eventStore:c})}};r.emitter.trigger("eventAdd",p),e.isTouch&&r.dispatch({type:"SELECT_EVENT",eventInstanceId:a.instanceId}),r.emitter.trigger("drop",Object.assign(Object.assign({},I_(u.dateSpan,r)),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:u.context.viewApi})),r.emitter.trigger("eventReceive",Object.assign(Object.assign({},p),{draggedEl:e.subjectEl,view:u.context.viewApi}))}}else t.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:n}=t.context,r=this.dragging=new C_(e.el);r.pointer.selector=j_.SELECTOR,r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.dragScroll;let s=this.hitDragging=new __(this.dragging,hk);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let n=this.component.context,r=this.receivingContext;r&&r!==e&&(r===n?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}j_.SELECTOR=".fc-event-draggable, .fc-event-resizable";const D_={fixedMirrorParent:aE},R_={dateClick:aE,eventDragStart:aE,eventDragStop:aE,eventDrop:aE,eventResizeStart:aE,eventResizeStop:aE,eventResize:aE,drop:aE,eventReceive:aE,eventLeave:aE};class P_{constructor(e,t){this.receivingContext=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=e=>{this.dragMeta=this.buildDragMeta(e.subjectEl)},this.handleHitUpdate=(e,t,n)=>{let{dragging:r}=this.hitDragging,s=null,i=null,a=!1,o={affectedEvents:{defs:{},instances:{}},mutatedEvents:{defs:{},instances:{}},isEvent:this.dragMeta.create};e&&(s=e.context,this.canDropElOnCalendar(n.subjectEl,s)&&(i=function(e,t,n){let r=Object.assign({},t.leftoverProps);for(let u of n.pluginHooks.externalDefTransforms)Object.assign(r,u(e,t));let{refined:s,extra:i}=iS(r,n),a=oS(s,i,t.sourceId,e.allDay,n.options.forceEventDuration||Boolean(t.duration),n),o=e.range.start;e.allDay&&t.startTime&&(o=n.dateEnv.add(o,t.startTime));let l=t.duration?n.dateEnv.add(o,t.duration):DS(e.allDay,o,n),c=JE(a.defId,{start:o,end:l});return{def:a,instance:c}}(e.dateSpan,this.dragMeta,s),o.mutatedEvents=cS(i),a=!oC(o,e.dateProfile,s),a&&(o.mutatedEvents={defs:{},instances:{}},i=null))),this.displayDrag(s,o),r.setMirrorIsVisible(t||!i||!document.querySelector(".fc-event-mirror")),a?Jx():$x(),t||(r.setMirrorNeedsRevert(!i),this.receivingContext=s,this.droppableEvent=i)},this.handleDragEnd=e=>{let{receivingContext:t,droppableEvent:n}=this;if(this.clearDrag(),t&&n){let r=this.hitDragging.finalHit,s=r.context.viewApi,i=this.dragMeta;if(t.emitter.trigger("drop",Object.assign(Object.assign({},I_(r.dateSpan,t)),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:s})),i.create){let r=cS(n);t.dispatch({type:"MERGE_EVENTS",eventStore:r}),e.isTouch&&t.dispatch({type:"SELECT_EVENT",eventInstanceId:n.instance.instanceId}),t.emitter.trigger("eventReceive",{event:new LS(t,n.def,n.instance),relatedEvents:[],revert(){t.dispatch({type:"REMOVE_EVENTS",eventStore:r})},draggedEl:e.subjectEl,view:s})}}this.receivingContext=null,this.droppableEvent=null};let n=this.hitDragging=new __(e,hk);n.requireInitial=!1,n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("hitupdate",this.handleHitUpdate),n.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=t}buildDragMeta(e){return"object"===typeof this.suppliedDragMeta?Yk(this.suppliedDragMeta):"function"===typeof this.suppliedDragMeta?Yk(this.suppliedDragMeta(e)):function(e){let t=function(e,t){let n=Qk.dataAttrPrefix,r=(n?n+"-":"")+t;return e.getAttribute("data-"+r)||""}(e,"event");return Yk(t?JSON.parse(t):{create:!1})}(e)}displayDrag(e,t){let n=this.receivingContext;n&&n!==e&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){this.receivingContext&&this.receivingContext.dispatch({type:"UNSET_EVENT_DRAG"})}canDropElOnCalendar(e,t){let n=t.options.dropAccept;return"function"===typeof n?n.call(t.calendarApi,e):"string"!==typeof n||!n||Boolean(Fx(e,n))}}Qk.dataAttrPrefix="";class O_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.handlePointerDown=e=>{let{dragging:t}=this,{minDistance:n,longPressDelay:r}=this.settings;t.minDistance=null!=n?n:e.isTouch?0:Zw.eventDragMinDistance,t.delay=e.isTouch?null!=r?r:Zw.longPressDelay:0},this.handleDragStart=e=>{e.isTouch&&this.dragging.delay&&e.subjectEl.classList.contains("fc-event")&&this.dragging.mirror.getMirrorEl().classList.add("fc-event-selected")},this.settings=t;let n=this.dragging=new C_(e);n.touchScrollAllowed=!1,null!=t.itemSelector&&(n.pointer.selector=t.itemSelector),null!=t.appendTo&&(n.mirror.parentNode=t.appendTo),n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),new P_(n,t.eventData)}destroy(){this.dragging.destroy()}}var M_=nN({name:"@fullcalendar/interaction",componentInteractions:[class extends uk{constructor(e){super(e),this.handlePointerDown=e=>{let{dragging:t}=this,n=e.origEvent.target;t.setIgnoreMove(!this.component.isValidDateDownEl(n))},this.handleDragEnd=e=>{let{component:t}=this,{pointer:n}=this.dragging;if(!n.wasTouchScroll){let{initialHit:n,finalHit:r}=this.hitDragging;if(n&&r&&T_(n,r)){let{context:r}=t,s=Object.assign(Object.assign({},I_(n.dateSpan,r)),{dayEl:n.dayEl,jsEvent:e.origEvent,view:r.viewApi||r.calendarApi.view});r.emitter.trigger("dateClick",s)}}},this.dragging=new C_(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new __(this.dragging,dk(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class extends uk{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=e=>{let{component:t,dragging:n}=this,{options:r}=t.context,s=r.selectable&&t.isValidDateDownEl(e.origEvent.target);n.setIgnoreMove(!s),n.delay=e.isTouch?function(e){let{options:t}=e.context,n=t.selectLongPressDelay;null==n&&(n=t.longPressDelay);return n}(t):null},this.handleDragStart=e=>{this.component.context.calendarApi.unselect(e)},this.handleHitUpdate=(e,t)=>{let{context:n}=this.component,r=null,s=!1;if(e){let t=this.hitDragging.initialHit;e.componentId===t.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(t,e)||(r=function(e,t,n){let r=e.dateSpan,s=t.dateSpan,i=[r.range.start,r.range.end,s.range.start,s.range.end];i.sort(rw);let a={};for(let o of n){let n=o(e,t);if(!1===n)return null;n&&Object.assign(a,n)}return a.range={start:i[0],end:i[3]},a.allDay=r.allDay,a}(t,e,n.pluginHooks.dateSelectionTransformers)),r&&function(e,t,n){return!!qE(t.validRange,e.range)&&lC({dateSelection:e},n)}(r,e.dateProfile,n)||(s=!0,r=null)}r?n.dispatch({type:"SELECT_DATES",selection:r}):t||n.dispatch({type:"UNSELECT_DATES"}),s?Jx():$x(),t||(this.dragSelection=r)},this.handlePointerUp=e=>{this.dragSelection&&(IS(this.dragSelection,e,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:n}=t.context,r=this.dragging=new C_(e.el);r.touchScrollAllowed=!1,r.minDistance=n.selectMinDistance||0,r.autoScroller.isEnabled=n.dragScroll;let s=this.hitDragging=new __(this.dragging,dk(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},j_,class extends uk{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=e=>{let{component:t}=this,n=HS(this.querySegEl(e)),r=this.eventRange=n.eventRange;this.dragging.minDistance=t.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(e.origEvent.target)||e.isTouch&&this.component.props.eventSelection!==r.instance.instanceId)},this.handleDragStart=e=>{let{context:t}=this.component,n=this.eventRange;this.relevantEvents=uS(t.getCurrentData().eventStore,this.eventRange.instance.instanceId);let r=this.querySegEl(e);this.draggingSegEl=r,this.draggingSeg=HS(r),t.calendarApi.unselect(),t.emitter.trigger("eventResizeStart",{el:r,event:new LS(t,n.def,n.instance),jsEvent:e.origEvent,view:t.viewApi})},this.handleHitUpdate=(e,t,n)=>{let{context:r}=this.component,s=this.relevantEvents,i=this.hitDragging.initialHit,a=this.eventRange.instance,o=null,l=null,c=!1,u={affectedEvents:s,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(e){e.componentId===i.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(i,e)||(o=function(e,t,n,r){let s=e.context.dateEnv,i=e.dateSpan.range.start,a=t.dateSpan.range.start,o=XE(i,a,s,e.largeUnit);if(n){if(s.add(r.start,o)<r.end)return{startDelta:o}}else if(s.add(r.end,o)>r.start)return{endDelta:o};return null}(i,e,n.subjectEl.classList.contains("fc-event-resizer-start"),a.range))}o&&(l=RS(s,r.getCurrentData().eventUiBases,o,r),u.mutatedEvents=l,oC(u,e.dateProfile,r)||(c=!0,o=null,l=null,u.mutatedEvents=null)),l?r.dispatch({type:"SET_EVENT_RESIZE",state:u}):r.dispatch({type:"UNSET_EVENT_RESIZE"}),c?Jx():$x(),t||(o&&T_(i,e)&&(o=null),this.validMutation=o,this.mutatedRelevantEvents=l)},this.handleDragEnd=e=>{let{context:t}=this.component,n=this.eventRange.def,r=this.eventRange.instance,s=new LS(t,n,r),i=this.relevantEvents,a=this.mutatedRelevantEvents;if(t.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:s,jsEvent:e.origEvent,view:t.viewApi}),this.validMutation){let o=new LS(t,a.defs[n.defId],r?a.instances[r.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:a});let l={oldEvent:s,event:o,relatedEvents:US(a,t,r),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:i})}};t.emitter.trigger("eventResize",Object.assign(Object.assign({},l),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||lw(0),endDelta:this.validMutation.endDelta||lw(0),jsEvent:e.origEvent,view:t.viewApi})),t.emitter.trigger("eventChange",l)}else t.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,n=this.dragging=new C_(e.el);n.pointer.selector=".fc-event-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=t.context.options.dragScroll;let r=this.hitDragging=new __(this.dragging,dk(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Lx(e.subjectEl,".fc-event")}}],calendarInteractions:[class{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=e=>{e.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=e=>{let t=this.context.options.unselectCancel,n=Hx(e.origEvent);this.matchesCancel=!!Lx(n,t),this.matchesEvent=!!Lx(n,j_.SELECTOR)},this.onDocumentPointerUp=e=>{let{context:t}=this,{documentPointer:n}=this,r=t.getCurrentData();if(!n.wasTouchScroll){if(r.dateSelection&&!this.isRecentPointerDateSelect){let n=t.options.unselectAuto;!n||n&&this.matchesCancel||t.calendarApi.unselect(e)}r.eventSelection&&!this.matchesEvent&&t.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new v_(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:C_,optionRefiners:D_,listenerRefiners:R_});const L_="https://www.googleapis.com/calendar/v3/calendars",F_={parseMeta(e){let{googleCalendarId:t}=e;return!t&&e.url&&(t=function(e){let t;if(/^[^/]+@([^/.]+\.)*(google|googlemail|gmail)\.com$/.test(e))return e;if((t=/^https:\/\/www.googleapis.com\/calendar\/v3\/calendars\/([^/]*)/.exec(e))||(t=/^https?:\/\/www.google.com\/calendar\/feeds\/([^/]*)/.exec(e)))return decodeURIComponent(t[1]);return null}(e.url)),t?{googleCalendarId:t,googleCalendarApiKey:e.googleCalendarApiKey,googleCalendarApiBase:e.googleCalendarApiBase,extraParams:e.extraParams}:null},fetch(e,t,n){let{dateEnv:r,options:s}=e.context,i=e.eventSource.meta,a=i.googleCalendarApiKey||s.googleCalendarApiKey;if(a){let s=function(e){let t=e.googleCalendarApiBase;t||(t=L_);return t+"/"+encodeURIComponent(e.googleCalendarId)+"/events"}(i),{extraParams:o}=i,l="function"===typeof o?o():o,c=function(e,t,n,r){let s,i,a;r.canComputeOffset?(i=r.formatIso(e.start),a=r.formatIso(e.end)):(i=yw(e.start,-1).toISOString(),a=yw(e.end,1).toISOString());s=Object.assign(Object.assign({},n||{}),{key:t,timeMin:i,timeMax:a,singleEvents:!0,maxResults:9999}),"local"!==r.timeZone&&(s.timeZone=r.timeZone);return s}(e.range,a,l,r);return ak("GET",s,c).then((e=>{let[r,s]=e;var i,a;r.error?n(new ik("Google Calendar API: "+r.error.message,s)):t({rawEvents:(i=r.items,a=c.timeZone,i.map((e=>function(e,t){let n=e.htmlLink||null;n&&t&&(n=function(e,t){return e.replace(/(\?.*?)?(#|$)/,((e,n,r)=>(n?n+"&":"?")+t+r))}(n,"ctz="+t));return{id:e.id,title:e.summary,start:e.start.dateTime||e.start.date,end:e.end.dateTime||e.end.date,url:n,location:e.location,description:e.description,attachments:e.attachments||[],extendedProps:(e.extendedProperties||{}).shared||{}}}(e,a)))),response:s})}),n)}n(new Error("Specify a googleCalendarApiKey. See https://fullcalendar.io/docs/google-calendar"))}};var U_=nN({name:"@fullcalendar/google-calendar",eventSourceDefs:[F_],optionRefiners:{googleCalendarApiKey:String},eventSourceRefiners:{googleCalendarApiKey:String,googleCalendarId:String,googleCalendarApiBase:String,extraParams:aE}});class B_ extends jE{constructor(){super(...arguments),this.state={textId:Wx()}}render(){let{theme:e,dateEnv:t,options:n,viewApi:r}=this.context,{cellId:s,dayDate:i,todayRange:a}=this.props,{textId:o}=this.state,l=wk(i,a),c=n.listDayFormat?t.format(i,n.listDayFormat):"",u=n.listDaySideFormat?t.format(i,n.listDaySideFormat):"",d=Object.assign({date:t.toDate(i),view:r,textId:o,text:c,sideText:u,navLinkAttrs:Ck(this.context,i),sideNavLinkAttrs:Ck(this.context,i,"day",!1)},l);return gb(FE,{elTag:"tr",elClasses:["fc-list-day",...Ek(l,e)],elAttrs:{"data-date":Dw(i)},renderProps:d,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:z_,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},(t=>gb("th",{scope:"colgroup",colSpan:3,id:s,"aria-labelledby":o},gb(t,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]}))))}}function z_(e){return gb(yb,null,e.text&&gb("a",Object.assign({id:e.textId,className:"fc-list-day-text"},e.navLinkAttrs),e.text),e.sideText&&gb("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},e.sideNavLinkAttrs),e.sideText))}const H_=Yw({hour:"numeric",minute:"2-digit",meridiem:"short"});class V_ extends jE{render(){let{props:e,context:t}=this,{options:n}=t,{seg:r,timeHeaderId:s,eventHeaderId:i,dateHeaderId:a}=e,o=n.eventTimeFormat||H_;return gb(AC,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",r.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>function(e,t){let n=ek(e,t);return gb("a",Object.assign({},n),e.eventRange.def.title)}(r,t),seg:r,timeText:"",disableDragging:!0,disableResizing:!0}),((e,n)=>gb(yb,null,function(e,t,n,r,s){let{options:i}=n;if(!1!==i.displayEventTime){let a,o=e.eventRange.def,l=e.eventRange.instance,c=!1;if(o.allDay?c=!0:!function(e){let t=YE(e);return xw(t.start,t.end)>1}(e.eventRange.range)?a=XS(e,t,n):e.isStart?a=XS(e,t,n,null,null,l.range.start,e.end):e.isEnd?a=XS(e,t,n,null,null,e.start,l.range.end):c=!0,c){let e={text:n.options.allDayText,view:n.viewApi};return gb(FE,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:"".concat(r," ").concat(s)},renderProps:e,generatorName:"allDayContent",customGenerator:i.allDayContent,defaultGenerator:W_,classNameGenerator:i.allDayClassNames,didMount:i.allDayDidMount,willUnmount:i.allDayWillUnmount})}return gb("td",{className:"fc-list-event-time"},a)}return null}(r,o,t,s,a),gb("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},gb("span",{className:"fc-list-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}})),gb(e,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:"".concat(i," ").concat(a)}}))))}}function W_(e){return e.text}function G_(e){return e.text}function q_(e){let t=Ew(e.renderRange.start),n=e.renderRange.end,r=[],s=[];for(;t<n;)r.push(t),s.push({start:t,end:yw(t,1)}),t=yw(t,1);return{dayDates:r,dayRanges:s}}jx(':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}');function Q_(e){return!1===e?null:Yw(e)}var K_=nN({name:"@fullcalendar/list",optionRefiners:{listDayFormat:Q_,listDaySideFormat:Q_,noEventsClassNames:aE,noEventsContent:aE,noEventsDidMount:aE,noEventsWillUnmount:aE},views:{list:{component:class extends Uk{constructor(){super(...arguments),this.computeDateVars=Pw(q_),this.eventStoreToSegs=Pw(this._eventStoreToSegs),this.state={timeHeaderId:Wx(),eventHeaderId:Wx(),dateHeaderIdRoot:Wx()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:t}=this,{dayDates:n,dayRanges:r}=this.computeDateVars(e.dateProfile),s=this.eventStoreToSegs(e.eventStore,e.eventUiBases,r);return gb(BE,{elRef:this.setRootEl,elClasses:["fc-list",t.theme.getClass("table"),!1!==t.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:t.viewSpec},gb(mC,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},s.length>0?this.renderSegList(s,n):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:t}=this.context,n={text:e.noEventsText,view:t};return gb(FE,{elTag:"div",elClasses:["fc-list-empty"],renderProps:n,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:G_,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},(e=>gb(e,{elTag:"div",elClasses:["fc-list-empty-cushion"]})))}renderSegList(e,t){let{theme:n,options:r}=this.context,{timeHeaderId:s,eventHeaderId:i,dateHeaderIdRoot:a}=this.state,o=function(e){let t,n,r=[];for(t=0;t<e.length;t+=1)n=e[t],(r[n.dayIndex]||(r[n.dayIndex]=[])).push(n);return r}(e);return gb(fk,{unit:"day"},((e,l)=>{let c=[];for(let n=0;n<o.length;n+=1){let u=o[n];if(u){let o=Dw(t[n]),d=a+"-"+o;c.push(gb(B_,{key:o,cellId:d,dayDate:t[n],todayRange:l})),u=GS(u,r.eventOrder);for(let t of u)c.push(gb(V_,Object.assign({key:o+":"+t.eventRange.instance.instanceId,seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:s,eventHeaderId:i,dateHeaderId:d},ZS(t,l,e))))}}return gb("table",{className:"fc-list-table "+n.getClass("table")},gb("thead",null,gb("tr",null,gb("th",{scope:"col",id:s},r.timeHint),gb("th",{scope:"col","aria-hidden":!0}),gb("th",{scope:"col",id:i},r.eventHint))),gb("tbody",null,c))}))}_eventStoreToSegs(e,t,n){return this.eventRangesToSegs(BS(e,t,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,n)}eventRangesToSegs(e,t){let n=[];for(let r of e)n.push(...this.eventRangeToSegs(r,t));return n}eventRangeToSegs(e,t){let n,r,s,{dateEnv:i}=this.context,{nextDayThreshold:a}=this.context.options,o=e.range,l=e.def.allDay,c=[];for(n=0;n<t.length;n+=1)if(r=WE(o,t[n]),r&&(s={component:this,eventRange:e,start:r.start,end:r.end,isStart:e.isStart&&r.start.valueOf()===o.start.valueOf(),isEnd:e.isEnd&&r.end.valueOf()===o.end.valueOf(),dayIndex:n},c.push(s),!s.isEnd&&!l&&n+1<t.length&&o.end<i.add(t[n+1].start,a))){s.end=o.end,s.isEnd=!0;break}return c}},buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});const Y_=["title","titleId"];function X_(e,t){let{title:n,titleId:s}=e,i=dm(e,Y_);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Z_=r.forwardRef(X_),J_={sop:{bg:"#8b5cf6",name:"SOP"},project_review:{bg:"#06b6d4",name:"Project"},"calendar-sync":{bg:"#10b981",name:"Calendar"},meal:{bg:"#f59e0b",name:"Meal"},manual:{bg:"#3788d8",name:"Event"},task:{bg:"#ef4444",name:"Task"},goal_task:{bg:"#f97316",name:"Goal Task"},recurring_task:{bg:"#84cc16",name:"Recurring Task"},goal_review:{bg:"#6366f1",name:"Goal Review"},milestone:{bg:"#ec4899",name:"Milestone"},todoist_task:{bg:"#dc2626",name:"Todoist Task"}},$_=e=>{var t,n,s,i,a;let{event:o,isOpen:l,onClose:c,onSave:u,onDelete:d}=e;const[h,f]=(0,r.useState)(o.title),[p,m]=(0,r.useState)((null===(t=o.extendedProps)||void 0===t?void 0:t.description)||""),[g,v]=(0,r.useState)(o.start.split("T")[0]),[y,b]=(0,r.useState)((null===(n=o.start.split("T")[1])||void 0===n?void 0:n.slice(0,5))||"09:00"),[x,w]=(0,r.useState)(o.end?null===(s=o.end.split("T")[1])||void 0===s?void 0:s.slice(0,5):"10:00"),[E,S]=(0,r.useState)((null===(i=o.extendedProps)||void 0===i?void 0:i.type)||"manual"),[k,C]=(0,r.useState)((null===(a=o.extendedProps)||void 0===a?void 0:a.priority)||"medium");(0,r.useEffect)((()=>{var e,t,n,r,s;f(o.title),m((null===(e=o.extendedProps)||void 0===e?void 0:e.description)||""),v(o.start.split("T")[0]),b((null===(t=o.start.split("T")[1])||void 0===t?void 0:t.slice(0,5))||"09:00"),w(o.end?null===(n=o.end.split("T")[1])||void 0===n?void 0:n.slice(0,5):"10:00"),S((null===(r=o.extendedProps)||void 0===r?void 0:r.type)||"manual"),C((null===(s=o.extendedProps)||void 0===s?void 0:s.priority)||"medium")}),[o]);if(!l)return null;const N=J_[E];return(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,$v.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:(null===N||void 0===N?void 0:N.bg)||"#3788d8"}}),(0,$v.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o.id.startsWith("temp-")?"New Event":"Edit Event"})]}),(0,$v.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(Gy,{className:"w-6 h-6"})})]}),(0,$v.jsxs)("div",{className:"p-6 space-y-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,$v.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Event title"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,$v.jsxs)("select",{value:E,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,$v.jsx)("option",{value:"manual",children:"Event"}),(0,$v.jsx)("option",{value:"sop",children:"SOP"}),(0,$v.jsx)("option",{value:"project",children:"Project"}),(0,$v.jsx)("option",{value:"meal",children:"Meal"})]})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,$v.jsx)("input",{type:"date",value:g,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,$v.jsx)("input",{type:"time",value:y,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),(0,$v.jsx)("input",{type:"time",value:x,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,$v.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,$v.jsx)("option",{value:"low",children:"Low"}),(0,$v.jsx)("option",{value:"medium",children:"Medium"}),(0,$v.jsx)("option",{value:"high",children:"High"}),(0,$v.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,$v.jsx)("textarea",{value:p,onChange:e=>m(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Event description (optional)"})]})]}),(0,$v.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[(0,$v.jsx)("div",{children:!o.id.startsWith("temp-")&&(0,$v.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this event?")&&d(o.id)},className:"flex items-center space-x-2 px-3 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",children:[(0,$v.jsx)(Py,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Delete"})]})}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("button",{onClick:c,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,$v.jsx)("button",{onClick:()=>{var e,t;const n=J(J({},o),{},{title:h,start:"".concat(g,"T").concat(y),end:"".concat(g,"T").concat(x),backgroundColor:(null===(e=J_[E])||void 0===e?void 0:e.bg)||"#3788d8",borderColor:(null===(t=J_[E])||void 0===t?void 0:t.bg)||"#3788d8",extendedProps:J(J({},o.extendedProps),{},{type:E,description:p,priority:k})});u(n)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:o.id.startsWith("temp-")?"Create":"Save"})]})]})]})})},eT=["title","titleId"];function tT(e,t){let{title:n,titleId:s}=e,i=dm(e,eT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const nT=r.forwardRef(tT),rT=e=>{let{contextId:t,userId:n,onNavigate:r}=e;return(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,$v.jsxs)("h3",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[(0,$v.jsx)(nT,{className:"w-5 h-5 text-blue-600"}),(0,$v.jsx)("span",{children:"Today's Schedule"})]})}),(0,$v.jsx)("div",{className:"space-y-3",children:(0,$v.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,$v.jsx)(nT,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,$v.jsx)("p",{className:"text-sm",children:"No events scheduled"}),(0,$v.jsx)("p",{className:"text-xs",children:"Drag items here to schedule"})]})})]}),(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsxs)("h3",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[(0,$v.jsx)(Lv,{className:"w-5 h-5 text-purple-600"}),(0,$v.jsx)("span",{children:"Available SOPs"})]}),(0,$v.jsx)("button",{onClick:()=>r("/sop-manager"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),(0,$v.jsxs)("div",{className:"space-y-2",children:[(0,$v.jsxs)("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg cursor-move hover:bg-purple-100 transition-colors",draggable:!0,"data-type":"sop","data-title":"Morning Routine","data-duration":"30","data-description":"Daily morning routine checklist",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Morning Routine"})]}),(0,$v.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"30 min \u2022 8 steps"})]}),(0,$v.jsxs)("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg cursor-move hover:bg-purple-100 transition-colors",draggable:!0,"data-type":"sop","data-title":"Weekly Planning","data-duration":"45","data-description":"Weekly review and planning session",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Weekly Planning"})]}),(0,$v.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"45 min \u2022 12 steps"})]}),(0,$v.jsxs)("button",{onClick:()=>r("/sop-manager"),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-purple-300 hover:text-purple-600 transition-colors flex items-center justify-center space-x-2",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Add SOPs"})]})]})]}),(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsxs)("h3",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[(0,$v.jsx)(Vv,{className:"w-5 h-5 text-cyan-600"}),(0,$v.jsx)("span",{children:"Project Tasks"})]}),(0,$v.jsx)("button",{onClick:()=>r("/projects"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),(0,$v.jsxs)("div",{className:"space-y-2",children:[(0,$v.jsxs)("div",{className:"p-3 bg-cyan-50 border border-cyan-200 rounded-lg cursor-move hover:bg-cyan-100 transition-colors",draggable:!0,"data-type":"project","data-title":"Setup Home Office","data-duration":"120","data-description":"Complete home office setup",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("div",{className:"w-2 h-2 bg-cyan-500 rounded-full"}),(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Setup Home Office"})]}),(0,$v.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"2 hours \u2022 High priority"})]}),(0,$v.jsxs)("div",{className:"p-3 bg-cyan-50 border border-cyan-200 rounded-lg cursor-move hover:bg-cyan-100 transition-colors",draggable:!0,"data-type":"project","data-title":"Review Documents","data-duration":"60","data-description":"Review and organize important documents",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("div",{className:"w-2 h-2 bg-cyan-500 rounded-full"}),(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Review Documents"})]}),(0,$v.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"1 hour \u2022 Medium priority"})]}),(0,$v.jsxs)("button",{onClick:()=>r("/projects"),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-cyan-300 hover:text-cyan-600 transition-colors flex items-center justify-center space-x-2",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Add Tasks"})]})]})]}),(0,$v.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,$v.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,$v.jsxs)("div",{className:"space-y-2",children:[(0,$v.jsxs)("button",{onClick:()=>r("/sop-manager"),className:"w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,$v.jsx)(Lv,{className:"w-5 h-5 text-purple-600"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Manage SOPs"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"Create and organize procedures"})]})]}),(0,$v.jsxs)("button",{onClick:()=>r("/projects"),className:"w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,$v.jsx)(Vv,{className:"w-5 h-5 text-cyan-600"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Project Manager"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"Organize tasks and projects"})]})]}),(0,$v.jsxs)("button",{onClick:()=>r("/meals"),className:"w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,$v.jsx)(Bv,{className:"w-5 h-5 text-orange-600"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Meal Planner"}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:"Schedule meal planning"})]})]})]})]})]})},sT=["title","titleId"];function iT(e,t){let{title:n,titleId:s}=e,i=dm(e,sT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const aT=r.forwardRef(iT),oT=["title","titleId"];function lT(e,t){let{title:n,titleId:s}=e,i=dm(e,oT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const cT=r.forwardRef(lT),uT=["title","titleId"];function dT(e,t){let{title:n,titleId:s}=e,i=dm(e,uT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const hT=r.forwardRef(dT),fT=e=>{let{settings:t,isOpen:n,onClose:s,onSave:i}=e;const[a,o]=(0,r.useState)(t),[l,c]=(0,r.useState)(!1),u=(e,t)=>{o((n=>J(J({},n),{},{[e]:t})))},d=(e,t)=>{o((n=>J(J({},n),{},{businessHours:J(J({},n.businessHours),{},{[e]:t})})))};return n?(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,$v.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,$v.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Calendar Settings"}),(0,$v.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(Gy,{className:"w-6 h-6"})})]}),(0,$v.jsxs)("div",{className:"p-6 space-y-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Google Calendar Integration"}),(0,$v.jsxs)("div",{className:"space-y-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Calendar API Key"}),(0,$v.jsxs)("div",{className:"relative",children:[(0,$v.jsx)("input",{type:l?"text":"password",value:a.googleCalendarApiKey,onChange:e=>u("googleCalendarApiKey",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your Google Calendar API key"}),(0,$v.jsx)("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,$v.jsx)(aT,{className:"w-4 h-4"}):(0,$v.jsx)(cT,{className:"w-4 h-4"})})]}),(0,$v.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Get your API key from the Google Cloud Console"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Calendar ID"}),(0,$v.jsx)("input",{type:"text",value:a.googleCalendarId,onChange:e=>u("googleCalendarId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"your-email@gmail.com"}),(0,$v.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Usually your Gmail address"})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Event Visibility"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("label",{className:"flex items-center",children:[(0,$v.jsx)("input",{type:"checkbox",checked:a.showGoogleEvents,onChange:e=>u("showGoogleEvents",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,$v.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Show Google Calendar events"})]}),(0,$v.jsxs)("label",{className:"flex items-center",children:[(0,$v.jsx)("input",{type:"checkbox",checked:a.showSOPEvents,onChange:e=>u("showSOPEvents",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,$v.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Show SOP events"})]}),(0,$v.jsxs)("label",{className:"flex items-center",children:[(0,$v.jsx)("input",{type:"checkbox",checked:a.showProjectEvents,onChange:e=>u("showProjectEvents",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,$v.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Show project events"})]}),(0,$v.jsxs)("label",{className:"flex items-center",children:[(0,$v.jsx)("input",{type:"checkbox",checked:a.showMealEvents,onChange:e=>u("showMealEvents",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,$v.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Show meal events"})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Time Settings"}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Week starts on"}),(0,$v.jsxs)("select",{value:a.weekStartsOn,onChange:e=>u("weekStartsOn",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,$v.jsx)("option",{value:0,children:"Sunday"}),(0,$v.jsx)("option",{value:1,children:"Monday"})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Zone"}),(0,$v.jsxs)("select",{value:a.timeZone,onChange:e=>u("timeZone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,$v.jsx)("option",{value:"local",children:"Local Time"}),(0,$v.jsx)("option",{value:"UTC",children:"UTC"}),(0,$v.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,$v.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,$v.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,$v.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Business Hours"}),(0,$v.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,$v.jsx)("input",{type:"time",value:a.businessHours.start,onChange:e=>d("start",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),(0,$v.jsx)("input",{type:"time",value:a.businessHours.end,onChange:e=>d("end",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,$v.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Business hours are highlighted on the calendar"})]}),(0,$v.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,$v.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,$v.jsx)(hT,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h5",{className:"text-sm font-medium text-blue-900",children:"Google Calendar Setup"}),(0,$v.jsxs)("div",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[(0,$v.jsx)("p",{children:"1. Go to Google Cloud Console \u2192 APIs & Services \u2192 Credentials"}),(0,$v.jsx)("p",{children:"2. Create an API key and enable the Calendar API"}),(0,$v.jsx)("p",{children:"3. Paste your API key above to sync with Google Calendar"})]})]})]})})]}),(0,$v.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,$v.jsx)("button",{onClick:s,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,$v.jsx)("button",{onClick:()=>{i(a),s()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Settings"})]})]})}):null},pT=e=>e instanceof Ui?e.toDate():null!==e&&void 0!==e&&e.seconds?new Date(1e3*e.seconds):new Date,mT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;const r=[],s=new Date("2000-01-01T".concat(e,":00")),i=new Date("2000-01-01T".concat(t,":00"));let a=new Date(s);for(;a<i;){const e=a.toTimeString().slice(0,5);r.push({time:e,duration:n}),a.setMinutes(a.getMinutes()+n)}return r},gT=(e,t)=>{const[n,r]=e.split(":").map(Number);return new Date(2e3,0,1,n,r+t).toTimeString().slice(0,5)},vT=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n},yT={async createEvent(e){const t=J(J({},Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return void 0!==n})))),{},{createdAt:Zp(),updatedAt:Zp()});return J(J({id:(await Gp(Pf(om,"calendar_events"),t)).id},e),{},{createdAt:new Date,updatedAt:new Date})},async getEventsForDateRange(e,t,n){const r=Ep(Pf(om,"calendar_events"),kp("contextId","==",e),kp("date",">=",t),kp("date","<=",n)),s=(await zp(r)).docs.map((e=>{var t,n;const r=e.data();return{id:e.id,contextId:r.contextId,type:r.type,title:r.title,description:r.description,color:r.color,date:r.date,startTime:r.startTime,endTime:r.endTime,duration:r.duration,assignedTo:r.assignedTo,assignedBy:r.assignedBy,status:r.status,sopId:r.sopId,googleEventId:r.googleEventId,mealId:r.mealId,taskId:r.taskId,isDraggable:null===(t=r.isDraggable)||void 0===t||t,isResizable:null===(n=r.isResizable)||void 0===n||n,createdAt:pT(r.createdAt),updatedAt:pT(r.updatedAt),createdBy:r.createdBy}}));return s.sort(((e,t)=>e.date!==t.date?e.date.localeCompare(t.date):e.startTime.localeCompare(t.startTime)))},async getWeeklyEvents(e,t){const n=new Date(t);n.setDate(n.getDate()+6);const r=n.toISOString().split("T")[0];return this.getEventsForDateRange(e,t,r)},async scheduleSOPEvent(e,t,n,r){const s=gT(n.preferredTime||"09:00",t.estimatedDuration),i=J(J(J({contextId:e,type:"sop",title:t.name,description:t.description,color:Uy.getCategoryColor(t.category),date:n.preferredDate||(new Date).toISOString().split("T")[0],startTime:n.preferredTime||"09:00",endTime:s,duration:t.estimatedDuration},n.assignedTo&&{assignedTo:n.assignedTo}),t.defaultAssignee&&!n.assignedTo&&{assignedTo:t.defaultAssignee}),{},{assignedBy:r,status:"scheduled",sopId:t.id,isDraggable:!0,isResizable:!0,createdBy:r});return this.createEvent(i)},async checkConflicts(e,t,n,r,s,i){const a=await this.getEventsForDateRange(e,t,t),o=gT(n,r),l=a.filter((e=>{if(i&&e.id===i)return!1;if(s&&e.assignedTo&&e.assignedTo!==s)return!1;const t=vT(e.startTime),r=vT(e.endTime),a=vT(n),l=vT(o);return a<r&&l>t}));if(0===l.length)return null;const c=[],u=mT("05:00","22:00",15);for(const d of u){const e=gT(d.time,r);if(0===a.filter((t=>{if(s&&t.assignedTo&&t.assignedTo!==s)return!1;const n=vT(t.startTime),r=vT(t.endTime),i=vT(d.time),a=vT(e);return i<r&&a>n})).length&&(c.push({alternativeTime:d.time,alternativeDate:t}),c.length>=3))break}if(0===c.length){const e=new Date(t);e.setDate(e.getDate()+1);const r=e.toISOString().split("T")[0];c.push({alternativeTime:n,alternativeDate:r})}return{targetSlot:{date:t,time:n},conflictingEvents:l,suggestions:c}},async handleDragOperation(e){const t=await this.getEventById(e.eventId);if(!t)throw new Error("Event not found");const n=await this.checkConflicts(t.contextId,e.targetDate,e.targetTime,e.newDuration||t.duration,t.assignedTo,t.id);if(n)throw new Error("Scheduling conflict detected with ".concat(n.conflictingEvents.length," events"));const r=gT(e.targetTime,e.newDuration||t.duration),s={date:e.targetDate,startTime:e.targetTime,endTime:r,duration:e.newDuration||t.duration};return await this.updateEvent(t.id,s),J(J({},t),s)},async getEventById(e){var t,n;const r=await Up(Of(om,"calendar_events",e));if(!r.exists())return null;const s=r.data();return{id:r.id,contextId:s.contextId,type:s.type,title:s.title,description:s.description,color:s.color,date:s.date,startTime:s.startTime,endTime:s.endTime,duration:s.duration,assignedTo:s.assignedTo,assignedBy:s.assignedBy,status:s.status,sopId:s.sopId,googleEventId:s.googleEventId,mealId:s.mealId,taskId:s.taskId,isDraggable:null===(t=s.isDraggable)||void 0===t||t,isResizable:null===(n=s.isResizable)||void 0===n||n,createdAt:pT(s.createdAt),updatedAt:pT(s.updatedAt),createdBy:s.createdBy}},async updateEvent(e,t){const n=Object.fromEntries(Object.entries(t).filter((e=>{let[t,n]=e;return void 0!==n}))),r=Of(om,"calendar_events",e);await Vp(r,J(J({},n),{},{updatedAt:Zp()}))},async deleteEvent(e){await Wp(Of(om,"calendar_events",e))},async getScheduledSOPIds(e,t){let n=Ep(Pf(om,"calendar_events"),kp("contextId","==",e),kp("type","==","sop"));t&&(n=Ep(Pf(om,"calendar_events"),kp("contextId","==",e),kp("type","==","sop"),kp("date",">=",t.start),kp("date","<=",t.end)));const r=await zp(n),s=[];return r.docs.forEach((e=>{const t=e.data();t.sopId&&s.push(t.sopId)})),Array.from(new Set(s))},generateCalendarWeek(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:"05:00",end:"22:00"};const r=(e=>{const t=[],n=new Date(e);for(let r=0;r<7;r++){const e=new Date(n);e.setDate(e.getDate()+r),t.push(e.toISOString().split("T")[0])}return t})(e),s=(new Date).toISOString().split("T")[0],i=r.map((e=>{const r=t.filter((t=>t.date===e)),i=new Date(e).getDay();return{date:e,dayName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i],isToday:e===s,isWeekend:0===i||6===i,events:r,timeSlots:mT(n.start,n.end,15)}})),a=t.length,o=t.reduce(((e,t)=>e+t.duration),0),l=new Date(e);return l.setDate(l.getDate()+6),{weekStart:e,weekEnd:l.toISOString().split("T")[0],days:i,totalEvents:a,totalDuration:o}},async getEventsForDay(e,t){try{const n=Ep(Pf(om,"calendar_events"),kp("contextId","==",e),kp("date","==",t),Ap("startTime"));return(await zp(n)).docs.map((e=>J(J({id:e.id},e.data()),{},{createdAt:pT(e.data().createdAt),updatedAt:pT(e.data().updatedAt)})))}catch(pD){throw console.error("Error getting events for day:",pD),pD}},timeToMinutes:vT,minutesToTime:e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},addMinutesToTime:gT,generateTimeSlots:mT},bT=e=>{let{contextId:t,userId:n}=e;const s=mg(),i=(0,r.useRef)(null),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)("timeGridWeek"),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)({googleCalendarApiKey:"",googleCalendarId:"",showGoogleEvents:!0,showSOPEvents:!0,showProjectEvents:!0,showMealEvents:!0,timeZone:"local",weekStartsOn:1,businessHours:{start:"09:00",end:"17:00"}}),x=(0,r.useCallback)((async()=>{try{v(!0);const e=new Date,n=new Date;n.setMonth(n.getMonth()+1);const r=(await yT.getEventsForDateRange(t,e.toISOString().split("T")[0],n.toISOString().split("T")[0])).map((e=>({id:e.id,title:e.title,start:"".concat(e.date,"T").concat(e.startTime),end:e.endTime?"".concat(e.date,"T").concat(e.endTime):void 0,backgroundColor:e.color||"#3788d8",borderColor:e.color||"#3788d8",textColor:"#ffffff",extendedProps:{type:e.type||"manual",description:e.description,source:"internal",priority:e.priority}})));o(r)}catch(pD){console.error("Error loading calendar events:",pD)}finally{v(!1)}}),[t]);(0,r.useEffect)((()=>{x()}),[x]);const w=e=>{var t;const n={id:"temp-".concat(Date.now()),title:"New Event",start:e.start.toISOString(),end:null===(t=e.end)||void 0===t?void 0:t.toISOString(),backgroundColor:"#3788d8",borderColor:"#3788d8",textColor:"#ffffff",extendedProps:{type:"manual",description:"",source:"internal"}};d(n),f(!0)},E=async e=>{try{const t=e.event.id,n=e.event.start,r=e.event.end;console.log("Event moved:",t,n,r)}catch(pD){console.error("Error moving event:",pD),e.revert()}};return g?(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,$v.jsxs)("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsx)("div",{className:"mb-6",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,$v.jsx)(_v,{className:"w-8 h-8 text-blue-600"})}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar"}),(0,$v.jsx)("p",{className:"text-gray-600",children:"Schedule, time-block, and manage your time"})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[(0,$v.jsx)(Z_,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Settings"})]}),(0,$v.jsxs)("button",{onClick:()=>w({start:new Date,end:new Date(Date.now()+36e5)}),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,$v.jsx)(ly,{className:"w-5 h-5"}),(0,$v.jsx)("span",{children:"New Event"})]})]})]})}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,$v.jsx)("div",{className:"lg:col-span-3",children:(0,$v.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,$v.jsx)(nA,{ref:i,plugins:[jA,f_,M_,U_,K_],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialView:l,viewDidMount:e=>c(e.view.type),height:"auto",googleCalendarApiKey:y.googleCalendarApiKey,events:a,editable:!0,selectable:!0,selectMirror:!0,droppable:!0,weekends:!0,dayMaxEvents:!0,businessHours:{startTime:y.businessHours.start,endTime:y.businessHours.end},slotMinTime:"06:00:00",slotMaxTime:"23:00:00",slotDuration:"00:15:00",snapDuration:"00:15:00",allDaySlot:!1,nowIndicator:!0,eventClick:e=>{var t,n;const r={id:e.event.id,title:e.event.title,start:(null===(t=e.event.start)||void 0===t?void 0:t.toISOString())||"",end:null===(n=e.event.end)||void 0===n?void 0:n.toISOString(),backgroundColor:e.event.backgroundColor,borderColor:e.event.borderColor,textColor:e.event.textColor,extendedProps:e.event.extendedProps};d(r),f(!0)},select:w,eventDrop:E,eventResize:E,drop:e=>{try{const t=e.draggedEl.dataset;let n;if("sop"===t.type)n={id:"sop-".concat(Date.now()),title:t.title||"SOP Event",start:e.date.toISOString(),end:new Date(e.date.getTime()+6e4*parseInt(t.duration||"30")).toISOString(),backgroundColor:"#8b5cf6",borderColor:"#8b5cf6",textColor:"#ffffff",extendedProps:{type:"sop",description:t.description,source:"sop-manager"}};else{if("project"!==t.type)return;n={id:"project-".concat(Date.now()),title:t.title||"Project Task",start:e.date.toISOString(),end:new Date(e.date.getTime()+6e4*parseInt(t.duration||"60")).toISOString(),backgroundColor:"#06b6d4",borderColor:"#06b6d4",textColor:"#ffffff",extendedProps:{type:"project_review",description:t.description,source:"projects"}}}o((e=>[...e,n]))}catch(pD){console.error("Error handling external drop:",pD)}},eventClassNames:e=>{var t;const n=null===(t=e.event.extendedProps)||void 0===t?void 0:t.type;return["fc-event-custom",n?"fc-event-".concat(n):""].filter(Boolean)}})})}),(0,$v.jsx)("div",{className:"lg:col-span-1",children:(0,$v.jsx)(rT,{contextId:t,userId:n,onNavigate:s})})]}),h&&u&&(0,$v.jsx)($_,{event:u,isOpen:h,onClose:()=>{f(!1),d(null)},onSave:e=>{o((t=>t.map((t=>t.id===e.id?e:t)))),f(!1),d(null)},onDelete:e=>{o((t=>t.filter((t=>t.id!==e)))),f(!1),d(null)}}),p&&(0,$v.jsx)(fT,{settings:y,isOpen:p,onClose:()=>m(!1),onSave:b})]})},xT=e=>{let{contextId:t,userId:n}=e;return(0,$v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("div",{className:"p-4 bg-purple-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,$v.jsx)(Vv,{className:"w-8 h-8 text-purple-600"})}),(0,$v.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Project Manager"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Advanced project management features coming soon"})]})})})},wT=["title","titleId"];function ET(e,t){let{title:n,titleId:s}=e,i=dm(e,wT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const ST=r.forwardRef(ET),kT=e=>{const t=J({},e);return Object.keys(t).forEach((e=>{t[e]instanceof Ui&&(t[e]=t[e].toDate())})),t};class CT{static async getFamilyMembers(e){if(!om)return[];try{const t=Ep(Pf(om,"family_members"),kp("familyId","==",e),Ap("name"));return(await zp(t)).docs.map((e=>kT(J({id:e.id},e.data()))))}catch(pD){return console.error("Error fetching family members:",pD),[]}}static async addFamilyMember(e){if(!om)return null;try{return(await Gp(Pf(om,"family_members"),J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}))).id}catch(pD){return console.error("Error adding family member:",pD),null}}static async updateFamilyMember(e,t){if(!om)return!1;try{return await Vp(Of(om,"family_members",e),J(J({},t),{},{updatedAt:Zp()})),!0}catch(pD){return console.error("Error updating family member:",pD),!1}}static async deleteFamilyMember(e){if(!om)return!1;try{return await Wp(Of(om,"family_members",e)),!0}catch(pD){return console.error("Error deleting family member:",pD),!1}}static async getMeals(e){if(!om)return[];try{let t=Ep(Pf(om,"meals"),Ap("name"));null!==e&&void 0!==e&&e.cuisine&&(t=Ep(Pf(om,"meals"),kp("cuisine","==",e.cuisine)));let n=(await zp(t)).docs.map((e=>kT(J({id:e.id},e.data()))));return null!==e&&void 0!==e&&e.mealType&&(n=n.filter((t=>t.mealTypes.includes(e.mealType)))),null!==e&&void 0!==e&&e.healthIndicator&&(n=n.filter((t=>t.healthIndicator===e.healthIndicator))),n}catch(pD){return console.error("Error fetching meals:",pD),[]}}static async getMealById(e){if(!om)return null;try{const t=Of(om,"meals",e),n=await Up(t);return n.exists()?kT(J({id:n.id},n.data())):null}catch(pD){return console.error("Error fetching meal:",pD),null}}static async addMeal(e){if(!om)return null;try{return(await Gp(Pf(om,"meals"),J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}))).id}catch(pD){return console.error("Error adding meal:",pD),null}}static async getMealRatings(e,t,n){if(!om)return[];try{let r=Ep(Pf(om,"meal_ratings"),kp("familyId","==",e),Ap("dateEaten","desc"));let s=(await zp(r)).docs.map((e=>kT(J({id:e.id},e.data()))));return t&&(s=s.filter((e=>e.mealId===t))),n&&(s=s.filter((e=>e.memberId===n))),s}catch(pD){return console.error("Error fetching meal ratings:",pD),[]}}static async addMealRating(e){if(!om)return null;try{const t=await Gp(Pf(om,"meal_ratings"),J(J({},e),{},{createdAt:Zp()}));return"loved"===e.rating&&await this.updateFavoriteFoods(e.memberId,e.mealId),t.id}catch(pD){return console.error("Error adding meal rating:",pD),null}}static async updateFavoriteFoods(e,t){if(om)try{const n=await this.getMealById(t);if(!n)return;const r=await Up(Of(om,"family_members",e));if(!r.exists())return;const s=r.data().favoriteFoods||[];s.includes(n.name)||await Vp(Of(om,"family_members",e),{favoriteFoods:[...s,n.name],updatedAt:Zp()})}catch(pD){console.error("Error updating favorite foods:",pD)}}static async getWeeklyMealPlan(e,t){if(!om)return null;try{const n=Ep(Pf(om,"weekly_meal_plans"),kp("familyId","==",e),kp("weekStartDate","==",t)),r=(await zp(n)).docs;return r.length>0?kT(J({id:r[0].id},r[0].data())):null}catch(pD){return console.error("Error fetching weekly meal plan:",pD),null}}static async getRecentMealPlans(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!om)return[];try{const n=Ep(Pf(om,"weekly_meal_plans"),kp("familyId","==",e),Ap("weekStartDate","desc"),function(e){return Cf("limit",e),_p._create("limit",e,"F")}(t));return(await zp(n)).docs.map((e=>kT(J({id:e.id},e.data()))))}catch(pD){return console.error("Error fetching recent meal plans:",pD),[]}}static async saveWeeklyMealPlan(e){if(!om)return null;try{return(await Gp(Pf(om,"weekly_meal_plans"),J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}))).id}catch(pD){return console.error("Error saving weekly meal plan:",pD),null}}static async updateWeeklyMealPlan(e,t){if(!om)return!1;try{return await Vp(Of(om,"weekly_meal_plans",e),J(J({},t),{},{updatedAt:Zp()})),!0}catch(pD){return console.error("Error updating weekly meal plan:",pD),!1}}static async getShoppingList(e){if(!om)return null;try{const t=Ep(Pf(om,"shopping_lists"),kp("weeklyPlanId","==",e)),n=(await zp(t)).docs;return n.length>0?kT(J({id:n[0].id},n[0].data())):null}catch(pD){return console.error("Error fetching shopping list:",pD),null}}static async saveShoppingList(e){if(!om)return null;try{return(await Gp(Pf(om,"shopping_lists"),J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}))).id}catch(pD){return console.error("Error saving shopping list:",pD),null}}static async updateShoppingItem(e,t,n){if(!om)return!1;try{const r=await Up(Of(om,"shopping_lists",e));if(!r.exists())return!1;const s=[...r.data().items];return s[t]=J(J({},s[t]),n),await Vp(Of(om,"shopping_lists",e),{items:s,updatedAt:Zp()}),!0}catch(pD){return console.error("Error updating shopping item:",pD),!1}}static async getFamilyMealPreferences(e){if(!om)return{};try{const t=await this.getMealRatings(e),n=await this.getFamilyMembers(e),r={};for(const e of n){const n=t.filter((t=>t.memberId===e.id));r[e.id]={name:e.name,lovedMeals:n.filter((e=>"loved"===e.rating)).length,likedMeals:n.filter((e=>"liked"===e.rating)).length,dislikedMeals:n.filter((e=>"disliked"===e.rating)).length,hatedMeals:n.filter((e=>"hated"===e.rating)).length,favoriteFoods:e.favoriteFoods||[],totalRatings:n.length}}return r}catch(pD){return console.error("Error analyzing meal preferences:",pD),{}}}static async getNutritionInsights(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(!om)return{};try{const n=new Date;n.setDate(n.getDate()-t);const r=Ep(Pf(om,"nutrition_logs"),kp("familyId","==",e),kp("date",">=",n.toISOString().split("T")[0]),Ap("date","desc")),s=(await zp(r)).docs.map((e=>kT(J({id:e.id},e.data())))),i={averageDailyCalories:0,averageProtein:0,averageCarbs:0,averageFat:0,totalDays:s.length,healthyMealPercentage:0};if(s.length>0){const e=s.reduce(((e,t)=>(e.calories+=t.totalNutrition.calories,e.protein+=t.totalNutrition.protein,e.carbs+=t.totalNutrition.carbs,e.fat+=t.totalNutrition.fat,e)),{calories:0,protein:0,carbs:0,fat:0});i.averageDailyCalories=Math.round(e.calories/s.length),i.averageProtein=Math.round(e.protein/s.length),i.averageCarbs=Math.round(e.carbs/s.length),i.averageFat=Math.round(e.fat/s.length)}return i}catch(pD){return console.error("Error getting nutrition insights:",pD),{}}}}const NT=e=>{let{contextId:t,userId:n}=e;const[s,i]=(0,r.useState)("weekly"),[a,o]=(0,r.useState)(new Date),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{g()}),[t,a]);const g=async()=>{try{f(!0);const e={id:"mock-plan",familyId:t,weekStartDate:a.toISOString().split("T")[0],weekEndDate:new Date(a.getTime()+5184e5).toISOString().split("T")[0],dailyPlans:[],generatedBy:"manual",createdAt:new Date,updatedAt:new Date},n=await CT.getFamilyMembers(t);c(e),d(n)}catch(pD){console.error("Error loading meal planning data:",pD),c(null),d([])}finally{f(!1)}},v=e=>{const t=new Date(a);t.setDate(t.getDate()+("next"===e?7:-7)),o(t)},y=[{id:"weekly",name:"Weekly Plan",icon:_v},{id:"shopping",name:"Shopping List",icon:ST},{id:"analytics",name:"Analytics",icon:fy},{id:"settings",name:"Settings",icon:Z_}];return h?(0,$v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-4"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Loading meal plans..."})]})})}):(0,$v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,$v.jsx)(Bv,{className:"w-6 h-6 text-orange-600"})}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Meal Planner"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Plan meals, generate shopping lists, and track nutrition"})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2 bg-white border border-gray-200 rounded-lg px-4 py-2",children:[(0,$v.jsx)("button",{onClick:()=>v("prev"),className:"p-1 hover:bg-gray-100 rounded",children:(0,$v.jsx)(_v,{className:"w-4 h-4 text-gray-600"})}),(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(e=>{const t=new Date(e);t.setDate(e.getDate()-e.getDay());const n=new Date(t);return n.setDate(t.getDate()+6),"".concat(t.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(n.toLocaleDateString("en-US",{month:"short",day:"numeric"}))})(a)}),(0,$v.jsx)("button",{onClick:()=>v("next"),className:"p-1 hover:bg-gray-100 rounded",children:(0,$v.jsx)(_v,{className:"w-4 h-4 text-gray-600"})})]}),(0,$v.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Plan Meals"})]})]})]}),(0,$v.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,$v.jsx)("nav",{className:"-mb-px flex space-x-8",children:y.map((e=>{const t=e.icon;return(0,$v.jsxs)("button",{onClick:()=>i(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat(s===e.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,$v.jsx)(t,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:e.name})]},e.id)}))})}),(0,$v.jsxs)("div",{className:"min-h-96",children:["weekly"===s&&(0,$v.jsx)("div",{className:"grid grid-cols-7 gap-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(((e,t)=>{const n=new Date(a);return n.setDate(a.getDate()-a.getDay()+t),(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,$v.jsxs)("div",{className:"text-center mb-3",children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:n.getDate()})]}),(0,$v.jsx)("div",{className:"space-y-2",children:["breakfast","lunch","dinner"].map((e=>(0,$v.jsxs)("div",{className:"border border-gray-100 rounded p-2 min-h-[60px]",children:[(0,$v.jsx)("div",{className:"text-xs text-gray-500 capitalize mb-1",children:e}),(0,$v.jsx)("div",{className:"text-xs text-gray-400",children:"No meal planned"})]},e)))})]},e)}))}),"shopping"===s&&(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Shopping List"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Generate shopping lists from your meal plans"})]}),"analytics"===s&&(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Meal Analytics"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Track nutrition, preferences, and meal ratings"})]}),"settings"===s&&(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Meal Planning Settings"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Manage family members, dietary restrictions, and preferences"})]})]}),p&&(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,$v.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Meal Planning Wizard"}),(0,$v.jsx)("p",{className:"text-gray-500 mb-6",children:"Integration with existing MealPlanningModal component coming soon"}),(0,$v.jsx)("button",{onClick:()=>m(!1),className:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]})})]})},AT=e=>{let{contextId:t,userId:n}=e;return(0,$v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("div",{className:"p-4 bg-green-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,$v.jsx)(qv,{className:"w-8 h-8 text-green-600"})}),(0,$v.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Finance Manager"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Personal finance tracking and budgeting coming soon"})]})})})},_T=["title","titleId"];function TT(e,t){let{title:n,titleId:s}=e,i=dm(e,_T);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const IT=r.forwardRef(TT),jT=["title","titleId"];function DT(e,t){let{title:n,titleId:s}=e,i=dm(e,jT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const RT=r.forwardRef(DT),PT=e=>e instanceof Ui?e.toDate():null!==e&&void 0!==e&&e.seconds?new Date(1e3*e.seconds):new Date,OT=e=>({timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,workingHours:{start:"work"===e?"09:00":"05:00",end:"work"===e?"18:00":"22:00"},weekStartsOn:1,defaultCalendarView:"15min",colorScheme:"family"===e?"#3B82F6":"work"===e?"#059669":"personal"===e?"#7C3AED":"#F59E0B",enableSOPs:!0,enableMealPlanning:"family"===e,enableTaskTracking:!0}),MT={async createContext(e,t,n,r){const s=Jp(om),i=Of(Pf(om,"contexts")),a={name:e,type:t,description:r||"",ownerId:n,createdAt:Zp(),updatedAt:Zp(),settings:OT(t)};s.set(i,a);const o=Of(Pf(om,"context_members")),l={contextId:i.id,userId:n,displayName:"Owner",role:"admin",joinedAt:Zp(),settings:{notifications:!0,canCreateSOPs:!0,canAssignTasks:!0}};s.set(o,l);const c=Of(Pf(om,"user_context_access")),u={userId:n,contextId:i.id,role:"admin",isActive:!0,lastAccessedAt:Zp()};return s.set(c,u),await s.commit(),{id:i.id,name:e,type:t,description:r||"",ownerId:n,createdAt:new Date,updatedAt:new Date,settings:OT(t)}},async getContextsForUser(e){if(!om)return console.warn("Firebase not available, returning empty contexts"),[];try{const t=Ep(Pf(om,"user_context_access"),kp("userId","==",e)),n=await zp(t),r=[];for(const e of n.docs){const t=e.data(),n=await Up(Of(om,"contexts",t.contextId));if(n.exists()){const e=n.data();r.push({id:n.id,name:e.name,type:e.type,description:e.description,ownerId:e.ownerId,createdAt:PT(e.createdAt),updatedAt:PT(e.updatedAt),settings:e.settings})}}return r.sort(((e,t)=>e.name.localeCompare(t.name)))}catch(pD){throw console.error("Error fetching contexts from Firestore:",pD),pD}},async getActiveContext(e){const t=Ep(Pf(om,"user_context_access"),kp("userId","==",e),kp("isActive","==",!0)),n=await zp(t);if(n.empty)return null;const r=n.docs[0].data(),s=await Up(Of(om,"contexts",r.contextId));if(!s.exists())return null;const i=s.data();return{id:s.id,name:i.name,type:i.type,description:i.description,ownerId:i.ownerId,createdAt:PT(i.createdAt),updatedAt:PT(i.updatedAt),settings:i.settings}},async switchActiveContext(e,t){const n=Jp(om),r=Ep(Pf(om,"user_context_access"),kp("userId","==",e));(await zp(r)).docs.forEach((e=>{const r=e.data().contextId===t;n.update(e.ref,{isActive:r,lastAccessedAt:r?Zp():e.data().lastAccessedAt})})),await n.commit()},async getContextMembers(e){const t=Ep(Pf(om,"context_members"),kp("contextId","==",e),Ap("joinedAt","asc"));return(await zp(t)).docs.map((e=>{const t=e.data();return{id:e.id,contextId:t.contextId,userId:t.userId,displayName:t.displayName,email:t.email,role:t.role,joinedAt:PT(t.joinedAt),lastActiveAt:t.lastActiveAt?PT(t.lastActiveAt):void 0,settings:t.settings}}))},async addMemberToContext(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"member";const s=Jp(om),i=Of(Pf(om,"context_members")),a={contextId:e,userId:t,displayName:n,role:r,joinedAt:Zp(),settings:{notifications:!0,canCreateSOPs:"member"===r,canAssignTasks:"member"===r}};s.set(i,a);const o=Of(Pf(om,"user_context_access")),l={userId:t,contextId:e,role:r,isActive:!1,lastAccessedAt:Zp()};return s.set(o,l),await s.commit(),{id:i.id,contextId:e,userId:t,displayName:n,role:r,joinedAt:new Date,settings:a.settings}},async updateContextSettings(e,t){const n=Of(om,"contexts",e);await Vp(n,{settings:t,updatedAt:Zp()})},async createDefaultFamilyContext(e,t){const n=t||"My Family";return this.createContext(n,"family",e,"Default family context")}},LT={async sendFamilyInvitationEmail(e){const t=e.appUrl||window.location.origin,n={to:e.to,from:"smkaufman@gmail.com",subject:"You're invited to join ".concat(e.contextName," on Symphony"),html:'\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="utf-8">\n          <title>Family Invitation</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: #3B82F6; color: white; padding: 20px; border-radius: 8px 8px 0 0; }\n            .content { background: #f9f9f9; padding: 30px; border-radius: 0 0 8px 8px; }\n            .invite-code { background: #1F2937; color: #F3F4F6; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 18px; text-align: center; margin: 20px 0; }\n            .button { display: inline-block; background: #3B82F6; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin: 20px 0; }\n            .footer { text-align: center; color: #666; font-size: 14px; margin-top: 30px; }\n          </style>\n        </head>\n        <body>\n          <div class="container">\n            <div class="header">\n              <h1>\ud83c\udf89 You\'re Invited to Join the Family!</h1>\n            </div>\n            <div class="content">\n              <p>Hi '.concat(e.inviteeName,"!</p>\n              \n              <p><strong>").concat(e.inviterName,'</strong> has invited you to join their family on <strong>Symphony</strong> - the personal operating system for families.</p>\n              \n              <p>With Symphony, you can:</p>\n              <ul>\n                <li>\ud83d\udccb Share tasks and SOPs (Standard Operating Procedures)</li>\n                <li>\ud83d\udcc5 Coordinate family schedules and planning</li>\n                <li>\ud83c\udf7d\ufe0f Plan meals together</li>\n                <li>\u2705 Assign and track family responsibilities</li>\n              </ul>\n              \n              <h3>Your Invitation Code:</h3>\n              <div class="invite-code">').concat(e.inviteCode,'</div>\n              \n              <h3>How to Join:</h3>\n              <ol>\n                <li>Click the button below to go to Symphony</li>\n                <li>Create your account or sign in</li>\n                <li>Click "Join Family" and enter your invitation code</li>\n                <li>Start collaborating with your family!</li>\n              </ol>\n              \n              <a href="').concat(t,"?invite=").concat(e.inviteCode,'" class="button">Join Family Now</a>\n              \n              <p><small>This invitation expires in 7 days. If you have any questions, just reply to this email.</small></p>\n            </div>\n            <div class="footer">\n              <p>Sent with \u2764\ufe0f from Symphony<br>\n              The Personal Operating System for Families</p>\n            </div>\n          </div>\n        </body>\n        </html>\n      '),text:"\nHi ".concat(e.inviteeName,"!\n\n").concat(e.inviterName," has invited you to join their family on Symphony.\n\nYour invitation code: ").concat(e.inviteCode,"\n\nTo join:\n1. Go to ").concat(t,'\n2. Create account or sign in  \n3. Click "Join Family" and enter code: ').concat(e.inviteCode,"\n\nThis invitation expires in 7 days.\n\nWelcome to the family!\n      ")};try{return(await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(console.log("\u2705 Email sent successfully via serverless function"),!0):(console.warn("\u26a0\ufe0f Serverless function failed, trying direct SendGrid (not secure for production)"),await this.sendDirectSendGrid(n))}catch(pD){return console.error("\u274c Email sending failed:",pD),console.log("\ud83d\udce7 Showing manual invitation details instead"),this.showManualInvitationModal(e),!1}},async sendDirectSendGrid(e){try{return console.warn("\ud83d\udea8 Direct SendGrid not implemented (API key security)"),console.log("\ud83d\udce7 Email would be sent:",e),!1}catch(pD){return console.error("Direct SendGrid failed:",pD),!1}},showManualInvitationModal(e){const t="\n\ud83d\udce7 FAMILY INVITATION EMAIL\n\nTo: ".concat(e.to,"\nFrom: ").concat(e.inviterName,"\n\nSubject: You're invited to join ").concat(e.contextName," on Symphony\n\nHi ").concat(e.inviteeName,"!\n\n").concat(e.inviterName," has invited you to join their family on Symphony.\n\nYour invitation code: ").concat(e.inviteCode,"\n\nTo join:\n1. Go to ").concat(window.location.origin,'\n2. Create account or sign in\n3. Click "Join Family" and enter your code\n\nPlease copy this message and send it to ').concat(e.to," manually.\n    ");alert(t),navigator.clipboard&&navigator.clipboard.writeText(t).then((()=>{console.log("\ud83d\udccb Invitation message copied to clipboard")}))}},FT="symphony_invitations",UT=()=>{try{const e=localStorage.getItem(FT);if(e){return JSON.parse(e).map((e=>J(J({},e),{},{createdAt:new Date(e.createdAt),expiresAt:new Date(e.expiresAt),acceptedAt:e.acceptedAt?new Date(e.acceptedAt):void 0})))}return[]}catch(pD){return console.error("Error loading invitations from localStorage:",pD),[]}},BT=e=>{try{localStorage.setItem(FT,JSON.stringify(e))}catch(pD){console.error("Error saving invitations to localStorage:",pD)}},zT={async sendFamilyInvitation(e,t,n,r,s,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"member";const o=Math.random().toString(36).substring(2,10).toUpperCase(),l=new Date;l.setDate(l.getDate()+7);const c={id:"inv_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,8)),contextId:e,contextName:t,inviterName:n,inviterEmail:r,inviteeEmail:s,inviteeName:i||"",role:a,status:"pending",inviteCode:o,createdAt:new Date,expiresAt:l};if(om)try{const u={contextId:e,contextName:t,inviterName:n,inviterEmail:r,inviteeEmail:s,inviteeName:i||"",role:a,status:"pending",inviteCode:o,createdAt:Zp(),expiresAt:Ui.fromDate(l)},d=await Gp(Pf(om,"family_invitations"),u);c.id=d.id,console.log("\ud83d\udce7 Invitation saved to Firestore")}catch(pD){console.warn("Firestore failed, using localStorage fallback")}const u=UT();u.push(c),BT(u);try{await LT.sendFamilyInvitationEmail({to:s,inviterName:n,inviteeName:i||s.split("@")[0],contextName:t,inviteCode:o})?console.log("\u2705 Email invitation sent successfully!"):console.log("\ud83d\udce7 Email sending failed, but invitation was saved")}catch(pD){console.error("\u274c Error sending email invitation:",pD)}return c},async getPendingInvitations(e){if(om)try{const t=Ep(Pf(om,"family_invitations"),kp("contextId","==",e),kp("status","==","pending"));return(await zp(t)).docs.map((e=>{var t,n,r;const s=e.data();return{id:e.id,contextId:s.contextId,contextName:s.contextName,inviterName:s.inviterName,inviterEmail:s.inviterEmail,inviteeEmail:s.inviteeEmail,inviteeName:s.inviteeName,role:s.role,status:s.status,inviteCode:s.inviteCode,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,expiresAt:(null===(n=s.expiresAt)||void 0===n?void 0:n.toDate())||new Date,acceptedAt:null===(r=s.acceptedAt)||void 0===r?void 0:r.toDate(),acceptedBy:s.acceptedBy}}))}catch(pD){console.warn("Firestore failed, using localStorage fallback")}return UT().filter((t=>t.contextId===e&&"pending"===t.status&&t.expiresAt>new Date))},async acceptInvitation(e,t){const n=UT(),r=n.find((t=>t.inviteCode===e&&"pending"===t.status));if(!r)throw new Error("Invalid or expired invitation code");if(r.expiresAt<new Date)throw new Error("This invitation has expired");if(r.status="accepted",r.acceptedAt=new Date,r.acceptedBy=t,BT(n),om)try{const n=Ep(Pf(om,"family_invitations"),kp("inviteCode","==",e),kp("status","==","pending")),r=await zp(n);r.empty||await Vp(r.docs[0].ref,{status:"accepted",acceptedAt:Zp(),acceptedBy:t})}catch(pD){console.warn("Could not update Firestore, but localStorage updated")}return r},async getInvitationsForUser(e){if(om)try{const t=Ep(Pf(om,"family_invitations"),kp("inviteeEmail","==",e),kp("status","==","pending"));return(await zp(t)).docs.map((e=>{var t,n,r;const s=e.data();return{id:e.id,contextId:s.contextId,contextName:s.contextName,inviterName:s.inviterName,inviterEmail:s.inviterEmail,inviteeEmail:s.inviteeEmail,inviteeName:s.inviteeName,role:s.role,status:s.status,inviteCode:s.inviteCode,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date,expiresAt:(null===(n=s.expiresAt)||void 0===n?void 0:n.toDate())||new Date,acceptedAt:null===(r=s.acceptedAt)||void 0===r?void 0:r.toDate(),acceptedBy:s.acceptedBy}}))}catch(pD){console.warn("Firestore failed, using localStorage fallback")}return UT().filter((t=>t.inviteeEmail===e&&"pending"===t.status&&t.expiresAt>new Date))},async cancelInvitation(e){const t=UT().filter((t=>t.id!==e));if(BT(t),om)try{const t=Ep(Pf(om,"family_invitations"),kp("__name__","==",e)),n=await zp(t);n.empty||await Vp(n.docs[0].ref,{status:"cancelled"})}catch(pD){console.warn("Could not update Firestore, but localStorage updated")}}},HT=e=>{let{contextId:t,userId:n}=e;const[s,i]=(0,r.useState)("family"),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,v]=(0,r.useState)([]),y=[{id:"family",name:"Family Members",icon:Ey},{id:"preferences",name:"Preferences",icon:Yv}];(0,r.useEffect)((()=>{b()}),[t]);const b=async()=>{try{c(!0);const[e,n]=await Promise.all([MT.getContextMembers(t),zT.getPendingInvitations(t)]);o(e),v(n)}catch(pD){console.error("Error loading context data:",pD)}finally{c(!1)}},x=e=>{switch(e){case"admin":return"bg-red-100 text-red-800 border-red-200";case"member":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return l?(0,$v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Loading settings..."})]})})}):(0,$v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsxs)("div",{className:"mb-8",children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,$v.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage your family and preferences"})]}),(0,$v.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,$v.jsx)("nav",{className:"-mb-px flex space-x-8",children:y.map((e=>{const t=e.icon;return(0,$v.jsxs)("button",{onClick:()=>i(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,$v.jsx)(t,{className:"w-5 h-5"}),(0,$v.jsx)("span",{children:e.name})]},e.id)}))})}),"family"===s&&(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Family Members"}),!u&&(0,$v.jsxs)("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Add Member"})]})]}),u&&(0,$v.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Family Member"}),(0,$v.jsxs)("div",{className:"space-y-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,$v.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Enter family member's name",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,$v.jsx)("input",{type:"email",value:p,onChange:e=>m(e.target.value),placeholder:"Enter email address",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,$v.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"An invitation will be sent to this email address"})]}),(0,$v.jsxs)("div",{className:"flex space-x-3",children:[(0,$v.jsx)("button",{onClick:async()=>{if(h.trim()&&p.trim())try{const e=a.find((e=>e.userId===n)),r=(null===e||void 0===e?void 0:e.displayName)||"Family Admin",s="noreply@symphony.ai";await zT.sendFamilyInvitation(t,"Family",r,s,p.trim(),h.trim(),"member"),await b(),d(!1),f(""),m(""),alert("Invitation sent to ".concat(p,"!\n\nThey'll receive an email with instructions to join the family. The invitation code will also appear in the console for demo purposes."))}catch(pD){console.error("Error sending invitation:",pD),alert("Failed to send invitation. Please try again.")}else alert("Please enter both name and email address")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Member"}),(0,$v.jsx)("button",{onClick:()=>{d(!1),f(""),m("")},className:"border border-gray-300 bg-white text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]}),(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,$v.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Current Members"})}),(0,$v.jsx)("div",{className:"divide-y divide-gray-200",children:a.map((e=>(0,$v.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$v.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:(0,$v.jsx)(IT,{className:"w-5 h-5 text-white"})}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.displayName}),e.email&&(0,$v.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[(0,$v.jsx)(RT,{className:"w-3 h-3"}),(0,$v.jsx)("span",{children:e.email})]}),(0,$v.jsxs)("p",{className:"text-xs text-gray-500",children:["Joined ",e.joinedAt.toLocaleDateString()]})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ".concat(x(e.role)),children:e.role}),"admin"!==e.role&&(0,$v.jsx)("button",{onClick:()=>(async(e,t)=>{window.confirm("Are you sure you want to remove ".concat(t," from the family?"))&&alert("Remove member functionality would be implemented here")})(e.id,e.displayName),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Remove member",children:(0,$v.jsx)(Py,{className:"w-4 h-4"})})]})]},e.id)))})]}),g.length>0&&(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,$v.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Pending Invitations"})}),(0,$v.jsx)("div",{className:"divide-y divide-gray-200",children:g.map((e=>(0,$v.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$v.jsx)("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,$v.jsx)(RT,{className:"w-5 h-5 text-white"})}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.inviteeName||e.inviteeEmail}),(0,$v.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[(0,$v.jsx)(RT,{className:"w-3 h-3"}),(0,$v.jsx)("span",{children:e.inviteeEmail})]}),(0,$v.jsxs)("p",{className:"text-xs text-gray-500",children:["Invited ",e.createdAt.toLocaleDateString()," \u2022 Code: ",(0,$v.jsx)("span",{className:"font-mono",children:e.inviteCode})]})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border bg-yellow-100 text-yellow-800 border-yellow-200",children:"pending"}),(0,$v.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Are you sure you want to cancel the invitation for ".concat(t,"?")))try{await zT.cancelInvitation(e),await b(),alert("Invitation cancelled successfully")}catch(pD){console.error("Error cancelling invitation:",pD),alert("Failed to cancel invitation. Please try again.")}})(e.id,e.inviteeName||e.inviteeEmail),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Cancel invitation",children:(0,$v.jsx)(Py,{className:"w-4 h-4"})})]})]},e.id)))})]}),0===a.length&&0===g.length&&(0,$v.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,$v.jsx)(Ey,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,$v.jsx)("p",{className:"text-lg font-medium",children:"No family members yet"}),(0,$v.jsx)("p",{className:"text-sm",children:"Add family members to start sharing tasks and schedules"})]})]}),"preferences"===s&&(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Preferences"}),(0,$v.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,$v.jsx)("p",{className:"text-gray-500",children:"Preference settings will be implemented here"})})]})]})},VT=["title","titleId"];function WT(e,t){let{title:n,titleId:s}=e,i=dm(e,VT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const GT=r.forwardRef(WT),qT=["title","titleId"];function QT(e,t){let{title:n,titleId:s}=e,i=dm(e,qT);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const KT=r.forwardRef(QT),YT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function XT(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ZT={date:XT({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:XT({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:XT({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},JT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function $T(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const eI={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:$T({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:$T({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:$T({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:$T({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:$T({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function tI(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(a))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const nI={ordinalNumber:(rI={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(rI.matchPattern);if(!n)return null;const r=n[0],s=e.match(rI.parsePattern);if(!s)return null;let i=rI.valueCallback?rI.valueCallback(s[0]):s[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:tI({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tI({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tI({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tI({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tI({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var rI;const sI={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=YT[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:ZT,formatRelative:(e,t,n,r)=>JT[e],localize:eI,match:nI,options:{weekStartsOn:0,firstWeekContainsDate:1}};let iI={};function aI(){return iI}Math.pow(10,8);const oI=6048e5,lI=Symbol.for("constructDateFrom");function cI(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&lI in e?e[lI](t):e instanceof Date?new e.constructor(t):new Date(t)}function uI(e,t){return cI(t||e,e)}function dI(e){const t=uI(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function hI(e,t){const n=uI(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function fI(e,t,n){const[r,s]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=cI.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(s)}(null===n||void 0===n?void 0:n.in,e,t),i=hI(r),a=hI(s),o=+i-dI(i),l=+a-dI(a);return Math.round((o-l)/864e5)}function pI(e,t){const n=uI(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function mI(e,t){const n=uI(e,null===t||void 0===t?void 0:t.in);return fI(n,pI(n))+1}function gI(e,t){var n,r,s,i,a,o;const l=aI(),c=null!==(n=null!==(r=null!==(s=null!==(i=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==s?s:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,u=uI(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=(d<c?7:0)+d-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}function vI(e,t){return gI(e,J(J({},t),{},{weekStartsOn:1}))}function yI(e,t){const n=uI(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),s=cI(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=vI(s),a=cI(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=vI(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function bI(e,t){const n=yI(e,t),r=cI((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),vI(r)}function xI(e,t){const n=uI(e,null===t||void 0===t?void 0:t.in),r=+vI(n)-+bI(n);return Math.round(r/oI)+1}function wI(e,t){var n,r,s,i,a,o;const l=uI(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),u=aI(),d=null!==(n=null!==(r=null!==(s=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==s?s:u.firstWeekContainsDate)&&void 0!==r?r:null===(o=u.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,h=cI((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,d),h.setHours(0,0,0,0);const f=gI(h,t),p=cI((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,d),p.setHours(0,0,0,0);const m=gI(p,t);return+l>=+f?c+1:+l>=+m?c:c-1}function EI(e,t){var n,r,s,i,a,o;const l=aI(),c=null!==(n=null!==(r=null!==(s=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==s?s:l.firstWeekContainsDate)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,u=wI(e,t),d=cI((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return gI(d,t)}function SI(e,t){const n=uI(e,null===t||void 0===t?void 0:t.in),r=+gI(n,t)-+EI(n,t);return Math.round(r/oI)+1}function kI(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const CI={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return kI("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):kI(n+1,2)},d:(e,t)=>kI(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>kI(e.getHours()%12||12,t.length),H:(e,t)=>kI(e.getHours(),t.length),m:(e,t)=>kI(e.getMinutes(),t.length),s:(e,t)=>kI(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return kI(Math.trunc(r*Math.pow(10,n-3)),t.length)}},NI="midnight",AI="noon",_I="morning",TI="afternoon",II="evening",jI="night",DI={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return CI.y(e,t)},Y:function(e,t,n,r){const s=wI(e,r),i=s>0?s:1-s;if("YY"===t){return kI(i%100,2)}return"Yo"===t?n.ordinalNumber(i,{unit:"year"}):kI(i,t.length)},R:function(e,t){return kI(yI(e),t.length)},u:function(e,t){return kI(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return kI(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return kI(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return CI.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return kI(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=SI(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):kI(s,t.length)},I:function(e,t,n){const r=xI(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):kI(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):CI.d(e,t)},D:function(e,t,n){const r=mI(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):kI(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return kI(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return kI(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return kI(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(s=12===r?AI:0===r?NI:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(s=r>=17?II:r>=12?TI:r>=4?_I:jI,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return CI.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):CI.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):kI(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):kI(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):CI.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):CI.s(e,t)},S:function(e,t){return CI.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return PI(r);case"XXXX":case"XX":return OI(r);default:return OI(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return PI(r);case"xxxx":case"xx":return OI(r);default:return OI(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+RI(r,":");default:return"GMT"+OI(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+RI(r,":");default:return"GMT"+OI(r,":")}},t:function(e,t,n){return kI(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return kI(+e,t.length)}};function RI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return 0===i?n+String(s):n+String(s)+t+kI(i,2)}function PI(e,t){if(e%60===0){return(e>0?"-":"+")+kI(Math.abs(e)/60,2)}return OI(e,t)}function OI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+kI(Math.trunc(r/60),2)+t+kI(r%60,2)}const MI=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},LI=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},FI={p:LI,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return MI(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",MI(r,t)).replace("{{time}}",LI(s,t))}},UI=/^D+$/,BI=/^Y+$/,zI=["D","DD","YY","YYYY"];function HI(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function VI(e){return!(!HI(e)&&"number"!==typeof e||isNaN(+uI(e)))}const WI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qI=/^'([^]*?)'?$/,QI=/''/g,KI=/[a-zA-Z]/;function YI(e,t,n){var r,s,i,a,o,l,c,u,d,h,f,p,m,g;const v=aI(),y=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:v.locale)&&void 0!==r?r:sI,b=null!==(i=null!==(a=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:v.firstWeekContainsDate)&&void 0!==a?a:null===(u=v.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==i?i:1,x=null!==(d=null!==(h=null!==(f=null!==(p=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==p?p:null===n||void 0===n||null===(m=n.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==f?f:v.weekStartsOn)&&void 0!==h?h:null===(g=v.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,w=uI(e,null===n||void 0===n?void 0:n.in);if(!VI(w))throw new RangeError("Invalid time value");let E=t.match(GI).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,FI[t])(e,y.formatLong)}return e})).join("").match(WI).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:XI(e)};if(DI[t])return{isToken:!0,value:e};if(t.match(KI))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(E=y.localize.preprocessor(w,E));const S={firstWeekContainsDate:b,weekStartsOn:x,locale:y};return E.map((r=>{if(!r.isToken)return r.value;const s=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return BI.test(e)}(s))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return UI.test(e)}(s))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),zI.includes(e))throw new RangeError(r)}(s,t,String(e));return(0,DI[s[0]])(w,s,y.localize,S)})).join("")}function XI(e){const t=e.match(qI);return t?t[1].replace(QI,"'"):e}const ZI=["title","titleId"];function JI(e,t){let{title:n,titleId:s}=e,i=dm(e,ZI);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const $I=r.forwardRef(JI),ej=["title","titleId"];function tj(e,t){let{title:n,titleId:s}=e,i=dm(e,ej);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const nj=r.forwardRef(tj),rj=e=>{var t;let{isOpen:n,onClose:s,event:i,contextId:a}=e;const[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[b,x]=(0,r.useState)(""),[w,E]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),[C,N]=(0,r.useState)(""),[A,_]=(0,r.useState)(""),[T,I]=(0,r.useState)([]),[j,D]=(0,r.useState)(""),[R,P]=(0,r.useState)(!1),[O,M]=(0,r.useState)(""),[L,F]=(0,r.useState)("supplies"),[U,B]=(0,r.useState)(null),[z,H]=(0,r.useState)(""),[V,W]=(0,r.useState)(""),[G,q]=(0,r.useState)((()=>null!==i&&void 0!==i&&i.id?By.getTask(i.id):void 0)),Q=(null===G||void 0===G?void 0:G.notes)||"";if((0,r.useEffect)((()=>{(async()=>{if(a&&n)try{const e=await MT.getContextMembers(a);I(e)}catch(pD){console.error("Error loading context members:",pD)}})()}),[a,n]),(0,r.useEffect)((()=>{if(null!==i&&void 0!==i&&i.id){const e=By.getTask(i.id);q(e)}}),[null===i||void 0===i?void 0:i.id]),(0,r.useEffect)((()=>{if(null===i||void 0===i||!i.id)return;const e=By.subscribe((()=>{const e=By.getTask(i.id);q(e)}));return()=>{e()}}),[null===i||void 0===i?void 0:i.id]),!n||!i)return null;const K=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),Y=()=>{v.trim()&&v!==i.title&&By.updateTask(i.id,{title:v.trim()}),l(!1),y("")},X=()=>{l(!1),y("")},Z=e=>e.toTimeString().slice(0,5);return(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,$v.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case"task":return"\u2705";case"event":return"\ud83d\udcc5";case"meal":return"\ud83c\udf7d\ufe0f";case"sop":return"\ud83d\udccb";default:return"\ud83d\udcdd"}})(i.type)}),(0,$v.jsx)("div",{className:"flex-1",children:o?(0,$v.jsxs)("div",{className:"space-y-2",children:[(0,$v.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),className:"text-xl font-semibold text-gray-900 w-full border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:e=>{"Enter"===e.key&&Y(),"Escape"===e.key&&X()},autoFocus:!0}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:Y,className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Save"}),(0,$v.jsx)("button",{onClick:X,className:"text-xs bg-gray-300 text-gray-700 px-2 py-1 rounded hover:bg-gray-400",children:"Cancel"})]})]}):(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:i.title}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,$v.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ".concat((e=>{switch(e){case"work":return"bg-green-100 text-green-800 border-green-200";case"family":return"bg-blue-100 text-blue-800 border-blue-200";case"personal":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(i.context)),children:i.context}),(0,$v.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:i.type})]})]})})]}),(0,$v.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,$v.jsx)(Gy,{className:"w-6 h-6"})})]}),(0,$v.jsxs)("div",{className:"p-6 space-y-6",children:[(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,$v.jsx)(_v,{className:"w-5 h-5 text-gray-600"}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Date"}),(0,$v.jsx)("p",{className:"text-sm text-gray-600",children:(J=i.start,J.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,$v.jsx)(gy,{className:"w-5 h-5 text-gray-600"}),(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Time"}),d?(0,$v.jsxs)("div",{className:"space-y-2 mt-1",children:[(0,$v.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,$v.jsx)("input",{type:"time",value:w,onChange:e=>E(e.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,$v.jsx)("span",{className:"text-sm text-gray-500",children:"to"}),(0,$v.jsx)("input",{type:"time",value:S,onChange:e=>k(e.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:()=>{const[e,t]=w.split(":").map(Number),[n,r]=S.split(":").map(Number),s=new Date(i.start);s.setHours(e,t,0,0);new Date(i.end).setHours(n,r,0,0),By.scheduleTask(i.id,s,w),h(!1)},className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Save"}),(0,$v.jsx)("button",{onClick:()=>{h(!1),E(""),k("")},className:"text-xs bg-gray-300 text-gray-700 px-2 py-1 rounded hover:bg-gray-400",children:"Cancel"})]})]}):(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("p",{className:"text-sm text-gray-600",children:[K(i.start)," - ",K(i.end)," (",(()=>{const e=i.end.getTime()-i.start.getTime(),t=Math.round(e/6e4),n=Math.floor(t/60),r=t%60;return n>0?"".concat(n,"h ").concat(r>0?"".concat(r,"m"):""):"".concat(t,"m")})(),")"]}),(0,$v.jsx)("button",{onClick:()=>{E(Z(i.start)),k(Z(i.end)),h(!0)},className:"text-xs text-blue-600 hover:text-blue-800 ml-2",children:"Edit"})]})]})]})]}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Assignment"}),T.length>0&&!m&&(0,$v.jsxs)("button",{onClick:()=>{D(i.assignedTo||""),g(!0)},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[(0,$v.jsx)($I,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Assign"})]})]}),m?(0,$v.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Assign to family member:"}),(0,$v.jsxs)("select",{value:j,onChange:e=>D(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,$v.jsx)("option",{value:"",children:"Unassigned"}),T.map((e=>(0,$v.jsx)("option",{value:e.userId,children:e.displayName},e.id)))]}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:async()=>{j!==i.assignedTo&&await By.updateTask(i.id,{assignedTo:j||void 0}),g(!1)},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Save Assignment"}),(0,$v.jsx)("button",{onClick:()=>{g(!1),D("")},className:"border border-gray-300 bg-white text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-50",children:"Cancel"})]})]})}):(0,$v.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,$v.jsx)(Ey,{className:"w-5 h-5 text-gray-600"}),(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("p",{className:"text-sm font-medium text-gray-900",children:i.assignedTo?"Assigned To":"Assignment"}),(0,$v.jsx)("p",{className:"text-sm text-gray-600",children:i.assignedTo?(null===(t=T.find((e=>e.userId===i.assignedTo)))||void 0===t?void 0:t.displayName)||i.assignedTo:"Unassigned"})]})]})]}),(Q||c)&&(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Notes"}),c?(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("textarea",{value:b,onChange:e=>x(e.target.value),placeholder:"Add notes for this task...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:4,autoFocus:!0}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:()=>{By.updateTask(i.id,{notes:b}),u(!1),x("")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Save Note"}),(0,$v.jsx)("button",{onClick:()=>{u(!1),x("")},className:"border border-gray-300 bg-white text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}):(0,$v.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,$v.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:Q})})]}),"sop"===i.type&&(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sub-steps"}),!f&&(0,$v.jsx)("button",{onClick:()=>{N(""),_(""),p(!0)},className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors",children:"+ Add Sub-step"})]}),(0,$v.jsxs)("div",{className:"space-y-2",children:[f&&(0,$v.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Sub-step title...",value:C,onChange:e=>N(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,$v.jsx)("textarea",{placeholder:"Description (optional)...",value:A,onChange:e=>_(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:2}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:async()=>{C.trim()&&(await By.addSubStep(i.id,{title:C.trim(),description:A.trim()||void 0}),p(!1),N(""),_(""))},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Add"}),(0,$v.jsx)("button",{onClick:()=>{p(!1),N(""),_("")},className:"border border-gray-300 bg-white text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-50",children:"Cancel"})]})]})}),null!==G&&void 0!==G&&G.subSteps&&G.subSteps.length>0?G.subSteps.map(((e,t)=>(0,$v.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("input",{type:"checkbox",checked:e.isCompleted,onChange:t=>(async(e,t)=>{await By.updateSubStep(i.id,e,{isCompleted:t})})(e.id,t.target.checked),className:"mt-1 rounded focus:ring-blue-500"}),(0,$v.jsx)("div",{className:"flex-1",children:(0,$v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("p",{className:"text-sm font-medium ".concat(e.isCompleted?"text-gray-500 line-through":"text-gray-900"),children:e.title}),e.description&&(0,$v.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description})]}),(0,$v.jsx)("div",{className:"ml-3 min-w-0 flex-shrink-0",children:(0,$v.jsxs)("select",{value:e.assignedTo||"",onChange:t=>(async(e,t)=>{await By.updateSubStep(i.id,e,{assignedTo:t||void 0})})(e.id,t.target.value),className:"text-xs border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,$v.jsx)("option",{value:"",children:"Unassigned"}),T.map((e=>(0,$v.jsx)("option",{value:e.id,children:e.displayName},e.id)))]})})]})}),(0,$v.jsx)("button",{onClick:()=>(async e=>{window.confirm("Are you sure you want to delete this sub-step?")&&await By.deleteSubStep(i.id,e)})(e.id),className:"text-gray-400 hover:text-red-600 text-sm",children:"\xd7"})]},e.id))):f?null:(0,$v.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,$v.jsx)("p",{className:"text-sm",children:"No sub-steps added yet"}),(0,$v.jsx)("p",{className:"text-xs text-gray-400",children:'Click "Add Sub-step" to break this task into smaller steps'})]})]})]}),(0,$v.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,$v.jsx)(ST,{className:"w-5 h-5 mr-2"}),"Lists"]}),(0,$v.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 text-sm",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Add List"})]})]}),R&&(0,$v.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"List Title"}),(0,$v.jsx)("input",{type:"text",value:O,onChange:e=>M(e.target.value),placeholder:"e.g., Supplies needed, Ingredients, Tools...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"List Type"}),(0,$v.jsxs)("select",{value:L,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,$v.jsx)("option",{value:"supplies",children:"Supplies"}),(0,$v.jsx)("option",{value:"ingredients",children:"Ingredients"}),(0,$v.jsx)("option",{value:"checklist",children:"Checklist"}),(0,$v.jsx)("option",{value:"notes",children:"Notes"}),(0,$v.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:async()=>{if(O.trim())try{await By.addList(i.id,{title:O.trim(),type:L}),console.log("List added successfully");const e=By.getTask(i.id);q(e),M(""),P(!1)}catch(pD){console.error("Error adding list:",pD),alert("Failed to add list. Please try again.")}},className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Add List"}),(0,$v.jsx)("button",{onClick:()=>{P(!1),M("")},className:"px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm",children:"Cancel"})]})]})}),null!==G&&void 0!==G&&G.lists&&G.lists.length>0?(0,$v.jsx)("div",{className:"space-y-4",children:G.lists.map((e=>(0,$v.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,$v.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded-full",children:e.type})]}),(0,$v.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this list?")){await By.deleteList(i.id,e);const t=By.getTask(i.id);q(t)}})(e.id),className:"text-gray-400 hover:text-red-600",children:(0,$v.jsx)(Py,{className:"w-4 h-4"})})]}),(0,$v.jsxs)("div",{className:"space-y-2",children:[e.items.map((t=>(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("input",{type:"checkbox",checked:t.isChecked||!1,onChange:n=>(async(e,t,n)=>{await By.updateListItem(i.id,e,t,{isChecked:n});const r=By.getTask(i.id);q(r)})(e.id,t.id,n.target.checked),className:"rounded focus:ring-blue-500"}),(0,$v.jsxs)("span",{className:"flex-1 text-sm ".concat(t.isChecked?"line-through text-gray-500":"text-gray-900"),children:[t.quantity&&(0,$v.jsxs)("span",{className:"font-medium",children:[t.quantity," "]}),t.text]}),(0,$v.jsx)("button",{onClick:()=>(async(e,t)=>{await By.deleteListItem(i.id,e,t);const n=By.getTask(i.id);q(n)})(e.id,t.id),className:"text-gray-400 hover:text-red-600",children:"\xd7"})]},t.id))),U===e.id?(0,$v.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,$v.jsx)("input",{type:"text",value:V,onChange:e=>W(e.target.value),placeholder:"Qty",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("input",{type:"text",value:z,onChange:e=>H(e.target.value),placeholder:"Add item...",className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("button",{onClick:()=>(async e=>{if(z.trim())try{await By.addListItem(i.id,e,{text:z.trim(),quantity:V.trim()||void 0});const t=By.getTask(i.id);q(t),H(""),W(""),B(null)}catch(pD){console.error("Error adding list item:",pD),alert("Failed to add item. Please try again.")}})(e.id),className:"px-2 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"}),(0,$v.jsx)("button",{onClick:()=>B(null),className:"px-2 py-1 border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50",children:"Cancel"})]}):(0,$v.jsxs)("button",{onClick:()=>B(e.id),className:"text-blue-600 hover:text-blue-700 text-sm flex items-center space-x-1 mt-2",children:[(0,$v.jsx)(ly,{className:"w-3 h-3"}),(0,$v.jsx)("span",{children:"Add item"})]})]})]},e.id)))}):R?null:(0,$v.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,$v.jsx)("p",{className:"text-sm",children:"No lists added yet"}),(0,$v.jsx)("p",{className:"text-xs text-gray-400",children:"Add supplies, ingredients, or checklists to this task"})]})]}),(0,$v.jsx)("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-200",children:!o&&!c&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsxs)("button",{onClick:()=>{y(i.title),l(!0)},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,$v.jsx)(jy,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Edit"})]}),(0,$v.jsxs)("button",{onClick:()=>{x(Q),u(!0)},className:"flex items-center space-x-2 border border-gray-300 bg-white text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,$v.jsx)(nj,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:Q?"Edit Note":"Add Note"})]}),(0,$v.jsxs)("button",{className:"flex items-center space-x-2 border border-gray-300 bg-white text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,$v.jsx)(by,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Add Tags"})]}),(0,$v.jsxs)("button",{onClick:()=>{window.confirm('Are you sure you want to delete "'.concat(i.title,'"?'))&&(By.deleteTask(i.id),s())},className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[(0,$v.jsx)(Py,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Delete"})]})]})})]})]})});var J},sj=e=>{let{contextId:t,userId:n}=e;const[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(new Date);(0,r.useEffect)((()=>{const e=()=>{try{const e=By.getTodayTasks(t).map((e=>({id:e.id,title:e.title,type:e.type,time:e.scheduledTime,duration:e.duration,status:e.status,context:e.context,priority:e.priority,assignedTo:e.assignedTo,notes:e.notes,tags:e.tags||[]})));i(e),o(!1)}catch(pD){console.error("Error loading today tasks:",pD),o(!1)}};By.loadTasks(t).then((()=>{e()}));const n=By.subscribeToTasks(t),r=By.subscribe(e);return()=>{n(),r()}}),[t]),(0,r.useEffect)((()=>{const e=setInterval((()=>{f(new Date)}),3e4);return()=>clearInterval(e)}),[]);const p=async e=>{await By.completeTask(e)},m=e=>{switch(e){case"work":return"bg-green-100 text-green-800";case"family":return"bg-blue-100 text-blue-800";case"personal":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},g=e=>{switch(e){case"urgent":return"\ud83d\udd34";case"high":return"\ud83d\udfe0";case"medium":return"\ud83d\udfe1";default:return""}},v=(()=>{const e=(new Date).getHours(),t=s.filter((e=>!(e=>{var t;if("sop"!==e.type||null===(t=e.tags)||void 0===t||!t.includes("sop-step"))return!1;if(!e.time||!e.duration)return!1;const n=h,[r,s]=e.time.split(":").map(Number),i=new Date;i.setHours(r,s,0,0);const a=new Date(i.getTime()+6e4*e.duration),o=6e4*e.duration*.2;return n>new Date(a.getTime()+o)})(e))),n=[...t].sort(((e,t)=>{var n,r,s,i,a,o;const l=null===(n=e.tags)||void 0===n?void 0:n.includes("sop-container"),c=null===(r=t.tags)||void 0===r?void 0:r.includes("sop-container"),u=null===(s=e.tags)||void 0===s?void 0:s.includes("sop-step"),d=null===(i=t.tags)||void 0===i?void 0:i.includes("sop-step"),h=null===(a=e.tags)||void 0===a?void 0:a.find((e=>e.startsWith("container:"))),f=null===(o=t.tags)||void 0===o?void 0:o.find((e=>e.startsWith("container:"))),p=h?h.split(":")[1]:null,m=f?f.split(":")[1]:null;return l&&d&&m===e.id?-1:c&&u&&p===t.id?1:u&&d&&p===m?e.time&&t.time?e.time.localeCompare(t.time):e.title.localeCompare(t.title):e.time&&t.time?e.time.localeCompare(t.time):!e.time&&t.time?1:e.time&&!t.time?-1:e.title.localeCompare(t.title)}));return{overdue:n.filter((t=>{if(!t.time)return!1;return parseInt(t.time.split(":")[0])<e&&"completed"!==t.status})),current:n.filter((t=>{if(!t.time)return!1;const n=parseInt(t.time.split(":")[0]);return Math.abs(n-e)<=1&&"completed"!==t.status})),upcoming:n.filter((t=>{if(!t.time)return"completed"!==t.status;return parseInt(t.time.split(":")[0])>e+1&&"completed"!==t.status})),completed:n.filter((e=>"completed"===e.status))}})(),y=e=>({id:e.id,name:e.title,estimatedDuration:e.duration||30,assignedTo:e.assignedTo||"You",context:e.context,priority:e.priority,notes:e.notes,type:e.type,time:e.time,status:e.status,parentTitle:e.parentTitle}),b=e=>{const t={id:e.id,title:e.title,start:e.time?new Date("".concat((new Date).toDateString()," ").concat(e.time)):new Date,end:e.time&&e.duration?new Date("".concat((new Date).toDateString()," ").concat(e.time)):new Date,type:e.type,context:e.context,assignedTo:e.assignedTo};t.end&&e.duration&&(t.end=new Date(t.end.getTime()+6e4*e.duration)),d(t)};return a?(0,$v.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Loading your day..."})]})})}):(0,$v.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Today"}),(0,$v.jsx)("p",{className:"text-gray-500 mt-1",children:YI(new Date,"EEEE, MMMM d, yyyy")})]}),(0,$v.jsx)("div",{className:"flex items-center space-x-3",children:(0,$v.jsxs)("button",{onClick:async()=>{const e=window.prompt("Enter task title:");if(null!==e&&void 0!==e&&e.trim())try{const n={id:"task_".concat(Math.random().toString(36).substr(2,8)),title:e.trim(),type:"task",status:"pending",priority:"medium",contextId:t,context:t,createdBy:"user",source:"manual"};await By.createTask(n),console.log("\u2705 Quick add task created successfully")}catch(pD){console.error("Error creating quick add task:",pD),alert("Failed to create task. Please try again.")}},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Quick Add"})]})})]}),(0,$v.jsxs)("div",{className:"space-y-8",children:[v.overdue.length>0&&(0,$v.jsxs)("div",{children:[(0,$v.jsxs)("h2",{className:"text-lg font-semibold text-red-700 mb-4 flex items-center",children:[(0,$v.jsx)(gy,{className:"w-5 h-5 mr-2"}),"Overdue"]}),(0,$v.jsx)("div",{className:"space-y-2",children:v.overdue.map((e=>(0,$v.jsx)(ij,{item:e,onComplete:p,onItemClick:b,getContextColor:m,getPriorityIcon:g,getTooltipData:y},e.id)))})]}),v.current.length>0&&(0,$v.jsxs)("div",{children:[(0,$v.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$v.jsx)(iy,{className:"w-5 h-5 mr-2 text-blue-600"}),"Now"]}),(0,$v.jsx)("div",{className:"space-y-2",children:v.current.map((e=>(0,$v.jsx)(ij,{item:e,onComplete:p,onItemClick:b,getContextColor:m,getPriorityIcon:g,getTooltipData:y,highlighted:!0},e.id)))})]}),v.upcoming.length>0&&(0,$v.jsxs)("div",{children:[(0,$v.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,$v.jsx)(_v,{className:"w-5 h-5 mr-2"}),"Coming Up"]}),(0,$v.jsx)("div",{className:"space-y-2",children:v.upcoming.map((e=>(0,$v.jsx)(ij,{item:e,onComplete:p,onItemClick:b,getContextColor:m,getPriorityIcon:g,getTooltipData:y},e.id)))})]}),v.completed.length>0&&(0,$v.jsxs)("div",{children:[(0,$v.jsxs)("button",{onClick:()=>c(!l),className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[(0,$v.jsx)(GT,{className:"w-5 h-5 mr-2"}),(0,$v.jsxs)("span",{className:"font-medium",children:["Completed (",v.completed.length,")"]}),(0,$v.jsx)(iy,{className:"w-4 h-4 ml-2 transition-transform ".concat(l?"rotate-90":"")})]}),l&&(0,$v.jsx)("div",{className:"space-y-2 opacity-60",children:v.completed.map((e=>(0,$v.jsx)(ij,{item:e,onComplete:p,onItemClick:b,getContextColor:m,getPriorityIcon:g,getTooltipData:y,completed:!0},e.id)))})]})]}),(0,$v.jsx)(rj,{isOpen:!!u,onClose:()=>d(null),event:u})]})},ij=e=>{var t,n,r;let{item:s,onComplete:i,onItemClick:a,getContextColor:o,getPriorityIcon:l,getTooltipData:c,highlighted:u=!1,completed:d=!1}=e;const h=null===(t=s.tags)||void 0===t?void 0:t.includes("sop-container"),f=null===(n=s.tags)||void 0===n?void 0:n.includes("sop-step"),p=null===(r=s.tags)||void 0===r?void 0:r.find((e=>e.startsWith("container:"))),m=p?p.split(":")[1]:null,g=f&&m?(e=>{const t=By.getTask(m);return(null===t||void 0===t||null===(e=t.title)||void 0===e?void 0:e.replace("\ud83d\udccb ",""))||"SOP"})():null,v="\n    bg-white border rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer\n    ".concat(u?"border-blue-300 shadow-md":"border-gray-200","\n    ").concat(d?"opacity-60":"","\n    ").concat(h?"border-l-4 border-l-purple-500 bg-purple-50":"","\n    ").concat(f?"border-l-4 border-l-purple-300 ml-2":"","\n  "),y=(0,$v.jsx)("div",{className:v,onClick:()=>a(s),children:(0,$v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,$v.jsx)("button",{onClick:e=>{e.stopPropagation(),i(s.id)},className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ".concat("completed"===s.status?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-green-400"),children:"completed"===s.status&&(0,$v.jsx)(GT,{className:"w-3 h-3"})}),(0,$v.jsx)("div",{className:"flex-1 min-w-0",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsxs)("h3",{className:"font-medium text-sm ".concat(d?"line-through text-gray-500":"text-gray-900"),children:[l(s.priority)," ",s.title]}),f&&g&&(0,$v.jsx)("span",{className:"text-xs text-purple-600 bg-purple-100 px-2 py-0.5 rounded-full",children:g}),s.parentTitle&&!f&&(0,$v.jsxs)("span",{className:"text-xs text-gray-500",children:["\u2022 ",s.parentTitle]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,$v.jsx)("span",{className:"px-2 py-1 rounded-full font-medium ".concat(o(s.context)),children:s.context}),s.time&&(0,$v.jsxs)("span",{className:"flex items-center text-gray-500",children:[(0,$v.jsx)(gy,{className:"w-3 h-3 mr-1"}),s.time,s.duration&&" (".concat(s.duration,"m)")]}),s.assignedTo&&(0,$v.jsxs)("span",{className:"flex items-center text-gray-500",children:[(0,$v.jsx)(IT,{className:"w-3 h-3 mr-1"}),s.assignedTo]})]})]})})]}),(0,$v.jsx)("button",{onClick:e=>e.stopPropagation(),className:"text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(KT,{className:"w-5 h-5"})})]})});return(0,$v.jsxs)("div",{className:"relative group",children:[y,(0,$v.jsxs)("div",{className:"absolute left-full top-0 ml-3 w-64 bg-gray-900 text-white text-xs rounded-lg p-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[(0,$v.jsxs)("div",{className:"space-y-2",children:[(0,$v.jsx)("div",{className:"font-medium",children:s.title}),s.time&&(0,$v.jsxs)("div",{className:"text-gray-300",children:["\u23f0 ",s.time,s.duration&&" (".concat(s.duration,"m)")]}),s.assignedTo&&(0,$v.jsxs)("div",{className:"text-gray-300",children:["\ud83d\udc64 ",s.assignedTo]}),(0,$v.jsxs)("div",{className:"text-gray-300",children:["\ud83d\udcc1 ",s.context," \u2022 ",s.priority," priority"]}),s.parentTitle&&(0,$v.jsxs)("div",{className:"text-gray-300",children:["\ud83d\udccb Part of: ",s.parentTitle]}),s.notes&&(0,$v.jsx)("div",{className:"text-gray-300 border-t border-gray-700 pt-2 mt-2",children:s.notes})]}),(0,$v.jsx)("div",{className:"absolute right-full top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-gray-900"})]})]})},aj=["title","titleId"];function oj(e,t){let{title:n,titleId:s}=e,i=dm(e,aj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const lj=r.forwardRef(oj),cj=["title","titleId"];function uj(e,t){let{title:n,titleId:s}=e,i=dm(e,cj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"}))}const dj=r.forwardRef(uj),hj=["title","titleId"];function fj(e,t){let{title:n,titleId:s}=e,i=dm(e,hj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const pj=r.forwardRef(fj),mj=["title","titleId"];function gj(e,t){let{title:n,titleId:s}=e,i=dm(e,mj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const vj=r.forwardRef(gj),yj=["title","titleId"];function bj(e,t){let{title:n,titleId:s}=e,i=dm(e,yj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const xj=r.forwardRef(bj),wj=["title","titleId"];function Ej(e,t){let{title:n,titleId:s}=e,i=dm(e,wj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const Sj=r.forwardRef(Ej),kj=e=>{if(null===e||void 0===e)return null;if(Array.isArray(e))return e.map(kj).filter((e=>void 0!==e));if("object"===typeof e){const t={};for(const[n,r]of Object.entries(e))void 0!==r&&(t[n]=kj(r));return t}return e},Cj=e=>{if(!e)return e;const t=J({},e);return Object.keys(t).forEach((e=>{t[e]instanceof Ui&&(t[e]=t[e].toDate().toISOString())})),t};const Nj=new class{async createGoal(e){try{const t=kj(J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}));return(await Gp(Pf(om,"goals"),t)).id}catch(pD){throw console.error("Error creating goal:",pD),pD}}async updateGoal(e,t){try{const n=kj(J(J({},t),{},{updatedAt:Zp()}));await Vp(Of(om,"goals",e),n)}catch(pD){throw console.error("Error updating goal:",pD),pD}}async deleteGoal(e){try{await this.deleteGoalCascade(e),await Wp(Of(om,"goals",e))}catch(pD){throw console.error("Error deleting goal:",pD),pD}}async getGoalById(e){try{const t=await Up(Of(om,"goals",e));if(!t.exists())return null;const n=Cj(t.data());return J({id:t.id},n)}catch(pD){throw console.error("Error fetching goal:",pD),pD}}async getGoalsByContext(e,t){try{let n=Ep(Pf(om,"goals"),kp("contextId","==",e));null!==t&&void 0!==t&&t.status&&t.status.length>0&&(n=Ep(n,kp("status","in",t.status)));let r=(await zp(n)).docs.map((e=>J({id:e.id},Cj(e.data()))));return t&&(r=this.applyFilters(r,t)),r}catch(pD){throw console.error("Error fetching goals:",pD),pD}}async createProject(e){try{const t=kj(J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}));return(await Gp(Pf(om,"projects"),t)).id}catch(pD){throw console.error("Error creating project:",pD),pD}}async updateProject(e,t){try{const n=kj(J(J({},t),{},{updatedAt:Zp()}));await Vp(Of(om,"projects",e),n)}catch(pD){throw console.error("Error updating project:",pD),pD}}async getProjectsByContext(e){try{const t=Ep(Pf(om,"projects"),kp("contextId","==",e));return(await zp(t)).docs.map((e=>J({id:e.id},Cj(e.data()))))}catch(pD){throw console.error("Error fetching projects:",pD),pD}}async createMilestone(e){try{const t=kj(J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}));return(await Gp(Pf(om,"milestones"),t)).id}catch(pD){throw console.error("Error creating milestone:",pD),pD}}async updateMilestone(e,t){try{const n=kj(J(J({},t),{},{updatedAt:Zp()}));await Vp(Of(om,"milestones",e),n)}catch(pD){throw console.error("Error updating milestone:",pD),pD}}async getMilestonesByContext(e){try{const t=Ep(Pf(om,"milestones"),kp("contextId","==",e));return(await zp(t)).docs.map((e=>J({id:e.id},Cj(e.data()))))}catch(pD){throw console.error("Error fetching milestones:",pD),pD}}async createTask(e){try{const t=kj(J(J({},e),{},{createdAt:Zp(),updatedAt:Zp()}));return(await Gp(Pf(om,"goal_tasks"),t)).id}catch(pD){throw console.error("Error creating task:",pD),pD}}async updateTask(e,t){try{const n=kj(J(J({},t),{},{updatedAt:Zp()}));"completed"!==t.status||t.completedAt||(n.completedAt=Zp()),await Vp(Of(om,"goal_tasks",e),n)}catch(pD){throw console.error("Error updating task:",pD),pD}}async getTasksByContext(e){try{const t=Ep(Pf(om,"goal_tasks"),kp("contextId","==",e));return(await zp(t)).docs.map((e=>J({id:e.id},Cj(e.data()))))}catch(pD){throw console.error("Error fetching tasks:",pD),pD}}async getUnscheduledItems(e){try{const[t,n]=await Promise.all([this.getTasksByContext(e),this.getMilestonesByContext(e)]),r=[];return t.filter((e=>!e.scheduledDate&&"completed"!==e.status)).forEach((e=>{r.push({id:e.id,type:"task",title:e.title,description:e.description,estimatedDuration:e.estimatedDuration,priority:e.priority,assignedTo:e.assignedTo,dueDate:e.dueDate,goalId:e.goalId,projectId:e.projectId,milestoneId:e.milestoneId,canSchedule:!0,isRecurring:e.isRecurring,contextId:e.contextId,tags:e.tags||[]})})),n.filter((e=>"completed"!==e.status)).forEach((e=>{r.push({id:e.id,type:"milestone",title:e.title,description:e.description,estimatedDuration:60,priority:"high",dueDate:e.targetDate,goalId:e.goalId,projectId:e.projectId,canSchedule:!0,isRecurring:!1,contextId:e.contextId})})),this.sortSchedulableItems(r)}catch(pD){throw console.error("Error fetching unscheduled items:",pD),pD}}async getRecurringScheduledItems(e){try{return(await this.getTasksByContext(e)).filter((e=>e.isRecurring&&e.recurringPattern&&"completed"!==e.status&&"cancelled"!==e.status))}catch(pD){throw console.error("Error fetching recurring items:",pD),pD}}generateRecurringEvents(e,t){const n=[],r=new Date(t);return e.forEach((e=>{if(!e.recurringPattern||!e.scheduledTime)return;const t=e.recurringPattern;for(let s=0;s<7;s++){const i=new Date(r);i.setDate(r.getDate()+s);const a=i.getDay();let o=!1;if("daily"===t.frequency?o=!0:"weekly"===t.frequency&&t.daysOfWeek&&(o=t.daysOfWeek.includes(a)),o){const t=this.calculateEndTime(e.scheduledTime,e.estimatedDuration);n.push({id:"recurring-".concat(e.id,"-").concat(i.toISOString().split("T")[0]),title:e.title,description:e.description,date:i.toISOString().split("T")[0],startTime:e.scheduledTime,endTime:t,duration:e.estimatedDuration,type:"recurring_task",taskId:e.id,goalId:e.goalId,projectId:e.projectId,milestoneId:e.milestoneId,assignedTo:e.assignedTo,priority:e.priority,color:this.getPriorityColor(e.priority),contextId:e.contextId,canEdit:!0,canDelete:!0,isRecurring:!0})}}})),n}async scheduleTask(e,t,n){try{await this.updateTask(e,{scheduledDate:t,scheduledTime:n,status:"in_progress"})}catch(pD){throw console.error("Error scheduling task:",pD),pD}}applyFilters(e,t){return e.filter((e=>{if(t.priority&&t.priority.length>0&&!t.priority.includes(e.priority))return!1;if(t.category&&t.category.length>0&&!t.category.includes(e.category))return!1;if(t.assignedTo&&t.assignedTo.length>0){if(!e.assignedMembers.some((e=>t.assignedTo.includes(e))))return!1}if(t.search){const n=t.search.toLowerCase();if(!(e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n)||e.tags.some((e=>e.toLowerCase().includes(n)))))return!1}return!0}))}sortSchedulableItems(e){return e.sort(((e,t)=>{const n={critical:0,high:1,medium:2,low:3},r=n[e.priority]-n[t.priority];return 0!==r?r:e.dueDate&&t.dueDate?new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime():e.dueDate?-1:t.dueDate?1:e.title.localeCompare(t.title)}))}calculateEndTime(e,t){const[n,r]=e.split(":").map(Number),s=new Date;s.setHours(n,r,0,0);const i=new Date(s.getTime()+60*t*1e3);return"".concat(i.getHours().toString().padStart(2,"0"),":").concat(i.getMinutes().toString().padStart(2,"0"))}getPriorityColor(e){switch(e){case"critical":return"#dc2626";case"high":return"#ea580c";case"medium":return"#d97706";case"low":return"#65a30d";default:return"#6b7280"}}async deleteGoalCascade(e){const[t,n,r]=await Promise.all([this.getProjectsByContext(""),this.getMilestonesByContext(""),this.getTasksByContext("")]),s=[];t.filter((t=>t.goalId===e)).forEach((e=>{s.push(Wp(Of(om,"projects",e.id)))})),n.filter((t=>t.goalId===e)).forEach((e=>{s.push(Wp(Of(om,"milestones",e.id)))})),r.filter((t=>t.goalId===e)).forEach((e=>{s.push(Wp(Of(om,"goal_tasks",e.id)))})),await Promise.all(s)}async getTasksWithTag(e,t){try{return(await this.getTasksByContext(e)).filter((e=>{var n;return null===(n=e.tags)||void 0===n?void 0:n.includes(t)})).map((e=>({id:e.id,type:"task",title:e.title,description:e.description,estimatedDuration:e.estimatedDuration,priority:e.priority,assignedTo:e.assignedTo,dueDate:e.dueDate,scheduledDate:e.scheduledDate,scheduledTime:e.scheduledTime,goalId:e.goalId,projectId:e.projectId,milestoneId:e.milestoneId,canSchedule:!0,isRecurring:e.isRecurring,contextId:e.contextId,tags:e.tags||[],status:e.status})))}catch(pD){throw console.error("Error getting tasks with tag:",pD),pD}}async getSchedulableTasks(e){try{return(await this.getTasksByContext(e)).map((e=>({id:e.id,type:"task",title:e.title,description:e.description,estimatedDuration:e.estimatedDuration,priority:e.priority,assignedTo:e.assignedTo,dueDate:e.dueDate,scheduledDate:e.scheduledDate,scheduledTime:e.scheduledTime,goalId:e.goalId,projectId:e.projectId,milestoneId:e.milestoneId,canSchedule:!0,isRecurring:e.isRecurring,contextId:e.contextId,tags:e.tags||[],status:e.status})))}catch(pD){throw console.error("Error getting schedulable tasks:",pD),pD}}};const Aj=new class{constructor(){this.familyContexts=new Map,this.activeSessions=new Map}async createFamilyContext(e){const t=J(J({},e),{},{id:"family_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,8)),createdAt:new Date,updatedAt:new Date});return this.familyContexts.set(t.id,t),t}async addFamilyMember(e,t){const n=this.familyContexts.get(e);if(!n)throw new Error("Family context not found");const r=J(J({},t),{},{id:"member_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,8))});return n.members.push(r),n.updatedAt=new Date,r}async getFamilyContext(e){return this.familyContexts.get(e)||null}async startFamilyPlanningSession(e,t,n){const r=await this.getFamilyContext(e);if(!r)throw new Error("Family context not found");const s=t.filter((e=>r.members.some((t=>t.id===e)))),i={id:"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,8)),familyContextId:e,participants:s,sessionType:n,agendaItems:await this.generateSessionAgenda(n,r,s),decisions:[],conflictResolutions:[],createdAt:new Date};return this.activeSessions.set(i.id,i),i}async generateSessionAgenda(e,t,n){const r=[];switch(e){case"family_weekly":r.push({id:"agenda_1",type:"goal_review",title:"Review Family Goals Progress",description:"Check progress on family goals and adjust as needed",timeAllocated:10,status:"pending"},{id:"agenda_2",type:"schedule_coordination",title:"Coordinate Weekly Schedules",description:"Review everyone's schedule and identify conflicts",timeAllocated:15,status:"pending"},{id:"agenda_3",type:"sop_assignment",title:"Assign Weekly SOPs",description:"Distribute family SOPs and household tasks",timeAllocated:10,status:"pending"},{id:"agenda_4",type:"project_update",title:"Family Project Updates",description:"Update on family projects and plan next steps",timeAllocated:10,status:"pending"});break;case"family_monthly":r.push({id:"agenda_1",type:"goal_review",title:"Monthly Goal Assessment",description:"Deep dive on family goal progress and planning",timeAllocated:20,status:"pending"},{id:"agenda_2",type:"project_update",title:"Project Portfolio Review",description:"Review all family projects and resource allocation",timeAllocated:25,status:"pending"},{id:"agenda_3",type:"schedule_coordination",title:"Month Ahead Planning",description:"Plan major events and coordinate schedules",timeAllocated:15,status:"pending"});break;case"couple_planning":r.push({id:"agenda_1",type:"schedule_coordination",title:"Couple Schedule Sync",description:"Coordinate couple schedules and plan date nights",timeAllocated:15,status:"pending"},{id:"agenda_2",type:"goal_review",title:"Relationship Goals Check-in",description:"Review couple goals and relationship priorities",timeAllocated:20,status:"pending"})}return r}async getFamilyCalendarView(e,t,n){const r=await this.getFamilyContext(e);if(!r)throw new Error("Family context not found");const s=[];for(const i of r.members){const e=await this.getMemberEvents(i,t,n),r=await this.getMemberAvailability(i,t,n),a=await this.detectMemberConflicts(i,e);s.push({memberId:i.id,memberName:i.name,events:e,availability:r,conflicts:a})}return s}async getMemberEvents(e,t,n){return[]}async getMemberAvailability(e,t,n){const r=[],s=e.preferences.workingHours.start,i=e.preferences.workingHours.end;for(let a=new Date(t);a<=n;a.setDate(a.getDate()+1)){const[t,n]=s.split(":").map(Number),[o,l]=i.split(":").map(Number),c=new Date(a);c.setHours(t,n,0,0);const u=new Date(a);u.setHours(o,l,0,0),r.push({start:c,end:u,type:"free",memberId:e.id})}return r}async detectMemberConflicts(e,t){const n=[];for(let r=0;r<t.length;r++)for(let s=r+1;s<t.length;s++){const i=t[r],a=t[s];this.eventsOverlap(i,a)&&n.push({id:"conflict_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),type:"double_booking",description:"Double booking: ".concat(i.title," and ").concat(a.title),affectedMembers:[e.id],conflictingEvents:[i.id,a.id],severity:"high",suggestedResolutions:["Reschedule one of the events","Delegate one of the commitments","Combine events if possible"],autoResolvable:!1})}return n}eventsOverlap(e,t){return e.start<t.end&&t.start<e.end}async proposeConflictResolution(e,t,n,r){const s=this.activeSessions.get(e);if(!s)throw new Error("Session not found");const i={id:"resolution_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),type:"schedule_conflict",description:"Conflict resolution proposed",involvedMembers:s.participants,resolution:n,resolvedBy:r,resolvedAt:new Date,followUpRequired:!0};return s.conflictResolutions.push(i),i}async assignTaskToMember(e,t,n,r,s){const i=await this.getFamilyContext(e);if(!i)throw new Error("Family context not found");const a=i.members.find((e=>e.id===n));if(!a)throw new Error("Assignee not found");await By.updateTask(t,{assignedTo:a.name,scheduledDate:s}),console.log("Task ".concat(t," assigned to ").concat(a.name," by ").concat(r))}async balanceWorkload(e,t){const n=await this.getFamilyContext(e);if(!n)throw new Error("Family context not found");const r={};for(const s of n.members){const t=By.getAllTasks(e).filter((e=>e.assignedTo===s.name&&"completed"!==e.status)).reduce(((e,t)=>e+(t.duration||30)),0)/60;r[s.id]=t}return r}async getFamilyPlanningMetrics(e){if(!await this.getFamilyContext(e))throw new Error("Family context not found");return{weeklyMeetingAttendance:85,goalsOnTrack:3,goalsAtRisk:1,tasksCompletedOnTime:78,averageWorkload:await this.balanceWorkload(e,"week"),conflictResolutionTime:2.5,familySOPAdherence:92}}async generateFamilyPlanningInsights(e){const t=await this.getFamilyPlanningMetrics(e),n=[];return t.goalsAtRisk>0&&n.push("\u26a0\ufe0f ".concat(t.goalsAtRisk," family goal(s) are at risk. Consider reassigning resources.")),t.tasksCompletedOnTime<80&&n.push("\ud83d\udcc8 Task completion rate is ".concat(t.tasksCompletedOnTime,"%. Consider reducing weekly commitments.")),Object.values(t.averageWorkload).some((e=>e>20))&&n.push("\u2696\ufe0f Workload appears unbalanced. Consider redistributing tasks among family members."),t.familySOPAdherence>95&&n.push("\ud83c\udf89 Excellent SOP adherence! Your family routines are working well."),n}getSession(e){return this.activeSessions.get(e)}async endSession(e){const t=this.activeSessions.get(e);t&&(t.endedAt=new Date),this.activeSessions.delete(e)}getFamilyMembers(e){const t=this.familyContexts.get(e);return(null===t||void 0===t?void 0:t.members)||[]}},_j=["userId","cachedAt","expiresAt"];const Tj=new class{constructor(){this.sessions=new Map,this.contextCache=new Map,this.firestoreEnabled=!0,this.sessionListeners=new Map}async startPlanningSession(e){const t="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,8)),n={id:t,context:e,mode:"guided",currentStep:"welcome",conversation:[],suggestions:[],decisions:[],createdAt:new Date,updatedAt:new Date};if(this.sessions.set(t,n),await this.savePlanningSession(n),"family"===e.scope&&e.familyContextId&&e.participants.length>1)try{await Aj.startFamilyPlanningSession(e.familyContextId,e.participants,"weekly"===e.timeframe?"family_weekly":"monthly"===e.timeframe?"family_monthly":"couple_planning")}catch(pD){console.error("Error starting family planning session:",pD)}return await this.addAIMessage(t,await this.generateWelcomeMessage(e)),n}async switchMode(e,t){const n=this.sessions.get(e);if(!n)throw new Error("Session not found");n.mode=t,n.updatedAt=new Date,await this.savePlanningSession(n),"guided"===t?await this.addAIMessage(e,"I'm back to help guide your planning. What would you like to work on?"):await this.addAIMessage(e,"You're now in manual mode. I'll provide suggestions as you work. Type 'help' anytime for guidance.")}async getContextualItems(e){const t="".concat(e.contextId,"_").concat(e.scope,"_").concat(e.timeframe),n=await this.loadContextualItems(t);if(n)return this.contextCache.set(t,n),n;if(this.contextCache.has(t))return this.contextCache.get(t);const[r,s,i,a]=await Promise.all([Uy.getSOPsForContext(e.contextId),Nj.getGoalsByContext(e.contextId),Nj.getProjectsByContext(e.contextId),By.getUnscheduledTasks(e.contextId)]),o={relevantSOPs:this.filterRelevantSOPs(r,e),activeGoals:this.filterActiveGoals(s,e),currentProjects:this.filterCurrentProjects(i,e),urgentTasks:this.filterUrgentTasks(a,e),availableTimeSlots:await this.generateAvailableTimeSlots(e),conflicts:await this.detectConflicts(e)};return this.contextCache.set(t,o),setTimeout((()=>this.contextCache.delete(t)),3e5),await this.saveContextualItems(t,o),o}async searchItems(e,t){const n=this.sessions.get(e);if(!n)throw new Error("Session not found");const[r,s,i,a]=await Promise.all([Uy.getSOPsForContext(n.context.contextId),Nj.getGoalsByContext(n.context.contextId),Nj.getProjectsByContext(n.context.contextId),By.getAllTasks(n.context.contextId)]),o=[],l=t.toLowerCase();return r.forEach((e=>{var t,n,r;(e.name.toLowerCase().includes(l)||null!==(t=e.description)&&void 0!==t&&t.toLowerCase().includes(l)||null!==(n=e.tags)&&void 0!==n&&n.some((e=>e.toLowerCase().includes(l))))&&o.push(J(J({},e),{},{searchType:"sop",searchSource:"SOP"})),null===(r=e.steps)||void 0===r||r.forEach((t=>{var n;(t.title.toLowerCase().includes(l)||null!==(n=t.description)&&void 0!==n&&n.toLowerCase().includes(l))&&o.push(J(J({},t),{},{searchType:"sopStep",searchSource:"SOP: ".concat(e.name),parentSOP:e}))}))})),s.forEach((e=>{var t,n,r;(e.title.toLowerCase().includes(l)||null!==(t=e.description)&&void 0!==t&&t.toLowerCase().includes(l)||null!==(n=e.tags)&&void 0!==n&&n.some((e=>e.toLowerCase().includes(l))))&&o.push(J(J({},e),{},{searchType:"goal",searchSource:"Goal"})),null===(r=e.tasks)||void 0===r||r.forEach((t=>{var n;(t.title.toLowerCase().includes(l)||null!==(n=t.description)&&void 0!==n&&n.toLowerCase().includes(l))&&o.push(J(J({},t),{},{searchType:"goalTask",searchSource:"Goal: ".concat(e.title),parentGoal:e}))}))})),i.forEach((e=>{var t,n,r;(e.title.toLowerCase().includes(l)||null!==(t=e.description)&&void 0!==t&&t.toLowerCase().includes(l)||null!==(n=e.tags)&&void 0!==n&&n.some((e=>e.toLowerCase().includes(l))))&&o.push(J(J({},e),{},{searchType:"project",searchSource:"Project"})),null===(r=e.tasks)||void 0===r||r.forEach((t=>{var n;(t.title.toLowerCase().includes(l)||null!==(n=t.description)&&void 0!==n&&n.toLowerCase().includes(l))&&o.push(J(J({},t),{},{searchType:"projectTask",searchSource:"Project: ".concat(e.title),parentProject:e}))}))})),a.forEach((e=>{var t,n;(e.title.toLowerCase().includes(l)||null!==(t=e.notes)&&void 0!==t&&t.toLowerCase().includes(l)||null!==(n=e.tags)&&void 0!==n&&n.some((e=>e.toLowerCase().includes(l))))&&o.push(J(J({},e),{},{searchType:"task",searchSource:"Task"}))})),o.sort(((e,t)=>{var n,r,s,i;const a=(null===(n=e.title)||void 0===n?void 0:n.toLowerCase())===l||(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())===l,o=(null===(s=t.title)||void 0===s?void 0:s.toLowerCase())===l||(null===(i=t.name)||void 0===i?void 0:i.toLowerCase())===l;return a&&!o?-1:!a&&o?1:(e.title||e.name||"").localeCompare(t.title||t.name||"")}))}async processUserMessage(e,t){const n=this.sessions.get(e);if(!n)throw new Error("Session not found");await this.addUserMessage(e,t);const r=await this.generateAIResponse(n,t);return await this.addAIMessage(e,r.content,r.type,r.metadata),n.conversation[n.conversation.length-1]}async generateSuggestions(e,t){const n=this.sessions.get(e);if(!n)throw new Error("Session not found");const r=await this.getContextualItems(n.context),s=[];for(const i of t){const e=await this.analyzeItem(i,r,n.context);e&&s.push(e)}return n.suggestions.push(...s),s}async applySuggestion(e,t,n,r){const s=this.sessions.get(e);if(!s)throw new Error("Session not found");const i=s.suggestions.find((e=>e.id===t));if(!i)throw new Error("Suggestion not found");const a={id:"decision_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),suggestionId:t,action:n,originalItem:i.item,finalItem:r||i.item,reasoning:"User ".concat(n," AI suggestion: ").concat(i.reasoning),timestamp:new Date};s.decisions.push(a),s.updatedAt=new Date,await this.savePlanningSession(s),"accepted"!==n&&"modified"!==n||await this.executeScheduling(a.finalItem,i.suggestedTime,i.suggestedAssignee);const o=await this.generateFollowUpMessage(i,n,r);await this.addAIMessage(e,o)}filterRelevantSOPs(e,t){return e.filter((e=>{var n;const r=e.frequency||"as_needed",s=(new Date).getDay();switch(t.timeframe){case"daily":return"daily"===r||"weekly"===r&&(null===(n=e.preferredDays)||void 0===n?void 0:n.includes(s))||"as_needed"===r&&e.lastCompleted&&this.daysSince(e.lastCompleted)>(e.reminderDays||7);case"weekly":return"weekly"===r||"daily"===r||"monthly"===r&&this.isFirstWeekOfMonth()||"as_needed"===r;case"monthly":return"monthly"===r||"weekly"===r||"as_needed"===r;default:return!0}}))}filterActiveGoals(e,t){return e.filter((e=>"in_progress"===e.status||"not_started"===e.status)).sort(((e,t)=>{var n,r;const s={critical:0,high:1,medium:2,low:3},i=null!==(n=s[e.priority])&&void 0!==n?n:4,a=null!==(r=s[t.priority])&&void 0!==r?r:4;return i!==a?i-a:e.targetDate&&t.targetDate?new Date(e.targetDate).getTime()-new Date(t.targetDate).getTime():0}))}filterCurrentProjects(e,t){return e.filter((e=>"active"===e.status||"planning"===e.status)).sort(((e,t)=>{var n,r;const s={critical:0,high:1,medium:2,low:3},i=null!==(n=s[e.priority])&&void 0!==n?n:4,a=null!==(r=s[t.priority])&&void 0!==r?r:4;return i!==a?i-a:e.targetEndDate&&t.targetEndDate?new Date(e.targetEndDate).getTime()-new Date(t.targetEndDate).getTime():0}))}filterUrgentTasks(e,t){const n=new Date,r=new Date(n.getTime()+864e5);return e.filter((e=>{if(e.dueDate){if(new Date(e.dueDate)<=r)return!0}return"urgent"===e.priority||"high"===e.priority})).sort(((e,t)=>{var n,r;if(e.dueDate&&t.dueDate){const n=new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime();if(0!==n)return n}const s={urgent:0,high:1,medium:2,low:3};return(null!==(n=s[e.priority])&&void 0!==n?n:4)-(null!==(r=s[t.priority])&&void 0!==r?r:4)}))}async generateAvailableTimeSlots(e){const t=[],n=new Date;for(let r=0;r<("weekly"===e.timeframe?7:1);r++){const s=new Date(n);s.setDate(s.getDate()+r);const i=e.preferences.workingHours.start,a=e.preferences.workingHours.end;t.push({date:s.toISOString().split("T")[0],startTime:i,endTime:a,duration:this.calculateDuration(i,a),availability:"free",participants:e.participants,energyLevel:this.getEnergyLevel(i,e.preferences.energyPatterns)})}return t}async detectConflicts(e){return[]}async generateWelcomeMessage(e){let t="you",n=null;if("family"===e.scope&&e.familyContextId&&(n=await Aj.getFamilyContext(e.familyContextId),n&&e.participants.length>1)){const r=n.members.filter((t=>e.participants.includes(t.id))).map((e=>e.name));2===r.length?t=r.join(" and "):r.length>2&&(t=r.slice(0,-1).join(", ")+", and "+r.slice(-1))}const r="weekly"===e.timeframe?"week":"monthly"===e.timeframe?"month":"day";let s="Hello! I'm your AI planning assistant. I'm here to help ".concat(t," plan your ").concat(r," effectively.");if("family"===e.scope&&n){s+='\n\nI can see your family context "'.concat(n.name,"\" and will consider:\n\u2022 Family goals and projects\n\u2022 Everyone's schedules and availability\n\u2022 Shared SOPs and household routines\n\u2022 Individual preferences and workload balance");try{const t=await Aj.generateFamilyPlanningInsights(e.familyContextId);t.length>0&&(s+="\n\n\ud83d\udcca **Family Insights:**\n".concat(t.slice(0,2).join("\n")))}catch(pD){console.log("Could not load family insights:",pD)}}else s+="\n\nI can see your ".concat(e.scope," context and will consider your goals, projects, SOPs, and calendar commitments.");return s+="\n\nLet's start by reviewing what you have coming up. Would you like me to:\n1. Walk you through a structured planning session\n2. Show you what needs attention first\n3. Let you explore manually with my assistance\n\nWhat sounds most helpful right now?",s}async generateAIResponse(e,t){const n=t.toLowerCase();return n.includes("help")?{content:"I can help you with:\n\u2022 **Guided planning** - I'll walk you through step by step\n\u2022 **Smart suggestions** - I'll recommend optimal scheduling\n\u2022 **Search anything** - Just type what you're looking for\n\u2022 **Manual mode** - You plan, I'll assist\n\u2022 **Context switching** - Change between family/work/personal views\n\nWhat would you like to do?",type:"text"}:n.includes("search")||n.includes("find")?{content:"I can search across all your goals, projects, SOPs, and tasks. What are you looking for?",type:"question"}:n.includes("guided")||"1"===n?(e.currentStep="guided_start",await this.startGuidedSession(e)):n.includes("manual")||"3"===n?(e.mode="manual",{content:"Perfect! You're now in manual mode. I can see your contextually relevant items in the sidebar. I'll provide suggestions as you work. Try dragging items to your calendar or use the search to find anything specific.",type:"text"}):n.includes("attention")||"2"===n?await this.analyzeUrgentItems(e):{content:"I'm not sure I understood that. You can ask me to help with planning, search for items, or start a guided session. What would you like to do?",type:"text"}}async startGuidedSession(e){const t=await this.getContextualItems(e.context);return{content:"Great! Let's plan your ".concat(e.context.timeframe," together. Here's what I found:\n\n\ud83d\udccb **").concat(t.relevantSOPs.length," relevant SOPs** - your standard routines for this timeframe\n\ud83c\udfaf **").concat(t.activeGoals.length," active goals** - things you're working toward\n\ud83d\udcc1 **").concat(t.currentProjects.length," current projects** - active work that needs scheduling\n\u26a1 **").concat(t.urgentTasks.length," urgent tasks** - items that need immediate attention\n\nShould we start by scheduling your regular SOPs, or would you prefer to tackle the urgent items first?"),type:"question",metadata:{suggestedItems:[...t.relevantSOPs.slice(0,3),...t.urgentTasks.slice(0,3)],actions:["schedule_sops","handle_urgent","review_goals"]}}}async analyzeUrgentItems(e){const t=await this.getContextualItems(e.context);if(0===t.urgentTasks.length)return{content:"Good news! You don't have any urgent items that need immediate attention. Your schedule looks manageable. Would you like to work on your goals or regular SOPs?",type:"text"};const n=t.urgentTasks.slice(0,5).map(((e,t)=>{const n=e.dueDate?" (due ".concat(new Date(e.dueDate).toLocaleDateString(),")"):"";return"".concat(t+1,". **").concat(e.title,"**").concat(n," - ").concat(e.priority," priority")})).join("\n");return{content:"Here are the items that need your attention:\n\n".concat(n,"\n\nShould I help you schedule these first, or would you like to review them one by one?"),type:"suggestion",metadata:{suggestedItems:t.urgentTasks.slice(0,5),actions:["schedule_all","review_individually","skip_for_now"]}}}async analyzeItem(e,t,n){return{id:"suggestion_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),type:"schedule",confidence:.8,reasoning:"This ".concat(e.type||"item"," fits well in your ").concat(n.timeframe," schedule"),item:e,suggestedTime:await this.findOptimalTimeSlot(e,t),suggestedAssignee:this.findOptimalAssignee(e,n),alternatives:[]}}async findOptimalTimeSlot(e,t){const n=e.duration||e.estimatedDuration||30;for(const r of t.availableTimeSlots)if(r.duration>=n&&"free"===r.availability)return{date:r.date,time:r.startTime}}findOptimalAssignee(e,t){return e.assignedTo||t.participants[0]}async executeScheduling(e,t,n){if(t){const r={id:e.id||"scheduled_".concat(Math.random().toString(36).substr(2,8)),title:e.title||e.name,description:e.description,type:e.type||"task",status:"pending",priority:e.priority||"medium",contextId:e.contextId,context:e.contextId,duration:e.duration||e.estimatedDuration||30,assignedTo:n,createdBy:"ai_assistant",source:"import",scheduledDate:new Date(t.date),scheduledTime:t.time};await By.createTask(r)}}async generateFollowUpMessage(e,t,n){var r,s;switch(t){case"accepted":return"Great! I've scheduled \"".concat(e.item.title,'" for ').concat(null===(r=e.suggestedTime)||void 0===r?void 0:r.date," at ").concat(null===(s=e.suggestedTime)||void 0===s?void 0:s.time,". What's next?");case"rejected":return"No problem! I'll skip \"".concat(e.item.title,'" for now. Would you like me to suggest a different time or move on to the next item?');case"modified":return"Perfect! I've updated \"".concat(e.item.title,"\" with your changes. The scheduling looks good. Anything else you'd like to adjust?");default:return"What would you like to do next?"}}async addUserMessage(e,t){const n=this.sessions.get(e);if(!n)return;const r={id:"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),speaker:"user",content:t,type:"text",timestamp:new Date};n.conversation.push(r),n.updatedAt=new Date,await this.savePlanningSession(n)}async addAIMessage(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3?arguments[3]:void 0;const s=this.sessions.get(e);if(!s)return;const i={id:"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,6)),speaker:"ai",content:t,type:n,timestamp:new Date,metadata:r};s.conversation.push(i),s.updatedAt=new Date,await this.savePlanningSession(s)}daysSince(e){const t=new Date,n=new Date(e);return Math.floor((t.getTime()-n.getTime())/864e5)}isFirstWeekOfMonth(){return(new Date).getDate()<=7}calculateDuration(e,t){const[n,r]=e.split(":").map(Number),[s,i]=t.split(":").map(Number);return 60*s+i-(60*n+r)}getEnergyLevel(e,t){const n=parseInt(e.split(":")[0]);return n>=6&&n<12?t.morning||"medium":n>=12&&n<18?t.afternoon||"medium":t.evening||"low"}async savePlanningSession(e){if(this.firestoreEnabled&&lm.currentUser)try{const t=Of(om,"ai_planning_sessions",e.id),n=J(J({},e),{},{userId:lm.currentUser.uid,createdAt:e.createdAt instanceof Date?Ui.fromDate(e.createdAt):e.createdAt,updatedAt:Zp(),conversation:e.conversation.map((e=>J(J({},e),{},{timestamp:e.timestamp instanceof Date?Ui.fromDate(e.timestamp):e.timestamp}))),decisions:e.decisions.map((e=>J(J({},e),{},{timestamp:e.timestamp instanceof Date?Ui.fromDate(e.timestamp):e.timestamp})))});await Hp(t,n,{merge:!0})}catch(pD){console.error("Error saving planning session:",pD)}}async loadPlanningSession(e){if(!this.firestoreEnabled||!lm.currentUser)return null;try{const i=Of(om,"ai_planning_sessions",e),a=await Up(i);if(a.exists()){var t,n,r,s;const e=a.data();return J(J({},e),{},{createdAt:(null===(t=e.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(n=e.updatedAt)||void 0===n?void 0:n.toDate())||new Date,conversation:(null===(r=e.conversation)||void 0===r?void 0:r.map((e=>{var t;return J(J({},e),{},{timestamp:(null===(t=e.timestamp)||void 0===t?void 0:t.toDate())||new Date})})))||[],decisions:(null===(s=e.decisions)||void 0===s?void 0:s.map((e=>{var t;return J(J({},e),{},{timestamp:(null===(t=e.timestamp)||void 0===t?void 0:t.toDate())||new Date})})))||[]})}}catch(pD){console.error("Error loading planning session:",pD)}return null}async saveContextualItems(e,t){if(this.firestoreEnabled&&lm.currentUser)try{const n=Of(om,"ai_contextual_cache",e);await Hp(n,J(J({},t),{},{userId:lm.currentUser.uid,cachedAt:Zp(),expiresAt:new Date(Date.now()+3e5)}),{merge:!0})}catch(pD){console.error("Error saving contextual items:",pD)}}async loadContextualItems(e){if(!this.firestoreEnabled||!lm.currentUser)return null;try{const t=Of(om,"ai_contextual_cache",e),n=await Up(t);if(n.exists()){const e=n.data();if(e.expiresAt&&e.expiresAt.toDate()<new Date)return await Wp(t),null;const{userId:r,cachedAt:s,expiresAt:i}=e;return dm(e,_j)}}catch(pD){console.error("Error loading contextual items:",pD)}return null}async loadUserSessions(){if(!this.firestoreEnabled||!lm.currentUser)return[];try{const e=Ep(Pf(om,"ai_planning_sessions"),kp("userId","==",lm.currentUser.uid),Ap("updatedAt","desc")),t=await zp(e),n=[];return t.forEach((e=>{var t,r,s,i;const a=e.data(),o=J(J({},a),{},{createdAt:(null===(t=a.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(r=a.updatedAt)||void 0===r?void 0:r.toDate())||new Date,conversation:(null===(s=a.conversation)||void 0===s?void 0:s.map((e=>{var t;return J(J({},e),{},{timestamp:(null===(t=e.timestamp)||void 0===t?void 0:t.toDate())||new Date})})))||[],decisions:(null===(i=a.decisions)||void 0===i?void 0:i.map((e=>{var t;return J(J({},e),{},{timestamp:(null===(t=e.timestamp)||void 0===t?void 0:t.toDate())||new Date})})))||[]});n.push(o),this.sessions.set(o.id,o)})),n}catch(pD){return console.error("Error loading user sessions:",pD),[]}}subscribeToSession(e,t){if(!this.firestoreEnabled||!lm.currentUser)return()=>{};const n=qp(Of(om,"ai_planning_sessions",e),(n=>{if(n.exists()){var r,s,i,a;const o=n.data(),l=J(J({},o),{},{createdAt:(null===(r=o.createdAt)||void 0===r?void 0:r.toDate())||new Date,updatedAt:(null===(s=o.updatedAt)||void 0===s?void 0:s.toDate())||new Date,conversation:(null===(i=o.conversation)||void 0===i?void 0:i.map((e=>{var t;return J(J({},e),{},{timestamp:(null===(t=e.timestamp)||void 0===t?void 0:t.toDate())||new Date})})))||[],decisions:(null===(a=o.decisions)||void 0===a?void 0:a.map((e=>{var t;return J(J({},e),{},{timestamp:(null===(t=e.timestamp)||void 0===t?void 0:t.toDate())||new Date})})))||[]});this.sessions.set(e,l),t(l)}}));return this.sessionListeners.set(e,n),n}async getSession(e){let t=this.sessions.get(e);return t||(t=await this.loadPlanningSession(e)||void 0,t&&this.sessions.set(e,t)),t}async getAllSessions(){const e=await this.loadUserSessions(),t=new Map;return e.forEach((e=>t.set(e.id,e))),this.sessions.forEach(((e,n)=>{t.has(n)||t.set(n,e)})),Array.from(t.values())}async deleteSession(e){const t=this.sessions.delete(e),n=this.sessionListeners.get(e);if(n&&(n(),this.sessionListeners.delete(e)),this.firestoreEnabled&&lm.currentUser)try{const t=Of(om,"ai_planning_sessions",e);return await Wp(t),!0}catch(pD){return console.error("Error deleting session from Firestore:",pD),t}return t}async cleanupExpiredCache(){if(this.firestoreEnabled&&lm.currentUser)try{const e=Ep(Pf(om,"ai_contextual_cache"),kp("userId","==",lm.currentUser.uid),kp("expiresAt","<",new Date)),t=(await zp(e)).docs.map((e=>Wp(e.ref)));await Promise.all(t)}catch(pD){console.error("Error cleaning up expired cache:",pD)}}};const Ij=new class{async getCurrentSession(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"weekly";if(console.log("getCurrentSession called with:",{contextId:e,userId:t,type:n}),!e||!t)throw console.error("Invalid parameters for getCurrentSession:",{contextId:e,userId:t,type:n}),new Error("contextId and userId are required");return"weekly"===n?this.getCurrentWeekSession(e,t):"monthly"===n?this.getCurrentMonthSession(e,t):null}async getCurrentWeekSession(e,t){try{const n=new Date,r=this.getWeekStart(n),s=this.getWeekEnd(n),i=Ep(Pf(om,"planning_sessions"),kp("contextId","==",e),kp("ownerId","==",t),kp("type","==","weekly"),kp("periodStartDate",">=",r.toISOString()),kp("periodEndDate","<=",s.toISOString())),a=await zp(i);if(a.docs.length>0){const e=a.docs[0].data();return J(J({id:a.docs[0].id},e),{},{periodStartDate:e.periodStartDate instanceof Ui?e.periodStartDate.toDate().toISOString():e.periodStartDate,periodEndDate:e.periodEndDate instanceof Ui?e.periodEndDate.toDate().toISOString():e.periodEndDate,createdAt:e.createdAt instanceof Ui?e.createdAt.toDate().toISOString():e.createdAt,updatedAt:e.updatedAt instanceof Ui?e.updatedAt.toDate().toISOString():e.updatedAt})}return null}catch(pD){throw console.error("Error getting current week session:",pD),pD}}async startNewSession(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"weekly";if("weekly"===n)return this.startNewWeeklySession(e,t);if("monthly"===n)return this.startNewMonthlySession(e,t);throw new Error("Unsupported planning session type: ".concat(n))}async startNewWeeklySession(e,t){try{const n=new Date,r=this.getWeekStart(n),s=this.getWeekEnd(n),i=await this.getTasksForReview(e),a=await this.getTasksFromMonthlyPlanning(e,r,s),o={ownerId:t,contextId:e,type:"weekly",periodStartDate:r.toISOString(),periodEndDate:s.toISOString(),status:"not_started",createdAt:Zp(),updatedAt:Zp(),reviewPhase:{taskReviews:i,longTermGoalReviews:[],sharedGoalReviews:[],summary:{totalCompleted:0,totalPushedForward:0,totalMissed:0,totalArchived:0,totalClosed:0}},planningPhase:{nextPeriodTasks:a,recurringTasks:[],sharedGoalAssignments:[],calendarSyncStatus:{synced:!1,syncedEvents:[]}}},l=await Gp(Pf(om,"planning_sessions"),o);return await this.getSessionById(l.id,"weekly")}catch(pD){throw console.error("Error starting new session:",pD),pD}}async updateSessionStatus(e,t){try{await Vp(Of(om,"planning_sessions",e),{status:t,updatedAt:Zp()})}catch(pD){throw console.error("Error updating session status:",pD),pD}}async updateTaskReview(e,t){try{const n=await this.getSessionById(e);if(!n)throw new Error("Session not found");const r=n.reviewPhase.taskReviews.findIndex((e=>e.taskId===t.taskId));-1===r?n.reviewPhase.taskReviews.push(t):n.reviewPhase.taskReviews[r]=t,this.updateReviewSummary(n),await Vp(Of(om,"planning_sessions",e),{reviewPhase:n.reviewPhase,updatedAt:Zp()})}catch(pD){throw console.error("Error updating task review:",pD),pD}}async addNextWeekTask(e,t){try{const n=await this.getSessionById(e);if(!n)throw new Error("Session not found");n.planningPhase.nextPeriodTasks.push(t),await Vp(Of(om,"planning_sessions",e),{"planningPhase.nextPeriodTasks":n.planningPhase.nextPeriodTasks,updatedAt:Zp()})}catch(pD){throw console.error("Error adding next week task:",pD),pD}}async getTasksFromMonthlyPlanning(e,t,n){try{const r=this.getMonthStart(t),s=this.getMonthEnd(t),i=Ep(Pf(om,"planning_sessions"),kp("contextId","==",e),kp("type","==","monthly"),kp("periodStartDate",">=",r.toISOString()),kp("periodStartDate","<=",s.toISOString())),a=await zp(i);if(a.empty)return console.log("No monthly planning session found for this period"),[];const o=a.docs[0].data(),l=o.planningPhase.nextPeriodTasks||[],c=[];if(l.forEach((e=>{if(e.dueDate){const r=new Date(e.dueDate);r>=t&&r<=n&&c.push({taskId:e.taskId,priority:e.priority,dueDate:e.dueDate,timeSlot:e.timeSlot})}})),o.planningPhase.projectPrioritization){const e=await this.extractProjectTasksForWeek(o.planningPhase.projectPrioritization,t,n);c.push(...e)}return console.log("Pulled ".concat(c.length," tasks from monthly planning")),c}catch(pD){return console.error("Error getting tasks from monthly planning:",pD),[]}}async extractProjectTasksForWeek(e,t,n){const r=[];return e.activeProjects&&e.activeProjects.forEach((e=>{e.tasks&&e.tasks.forEach((e=>{if(e.dueDate){const s=new Date(e.dueDate);s>=t&&s<=n&&r.push({taskId:e.id,priority:"high"===e.priority?"high":"medium"===e.priority?"medium":"low",dueDate:e.dueDate})}else"high"===e.priority&&r.push({taskId:e.id,priority:"high",dueDate:n.toISOString()})}))})),r}async getTodaysTasks(e,t){try{const n=(t||new Date).toISOString().split("T")[0],r=await this.getCurrentWeekSession(e,"system");if(!r)return console.log("No weekly planning session found for today"),[];const s=r.planningPhase.nextPeriodTasks||[],i=s.filter((e=>{if(e.dueDate){return e.dueDate.split("T")[0]===n}return!1})),a=s.filter((e=>!e.dueDate&&"high"===e.priority)).slice(0,3),o=[...i,...a];return console.log("Found ".concat(o.length," tasks for today (").concat(n,")")),o}catch(pD){return console.error("Error getting today's tasks:",pD),[]}}async getThisWeeksTasks(e){try{const t=await this.getCurrentWeekSession(e,"system");return t?t.planningPhase.nextPeriodTasks||[]:(console.log("No weekly planning session found"),[])}catch(pD){return console.error("Error getting this week's tasks:",pD),[]}}async getUnscheduledItems(e,t){try{const n=[];if(t){const e=await this.getSessionById(t);if(e){const t=e.reviewPhase.taskReviews.filter((e=>"push_forward"===e.action||!e.action&&"needs_review"===e.status)).map((e=>({id:e.taskId,type:"task",title:e.title,description:"push_forward"===e.action?"Pushed forward from last week":void 0,goalId:e.goalId,goalName:e.goalName,priority:e.priority})));n.push(...t)}}return(await Nj.getGoalsByContext(e)).forEach((e=>{e.tasks.forEach((t=>{t.scheduledDate||"completed"===t.status||n.push({id:t.id,type:"task",title:t.title,description:t.description,goalId:e.id,goalName:e.title,priority:t.priority})})),e.milestones.forEach((t=>{t.targetDate||n.push({id:t.id,type:"milestone",title:t.title,description:t.description,goalId:e.id,goalName:e.title,priority:"medium"})}))})),n}catch(pD){throw console.error("Error getting unscheduled items:",pD),pD}}async getGoalsForReview(e){try{const t=await Nj.getGoalsByContext(e),n=new Date;this.getWeekStart(n),this.getWeekEnd(n);return t.filter((e=>!0))}catch(pD){throw console.error("Error getting goals for review:",pD),pD}}async getSessionById(e){const t=await Up(Of(om,"planning_sessions",e));if(!t.exists())throw new Error("Session not found");const n=t.data();return J(J({id:t.id},n),{},{periodStartDate:n.periodStartDate instanceof Ui?n.periodStartDate.toDate().toISOString():n.periodStartDate,periodEndDate:n.periodEndDate instanceof Ui?n.periodEndDate.toDate().toISOString():n.periodEndDate,createdAt:n.createdAt instanceof Ui?n.createdAt.toDate().toISOString():n.createdAt,updatedAt:n.updatedAt instanceof Ui?n.updatedAt.toDate().toISOString():n.updatedAt})}async getTasksForReview(e){try{const t=await Nj.getGoalsByContext(e),n=[];return t.forEach((e=>{e.tasks.forEach((t=>{const r=new Date;r.setDate(r.getDate()-7);(t.scheduledDate?new Date(t.scheduledDate):new Date(t.createdAt))>=r&&n.push({taskId:t.id,title:t.title,status:"completed"===t.status?"completed":"needs_review",originalDueDate:t.dueDate||t.createdAt,priority:t.priority,goalId:e.id,goalName:e.title})}))})),n}catch(pD){return console.error("Error getting tasks for review:",pD),[]}}updateReviewSummary(e){const t=e.reviewPhase.summary,n=e.reviewPhase.taskReviews;t.totalCompleted=n.filter((e=>"mark_completed"===e.action)).length,t.totalPushedForward=n.filter((e=>"push_forward"===e.action)).length,t.totalMissed=n.filter((e=>"mark_missed"===e.action)).length,t.totalArchived=n.filter((e=>"archive"===e.action)).length,t.totalClosed=n.filter((e=>"close"===e.action)).length}getWeekStart(e){const t=new Date(e),n=t.getDay(),r=t.getDate()-n;return t.setDate(r),t.setHours(0,0,0,0),t}getWeekEnd(e){const t=new Date(this.getWeekStart(e));return t.setDate(t.getDate()+6),t.setHours(23,59,59,999),t}async getCurrentMonthSession(e,t){try{if(!e||!t)throw console.error("Invalid parameters for getCurrentMonthSession:",{contextId:e,userId:t}),new Error("contextId and userId are required");const n=new Date,r=this.getMonthStart(n),s=this.getMonthEnd(n),i=Ep(Pf(om,"planning_sessions"),kp("contextId","==",e),kp("ownerId","==",t),kp("type","==","monthly"),kp("periodStartDate",">=",r.toISOString()),kp("periodEndDate","<=",s.toISOString())),a=await zp(i);if(a.docs.length>0){const e=a.docs[0].data();return J(J({id:a.docs[0].id},e),{},{periodStartDate:e.periodStartDate instanceof Ui?e.periodStartDate.toDate().toISOString():e.periodStartDate,periodEndDate:e.periodEndDate instanceof Ui?e.periodEndDate.toDate().toISOString():e.periodEndDate,createdAt:e.createdAt instanceof Ui?e.createdAt.toDate().toISOString():e.createdAt,updatedAt:e.updatedAt instanceof Ui?e.updatedAt.toDate().toISOString():e.updatedAt})}return null}catch(pD){throw console.error("Error getting current month session:",pD),pD}}async startNewMonthlySession(e,t){try{if(!e||!t)throw console.error("Invalid parameters for startNewMonthlySession:",{contextId:e,userId:t}),new Error("contextId and userId are required");const n=new Date,r=this.getMonthStart(n),s=this.getMonthEnd(n),i={ownerId:t,contextId:e,type:"monthly",periodStartDate:r.toISOString(),periodEndDate:s.toISOString(),status:"not_started",createdAt:Zp(),updatedAt:Zp(),reviewPhase:{taskReviews:[],longTermGoalReviews:[],sharedGoalReviews:[],summary:{totalCompleted:0,totalPushedForward:0,totalMissed:0,totalArchived:0,totalClosed:0},financialReview:{monthlyBudget:{income:0,expenses:0,savings:0,categories:{}},expenditureReview:{largeExpenses:[],categoryOverages:[],savingsGoalProgress:0},upcomingBigItems:[]},relationshipParentingReview:{relationshipGoals:[],parentingFocus:[],coupleTime:{lastMonthQuality:5,upcomingOpportunities:[],scheduledDates:[]}},routineDelegationReview:{currentDelegations:[],newDelegationOpportunities:[],familyWorkloadBalance:[]}},planningPhase:{nextPeriodTasks:[],recurringTasks:[],sharedGoalAssignments:[],calendarSyncStatus:{synced:!1,syncedEvents:[]},projectPrioritization:{activeProjects:[],proposedProjects:[]},toolUpdates:[],shoppingListUpdates:[],biggerPictureConcerns:[]}},a=await Gp(Pf(om,"planning_sessions"),i);return await this.getSessionById(a.id,"monthly")}catch(pD){throw console.error("Error starting new monthly session:",pD),pD}}getMonthStart(e){const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}getMonthEnd(e){const t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate(0),t.setHours(23,59,59,999),t}},jj=Ij,Dj=["title","titleId"];function Rj(e,t){let{title:n,titleId:s}=e,i=dm(e,Dj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Pj=r.forwardRef(Rj),Oj=[{id:0,title:"Start Session",description:"Begin your weekly planning"},{id:1,title:"Weekly Review",description:"Review last week's progress"},{id:2,title:"Weekly Planning",description:"Plan upcoming week"},{id:3,title:"Finalize",description:"Complete and save your plan"}],Mj=e=>{let{onStart:t,loading:n}=e;return(0,$v.jsxs)("div",{className:"text-center py-8",children:[(0,$v.jsx)(_v,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),(0,$v.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Start Your Weekly Planning Session"}),(0,$v.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Review your progress from last week and plan your priorities for the upcoming week."}),(0,$v.jsx)("button",{onClick:t,disabled:n,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Starting...":"Start Session"})]})},Lj=e=>{let{session:t,onTaskAction:n,onNext:r,loading:s}=e;return t?(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Review Last Week's Tasks"}),(0,$v.jsx)("div",{className:"space-y-4",children:t.reviewPhase.taskReviews.map((e=>(0,$v.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),e.goalName&&(0,$v.jsxs)("p",{className:"text-sm text-gray-600",children:["Goal: ",e.goalName]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,$v.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.priority}),e.action&&(0,$v.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-700",children:e.action.replace("_"," ")})]})]}),!e.action&&(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:()=>n(e.taskId,"mark_completed"),className:"text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Completed"}),(0,$v.jsx)("button",{onClick:()=>n(e.taskId,"push_forward"),className:"text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Push Forward"}),(0,$v.jsx)("button",{onClick:()=>n(e.taskId,"mark_missed"),className:"text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:"Missed"})]})]})},e.taskId)))}),(0,$v.jsx)("div",{className:"flex justify-end pt-4",children:(0,$v.jsx)("button",{onClick:r,disabled:s,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"Proceeding...":"Continue to Planning"})})]}):(0,$v.jsx)("div",{children:"Loading..."})},Fj=e=>{let{session:t,unscheduledItems:n,onScheduleTask:s,onNext:i,loading:a}=e;const[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)("");return(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Unscheduled Items"}),(0,$v.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[n.map((e=>(0,$v.jsxs)("div",{className:"border rounded-lg p-3 cursor-pointer transition-colors ".concat((null===o||void 0===o?void 0:o.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>l(e),children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),e.description&&(0,$v.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,$v.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("task"===e.type?"bg-blue-100 text-blue-700":"milestone"===e.type?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"),children:e.type}),e.goalName&&(0,$v.jsx)("span",{className:"text-xs text-gray-500",children:e.goalName})]})]},e.id))),0===n.length&&(0,$v.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No unscheduled items"})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Next Week"}),o&&(0,$v.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,$v.jsxs)("p",{className:"text-sm text-blue-700 mb-2",children:["Scheduling: ",o.title]}),(0,$v.jsx)("div",{className:"grid grid-cols-1 gap-2",children:(()=>{const e=[],t=new Date,n=new Date(t);n.setDate(t.getDate()+7);for(let r=0;r<7;r++){const t=new Date(n);t.setDate(n.getDate()+r),e.push(t)}return e})().map((e=>(0,$v.jsx)("button",{onClick:()=>{u(e.toISOString()),o&&c&&(s(o,new Date(c)),l(null),u(""))},className:"text-left p-2 border border-blue-300 rounded hover:bg-blue-100 text-sm",children:e.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})},e.toISOString())))})]}),(0,$v.jsxs)("div",{className:"space-y-2",children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-700",children:"Scheduled Tasks"}),null===t||void 0===t?void 0:t.planningPhase.nextPeriodTasks.map((e=>(0,$v.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:(0,$v.jsxs)("div",{className:"text-sm text-green-800",children:["Task ",e.taskId," - ",new Date(e.dueDate).toLocaleDateString()]})},e.taskId)))]})]})]}),(0,$v.jsx)("div",{className:"flex justify-end pt-4",children:(0,$v.jsx)("button",{onClick:i,disabled:a,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:a?"Finalizing...":"Finalize Plan"})})]})},Uj=e=>{let{session:t,onClose:n}=e;return(0,$v.jsxs)("div",{className:"text-center py-8",children:[(0,$v.jsx)(Pj,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),(0,$v.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Weekly Plan Complete!"}),(0,$v.jsxs)("div",{className:"text-gray-600 mb-8 space-y-2",children:[(0,$v.jsxs)("p",{children:["Tasks reviewed: ",(null===t||void 0===t?void 0:t.reviewPhase.taskReviews.length)||0]}),(0,$v.jsxs)("p",{children:["Tasks scheduled: ",(null===t||void 0===t?void 0:t.planningPhase.nextPeriodTasks.length)||0]})]}),(0,$v.jsx)("button",{onClick:n,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700",children:"Done"})]})},Bj=e=>{let{contextId:t,userId:n,onClose:s}=e;const[i,a]=(0,r.useState)(0),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null);(0,r.useEffect)((()=>{m()}),[t,n]);const m=async()=>{try{h(!0);const e=await jj.getCurrentWeekSession(t,n);if(e)switch(l(e),e.status){case"not_started":a(0);break;case"review_phase":a(1);break;case"planning_phase":a(2);break;case"completed":a(3)}}catch(e){p(e instanceof Error?e.message:"Failed to load session")}finally{h(!1)}},g=async()=>{try{h(!0);const e=await jj.startNewSession(t,n);l(e),a(1),await jj.updateSessionStatus(e.id,"review_phase")}catch(e){p(e instanceof Error?e.message:"Failed to start session")}finally{h(!1)}},v=async()=>{if(o)try{h(!0);const e=i+1;switch(e){case 2:await jj.updateSessionStatus(o.id,"planning_phase");const e=await jj.getUnscheduledItems(t,o.id);u(e);break;case 3:await jj.updateSessionStatus(o.id,"completed")}a(e)}catch(e){p(e instanceof Error?e.message:"Failed to proceed")}finally{h(!1)}},y=async(e,t)=>{if(o)try{const n=o.reviewPhase.taskReviews.find((t=>t.taskId===e));if(!n)return;const r=J(J({},n),{},{action:t,status:"mark_completed"===t?"completed":"push_forward"===t?"pushed_forward":"mark_missed"===t?"missed":n.status,completedDate:"mark_completed"===t?(new Date).toISOString():void 0});await jj.updateTaskReview(o.id,r),await m()}catch(n){p(n instanceof Error?n.message:"Failed to update task")}},b=async(e,t)=>{if(o)try{const n={taskId:e.id,priority:e.priority||"medium",dueDate:t.toISOString()};await jj.addNextWeekTask(o.id,n),u((t=>t.filter((t=>t.id!==e.id)))),await m()}catch(n){p(n instanceof Error?n.message:"Failed to schedule task")}};return f?(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,$v.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,$v.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,$v.jsx)("h3",{className:"text-lg font-semibold",children:"Error"}),(0,$v.jsx)("p",{className:"text-sm",children:f})]}),(0,$v.jsx)("button",{onClick:s,className:"w-full bg-gray-600 text-white py-2 px-4 rounded hover:bg-gray-700",children:"Close"})]})}):(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,$v.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,$v.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)(_v,{className:"w-6 h-6 text-blue-600"}),(0,$v.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Weekly Planning Session"})]}),(0,$v.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(Gy,{className:"w-6 h-6"})})]}),(0,$v.jsx)("div",{className:"flex items-center space-x-4",children:Oj.map(((e,t)=>(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ".concat(t<=i?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"),children:t<i?(0,$v.jsx)(Pj,{className:"w-5 h-5"}):t+1}),(0,$v.jsxs)("div",{className:"ml-3",children:[(0,$v.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,$v.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]}),t<Oj.length-1&&(0,$v.jsx)(iy,{className:"w-4 h-4 text-gray-400 mx-4"})]},e.id)))})]}),(0,$v.jsx)("div",{className:"p-6",children:(()=>{switch(i){case 0:return(0,$v.jsx)(Mj,{onStart:g,loading:d});case 1:return(0,$v.jsx)(Lj,{session:o,onTaskAction:y,onNext:v,loading:d});case 2:return(0,$v.jsx)(Fj,{session:o,unscheduledItems:c,onScheduleTask:b,onNext:v,loading:d});case 3:return(0,$v.jsx)(Uj,{session:o,onClose:s});default:return null}})()})]})})},zj=["title","titleId"];function Hj(e,t){let{title:n,titleId:s}=e,i=dm(e,zj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const Vj=r.forwardRef(Hj),Wj=["title","titleId"];function Gj(e,t){let{title:n,titleId:s}=e,i=dm(e,Wj);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const qj=r.forwardRef(Gj);const Qj=new class{constructor(){this.apiKey=void 0,this.chat={completions:{create:async e=>{if(!this.apiKey)return console.warn("OpenAI API key not configured. Using placeholder response."),this.getPlaceholderResponse(e);try{return this.getPlaceholderResponse(e)}catch(pD){return console.error("OpenAI API error:",pD),this.getPlaceholderResponse(e)}}}},this.apiKey="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"}getPlaceholderResponse(e){var t;const n=(null===(t=e.messages.find((e=>"user"===e.role)))||void 0===t?void 0:t.content)||"";let r="";return r=n.includes("monthly planning")?"Great! Let's dive into your monthly planning session. This is your opportunity to step back and look at the bigger picture. We'll review your financial situation, prioritize projects, and strengthen relationships. Take a deep breath and let's make this month count!":n.includes("financial")||n.includes("budget")?"Now let's focus on your finances. Start by reviewing what actually happened this month - your real income, expenses, and savings. Then we'll plan for next month. Be honest about the numbers, this is how we improve!":n.includes("project")?"Time to prioritize your projects! Look at what's currently active, what's blocked, and what new opportunities exist. Focus on impact and resources available. Which projects will move you closest to your goals?":n.includes("relationship")||n.includes("parenting")?"This is crucial time for relationships and parenting. Reflect on quality time, communication patterns, and parenting wins. What deserves more attention next month? Strong relationships are the foundation of everything else.":n.includes("routine")||n.includes("delegation")?"Let's optimize your routines and delegation. What's working well? What could be delegated or streamlined? Good systems free up time for what matters most.":n.includes("time")||n.includes("reminder")?"Stay focused! You're making great progress. Remember, this monthly planning session is an investment in your future. Keep moving through each section systematically.":"You're doing great! Stay focused on the current section and take your time to think through each decision carefully. This planning time is valuable - make the most of it!",{choices:[{message:{content:r}}]}}};const Kj=new class{async getSessionIntro(e){const t=this.getSessionSpecifications(e.sessionType),n="You are an AI family planning assistant helping guide a structured planning session. \n    Be warm, encouraging, and time-conscious. Keep responses concise but helpful.\n    \n    Session Type: ".concat(e.sessionType,"\n    Time Allocated: ").concat(e.timeAllocated," minutes\n    \n    Provide a welcoming introduction that:\n    1. Acknowledges the time commitment and purpose\n    2. Sets expectations for what will be accomplished\n    3. Gives a brief overview of the session structure\n    4. Motivates them to stay focused and productive"),r="Start a ".concat(e.sessionType," planning session. \n    Time available: ").concat(e.timeAllocated," minutes.\n    Session agenda: ").concat(t.agenda.join(", "));try{const s=await Qj.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:n},{role:"user",content:r}],max_tokens:300,temperature:.7});return{type:"intro",title:"Welcome to ".concat(this.getSessionTitle(e.sessionType)),content:s.choices[0].message.content||"",timeEstimate:"".concat(e.timeAllocated," minutes"),nextStep:t.agenda[0]}}catch(pD){return console.error("Error getting session intro:",pD),this.getFallbackIntro(e)}}async getSectionGuidance(e,t){var n;const r=this.getSessionSpecifications(e.sessionType).sections[e.currentStep];if(!r)return this.getFallbackSectionGuidance(e);const s=e.timeAllocated-e.timeUsed,i='You are guiding someone through the "'.concat(r.title,'" section of their ').concat(e.sessionType," planning session.\n\n    Section Purpose: ").concat(r.purpose,"\n    Key Activities: ").concat(r.activities.join(", "),"\n    Time Remaining: ").concat(s," minutes\n    \n    Provide guidance that:\n    1. Explains what they should focus on in this section\n    2. Gives specific questions or prompts to consider\n    3. Suggests concrete actions to take\n    4. Keeps them on track with time\n    5. Connects to their previous planning data if relevant"),a='Guide me through the "'.concat(r.title,'" section. \n    ').concat(t?"Current data: ".concat(JSON.stringify(t)):"","\n    ").concat(null!==(n=e.urgentItems)&&void 0!==n&&n.length?"Urgent items to consider: ".concat(e.urgentItems.join(", ")):"");try{const t=await Qj.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:i},{role:"user",content:a}],max_tokens:400,temperature:.7});return{type:"section",title:r.title,content:t.choices[0].message.content||"",suggestedActions:r.activities,timeEstimate:"".concat(r.estimatedMinutes," minutes"),nextStep:this.getNextSection(e.sessionType,e.currentStep)}}catch(pD){return console.error("Error getting section guidance:",pD),this.getFallbackSectionGuidance(e)}}async getTransitionGuidance(e,t,n){const r=e.timeUsed,s=e.timeAllocated-r,i="You are helping someone transition between sections in their planning session.\n    \n    Just completed: ".concat(t,"\n    Moving to: ").concat(n,"\n    Time used so far: ").concat(r," minutes\n    Time remaining: ").concat(s," minutes\n    \n    Provide a brief transition that:\n    1. Acknowledges what they just accomplished\n    2. Previews what's coming next\n    3. Adjusts expectations if running behind/ahead of schedule\n    4. Keeps momentum and energy positive"),a='Transitioning from "'.concat(t,'" to "').concat(n,'". \n    How are we doing on time and what should I expect next?');try{const e=await Qj.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:i},{role:"user",content:a}],max_tokens:200,temperature:.7});return{type:"transition",title:"Moving to ".concat(n),content:e.choices[0].message.content||"",timeEstimate:"".concat(s," minutes remaining")}}catch(pD){return console.error("Error getting transition guidance:",pD),{type:"transition",title:"Moving to ".concat(n),content:"Great work completing ".concat(t,"! Let's move on to ").concat(n,". You have ").concat(s," minutes remaining."),timeEstimate:"".concat(s," minutes remaining")}}}async getCompletionGuidance(e,t){const n="You are helping someone wrap up their ".concat(e.sessionType," planning session.\n    \n    Time allocated: ").concat(e.timeAllocated," minutes\n    Time used: ").concat(e.timeUsed," minutes\n    \n    Provide completion guidance that:\n    1. Celebrates what they accomplished\n    2. Summarizes key decisions/outcomes\n    3. Reminds them of next steps or follow-up actions\n    4. Sets expectations for the next planning session\n    5. Encourages them about the system working"),r="Session complete! Results: ".concat(JSON.stringify(t),"\n    What did we accomplish and what are the next steps?");try{const t=await Qj.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:n},{role:"user",content:r}],max_tokens:300,temperature:.7}),s=this.getNextSessionType(e.sessionType),i=this.getNextSessionTime(e.sessionType);return{type:"completion",title:"".concat(this.getSessionTitle(e.sessionType)," Complete!"),content:t.choices[0].message.content||"",nextStep:"Next ".concat(s," session: ").concat(i)}}catch(pD){return console.error("Error getting completion guidance:",pD),this.getFallbackCompletion(e)}}async getReminderGuidance(e,t){const n=e.timeAllocated-e.timeUsed;let r="";switch(t){case"time":r="Time check: ".concat(n," minutes remaining. Help them stay on track.");break;case"focus":r="They seem to be getting off track or overwhelmed. Help refocus.";break;case"energy":r="Energy seems low. Provide encouragement and momentum."}const s="You are providing a quick reminder/coaching moment during a planning session.\n    \n    Context: ".concat(r,"\n    Current section: ").concat(e.currentStep,"\n    Session type: ").concat(e.sessionType,"\n    \n    Provide a brief, encouraging reminder that gets them back on track.");try{const e=await Qj.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:s},{role:"user",content:"Need a ".concat(t," reminder right now.")}],max_tokens:150,temperature:.8});return{type:"reminder",title:"".concat(t.charAt(0).toUpperCase()+t.slice(1)," Check"),content:e.choices[0].message.content||""}}catch(pD){return console.error("Error getting reminder guidance:",pD),{type:"reminder",title:"Keep Going!",content:"You're doing great. Stay focused on the current section and keep moving forward."}}}getSessionSpecifications(e){const t={daily:{agenda:["Review plan","Daily concerns","Quick updates"],sections:{review:{title:"Daily Plan Review",purpose:"Review today's plan and make any needed updates",activities:["Check today's tasks","Adjust priorities","Note any blockers"],estimatedMinutes:2},concerns:{title:"Daily Concerns",purpose:"Address urgent matters and quick conversations",activities:["Urgent items","Quick decisions","Communication needs"],estimatedMinutes:3}}},weekly:{agenda:["Task review","Schedule review","Weekly planning","Meal planning","Financial check"],sections:{taskReview:{title:"Task and Routine Delegation Review",purpose:"Review last week's tasks and delegation effectiveness",activities:["Mark completed tasks","Reschedule missed items","Review delegation"],estimatedMinutes:15},scheduleReview:{title:"Schedule Review (Big Rocks)",purpose:"Review all events and social context for the coming week",activities:["Review calendar events","Identify conflicts","Plan around big rocks"],estimatedMinutes:10},weeklyPlanning:{title:"Weekly To-Do List Creation",purpose:"Build prioritized weekly task list from monthly/seasonal planning",activities:["Pull from monthly tasks","Prioritize by importance","Schedule into calendar"],estimatedMinutes:20},mealPlanning:{title:"Meal Planning",purpose:"Plan meals for the week",activities:["Review schedule","Plan meals","Create shopping list"],estimatedMinutes:10},financialCheck:{title:"Weekly Cashflow Check",purpose:"Quick review of weekly finances",activities:["Check account balances","Review weekly spending","Note any concerns"],estimatedMinutes:5}}},monthly:{agenda:["Financial review","Project planning","Relationships","Routine review","Bigger picture"],sections:{financial:{title:"Financial Review and Planning",purpose:"Comprehensive monthly financial planning",activities:["Update budget","Review expenditures","Plan big budget items"],estimatedMinutes:30},projects:{title:"Monthly Prioritization/Project Planning",purpose:"Review and plan monthly projects and priorities",activities:["Review project progress","Set monthly priorities","Update tools"],estimatedMinutes:25},relationships:{title:"Relationships and Parenting",purpose:"Focus on relationship and parenting goals",activities:["Review relationship goals","Plan parenting focus","Schedule couple time"],estimatedMinutes:20},routines:{title:"Routines and Delegation Review",purpose:"Optimize routines and delegation systems",activities:["Review current routines","Optimize delegation","Plan improvements"],estimatedMinutes:15},biggerPicture:{title:"Bigger Picture Concerns",purpose:"Address less urgent but important topics",activities:["Long-term planning","Strategic thinking","Future preparation"],estimatedMinutes:10}}},seasonal:{agenda:["Season review","Seasonal planning","Goals adjustment","Trip planning"],sections:{review:{title:"Season in Review",purpose:"Reflect on the past season",activities:["Review accomplishments","Identify patterns","Celebrate wins"],estimatedMinutes:45},planning:{title:"Seasonal Planning",purpose:"Plan for the upcoming season",activities:["Set seasonal goals","Plan major activities","Schedule important events"],estimatedMinutes:60}}},annual:{agenda:["Year review","Annual planning","Long-term vision","Financial planning"],sections:{review:{title:"Year in Review",purpose:"Comprehensive review of the past year",activities:["Review major accomplishments","Analyze patterns","Identify lessons learned"],estimatedMinutes:90},planning:{title:"Annual Planning",purpose:"Plan for the upcoming year",activities:["Set annual goals","Plan major milestones","Create yearly calendar"],estimatedMinutes:120}}}};return t[e]||t.daily}getSessionTitle(e){return{daily:"Daily Check-in (5 minutes)",weekly:"Weekly Planning (60 minutes)",monthly:"Monthly Planning (120 minutes)",seasonal:"Seasonal Planning (Half day)",annual:"Annual Planning (Full day)"}[e]||"Planning Session"}getNextSection(e,t){const n=this.getSessionSpecifications(e),r=Object.keys(n.sections),s=r.indexOf(t);return s>=0&&s<r.length-1?r[s+1]:void 0}getNextSessionType(e){return{daily:"weekly",weekly:"monthly",monthly:"seasonal",seasonal:"annual",annual:"annual"}[e]||"weekly"}getNextSessionTime(e){return{daily:"Tomorrow at 5-minute check-in",weekly:"Next Sunday 7:15-8:15pm",monthly:"First Sunday next month 7:15-9:15pm",seasonal:"Next season (blocked time without kids)",annual:"Next year (full day planning)"}[e]||"Next scheduled session"}getFallbackIntro(e){return{type:"intro",title:"".concat(this.getSessionTitle(e.sessionType)),content:"Welcome to your ".concat(e.sessionType," planning session! You have ").concat(e.timeAllocated," minutes to work through your agenda. Let's make this time productive and focused."),timeEstimate:"".concat(e.timeAllocated," minutes")}}getFallbackSectionGuidance(e){return{type:"section",title:e.currentStep,content:"Focus on ".concat(e.currentStep," for this section. Take your time to think through the key decisions and actions needed."),timeEstimate:"10-15 minutes"}}getFallbackCompletion(e){return{type:"completion",title:"Session Complete!",content:"Great work completing your ".concat(e.sessionType," planning session! You've set yourself up for success. Remember to review your plans regularly and adjust as needed."),nextStep:"Next ".concat(this.getNextSessionType(e.sessionType)," session scheduled")}}},Yj=e=>{let{context:t,onSectionComplete:n,onSessionComplete:s,className:i="",sessionId:a}=e;const[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d]=(0,r.useState)(Date.now()),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[g,v]=(0,r.useState)([]),[y,b]=(0,r.useState)("");(0,r.useEffect)((()=>{k()}),[t.currentStep]),(0,r.useEffect)((()=>{a&&x()}),[a]);const x=async()=>{if(a)try{const e=await Tj.getSession(a);e&&(m(e),v(e.conversation))}catch(pD){console.error("Error loading planning session:",pD)}},w=Math.round((Date.now()-d)/6e4),E=t.timeAllocated-w,S=w/t.timeAllocated*100,k=async()=>{u(!0);try{let e;e=t.currentStep&&"intro"!==t.currentStep?await Kj.getSectionGuidance(t):await Kj.getSessionIntro(t),l(e)}catch(pD){console.error("Error loading AI guidance:",pD),l({type:"section",title:"Continue Planning",content:"Keep working through your planning session. Focus on the current section and make steady progress.",timeEstimate:"10-15 minutes"})}finally{u(!1)}};return o?(0,$v.jsxs)("div",{className:"bg-white rounded-lg border shadow-sm ".concat(i),children:[(0,$v.jsxs)("div",{className:"px-4 pt-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,$v.jsxs)("span",{className:"flex items-center",children:[(0,$v.jsx)(gy,{className:"w-4 h-4 mr-1"}),w,"m used / ",t.timeAllocated,"m total"]}),(0,$v.jsxs)("span",{className:E<10?"text-red-600 font-medium":"",children:[E,"m remaining"]})]}),(0,$v.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,$v.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(S>90?"bg-red-500":S>75?"bg-yellow-500":"bg-blue-500"),style:{width:"".concat(Math.min(100,S),"%")}})})]}),(0,$v.jsxs)("div",{className:"p-4",children:[(0,$v.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$v.jsx)("div",{className:"flex-shrink-0 mt-1",children:(e=>{switch(e){case"intro":default:return(0,$v.jsx)(Jy,{className:"w-5 h-5 text-blue-600"});case"section":return(0,$v.jsx)(Vj,{className:"w-5 h-5 text-yellow-600"});case"transition":return(0,$v.jsx)(iy,{className:"w-5 h-5 text-green-600"});case"completion":return(0,$v.jsx)(Pj,{className:"w-5 h-5 text-green-600"});case"reminder":return(0,$v.jsx)(qj,{className:"w-5 h-5 text-orange-600"})}})(o.type)}),(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:o.title}),(0,$v.jsx)("div",{className:"text-gray-700 text-sm leading-relaxed whitespace-pre-line mb-3",children:o.content}),o.suggestedActions&&(0,$v.jsxs)("div",{className:"mb-3",children:[(0,$v.jsx)("h4",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-1",children:"Key Actions:"}),(0,$v.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:o.suggestedActions.map(((e,t)=>(0,$v.jsxs)("li",{className:"flex items-start",children:[(0,$v.jsx)("span",{className:"text-gray-400 mr-2",children:"\u2022"}),e]},t)))})]}),o.timeEstimate&&(0,$v.jsxs)("div",{className:"text-xs text-gray-500 mb-3",children:["\u23f1\ufe0f Estimated time: ",o.timeEstimate]})]})]}),p&&(0,$v.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"text-xs font-medium text-gray-600 mb-2",children:"AI Assistant Chat"}),(0,$v.jsx)("div",{className:"max-h-32 overflow-y-auto mb-3 space-y-2",children:g.slice(-3).map((e=>(0,$v.jsxs)("div",{className:"text-xs p-2 rounded ".concat("ai"===e.speaker?"bg-blue-100 text-blue-800":"bg-white text-gray-700"),children:[(0,$v.jsxs)("div",{className:"font-medium mb-1",children:["ai"===e.speaker?"\ud83e\udd16 AI":"\ud83d\udc64 You",":"]}),(0,$v.jsx)("div",{children:e.content})]},e.id)))}),(0,$v.jsxs)("div",{className:"flex gap-2",children:[(0,$v.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),placeholder:"Ask AI for help or guidance...",className:"flex-1 text-xs px-2 py-1 border rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyPress:e=>{"Enter"!==e.key||c||C()}}),(0,$v.jsx)("button",{onClick:C,disabled:c||!y.trim(),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:"Send"})]})]}),(0,$v.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:["section"===o.type&&!h&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)("button",{onClick:async()=>{if(o&&t.currentStep){u(!0);try{if(null!==p&&void 0!==p&&p.id){const e="Completed section: ".concat(t.currentStep),n=(await Tj.processUserMessage(p.id,e),await Tj.getSession(p.id));n&&(m(n),v(n.conversation))}const e=o.nextStep;if(e){const r=await Kj.getTransitionGuidance(J(J({},t),{},{timeUsed:w}),t.currentStep,e);l(r),setTimeout((()=>{null===n||void 0===n||n(t.currentStep)}),3e3)}else{const e=await Kj.getCompletionGuidance(J(J({},t),{},{timeUsed:w}),{completed:!0});l(e),null===s||void 0===s||s()}}catch(pD){console.error("Error getting transition guidance:",pD),null===n||void 0===n||n(t.currentStep)}finally{u(!1)}}},disabled:c,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium disabled:opacity-50",children:c?"Processing...":"Complete Section \u2192"}),(0,$v.jsx)("button",{onClick:async()=>{u(!0);try{const e=await Kj.getReminderGuidance(J(J({},t),{},{timeUsed:w}),"focus");l(e),f(!0),setTimeout((()=>{f(!1),k()}),5e3)}catch(pD){console.error("Error getting focus reminder:",pD)}finally{u(!1)}},disabled:c,className:"px-3 py-2 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"Need Focus?"})]}),"intro"===o.type&&(0,$v.jsx)("button",{onClick:()=>null===n||void 0===n?void 0:n("start"),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Start Planning Session \u2192"}),"completion"===o.type&&(0,$v.jsx)("button",{onClick:s,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Finish Session \u2713"}),(0,$v.jsx)("button",{onClick:async()=>{u(!0);try{const e=await Kj.getReminderGuidance(J(J({},t),{},{timeUsed:w}),"time");l(e),f(!0),setTimeout((()=>{f(!1),k()}),5e3)}catch(pD){console.error("Error getting reminder:",pD)}finally{u(!1)}},disabled:c,className:"px-3 py-2 text-gray-500 hover:text-gray-700 transition-colors text-xs",children:"Time Check"})]}),o.nextStep&&"completion"!==o.type&&(0,$v.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,$v.jsxs)("div",{className:"text-xs text-gray-500",children:["Next: ",o.nextStep]})})]})]}):(0,$v.jsx)("div",{className:"bg-white rounded-lg border p-4 ".concat(i),children:(0,$v.jsxs)("div",{className:"animate-pulse",children:[(0,$v.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,$v.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})});async function C(){if(!y.trim()||null===p||void 0===p||!p.id||c)return;const e=y.trim();b(""),u(!0);try{await Tj.processUserMessage(p.id,e);const t=await Tj.getSession(p.id);t&&(m(t),v(t.conversation))}catch(pD){console.error("Error sending message to AI:",pD)}finally{u(!1)}}},Xj=e=>{let{contextId:t,onComplete:n}=e;const{user:s}=um(),[i,a]=(0,r.useState)("start"),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[f]=(0,r.useState)(Date.now()),[p,m]=(0,r.useState)(null),g={sessionType:"monthly",currentStep:i,timeAllocated:120,timeUsed:Math.round((Date.now()-f)/6e4),familyContext:{contextId:t},urgentItems:[]};(0,r.useEffect)((()=>{s&&(y(),v())}),[s,t]);const v=async()=>{if(null!==s&&void 0!==s&&s.id&&t)try{const e={participants:[s.id],scope:"family",timeframe:"monthly",contextId:t,sessionId:"monthly_".concat(Date.now()),preferences:{workingHours:{start:"07:15",end:"09:15"},preferredDays:["sunday"],energyPatterns:{morning:"high",afternoon:"medium",evening:"low"}}},n=await Tj.startPlanningSession(e);m(n.id),console.log("Started AI planning session:",n.id)}catch(d){console.error("Error initializing AI session:",d)}},y=async()=>{if(!s||!s.id)return console.error("Missing user data for loadSession:",{user:!!s,id:null===s||void 0===s?void 0:s.id}),void h("Authentication required");if(!t||""===t.trim())return console.error("Missing contextId for loadSession:",{contextId:t}),void h("Family context not available. Please try refreshing the page or switching to demo mode.");u(!0);try{console.log("Loading monthly session with:",{contextId:t,userId:s.id});let e=await Ij.getCurrentSession(t,s.id,"monthly");e||(e=await Ij.startNewSession(t,s.id,"monthly")),l(e),"not_started"===e.status?a("start"):"review_phase"===e.status?a("financial"):"planning_phase"===e.status?a("projects"):a("finalize")}catch(e){console.error("Error loading session:",e),h(e instanceof Error?e.message:"Failed to load session")}finally{u(!1)}},b=async e=>{if(o)try{await Ij.updateSessionStatus(o.id,e),l(J(J({},o),{},{status:e}))}catch(t){console.error("Error updating session status:",t),h(t instanceof Error?t.message:"Failed to update session")}},x=e=>{switch(e){case"start":b("review_phase"),a("financial");break;case"financial":a("projects");break;case"projects":a("relationship");break;case"relationship":a("routine");break;case"routine":b("planning_phase"),a("finalize");break;case"finalize":b("completed"),null===n||void 0===n||n()}},w="start"!==i,E=["start","financial","projects","relationship","routine","finalize"],S=E.indexOf(i)+1,k=E.length;return c?(0,$v.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,$v.jsx)("span",{className:"ml-2",children:"Loading monthly planning session..."})]}):d?(0,$v.jsxs)("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[(0,$v.jsx)("h3",{className:"text-red-800 font-semibold mb-2",children:"Error"}),(0,$v.jsx)("p",{className:"text-red-600",children:d}),(0,$v.jsx)("button",{onClick:y,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]}):o?(0,$v.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,$v.jsxs)("div",{className:"text-center mb-8",children:[(0,$v.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Monthly Planning Session"}),(0,$v.jsx)("p",{className:"text-gray-600",children:"AI-guided comprehensive monthly review and planning - 2 hour session format"}),(0,$v.jsxs)("div",{className:"flex items-center justify-center space-x-4 mt-4 mb-4",children:[(0,$v.jsx)("button",{onClick:()=>{switch(i){case"financial":a("start");break;case"projects":a("financial");break;case"relationship":a("projects");break;case"routine":a("relationship");break;case"finalize":a("routine")}},disabled:!w,className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors ".concat(w?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:"\u2190 Back"}),(0,$v.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",S," of ",k]}),(0,$v.jsx)("div",{className:"text-sm text-gray-500 font-medium capitalize",children:"finalize"===i?"Review & Complete":i})]}),(0,$v.jsx)("div",{className:"bg-gray-200 rounded-full h-2 max-w-md mx-auto",children:(0,$v.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat("start"===i?0:"financial"===i?20:"projects"===i?40:"relationship"===i?60:"routine"===i?80:100,"%")}})}),(0,$v.jsx)("div",{className:"flex justify-between mt-2 text-xs max-w-md mx-auto",children:E.map(((e,t)=>(0,$v.jsx)("button",{onClick:()=>{a(e)},className:"px-2 py-1 rounded transition-colors cursor-pointer hover:bg-gray-100 ".concat(i===e?"text-blue-600 font-semibold bg-blue-50":"text-gray-500 hover:text-gray-700"),title:"Go to ".concat("finalize"===e?"Review & Complete":e," step"),children:"start"===e?"Start":"financial"===e?"Financial":"projects"===e?"Projects":"relationship"===e?"Relationship":"routine"===e?"Routine":"Complete"},e)))})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,$v.jsx)("div",{className:"lg:col-span-1",children:(0,$v.jsx)("div",{className:"sticky top-6",children:(0,$v.jsx)(Yj,{context:g,sessionId:p||void 0,onSectionComplete:e=>{if("start"===e)a("financial");else{x(e)}},onSessionComplete:()=>{(async()=>{if(console.log("AI Session completed"),p)try{await Tj.processUserMessage(p,"Monthly planning session completed successfully.")}catch(d){console.error("Error finalizing AI session:",d)}})(),null===n||void 0===n||n()}})})}),(0,$v.jsxs)("div",{className:"lg:col-span-2",children:["start"===i&&(0,$v.jsx)(Zj,{session:o,onComplete:()=>x("start")}),"financial"===i&&(0,$v.jsx)(Jj,{session:o,onComplete:()=>x("financial")}),"projects"===i&&(0,$v.jsx)($j,{session:o,onComplete:()=>x("projects")}),"relationship"===i&&(0,$v.jsx)(eD,{session:o,onComplete:()=>x("relationship")}),"routine"===i&&(0,$v.jsx)(tD,{session:o,onComplete:()=>x("routine")}),"finalize"===i&&(0,$v.jsx)(nD,{session:o,onComplete:()=>x("finalize")})]})]})]}):null},Zj=e=>{let{session:t,onComplete:n}=e;const r=new Date(t.periodStartDate).toLocaleDateString("en-US",{month:"long",year:"numeric"});return(0,$v.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,$v.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Welcome to ",r," Planning"]}),(0,$v.jsxs)("div",{className:"space-y-4",children:[(0,$v.jsx)("p",{className:"text-gray-600",children:"This comprehensive monthly planning session will cover:"}),(0,$v.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,$v.jsxs)("li",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Financial review and budget analysis"]}),(0,$v.jsxs)("li",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Project prioritization and resource allocation"]}),(0,$v.jsxs)("li",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Relationship and parenting focus areas"]}),(0,$v.jsxs)("li",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Routine delegation and workload balance"]})]}),(0,$v.jsxs)("div",{className:"pt-4",children:[(0,$v.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Set aside 2 hours for this comprehensive session (typically first Sunday 7:15-9:15)."}),(0,$v.jsx)("button",{onClick:n,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Begin Monthly Planning"})]})]})]})},Jj=e=>{let{session:t,onComplete:n}=e;const[s,i]=(0,r.useState)((()=>{var e,n,r,s,i,a,o,l;const c=t.reviewPhase.financialReview;return{lastMonthSpending:(null===c||void 0===c||null===(e=c.expenditureReview)||void 0===e?void 0:e.largeExpenses)||[],actualIncome:(null===c||void 0===c||null===(n=c.monthlyBudget)||void 0===n?void 0:n.income)||0,actualExpenses:(null===c||void 0===c||null===(r=c.monthlyBudget)||void 0===r?void 0:r.expenses)||0,savingsAchieved:(null===c||void 0===c||null===(s=c.monthlyBudget)||void 0===s?void 0:s.savings)||0,plannedIncome:(null===c||void 0===c||null===(i=c.monthlyBudget)||void 0===i?void 0:i.income)||0,plannedExpenses:(null===c||void 0===c||null===(a=c.monthlyBudget)||void 0===a?void 0:a.expenses)||0,savingsGoal:(null===c||void 0===c||null===(o=c.expenditureReview)||void 0===o?void 0:o.savingsGoalProgress)||0,upcomingBigItems:(null===c||void 0===c?void 0:c.upcomingBigItems)||[],budgetCategories:(null===c||void 0===c||null===(l=c.monthlyBudget)||void 0===l?void 0:l.categories)||{}}})),[a,o]=(0,r.useState)({item:"",amount:0,category:"",necessary:!0}),[l,c]=(0,r.useState)({item:"",estimatedCost:0,targetMonth:"",priority:"medium"}),u=s.plannedIncome-s.plannedExpenses,d=s.actualIncome-s.actualExpenses,h=s.savingsGoal>0?d/s.savingsGoal*100:0;return(0,$v.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Financial Review & Planning"}),(0,$v.jsxs)("div",{className:"mb-8",children:[(0,$v.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:(0,$v.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"\ud83d\udcca Review: What happened this month?"})}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Actual Financials"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Actual Income"}),(0,$v.jsx)("input",{type:"number",value:s.actualIncome,onChange:e=>i((t=>J(J({},t),{},{actualIncome:Number(e.target.value)}))),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"0"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Actual Expenses"}),(0,$v.jsx)("input",{type:"number",value:s.actualExpenses,onChange:e=>i((t=>J(J({},t),{},{actualExpenses:Number(e.target.value)}))),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"0"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Actual Savings"}),(0,$v.jsx)("input",{type:"number",value:s.savingsAchieved,onChange:e=>i((t=>J(J({},t),{},{savingsAchieved:Number(e.target.value)}))),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"0"})]}),(0,$v.jsx)("div",{className:"bg-gray-50 p-3 rounded-md",children:(0,$v.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,$v.jsx)("span",{children:"Net Savings Actual:"}),(0,$v.jsxs)("span",{className:"font-semibold ".concat(d>=0?"text-green-600":"text-red-600"),children:["$",d.toLocaleString()]})]})})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Major Spending This Month"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[s.lastMonthSpending.map(((e,t)=>(0,$v.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("span",{className:"font-medium",children:e.item}),(0,$v.jsxs)("span",{className:"text-gray-600 ml-2",children:["$",e.amount.toLocaleString()]}),(0,$v.jsxs)("span",{className:"text-gray-500 ml-2 text-sm",children:["(",e.category,")"]}),(0,$v.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded ".concat(e.necessary?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:e.necessary?"Necessary":"Optional"})]}),(0,$v.jsx)("button",{onClick:()=>(e=>{i((t=>J(J({},t),{},{lastMonthSpending:t.lastMonthSpending.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800 ml-2",children:"\xd7"})]},t))),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 p-3 bg-blue-50 rounded-lg",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Item",value:a.item,onChange:e=>o((t=>J(J({},t),{},{item:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("input",{type:"number",placeholder:"Amount",value:a.amount||"",onChange:e=>o((t=>J(J({},t),{},{amount:Number(e.target.value)}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("input",{type:"text",placeholder:"Category",value:a.category,onChange:e=>o((t=>J(J({},t),{},{category:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsxs)("select",{value:a.necessary?"true":"false",onChange:e=>o((t=>J(J({},t),{},{necessary:"true"===e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,$v.jsx)("option",{value:"true",children:"Necessary"}),(0,$v.jsx)("option",{value:"false",children:"Optional"})]}),(0,$v.jsx)("button",{onClick:()=>{a.item&&a.amount>0&&(i((e=>J(J({},e),{},{lastMonthSpending:[...e.lastMonthSpending,J({},a)]}))),o({item:"",amount:0,category:"",necessary:!0}))},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})]})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:(0,$v.jsx)("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"\ud83c\udfaf Planning: What do we want for next month?"})}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Next Month's Budget"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Planned Income"}),(0,$v.jsx)("input",{type:"number",value:s.plannedIncome,onChange:e=>i((t=>J(J({},t),{},{plannedIncome:Number(e.target.value)}))),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"0"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Planned Expenses"}),(0,$v.jsx)("input",{type:"number",value:s.plannedExpenses,onChange:e=>i((t=>J(J({},t),{},{plannedExpenses:Number(e.target.value)}))),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"0"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Savings Goal"}),(0,$v.jsx)("input",{type:"number",value:s.savingsGoal,onChange:e=>i((t=>J(J({},t),{},{savingsGoal:Number(e.target.value)}))),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"0"})]}),(0,$v.jsx)("div",{className:"bg-gray-50 p-3 rounded-md",children:(0,$v.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,$v.jsx)("span",{children:"Net Savings Planned:"}),(0,$v.jsxs)("span",{className:"font-semibold ".concat(u>=0?"text-green-600":"text-red-600"),children:["$",u.toLocaleString()]})]})})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Savings Progress vs Goal"}),(0,$v.jsx)("div",{className:"bg-gray-200 rounded-full h-3 mb-2",children:(0,$v.jsx)("div",{className:"h-3 rounded-full ".concat(h>=100?"bg-green-600":h>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.min(100,Math.max(0,h)),"%")}})}),(0,$v.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[h.toFixed(1),"% of monthly savings goal achieved"]})]})]}),(0,$v.jsxs)("div",{className:"mt-6",children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Upcoming Big Items & Major Purchases"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[s.upcomingBigItems.map(((e,t)=>(0,$v.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("span",{className:"font-medium",children:e.item}),(0,$v.jsxs)("span",{className:"text-gray-600 ml-2",children:["$",e.estimatedCost.toLocaleString()]}),(0,$v.jsxs)("span",{className:"text-gray-500 ml-2 text-sm",children:["(",e.targetMonth,")"]}),(0,$v.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.priority})]}),(0,$v.jsx)("button",{onClick:()=>(e=>{i((t=>J(J({},t),{},{upcomingBigItems:t.upcomingBigItems.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800 ml-2",children:"\xd7"})]},t))),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 p-3 bg-green-50 rounded-lg",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Item",value:l.item,onChange:e=>c((t=>J(J({},t),{},{item:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("input",{type:"number",placeholder:"Cost",value:l.estimatedCost||"",onChange:e=>c((t=>J(J({},t),{},{estimatedCost:Number(e.target.value)}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("input",{type:"text",placeholder:"Target Month",value:l.targetMonth,onChange:e=>c((t=>J(J({},t),{},{targetMonth:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsxs)("select",{value:l.priority,onChange:e=>c((t=>J(J({},t),{},{priority:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,$v.jsx)("option",{value:"high",children:"High"}),(0,$v.jsx)("option",{value:"medium",children:"Medium"}),(0,$v.jsx)("option",{value:"low",children:"Low"})]}),(0,$v.jsx)("button",{onClick:()=>{l.item&&l.estimatedCost>0&&(i((e=>J(J({},e),{},{upcomingBigItems:[...e.upcomingBigItems,J({},l)]}))),c({item:"",estimatedCost:0,targetMonth:"",priority:"medium"}))},className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Add"})]})]})]}),(0,$v.jsx)("button",{onClick:()=>{(async()=>{try{s.plannedIncome,s.plannedExpenses,s.savingsGoal,s.budgetCategories,s.lastMonthSpending,s.upcomingBigItems;const e=[];s.upcomingBigItems.forEach(((t,n)=>{"high"===t.priority&&e.push({taskId:"financial_big_item_".concat(n),priority:"high",dueDate:new Date(Date.now()+6048e5).toISOString(),title:"Plan for ".concat(t.item),description:"Research and plan for upcoming expense: ".concat(t.item," ($").concat(t.estimatedCost.toLocaleString(),")")})})),d<.8*s.savingsGoal&&e.push({taskId:"budget_review_task",priority:"medium",dueDate:new Date(Date.now()+2592e5).toISOString(),title:"Review and adjust budget",description:"Savings goal not met (".concat(h.toFixed(1),"%). Review spending patterns and adjust budget.")}),console.log("Created financial tasks for monthly planning:",e)}catch(pD){console.error("Error saving financial data and creating tasks:",pD)}})(),n()},className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue to Project Prioritization"})]})]})},$j=e=>{let{session:t,onComplete:n}=e;const{user:s}=um(),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)((()=>{const e=t.planningPhase.projectPrioritization;return{activeProjects:(null===e||void 0===e?void 0:e.activeProjects)||[],proposedProjects:(null===e||void 0===e?void 0:e.proposedProjects)||[],completedProjects:[],resourceAllocation:{totalTimeHours:40,totalBudget:1e3,allocations:[]}}}));(0,r.useEffect)((()=>{(async()=>{if(null!==s&&void 0!==s&&s.id){a(!0);try{console.log("Loading existing projects for monthly planning...");const e=await Nj.getGoalsByContext(t.contextId),n=new Set(o.activeProjects.map((e=>e.projectId))),r=e.filter((e=>{var t,n;return(null===(t=e.projects)||void 0===t?void 0:t.length)>0||(null===(n=e.tags)||void 0===n?void 0:n.includes("project"))})).filter((e=>!n.has(e.id))).map((e=>{var t,n;return{projectId:e.id,title:e.title,priority:"high"===e.priority?8:"medium"===e.priority?5:2,progress:e.progress,blockers:(null===(t=e.tasks)||void 0===t?void 0:t.filter((e=>"cancelled"===e.status)).map((e=>e.title)))||[],nextMonthGoals:[],tasks:(null===(n=e.tasks)||void 0===n?void 0:n.map((e=>({id:e.id,title:e.title,dueDate:e.dueDate||"",priority:"critical"===e.priority||"high"===e.priority?"high":"medium"===e.priority?"medium":"low",status:"cancelled"===e.status?"blocked":"completed"===e.status?"completed":"in_progress"===e.status?"in_progress":"pending",estimatedHours:Math.round(e.estimatedDuration/60)||1,completedAt:e.completedAt}))))||[]}}));r.length>0&&(l((e=>J(J({},e),{},{activeProjects:[...e.activeProjects,...r]}))),console.log("Loaded ".concat(r.length," existing projects from goals")))}catch(pD){console.error("Error loading existing projects:",pD)}finally{a(!1)}}})()}),[null===s||void 0===s?void 0:s.id,t.contextId]);const[c,u]=(0,r.useState)({projectId:"",title:"",priority:5,progress:0,blockers:[],nextMonthGoals:[],tasks:[]}),[d,h]=(0,r.useState)({title:"",description:"",estimatedEffort:"medium",urgency:"medium",dependencies:[]}),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[v,y]=(0,r.useState)({title:"",dueDate:"",priority:"medium",estimatedHours:1}),[b,x]=(0,r.useState)(null),w=(e,t)=>{t.trim()&&l((n=>J(J({},n),{},{proposedProjects:n.proposedProjects.map(((n,r)=>r===e?J(J({},n),{},{plannedTasks:[...n.plannedTasks||[],{title:t,id:"task_".concat(Date.now()),priority:"medium",estimatedHours:1}],newTaskTitle:""}):n))})))},E=(e,t)=>{t.trim()&&l((n=>J(J({},n),{},{activeProjects:n.activeProjects.map(((n,r)=>r===e?J(J({},n),{},{blockers:[...n.blockers,t.trim()]}):n))})))},S=(e,t)=>{t.trim()&&l((n=>J(J({},n),{},{activeProjects:n.activeProjects.map(((n,r)=>r===e?J(J({},n),{},{nextMonthGoals:[...n.nextMonthGoals,t.trim()]}):n))})))};return(0,$v.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Project Prioritization"}),(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900",children:"Active Projects"}),i&&(0,$v.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Loading existing projects..."]})]}),(0,$v.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Review progress and set next month goals. Projects from your goals database are automatically included."}),(0,$v.jsxs)("div",{className:"space-y-4",children:[o.activeProjects.map(((e,t)=>{var n,r;return(0,$v.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("button",{onClick:()=>{return t=e.projectId,void x(b===t?null:t);var t},className:"mr-2 text-gray-400 hover:text-gray-600",children:b===e.projectId?"\u25bc":"\u25b6"}),(0,$v.jsx)("h4",{className:"font-medium text-lg",children:e.title}),e.projectId.startsWith("proj_")?(0,$v.jsx)("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:"Manual"}):(0,$v.jsx)("span",{className:"ml-2 bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"From Goals"}),(0,$v.jsxs)("span",{className:"ml-2 bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded",children:[(null===(n=e.tasks)||void 0===n?void 0:n.length)||0," tasks"]})]}),(0,$v.jsx)("button",{onClick:()=>(e=>{l((t=>J(J({},t),{},{activeProjects:t.activeProjects.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800",title:e.projectId.startsWith("proj_")?"Remove manual project":"Hide from monthly planning (won't delete from goals)",children:"\xd7"})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Priority (1-10)"}),(0,$v.jsx)("input",{type:"range",min:"1",max:"10",value:e.priority,onChange:e=>((e,t)=>{l((n=>J(J({},n),{},{activeProjects:n.activeProjects.map(((n,r)=>r===e?J(J({},n),{},{priority:t}):n))})))})(t,Number(e.target.value)),className:"w-full mt-1"}),(0,$v.jsxs)("span",{className:"text-sm text-gray-500",children:["Priority: ",e.priority]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Progress (%)"}),(0,$v.jsx)("input",{type:"range",min:"0",max:"100",value:e.progress,onChange:e=>((e,t)=>{l((n=>J(J({},n),{},{activeProjects:n.activeProjects.map(((n,r)=>r===e?J(J({},n),{},{progress:t}):n))})))})(t,Number(e.target.value)),className:"w-full mt-1"}),(0,$v.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,$v.jsxs)("span",{children:["Progress: ",e.progress,"%"]}),(0,$v.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,$v.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.progress,"%")}})})]})]})]}),b===e.projectId&&(0,$v.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,$v.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Project Tasks"}),(0,$v.jsx)("div",{className:"space-y-2 mb-4",children:null===(r=e.tasks)||void 0===r?void 0:r.map(((e,n)=>(0,$v.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("div",{className:"flex-1",children:(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("input",{type:"checkbox",checked:"completed"===e.status,onChange:e=>((e,t,n)=>{l((r=>J(J({},r),{},{activeProjects:r.activeProjects.map(((r,s)=>{var i;return s===e?J(J({},r),{},{tasks:(null===(i=r.tasks)||void 0===i?void 0:i.map(((e,r)=>r===t?J(J({},e),{},{status:n,completedAt:"completed"===n?(new Date).toISOString():void 0}):e)))||[]}):r}))})))})(t,n,e.target.checked?"completed":"pending"),className:"h-4 w-4 text-blue-600 rounded"}),(0,$v.jsx)("span",{className:"font-medium ".concat("completed"===e.status?"line-through text-gray-500":""),children:e.title}),(0,$v.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.priority}),e.dueDate&&(0,$v.jsxs)("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]}),(0,$v.jsxs)("span",{className:"text-xs text-gray-500",children:[e.estimatedHours,"h"]})]})}),(0,$v.jsx)("button",{onClick:()=>((e,t)=>{l((n=>J(J({},n),{},{activeProjects:n.activeProjects.map(((n,r)=>{var s;return r===e?J(J({},n),{},{tasks:(null===(s=n.tasks)||void 0===s?void 0:s.filter(((e,n)=>n!==t)))||[]}):n}))})))})(t,n),className:"text-red-600 hover:text-red-800 ml-2",children:"\xd7"})]},e.id)))}),(0,$v.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-3",children:[(0,$v.jsx)("h6",{className:"font-medium mb-2 text-sm",children:"Add Task"}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Task title...",value:v.title,onChange:e=>y((t=>J(J({},t),{},{title:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("input",{type:"date",value:v.dueDate,onChange:e=>y((t=>J(J({},t),{},{dueDate:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsxs)("select",{value:v.priority,onChange:e=>y((t=>J(J({},t),{},{priority:e.target.value}))),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,$v.jsx)("option",{value:"high",children:"High Priority"}),(0,$v.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,$v.jsx)("option",{value:"low",children:"Low Priority"})]}),(0,$v.jsx)("input",{type:"number",placeholder:"Hours",min:"0.5",step:"0.5",value:v.estimatedHours,onChange:e=>y((t=>J(J({},t),{},{estimatedHours:Number(e.target.value)}))),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("button",{onClick:()=>(e=>{if(v.title.trim()){const t=J(J({id:"task_".concat(Date.now())},v),{},{title:v.title.trim(),status:"pending"});l((n=>J(J({},n),{},{activeProjects:n.activeProjects.map(((n,r)=>r===e?J(J({},n),{},{tasks:[...n.tasks||[],t]}):n))}))),y({title:"",dueDate:"",priority:"medium",estimatedHours:1})}})(t),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add Task"})]})]})]}),(0,$v.jsxs)("div",{className:"mt-3",children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Current Blockers"}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:e.blockers.map(((e,t)=>(0,$v.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:e},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add blocker...",value:f,onChange:e=>p(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-sm",onKeyDown:e=>{"Enter"===e.key&&(E(t,f),p(""))}}),(0,$v.jsx)("button",{onClick:()=>{E(t,f),p("")},className:"px-3 py-1 bg-red-600 text-white rounded-r text-sm hover:bg-red-700",children:"Add"})]})]}),(0,$v.jsxs)("div",{className:"mt-3",children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Next Month Goals"}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:e.nextMonthGoals.map(((e,t)=>(0,$v.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:e},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add next month goal...",value:m,onChange:e=>g(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-sm",onKeyDown:e=>{"Enter"===e.key&&(S(t,m),g(""))}}),(0,$v.jsx)("button",{onClick:()=>{S(t,m),g("")},className:"px-3 py-1 bg-green-600 text-white rounded-r text-sm hover:bg-green-700",children:"Add"})]})]})]},e.projectId)})),(0,$v.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[(0,$v.jsx)("h4",{className:"font-medium mb-3",children:"Add Active Project"}),(0,$v.jsx)("input",{type:"text",placeholder:"Project title...",value:c.title,onChange:e=>u((t=>J(J({},t),{},{title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm mb-3"}),(0,$v.jsx)("button",{onClick:()=>{if(c.title){const e=J(J({},c),{},{projectId:"proj_".concat(Date.now()),blockers:[],nextMonthGoals:[],tasks:[]});l((t=>J(J({},t),{},{activeProjects:[...t.activeProjects,e]}))),u({projectId:"",title:"",priority:5,progress:0,blockers:[],nextMonthGoals:[],tasks:[]})}},className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Add Active Project"})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Proposed Projects"}),(0,$v.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Evaluate new project opportunities"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[o.proposedProjects.map(((e,t)=>{var n;return(0,$v.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$v.jsx)("h4",{className:"font-medium",children:e.title}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("button",{onClick:()=>(e=>{const t=o.proposedProjects[e],n={projectId:"project_".concat(Date.now()),title:t.title,priority:"high"===t.urgency?8:"medium"===t.urgency?5:2,progress:0,blockers:[],nextMonthGoals:[],tasks:(t.plannedTasks||[]).map((e=>({id:e.id||"task_".concat(Date.now(),"_").concat(Math.random()),title:e.title,dueDate:"",priority:e.priority||"medium",status:"pending",estimatedHours:e.estimatedHours||1,completedAt:void 0})))};l((t=>J(J({},t),{},{activeProjects:[...t.activeProjects,n],proposedProjects:t.proposedProjects.filter(((t,n)=>n!==e))}))),console.log('Promoted "'.concat(t.title,'" to active project with ').concat((t.plannedTasks||[]).length," tasks"))})(t),className:"text-green-600 hover:text-green-800 text-sm font-medium",title:"Promote to Active Project",children:"\u2197 Promote"}),(0,$v.jsx)("button",{onClick:()=>(e=>{l((t=>J(J({},t),{},{proposedProjects:t.proposedProjects.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800",children:"\xd7"})]})]}),(0,$v.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,$v.jsxs)("div",{className:"flex space-x-4 text-xs mb-3",children:[(0,$v.jsxs)("span",{className:"px-2 py-1 rounded ".concat("large"===e.estimatedEffort?"bg-red-100 text-red-800":"medium"===e.estimatedEffort?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.estimatedEffort," effort"]}),(0,$v.jsxs)("span",{className:"px-2 py-1 rounded ".concat("high"===e.urgency?"bg-red-100 text-red-800":"medium"===e.urgency?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.urgency," urgency"]})]}),(0,$v.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,$v.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tasks (before promoting):"}),(null===(n=e.plannedTasks)||void 0===n?void 0:n.map(((e,n)=>(0,$v.jsxs)("div",{className:"flex items-center justify-between py-1 text-sm",children:[(0,$v.jsx)("span",{children:e.title}),(0,$v.jsx)("button",{onClick:()=>((e,t)=>{l((n=>J(J({},n),{},{proposedProjects:n.proposedProjects.map(((n,r)=>r===e?J(J({},n),{},{plannedTasks:(n.plannedTasks||[]).filter(((e,n)=>n!==t))}):n))})))})(t,n),className:"text-red-500 hover:text-red-700 ml-2",children:"\xd7"})]},n))))||(0,$v.jsx)("p",{className:"text-xs text-gray-500",children:"No tasks defined yet"}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add task for this project...",value:e.newTaskTitle||"",onChange:e=>{return n=t,r=e.target.value,void l((e=>J(J({},e),{},{proposedProjects:e.proposedProjects.map(((e,t)=>t===n?J(J({},e),{},{newTaskTitle:r}):e))})));var n,r},className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-sm",onKeyDown:n=>{"Enter"===n.key&&w(t,e.newTaskTitle||"")}}),(0,$v.jsx)("button",{onClick:()=>w(t,e.newTaskTitle||""),className:"px-3 py-1 bg-blue-600 text-white rounded-r text-sm hover:bg-blue-700",children:"Add Task"})]})]})]},t)})),(0,$v.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[(0,$v.jsx)("h4",{className:"font-medium mb-3",children:"Propose New Project"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Project title...",value:d.title,onChange:e=>h((t=>J(J({},t),{},{title:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"}),(0,$v.jsx)("textarea",{placeholder:"Project description...",value:d.description,onChange:e=>h((t=>J(J({},t),{},{description:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm h-20"}),(0,$v.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,$v.jsxs)("select",{value:d.estimatedEffort,onChange:e=>h((t=>J(J({},t),{},{estimatedEffort:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded text-sm",children:[(0,$v.jsx)("option",{value:"small",children:"Small Effort"}),(0,$v.jsx)("option",{value:"medium",children:"Medium Effort"}),(0,$v.jsx)("option",{value:"large",children:"Large Effort"})]}),(0,$v.jsxs)("select",{value:d.urgency,onChange:e=>h((t=>J(J({},t),{},{urgency:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded text-sm",children:[(0,$v.jsx)("option",{value:"high",children:"High Urgency"}),(0,$v.jsx)("option",{value:"medium",children:"Medium Urgency"}),(0,$v.jsx)("option",{value:"low",children:"Low Urgency"})]})]}),(0,$v.jsx)("button",{onClick:()=>{d.title&&(l((e=>J(J({},e),{},{proposedProjects:[...e.proposedProjects,J(J({},d),{},{dependencies:[],plannedTasks:[],newTaskTitle:""})]}))),h({title:"",description:"",estimatedEffort:"medium",urgency:"medium",dependencies:[]}))},className:"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700",children:"Add Proposed Project"})]})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Resource Allocation Overview"}),(0,$v.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,$v.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"Active Projects:"}),(0,$v.jsx)("span",{className:"font-medium ml-2",children:o.activeProjects.length})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"Total Tasks:"}),(0,$v.jsx)("span",{className:"font-medium ml-2",children:o.activeProjects.reduce(((e,t)=>{var n;return e+((null===(n=t.tasks)||void 0===n?void 0:n.length)||0)}),0)})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"Completed Tasks:"}),(0,$v.jsx)("span",{className:"font-medium ml-2",children:o.activeProjects.reduce(((e,t)=>{var n;return e+((null===(n=t.tasks)||void 0===n?void 0:n.filter((e=>"completed"===e.status)).length)||0)}),0)})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"Estimated Hours:"}),(0,$v.jsxs)("span",{className:"font-medium ml-2",children:[o.activeProjects.reduce(((e,t)=>{var n;return e+((null===(n=t.tasks)||void 0===n?void 0:n.filter((e=>"completed"!==e.status)).reduce(((e,t)=>e+(t.estimatedHours||0)),0))||0)}),0),"h"]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"Proposed Projects:"}),(0,$v.jsx)("span",{className:"font-medium ml-2",children:o.proposedProjects.length})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"Avg. Priority:"}),(0,$v.jsx)("span",{className:"font-medium ml-2",children:o.activeProjects.length>0?(o.activeProjects.reduce(((e,t)=>e+t.priority),0)/o.activeProjects.length).toFixed(1):"N/A"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"Overdue Tasks:"}),(0,$v.jsx)("span",{className:"font-medium ml-2 text-red-600",children:o.activeProjects.reduce(((e,t)=>{var n;return e+((null===(n=t.tasks)||void 0===n?void 0:n.filter((e=>"completed"!==e.status&&e.dueDate&&new Date(e.dueDate)<new Date)).length)||0)}),0)})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("span",{className:"text-gray-600",children:"This Week:"}),(0,$v.jsx)("span",{className:"font-medium ml-2 text-blue-600",children:(()=>{const e=new Date;return e.setDate(e.getDate()+7),o.activeProjects.reduce(((t,n)=>{var r;return t+((null===(r=n.tasks)||void 0===r?void 0:r.filter((t=>"completed"!==t.status&&t.dueDate&&new Date(t.dueDate)<=e)).length)||0)}),0)})()})]})]})})]}),(0,$v.jsx)("button",{onClick:n,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue to Relationship Review"})]})]})},eD=e=>{let{session:t,onComplete:n}=e;const[s,i]=(0,r.useState)((()=>{var e,n,r;const s=t.reviewPhase.relationshipParentingReview;return{relationshipGoals:(null===s||void 0===s?void 0:s.relationshipGoals)||[],parentingFocus:(null===s||void 0===s?void 0:s.parentingFocus)||[],coupleTimeQuality:(null===s||void 0===s||null===(e=s.coupleTime)||void 0===e?void 0:e.lastMonthQuality)||5,upcomingOpportunities:(null===s||void 0===s||null===(n=s.coupleTime)||void 0===n?void 0:n.upcomingOpportunities)||[],scheduledDates:(null===s||void 0===s||null===(r=s.coupleTime)||void 0===r?void 0:r.scheduledDates)||[]}})),[a,o]=(0,r.useState)({area:"",currentState:"",desiredState:"",nextMonthActions:[]}),[l,c]=(0,r.useState)({childName:"",currentChallenges:[],wins:[],nextMonthPriorities:[]}),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[x,w]=(0,r.useState)(""),E=(e,t)=>{t.trim()&&i((n=>J(J({},n),{},{relationshipGoals:n.relationshipGoals.map(((n,r)=>r===e?J(J({},n),{},{nextMonthActions:[...n.nextMonthActions,t.trim()]}):n))})))},S=(e,t,n)=>{n.trim()&&i((r=>J(J({},r),{},{parentingFocus:r.parentingFocus.map(((r,s)=>s===e?J(J({},r),{},{[t]:[...r[t],n.trim()]}):r))})))},k=()=>{y.trim()&&(i((e=>J(J({},e),{},{upcomingOpportunities:[...e.upcomingOpportunities,y.trim()]}))),b(""))},C=()=>{x.trim()&&(i((e=>J(J({},e),{},{scheduledDates:[...e.scheduledDates,x.trim()]}))),w(""))};return(0,$v.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Relationship & Parenting Review"}),(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Relationship Goals"}),(0,$v.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Areas of focus for couple relationship"}),(0,$v.jsxs)("div",{className:"space-y-4",children:[s.relationshipGoals.map(((e,t)=>(0,$v.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$v.jsx)("h4",{className:"font-medium text-lg",children:e.area}),(0,$v.jsx)("button",{onClick:()=>(e=>{i((t=>J(J({},t),{},{relationshipGoals:t.relationshipGoals.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800",children:"\xd7"})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Current State"}),(0,$v.jsx)("p",{className:"text-sm bg-gray-50 p-2 rounded",children:e.currentState})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Desired State"}),(0,$v.jsx)("p",{className:"text-sm bg-gray-50 p-2 rounded",children:e.desiredState})]})]}),(0,$v.jsxs)("div",{className:"mt-3",children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Next Month Actions"}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:e.nextMonthActions.map(((e,t)=>(0,$v.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:e},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add action...",value:u,onChange:e=>d(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-sm",onKeyDown:e=>{"Enter"===e.key&&(E(t,u),d(""))}}),(0,$v.jsx)("button",{onClick:()=>{E(t,u),d("")},className:"px-3 py-1 bg-blue-600 text-white rounded-r text-sm hover:bg-blue-700",children:"Add"})]})]})]},t))),(0,$v.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[(0,$v.jsx)("h4",{className:"font-medium mb-3",children:"Add Relationship Goal"}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Relationship area (e.g., Communication, Intimacy, Quality Time)",value:a.area,onChange:e=>o((t=>J(J({},t),{},{area:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,$v.jsx)("textarea",{placeholder:"Current state...",value:a.currentState,onChange:e=>o((t=>J(J({},t),{},{currentState:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded text-sm h-20"}),(0,$v.jsx)("textarea",{placeholder:"Desired state...",value:a.desiredState,onChange:e=>o((t=>J(J({},t),{},{desiredState:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded text-sm h-20"})]}),(0,$v.jsx)("button",{onClick:()=>{a.area&&a.currentState&&(i((e=>J(J({},e),{},{relationshipGoals:[...e.relationshipGoals,J(J({},a),{},{nextMonthActions:[]})]}))),o({area:"",currentState:"",desiredState:"",nextMonthActions:[]}))},className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Add Relationship Goal"})]})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Parenting Focus"}),(0,$v.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Individual child priorities and wins"}),(0,$v.jsxs)("div",{className:"space-y-4",children:[s.parentingFocus.map(((e,t)=>(0,$v.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$v.jsx)("h4",{className:"font-medium text-lg",children:e.childName}),(0,$v.jsx)("button",{onClick:()=>(e=>{i((t=>J(J({},t),{},{parentingFocus:t.parentingFocus.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800",children:"\xd7"})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Current Challenges"}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.currentChallenges.map(((e,t)=>(0,$v.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:e},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add challenge...",value:h,onChange:e=>f(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-xs",onKeyDown:e=>{"Enter"===e.key&&(S(t,"currentChallenges",h),f(""))}}),(0,$v.jsx)("button",{onClick:()=>{S(t,"currentChallenges",h),f("")},className:"px-2 py-1 bg-red-600 text-white rounded-r text-xs hover:bg-red-700",children:"Add"})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Recent Wins"}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.wins.map(((e,t)=>(0,$v.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:e},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add win...",value:p,onChange:e=>m(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-xs",onKeyDown:e=>{"Enter"===e.key&&(S(t,"wins",p),m(""))}}),(0,$v.jsx)("button",{onClick:()=>{S(t,"wins",p),m("")},className:"px-2 py-1 bg-green-600 text-white rounded-r text-xs hover:bg-green-700",children:"Add"})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Next Month Priorities"}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.nextMonthPriorities.map(((e,t)=>(0,$v.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded",children:e},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add priority...",value:g,onChange:e=>v(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-xs",onKeyDown:e=>{"Enter"===e.key&&(S(t,"nextMonthPriorities",g),v(""))}}),(0,$v.jsx)("button",{onClick:()=>{S(t,"nextMonthPriorities",g),v("")},className:"px-2 py-1 bg-yellow-600 text-white rounded-r text-xs hover:bg-yellow-700",children:"Add"})]})]})]})]},t))),(0,$v.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[(0,$v.jsx)("h4",{className:"font-medium mb-3",children:"Add Child Focus"}),(0,$v.jsx)("input",{type:"text",placeholder:"Child's name...",value:l.childName,onChange:e=>c((t=>J(J({},t),{},{childName:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm mb-3"}),(0,$v.jsx)("button",{onClick:()=>{l.childName&&(i((e=>J(J({},e),{},{parentingFocus:[...e.parentingFocus,J(J({},l),{},{currentChallenges:[],wins:[],nextMonthPriorities:[]})]}))),c({childName:"",currentChallenges:[],wins:[],nextMonthPriorities:[]}))},className:"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:"Add Child Focus"})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Couple Time Quality"}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Last Month Quality (1-10)"}),(0,$v.jsxs)("div",{className:"mt-2",children:[(0,$v.jsx)("input",{type:"range",min:"1",max:"10",value:s.coupleTimeQuality,onChange:e=>i((t=>J(J({},t),{},{coupleTimeQuality:Number(e.target.value)}))),className:"w-full"}),(0,$v.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,$v.jsx)("span",{children:"Poor (1)"}),(0,$v.jsx)("span",{className:"font-semibold text-lg text-gray-700",children:s.coupleTimeQuality}),(0,$v.jsx)("span",{children:"Excellent (10)"})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{className:"text-sm text-gray-600",children:"Quality Indicator"}),(0,$v.jsx)("div",{className:"mt-2 p-3 rounded-lg text-center text-sm font-medium",style:{backgroundColor:s.coupleTimeQuality>=8?"#dcfce7":s.coupleTimeQuality>=6?"#fef3c7":s.coupleTimeQuality>=4?"#fed7aa":"#fecaca",color:s.coupleTimeQuality>=8?"#166534":s.coupleTimeQuality>=6?"#92400e":s.coupleTimeQuality>=4?"#ea580c":"#dc2626"},children:s.coupleTimeQuality>=8?"Excellent Connection":s.coupleTimeQuality>=6?"Good Quality Time":s.coupleTimeQuality>=4?"Needs Attention":"Requires Focus"})]})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Date Opportunities"}),(0,$v.jsx)("div",{className:"space-y-2",children:s.upcomingOpportunities.map(((e,t)=>(0,$v.jsxs)("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded",children:[(0,$v.jsx)("span",{className:"text-sm",children:e}),(0,$v.jsx)("button",{onClick:()=>(e=>{i((t=>J(J({},t),{},{upcomingOpportunities:t.upcomingOpportunities.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800 text-xs",children:"\xd7"})]},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add opportunity...",value:y,onChange:e=>b(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-sm",onKeyDown:e=>{"Enter"===e.key&&k()}}),(0,$v.jsx)("button",{onClick:k,className:"px-3 py-1 bg-blue-600 text-white rounded-r text-sm hover:bg-blue-700",children:"Add"})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Scheduled Dates"}),(0,$v.jsx)("div",{className:"space-y-2",children:s.scheduledDates.map(((e,t)=>(0,$v.jsxs)("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded",children:[(0,$v.jsx)("span",{className:"text-sm",children:e}),(0,$v.jsx)("button",{onClick:()=>(e=>{i((t=>J(J({},t),{},{scheduledDates:t.scheduledDates.filter(((t,n)=>n!==e))})))})(t),className:"text-red-600 hover:text-red-800 text-xs",children:"\xd7"})]},t)))}),(0,$v.jsxs)("div",{className:"flex mt-2",children:[(0,$v.jsx)("input",{type:"text",placeholder:"Add scheduled date...",value:x,onChange:e=>w(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded-l text-sm",onKeyDown:e=>{"Enter"===e.key&&C()}}),(0,$v.jsx)("button",{onClick:C,className:"px-3 py-1 bg-green-600 text-white rounded-r text-sm hover:bg-green-700",children:"Add"})]})]})]})]}),(0,$v.jsx)("button",{onClick:n,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue to Routine Review"})]})]})},tD=e=>{let{session:t,onComplete:n}=e;return(0,$v.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Routine Delegation Review"}),(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Current Delegations"}),(0,$v.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Review effectiveness of current task assignments"}),(0,$v.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,$v.jsx)("p",{className:"text-gray-500 text-center",children:"No current delegations"})})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"New Delegation Opportunities"}),(0,$v.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Identify tasks that could be delegated"}),(0,$v.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,$v.jsx)("p",{className:"text-gray-500 text-center",children:"No delegation opportunities identified"})})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Family Workload Balance"}),(0,$v.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Assess current workload distribution"}),(0,$v.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,$v.jsx)("p",{className:"text-gray-500 text-center",children:"No workload data available"})})]}),(0,$v.jsx)("button",{onClick:n,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue to Finalize"})]})]})},nD=e=>{let{session:t,onComplete:n}=e;return(0,$v.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Finalize Monthly Planning"}),(0,$v.jsxs)("div",{className:"space-y-6",children:[(0,$v.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,$v.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"Planning Session Complete"}),(0,$v.jsx)("p",{className:"text-green-700",children:"Your monthly planning session has been completed. All review areas have been addressed."})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Session Summary"}),(0,$v.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Financial review completed"]}),(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Project prioritization reviewed"]}),(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Relationship and parenting assessed"]}),(0,$v.jsxs)("div",{className:"flex items-center",children:[(0,$v.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),"Routine delegation optimized"]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Next Steps"}),(0,$v.jsxs)("ul",{className:"space-y-1 text-sm text-gray-600",children:[(0,$v.jsx)("li",{children:"\u2022 Implement agreed-upon changes"}),(0,$v.jsx)("li",{children:"\u2022 Schedule next monthly planning session"}),(0,$v.jsx)("li",{children:"\u2022 Monitor progress throughout the month"})]})]}),(0,$v.jsx)("button",{onClick:n,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Complete Monthly Planning"})]})]})},rD=e=>{let{contextId:t,userId:n}=e;const s=(0,r.useRef)(null),[i,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)("timeGridWeek"),[v,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(null),[w,E]=(0,r.useState)(null),[S,k]=(0,r.useState)(!1),[C,N]=(0,r.useState)(""),[A,_]=(0,r.useState)({participants:[n||"current_user"],scope:"family",timeframe:"weekly",contextId:t,sessionId:"",preferences:{workingHours:{start:"09:00",end:"17:00"},preferredDays:["1","2","3","4","5"],energyPatterns:{morning:"high",afternoon:"medium",evening:"low"}}}),[T,I]=(0,r.useState)(!1),[j,D]=(0,r.useState)(!1),[R,P]=(0,r.useState)({inbox:[],sops:[],projects:[],goals:[]}),[O,M]=(0,r.useState)({inbox:!0,sops:!1,projects:!1,goals:!1}),[L,F]=(0,r.useState)(""),[U,B]=(0,r.useState)([]),[z,H]=(0,r.useState)(!1);(0,r.useEffect)((()=>{let e=null;const t=setTimeout((()=>{const t=document.getElementById("unscheduled-container");t?(e=new O_(t,{itemSelector:".draggable-task",eventData:function(e){const t=e.getAttribute("data-title")||"Untitled Task",n=e.getAttribute("data-duration")||"30",r="true"===e.getAttribute("data-entire-sop"),s=e.getAttribute("data-sop-id"),i=e.getAttribute("data-step-id"),a="true"===e.getAttribute("data-search-result");return console.log("Dragging item:",{title:t,duration:n,isEntireSOP:r,sopId:s,stepId:i,searchResult:a}),{title:t,duration:parseInt(n),extendedProps:{isEntireSOP:r,sopId:s,stepId:i,searchResult:a,originalElement:e}}}}),console.log("\u2705 Draggable initialized for container")):console.log("\u26a0\ufe0f Could not find unscheduled-container element")}),500);return()=>{clearTimeout(t),e&&e.destroy()}}),[R,U]),(0,r.useEffect)((()=>{t&&n&&(async()=>{try{console.log("AI planning initialization temporarily disabled");const[e,r,s]=await Promise.all([Nj.getGoalsByContext(t).catch((e=>(console.error("Error loading goals:",e),[]))),Nj.getProjectsByContext(t).catch((e=>(console.error("Error loading projects:",e),[]))),Uy.getSOPsForContext(t).catch((e=>(console.error("Error loading SOPs:",e),[])))]);console.log("\ud83d\udd0d Current contextId:",t),console.log("\ud83d\udd0d Current userId:",n),console.log("Loaded planning data:",{contextId:t,goalsCount:e.length,projectsCount:r.length,sopsCount:s.length,sops:s.map((e=>({id:e.id,name:e.name,contextId:e.contextId})))}),P({inbox:[],sops:s,projects:r,goals:e})}catch(pD){console.error("Error initializing planning data:",pD)}})()}),[t,n]),(0,r.useEffect)((()=>{const e=async()=>{try{console.log("\ud83d\udd0d Loading planning data for contextId: ".concat(t));const e=By.getScheduledTasks(t).filter((e=>e.scheduledDate)).map((e=>{var t,n,r;const s=new Date(e.scheduledDate);if(e.scheduledTime){const[t,n]=e.scheduledTime.split(":").map(Number);s.setHours(t,n,0,0)}const i=new Date(s);e.duration?i.setMinutes(i.getMinutes()+e.duration):i.setMinutes(i.getMinutes()+30);const a=null===(t=e.tags)||void 0===t?void 0:t.includes("sop-container"),o=null===(n=e.tags)||void 0===n?void 0:n.includes("sop-step"),l=null===(r=e.tags)||void 0===r?void 0:r.find((e=>e.startsWith("container:"))),c=l?l.split(":")[1]:null;return{id:e.id,title:e.title,start:s.toISOString(),end:i.toISOString(),backgroundColor:a?"#8b5cf6":o?"#a855f7":Y(e.context),borderColor:a?"#7c3aed":o?"#9333ea":Y(e.context),textColor:"#ffffff",extendedProps:{type:e.type,duration:e.duration,priority:e.priority,assignedTo:e.assignedTo,taskId:e.id,isSOPContainer:a,isSOPStep:o,containerId:c}}}));l(e),u(!1)}catch(pD){console.error("Error loading planning data:",pD),u(!1)}},n=async()=>{try{await By.loadTasks(t),await e()}catch(pD){console.log("\u23f3 Retrying task load in 2 seconds..."),setTimeout(n,2e3)}};n();const r=By.subscribeToTasks(t),s=By.subscribe((()=>e()));return()=>{r(),s()}}),[t]);const V=async e=>{try{var t;const n=(null===(t=e.event.extendedProps)||void 0===t?void 0:t.taskId)||e.event.id,r=e.event.start,s=r.toTimeString().slice(0,5);await By.scheduleTask(n,r,s),console.log("\u2705 Task rescheduled successfully")}catch(pD){console.error("Error moving event:",pD),e.revert()}},W=e=>{M((t=>J(J({},t),{},{[e]:!t[e]})))},G=async e=>{if(F(e),H(e.length>0),e.length<2)B([]);else if(b)try{const t=await Tj.searchItems(b.id,e);B(t)}catch(pD){console.error("Error searching items:",pD),B([])}},q=async()=>{if(b&&C.trim())try{await Tj.processUserMessage(b.id,C),N("");const e=await Tj.getSession(b.id);e&&x(e)}catch(pD){console.error("Error sending AI message:",pD)}},Q=async e=>{if(b)try{await Tj.switchMode(b.id,e);const t=await Tj.getSession(b.id);t&&x(t)}catch(pD){console.error("Error switching AI mode:",pD)}},K=async e=>{const t=J(J({},A),e);_(t);try{const e=await Tj.getContextualItems(t);E(e),P({inbox:e.urgentTasks.filter((e=>"manual"===e.source||"task"===e.type)),sops:e.relevantSOPs,projects:e.currentProjects,goals:e.activeGoals})}catch(pD){console.error("Error updating planning context:",pD)}},Y=e=>{switch(e){case"work":return"#059669";case"family":return"#3b82f6";case"personal":return"#8b5cf6";default:return"#6b7280"}},X=e=>{switch(e){case"urgent":return"border-l-4 border-red-500";case"high":return"border-l-4 border-orange-500";case"medium":return"border-l-4 border-yellow-500";default:return"border-l-4 border-gray-300"}},Z=e=>{switch(e){case"sop":return"\ud83d\udccb";case"task":return"\u2705";case"event":return"\ud83d\udcc5";case"meal":return"\ud83c\udf7d\ufe0f";case"project":return"\ud83d\udcc1";default:return"\ud83d\udcdd"}};return c?(0,$v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,$v.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Loading your schedule..."})]})})}):(0,$v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Planning"}),(0,$v.jsxs)("p",{className:"text-gray-500 mt-1",children:["family"===A.scope?"Family":"work"===A.scope?"Work":"Personal"," \u2022","weekly"===A.timeframe?" Weekly":"monthly"===A.timeframe?" Monthly":" Daily"," Planning",b&&(0,$v.jsxs)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-700",children:[(0,$v.jsx)(Jy,{className:"w-3 h-3 mr-1"}),"AI Active"]})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2 border border-gray-300 bg-white px-3 py-2 rounded-lg",children:[(0,$v.jsx)(Yv,{className:"w-4 h-4 text-gray-400"}),(0,$v.jsxs)("select",{value:A.scope,onChange:e=>K({scope:e.target.value}),className:"border-none bg-transparent text-sm focus:outline-none",children:[(0,$v.jsx)("option",{value:"family",children:"Family"}),(0,$v.jsx)("option",{value:"personal",children:"Personal"}),(0,$v.jsx)("option",{value:"work",children:"Work"})]}),(0,$v.jsx)("span",{className:"text-gray-300",children:"\u2022"}),(0,$v.jsxs)("select",{value:A.timeframe,onChange:e=>K({timeframe:e.target.value}),className:"border-none bg-transparent text-sm focus:outline-none",children:[(0,$v.jsx)("option",{value:"daily",children:"Daily"}),(0,$v.jsx)("option",{value:"weekly",children:"Weekly"}),(0,$v.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsxs)("button",{onClick:()=>I(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors bg-blue-600 text-white hover:bg-blue-700",children:[(0,$v.jsx)(_v,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Weekly Planning"})]}),(0,$v.jsxs)("button",{onClick:()=>D(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors bg-purple-600 text-white hover:bg-purple-700",children:[(0,$v.jsx)(_v,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Monthly Planning"})]})]}),(0,$v.jsxs)("button",{onClick:b?()=>k(!S):async()=>{try{const e=await Tj.startPlanningSession(A);x(e),k(!0)}catch(pD){console.error("Error starting AI session:",pD)}},className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(b?"bg-green-600 text-white hover:bg-green-700":"bg-purple-600 text-white hover:bg-purple-700"),children:[(0,$v.jsx)(Jy,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:b?"AI Assistant":"Start AI Planning"})]}),(0,$v.jsxs)("button",{onClick:async()=>{const e=window.prompt("Enter task title:");if(null!==e&&void 0!==e&&e.trim())try{const n={id:"task_".concat(Math.random().toString(36).substr(2,8)),title:e.trim(),type:"task",status:"pending",priority:"medium",contextId:t,context:t,createdBy:"user",source:"manual"};await By.createTask(n),console.log("\u2705 Quick add task created successfully")}catch(pD){console.error("Error creating quick add task:",pD),alert("Failed to create task. Please try again.")}},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[(0,$v.jsx)(ly,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Quick Add"})]})]})]}),(0,$v.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,$v.jsx)("div",{className:"lg:col-span-1",children:(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,$v.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,$v.jsxs)("h3",{className:"font-medium text-gray-900 flex items-center mb-3",children:[(0,$v.jsx)(Ey,{className:"w-5 h-5 mr-2"}),"Unscheduled Items"]}),(0,$v.jsxs)("div",{className:"relative mb-3",children:[(0,$v.jsx)(lj,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,$v.jsx)("input",{type:"text",placeholder:"Search all items...",value:L,onChange:e=>G(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),L&&(0,$v.jsx)("button",{onClick:()=>G(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(Gy,{className:"w-4 h-4"})})]}),(0,$v.jsx)("p",{className:"text-xs text-gray-500",children:z?"".concat(U.length," search results"):"Drag to schedule"})]}),(0,$v.jsxs)("div",{id:"unscheduled-container",className:"max-h-80 overflow-y-auto",children:[z&&U.length>0&&(0,$v.jsxs)("div",{className:"p-3 space-y-2",children:[(0,$v.jsx)("h4",{className:"text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Search Results"}),U.map((e=>(0,$v.jsx)("div",{draggable:!0,"data-search-result":"true","data-result-type":e.searchType,"data-title":e.title||e.name,"data-duration":e.duration||e.estimatedDuration||30,className:"draggable-task p-2 border border-gray-200 rounded-lg cursor-move hover:shadow-md transition-shadow bg-white",children:(0,$v.jsx)("div",{className:"flex items-start justify-between",children:(0,$v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,$v.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:e.searchSource}),(0,$v.jsx)("h4",{className:"font-medium text-gray-900 text-sm truncate",children:e.title||e.name})]}),e.description&&(0,$v.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.description}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500 mt-1",children:[(e.duration||e.estimatedDuration)&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)(gy,{className:"w-3 h-3"}),(0,$v.jsxs)("span",{children:[e.duration||e.estimatedDuration,"m"]})]}),e.priority&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,$v.jsx)("span",{className:"px-1 py-0.5 rounded text-xs ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.priority})]})]})]})})},"".concat(e.searchType,"_").concat(e.id))))]}),z&&0===U.length&&L.length>1&&(0,$v.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,$v.jsx)(lj,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,$v.jsxs)("p",{className:"text-sm",children:['No items found for "',L,'"']}),(0,$v.jsx)("p",{className:"text-xs mt-1",children:"Try a different search term"})]}),!z&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsxs)("div",{className:"border-b border-gray-100",children:[(0,$v.jsxs)("button",{onClick:()=>W("inbox"),className:"w-full p-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)(dj,{className:"w-4 h-4 text-blue-600"}),(0,$v.jsx)("span",{className:"font-medium text-gray-900",children:"Inbox"}),(0,$v.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:R.inbox.length})]}),O.inbox?(0,$v.jsx)(pj,{className:"w-4 h-4 text-gray-400"}):(0,$v.jsx)(vj,{className:"w-4 h-4 text-gray-400"})]}),O.inbox&&(0,$v.jsxs)("div",{className:"px-3 pb-3 space-y-2",children:[R.inbox.map((e=>(0,$v.jsx)("div",{draggable:!0,"data-task-id":e.id,"data-type":e.type,"data-title":e.title,"data-duration":e.duration,className:"draggable-task p-2 border border-gray-200 rounded-lg cursor-move hover:shadow-md transition-shadow bg-white ".concat(X(e.priority)),children:(0,$v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,$v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,$v.jsx)("span",{className:"text-sm",children:Z(e.type)}),(0,$v.jsx)("h4",{className:"font-medium text-gray-900 text-sm truncate",children:e.title})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[(0,$v.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Y(e.context)}}),(0,$v.jsx)("span",{className:"capitalize",children:e.context}),e.duration&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,$v.jsxs)("span",{children:[e.duration,"m"]})]})]})]}),(0,$v.jsx)("button",{onClick:()=>(async e=>{try{await By.deleteTask(e),console.log("\u2705 Task removed successfully")}catch(pD){console.error("Error removing task:",pD)}})(e.id),className:"text-gray-400 hover:text-gray-600 text-xs",title:"Remove task",children:"\xd7"})]})},e.id))),0===R.inbox.length&&(0,$v.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,$v.jsx)(dj,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),(0,$v.jsx)("p",{className:"text-xs",children:"No tasks in inbox"})]})]})]}),(0,$v.jsxs)("div",{className:"border-b border-gray-100",children:[(0,$v.jsxs)("button",{onClick:()=>W("sops"),className:"w-full p-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)(Vv,{className:"w-4 h-4 text-purple-600"}),(0,$v.jsx)("span",{className:"font-medium text-gray-900",children:"SOPs"}),(0,$v.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:R.sops.length})]}),O.sops?(0,$v.jsx)(pj,{className:"w-4 h-4 text-gray-400"}):(0,$v.jsx)(vj,{className:"w-4 h-4 text-gray-400"})]}),O.sops&&(0,$v.jsxs)("div",{className:"px-3 pb-3 space-y-3",children:[R.sops.map((e=>{var t,n,r;const s=(null===(t=e.steps)||void 0===t?void 0:t.reduce(((e,t)=>e+(t.estimatedDuration||30)),0))||30;return(0,$v.jsx)("div",{className:"relative",children:(0,$v.jsxs)("div",{className:"border-2 border-purple-200 rounded-lg bg-purple-50 hover:border-purple-300 transition-colors",children:[(0,$v.jsxs)("div",{draggable:!0,"data-sop-id":e.id,"data-entire-sop":"true","data-title":e.name,"data-duration":s,className:"draggable-task flex items-center justify-between p-3 cursor-move hover:bg-purple-100 rounded-t-lg border-b border-purple-200",title:"Drag to schedule entire SOP",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)(Cy,{className:"w-4 h-4 text-purple-600"}),(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[(0,$v.jsxs)("span",{children:[(null===(n=e.steps)||void 0===n?void 0:n.length)||0," steps"]}),(0,$v.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,$v.jsx)(gy,{className:"w-3 h-3"}),(0,$v.jsx)("span",{children:s>=60?"".concat(Math.floor(s/60),"h ").concat(s%60,"m"):"".concat(s,"m")})]})]})]}),(0,$v.jsx)(Vv,{className:"w-4 h-4 text-purple-600"})]}),(0,$v.jsxs)("div",{className:"p-2 space-y-1",children:[null===(r=e.steps)||void 0===r?void 0:r.map(((t,n)=>(0,$v.jsxs)("div",{draggable:!0,"data-sop-id":e.id,"data-step-id":t.id,"data-title":t.title,"data-duration":t.estimatedDuration||30,className:"draggable-task flex items-center space-x-2 p-2 bg-white border border-purple-100 rounded cursor-move hover:shadow-sm hover:border-purple-200 transition-all",title:"Drag to schedule this step only",children:[(0,$v.jsxs)("span",{className:"text-xs text-purple-600 font-mono w-8 text-center",children:["#",n+1]}),(0,$v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate block",children:t.title}),t.estimatedDuration&&(0,$v.jsxs)("div",{className:"flex items-center text-xs text-gray-600 mt-0.5",children:[(0,$v.jsx)(gy,{className:"w-3 h-3 mr-1"}),t.estimatedDuration,"m"]})]}),(0,$v.jsx)(Cy,{className:"w-3 h-3 text-gray-400"})]},t.id))),(!e.steps||0===e.steps.length)&&(0,$v.jsx)("div",{className:"text-center py-2 text-gray-500",children:(0,$v.jsx)("p",{className:"text-xs",children:"No steps defined"})})]})]})},e.id)})),0===R.sops.length&&(0,$v.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,$v.jsx)(Vv,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),(0,$v.jsx)("p",{className:"text-xs",children:"No SOPs available"})]})]})]}),(0,$v.jsxs)("div",{className:"border-b border-gray-100",children:[(0,$v.jsxs)("button",{onClick:()=>W("projects"),className:"w-full p-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)(Lv,{className:"w-4 h-4 text-green-600"}),(0,$v.jsx)("span",{className:"font-medium text-gray-900",children:"Projects"}),(0,$v.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:R.projects.length})]}),O.projects?(0,$v.jsx)(pj,{className:"w-4 h-4 text-gray-400"}):(0,$v.jsx)(vj,{className:"w-4 h-4 text-gray-400"})]}),O.projects&&(0,$v.jsxs)("div",{className:"px-3 pb-3 space-y-2",children:[R.projects.map((e=>{var t,n;return(0,$v.jsxs)("div",{className:"space-y-1",children:[(0,$v.jsxs)("h5",{className:"text-xs font-medium text-gray-700 px-2 py-1 bg-gray-50 rounded",children:[e.title," (",(null===(t=e.tasks)||void 0===t?void 0:t.length)||0," tasks)"]}),null===(n=e.tasks)||void 0===n?void 0:n.map((t=>(0,$v.jsxs)("div",{draggable:!0,"data-project-id":e.id,"data-task-id":t.id,"data-title":t.title,"data-duration":t.estimatedDuration||30,className:"draggable-task p-2 ml-2 border border-green-200 rounded-lg cursor-move hover:shadow-md transition-shadow bg-green-50",children:[(0,$v.jsx)("div",{className:"flex items-center space-x-2",children:(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.title})}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600 mt-1",children:[t.priority&&(0,$v.jsx)("span",{className:"px-1 py-0.5 rounded text-xs ".concat("high"===t.priority?"bg-red-100 text-red-700":"medium"===t.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:t.priority}),t.estimatedDuration&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)(gy,{className:"w-3 h-3"}),(0,$v.jsxs)("span",{children:[t.estimatedDuration,"m"]})]})]})]},t.id)))]},e.id)})),0===R.projects.length&&(0,$v.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,$v.jsx)(Lv,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),(0,$v.jsx)("p",{className:"text-xs",children:"No projects available"})]})]})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsxs)("button",{onClick:()=>W("goals"),className:"w-full p-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)(xj,{className:"w-4 h-4 text-orange-600"}),(0,$v.jsx)("span",{className:"font-medium text-gray-900",children:"Goals"}),(0,$v.jsx)("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:R.goals.length})]}),O.goals?(0,$v.jsx)(pj,{className:"w-4 h-4 text-gray-400"}):(0,$v.jsx)(vj,{className:"w-4 h-4 text-gray-400"})]}),O.goals&&(0,$v.jsxs)("div",{className:"px-3 pb-3 space-y-2",children:[R.goals.map((e=>{var t,n;return(0,$v.jsxs)("div",{className:"space-y-1",children:[(0,$v.jsxs)("h5",{className:"text-xs font-medium text-gray-700 px-2 py-1 bg-gray-50 rounded",children:[e.title," (",(null===(t=e.tasks)||void 0===t?void 0:t.length)||0," tasks)"]}),null===(n=e.tasks)||void 0===n?void 0:n.map((t=>(0,$v.jsxs)("div",{draggable:!0,"data-goal-id":e.id,"data-task-id":t.id,"data-title":t.title,"data-duration":t.estimatedDuration||30,className:"draggable-task p-2 ml-2 border border-orange-200 rounded-lg cursor-move hover:shadow-md transition-shadow bg-orange-50",children:[(0,$v.jsx)("div",{className:"flex items-center space-x-2",children:(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.title})}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600 mt-1",children:[t.priority&&(0,$v.jsx)("span",{className:"px-1 py-0.5 rounded text-xs ".concat("high"===t.priority?"bg-red-100 text-red-700":"medium"===t.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:t.priority}),t.estimatedDuration&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)(gy,{className:"w-3 h-3"}),(0,$v.jsxs)("span",{children:[t.estimatedDuration,"m"]})]})]})]},t.id)))]},e.id)})),0===R.goals.length&&(0,$v.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,$v.jsx)(xj,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),(0,$v.jsx)("p",{className:"text-xs",children:"No goals available"})]})]})]})]})]})]})}),(0,$v.jsx)("div",{className:"lg:col-span-3",children:(0,$v.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,$v.jsx)(nA,{ref:s,plugins:[jA,f_,M_,K_],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:m,viewDidMount:e=>g(e.view.type),height:600,events:o,editable:!0,selectable:!0,selectMirror:!0,droppable:!0,weekends:!0,dayMaxEvents:!0,businessHours:{startTime:"09:00",endTime:"17:00"},slotMinTime:"06:00:00",slotMaxTime:"23:00:00",slotDuration:"00:15:00",snapDuration:"00:15:00",allDaySlot:!1,nowIndicator:!0,scrollTime:(()=>{const e=new Date,t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0");return"".concat(t,":").concat(n,":00")})(),dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridiem:"short"},expandRows:!0,eventClick:e=>{var t,n;const r={id:e.event.id,title:e.event.title,start:e.event.start,end:e.event.end,type:null===(t=e.event.extendedProps)||void 0===t?void 0:t.type,context:"family",assignedTo:null===(n=e.event.extendedProps)||void 0===n?void 0:n.assignedTo};p(r)},select:async e=>{console.log("Date selected:",e.start,e.end)},eventDrop:V,eventResize:V,drop:async e=>{try{console.log("\ud83c\udfaf External drop event:",e),console.log("\ud83d\udce6 Dragged element:",e.draggedEl);const i=e.date,a=i.toTimeString().slice(0,5),o=e.draggedEl.getAttribute("data-title"),l=parseInt(e.draggedEl.getAttribute("data-duration")||"30"),c="true"===e.draggedEl.getAttribute("data-entire-sop"),u=e.draggedEl.getAttribute("data-sop-id"),d=e.draggedEl.getAttribute("data-step-id"),h=e.draggedEl.getAttribute("data-task-id"),f=e.draggedEl.getAttribute("data-project-id"),p=e.draggedEl.getAttribute("data-goal-id"),m="true"===e.draggedEl.getAttribute("data-search-result");console.log("\ud83d\udccb Drop data:",{title:o,duration:l,isEntireSOP:c,sopId:u,stepId:d,taskId:h,projectId:f,goalId:p,searchResult:m,dropDate:i,dropTime:a});let g=null;if(m)console.log("\ud83d\udd0d Handling search result drop"),g=await By.createTask({id:"search_".concat(Math.random().toString(36).substring(2,15)),title:o||"Search Result Task",type:"task",status:"pending",priority:"medium",contextId:t,context:t,duration:l,createdBy:"user",source:"manual",scheduledDate:i,scheduledTime:a});else{if(h)return console.log("\ud83d\udcdd Handling existing task drop"),await By.scheduleTask(h,i,a),void console.log("\u2705 Existing task scheduled");if(c&&u){console.log("\ud83d\udccb Handling entire SOP drop");const e=R.sops.find((e=>e.id===u));if(e&&e.steps){const n="sop_container_".concat(Math.random().toString(36).substring(2,15)),r=await By.createTask({id:n,title:"\ud83d\udccb ".concat(e.name),notes:"SOP Container: ".concat(e.steps.length," steps"),type:"sop",status:"pending",priority:"medium",contextId:t,context:t,duration:l,assignedTo:e.defaultAssignee,createdBy:e.createdBy||"user",source:"import",scheduledDate:i,scheduledTime:a,tags:["sop-container"]});let s=new Date(i);s.setHours(parseInt(a.split(":")[0]),parseInt(a.split(":")[1]));for(let i=0;i<e.steps.length;i++){const r=e.steps[i],a=r.estimatedDuration||30;await By.createTask({id:"sop_step_".concat(Math.random().toString(36).substring(2,15)),title:"".concat(i+1,". ").concat(r.title),notes:r.description,type:"sop",status:"pending",priority:"medium",contextId:t,context:t,duration:a,assignedTo:e.defaultAssignee,createdBy:e.createdBy||"user",source:"import",scheduledDate:s,scheduledTime:s.toTimeString().slice(0,5),tags:["sop-step","container:".concat(n)]}),s.setMinutes(s.getMinutes()+a)}g=r}}else if(u&&d){var n;console.log("\ud83d\udd39 Handling SOP step drop");const e=R.sops.find((e=>e.id===u)),r=null===e||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.find((e=>e.id===d));e&&r&&(g=await By.createTask({id:"sop_step_".concat(Math.random().toString(36).substring(2,15)),title:r.title,notes:r.description,type:"sop",status:"pending",priority:"medium",contextId:t,context:t,duration:r.estimatedDuration||30,assignedTo:e.defaultAssignee,createdBy:e.createdBy||"user",source:"import",scheduledDate:i,scheduledTime:a}))}else if(f){var r;console.log("\ud83d\udcc1 Handling project task drop");const e=R.projects.find((e=>e.id===f)),n=null===e||void 0===e||null===(r=e.tasks)||void 0===r?void 0:r.find((e=>e.id===h));e&&n&&(g=await By.createTask({id:"project_task_".concat(Math.random().toString(36).substring(2,15)),title:n.title,notes:n.description,type:"project",status:"pending",priority:n.priority,contextId:t,context:t,duration:n.estimatedDuration||30,assignedTo:n.assignedTo,createdBy:e.createdBy||"user",source:"import",scheduledDate:i,scheduledTime:a}))}else if(p){var s;console.log("\ud83c\udfaf Handling goal task drop");const e=R.goals.find((e=>e.id===p)),n=null===e||void 0===e||null===(s=e.tasks)||void 0===s?void 0:s.find((e=>e.id===h));e&&n&&(g=await By.createTask({id:"goal_task_".concat(Math.random().toString(36).substring(2,15)),title:n.title,notes:n.description,type:"task",status:"pending",priority:n.priority,contextId:t,context:t,duration:n.estimatedDuration||30,assignedTo:n.assignedTo,createdBy:e.createdBy||"user",source:"import",scheduledDate:i,scheduledTime:a}))}}g?console.log("\u2705 Task created and scheduled:",g.title):console.error("\u274c Could not determine how to handle drop")}catch(pD){console.error("\ud83d\udca5 Error in handleExternalDrop:",pD),e.revert()}},eventClassNames:e=>{var t,n,r,s;const i=null===(t=e.event.extendedProps)||void 0===t?void 0:t.type,a=null===(n=e.event.extendedProps)||void 0===n?void 0:n.isSOPContainer,o=null===(r=e.event.extendedProps)||void 0===r?void 0:r.isSOPStep,l=null===(s=e.event.extendedProps)||void 0===s?void 0:s.containerId;return["fc-event-custom",i?"fc-event-".concat(i):"",a?"fc-event-sop-container":"",o?"fc-event-sop-step":"",l?"fc-event-container-".concat(l):""].filter(Boolean)}})})})]}),S&&b&&(0,$v.jsxs)("div",{className:"fixed inset-y-0 right-0 w-96 bg-white border-l border-gray-200 shadow-xl z-50 flex flex-col",children:[(0,$v.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)(Jy,{className:"w-5 h-5 text-purple-600"}),(0,$v.jsx)("h3",{className:"font-medium text-gray-900",children:"AI Planning Assistant"})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsxs)("div",{className:"flex items-center bg-white rounded-lg p-1 border",children:[(0,$v.jsx)("button",{onClick:()=>Q("guided"),className:"px-3 py-1 text-xs rounded transition-colors ".concat("guided"===b.mode?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900"),children:"Guided"}),(0,$v.jsx)("button",{onClick:()=>Q("manual"),className:"px-3 py-1 text-xs rounded transition-colors ".concat("manual"===b.mode?"bg-purple-600 text-white":"text-gray-600 hover:text-gray-900"),children:"Manual"})]}),(0,$v.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(Gy,{className:"w-5 h-5"})})]})]}),(0,$v.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"guided"===b.mode?"I'll guide you through planning step by step":"I'll provide suggestions as you work"})]}),(0,$v.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[b.conversation.map((e=>{var t;return(0,$v.jsx)("div",{className:"flex ".concat("user"===e.speaker?"justify-end":"justify-start"),children:(0,$v.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat("user"===e.speaker?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,$v.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(null===(t=e.metadata)||void 0===t?void 0:t.suggestedItems)&&(0,$v.jsx)("div",{className:"mt-2 space-y-1",children:e.metadata.suggestedItems.slice(0,3).map(((e,t)=>(0,$v.jsxs)("div",{className:"text-xs opacity-75 p-2 bg-white bg-opacity-20 rounded",children:["\u2022 ",e.title||e.name]},t)))}),(0,$v.jsx)("div",{className:"text-xs opacity-75 mt-1",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)})),b.suggestions.length>0&&(0,$v.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,$v.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"AI Suggestions"}),(0,$v.jsx)("div",{className:"space-y-2",children:b.suggestions.slice(-3).map((e=>(0,$v.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[(0,$v.jsx)("p",{className:"text-sm text-amber-800",children:e.reasoning}),e.suggestedTime&&(0,$v.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:["Suggested: ",e.suggestedTime.date," at ",e.suggestedTime.time]}),(0,$v.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,$v.jsx)("button",{onClick:()=>Tj.applySuggestion(b.id,e.id,"accepted"),className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Accept"}),(0,$v.jsx)("button",{onClick:()=>Tj.applySuggestion(b.id,e.id,"rejected"),className:"text-xs bg-gray-600 text-white px-2 py-1 rounded hover:bg-gray-700",children:"Skip"})]})]},e.id)))})]})]}),(0,$v.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,$v.jsxs)("div",{className:"flex space-x-2",children:[(0,$v.jsx)("input",{type:"text",value:C,onChange:e=>N(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&q(),placeholder:"Type your message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,$v.jsx)("button",{onClick:q,disabled:!C.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,$v.jsx)(Sj,{className:"w-4 h-4"})})]}),(0,$v.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:["Help me plan","Show urgent items","Suggest schedule","Weekly review"].map((e=>(0,$v.jsx)("button",{onClick:()=>N(e),className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded hover:bg-gray-200",children:e},e)))})]})]}),T&&(0,$v.jsx)(Bj,{contextId:t,userId:n||"current_user",onClose:()=>I(!1)}),j&&(0,$v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,$v.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,$v.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,$v.jsx)("h2",{className:"text-xl font-semibold",children:"Monthly Planning Session"}),(0,$v.jsx)("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:(0,$v.jsx)(Gy,{className:"w-6 h-6"})})]}),(0,$v.jsx)(Xj,{contextId:t,onComplete:()=>D(!1)})]})}),(0,$v.jsx)(rj,{isOpen:!!f,onClose:()=>p(null),event:f,contextId:t})]})},sD=["title","titleId"];function iD(e,t){let{title:n,titleId:s}=e,i=dm(e,sD);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const aD=r.forwardRef(iD),oD=["title","titleId"];function lD(e,t){let{title:n,titleId:s}=e,i=dm(e,oD);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const cD=r.forwardRef(lD);class uD{constructor(){this.apiKey=null,this.apiKey="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"}async processInput(e,t,n){if(!this.apiKey)return console.warn("OpenAI API key not configured, using smart parsing fallback"),this.smartFallbackProcessing(e,n);try{var r,s;const t=this.buildSystemPrompt(n),i=this.buildUserPrompt(e,n),a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat(this.apiKey),"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:t},{role:"user",content:i}],temperature:.3,max_tokens:1500})});if(!a.ok)throw new Error("OpenAI API error: ".concat(a.status));const o=null===(r=(await a.json()).choices[0])||void 0===r||null===(s=r.message)||void 0===s?void 0:s.content;if(!o)throw new Error("No response from OpenAI");return this.parseAIResponse(o,e)}catch(pD){return console.error("AI processing error, falling back to smart parsing:",pD),this.smartFallbackProcessing(e,n)}}buildSystemPrompt(e){var t;const n=e.currentTime.toLocaleString(),r=e.activeContext,s=(null===(t=e.familyMembers)||void 0===t?void 0:t.join(", "))||"";return"You are an AI assistant that processes natural language input into structured tasks for a personal life management system.\n\nCONTEXT:\n- Current time: ".concat(n,"\n- Active context: ").concat(r,"\n- Family members: ").concat(s,'\n\nYOUR JOB:\n1. Parse the user\'s brain dump into specific, actionable items\n2. Detect context (work/family/personal) from content\n3. Assign realistic priorities and time estimates\n4. Suggest scheduling when time references are mentioned\n5. Identify if items should be assigned to specific people\n\nRESPONSE FORMAT (JSON only):\n{\n  "intent": "Brief description of what the user wants to accomplish",\n  "items": [\n    {\n      "title": "Clear, actionable task title",\n      "type": "task|event|project|sop|meal|note",\n      "context": "work|family|personal|auto-detected",\n      "priority": "low|medium|high|urgent",\n      "scheduledDate": "2024-01-15" (if time mentioned),\n      "scheduledTime": "14:00" (if specific time mentioned),\n      "duration": 60 (minutes, estimated),\n      "assignedTo": "person name" (if mentioned),\n      "tags": ["relevant", "tags"],\n      "confidence": 0.85 (your confidence in this parsing)\n    }\n  ],\n  "suggestions": [\n    "Helpful suggestions about scheduling or organization"\n  ],\n  "clarificationNeeded": "Any questions you have about ambiguous items"\n}\n\nIMPORTANT:\n- Always respond with valid JSON only\n- Be specific with task titles (not "call dentist" but "Schedule dentist appointment for cleaning")\n- Estimate realistic durations (calls: 15min, meetings: 60min, cooking: 30-90min)\n- Consider the user\'s context when assigning work/family/personal\n- If someone is mentioned by name, suggest assigning to them')}buildUserPrompt(e,t){var n;return'Process this brain dump and convert it into structured tasks:\n\n"'.concat(e,'"\n\nRemember to consider:\n- Current context: ').concat(t.activeContext,"\n- Current time: ").concat(t.currentTime.toLocaleString(),"\n- Available family members: ").concat((null===(n=t.familyMembers)||void 0===n?void 0:n.join(", "))||"none specified","\n\nReturn structured JSON only.")}async parseAIResponse(e,t){try{const t=e.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),n=JSON.parse(t);return{intent:n.intent||"Process user input",items:(n.items||[]).map(((e,t)=>({id:"ai_".concat(Date.now(),"_").concat(t),title:e.title||"Untitled task",type:e.type||"task",context:e.context||"auto-detected",priority:e.priority||"medium",scheduledDate:e.scheduledDate?new Date(e.scheduledDate):void 0,scheduledTime:e.scheduledTime,duration:e.duration||30,assignedTo:e.assignedTo,tags:e.tags||[],confidence:e.confidence||.7}))),suggestions:n.suggestions||[],clarificationNeeded:n.clarificationNeeded}}catch(pD){return console.error("Failed to parse AI response:",pD),{intent:"Process user input",items:[{id:"fallback_".concat(Date.now()),title:t.slice(0,100)+(t.length>100?"...":""),type:"note",context:"auto-detected",priority:"medium",confidence:.5,tags:["unprocessed"]}],suggestions:["AI processing encountered an error. This item needs manual review."]}}}smartFallbackProcessing(e,t){const n=[],r=[],s=e.split(/[.!?]+/).filter((e=>e.trim().length>3));return s.forEach(((e,r)=>{const s=e.trim();if(!s)return;const i={id:"local_".concat(Date.now(),"_").concat(r),title:this.cleanTaskTitle(s),type:this.detectType(s),context:this.detectContext(s,t.activeContext),priority:this.detectPriority(s),duration:this.estimateDuration(s),confidence:.6,tags:this.extractTags(s)},a=this.extractTime(s);a&&(i.scheduledDate=a.date,i.scheduledTime=a.time);const o=this.extractAssignee(s,t.familyMembers||[]);o&&(i.assignedTo=o),n.push(i)})),0===n.length&&n.push({id:"fallback_".concat(Date.now()),title:e.slice(0,100),type:"note",context:t.activeContext,priority:"medium",confidence:.4,tags:["needs-review"]}),r.push("Processed ".concat(n.length," item(s) using local parsing. Consider adding OpenAI API key for better results.")),Promise.resolve({intent:"Process brain dump locally",items:n,suggestions:r})}cleanTaskTitle(e){return e.replace(/^(need to|have to|should|must|i need to|i have to)/i,"").replace(/^\s*(call|email|text|message)\s+/i,(e=>"".concat(e.trim().toLowerCase()," "))).trim().replace(/^./,(e=>e.toUpperCase()))}detectType(e){const t=e.toLowerCase();return t.includes("meeting")||t.includes("appointment")?"event":t.includes("dinner")||t.includes("lunch")||t.includes("cook")?"meal":t.includes("project")||t.includes("plan")?"project":t.includes("routine")||t.includes("process")?"sop":"task"}detectContext(e,t){const n=e.toLowerCase();return n.includes("work")||n.includes("office")||n.includes("meeting")?"work":n.includes("family")||n.includes("kids")||n.includes("dinner")?"family":n.includes("personal")||n.includes("workout")||n.includes("doctor")?"personal":t}detectPriority(e){const t=e.toLowerCase();return t.includes("urgent")||t.includes("asap")||t.includes("emergency")?"urgent":t.includes("important")||t.includes("priority")?"high":t.includes("later")||t.includes("eventually")?"low":"medium"}estimateDuration(e){const t=e.toLowerCase();return t.includes("call")||t.includes("text")?15:t.includes("meeting")?60:t.includes("cook")||t.includes("dinner")?45:t.includes("workout")||t.includes("exercise")?60:(t.includes("review")||t.includes("check"),30)}extractTags(e){const t=[],n=e.toLowerCase();return n.includes("urgent")&&t.push("urgent"),n.includes("call")&&t.push("communication"),n.includes("meeting")&&t.push("meeting"),(n.includes("dinner")||n.includes("cook"))&&t.push("cooking"),t}extractTime(e){const t=new Date,n={};e.includes("tomorrow")?n.date=new Date(t.getTime()+864e5):e.includes("today")&&(n.date=t);const r=e.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(r){var s;let e=parseInt(r[1]);const t=r[2]?parseInt(r[2]):0,i=null===(s=r[3])||void 0===s?void 0:s.toLowerCase();"pm"===i&&12!==e&&(e+=12),"am"===i&&12===e&&(e=0),n.time="".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}return Object.keys(n).length>0?n:null}extractAssignee(e,t){for(const n of t)if(e.toLowerCase().includes(n.toLowerCase()))return n}}const dD=e=>{let{contextId:t,userId:n}=e;const[s,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),p=(0,r.useRef)(null),m=new uD;(0,r.useEffect)((()=>{p.current&&p.current.focus()}),[]);const g=async()=>{if(s.trim()&&!a){o(!0);try{const e=await(async e=>{const n={currentTime:new Date,activeContext:"family",familyMembers:["Sarah","You"],recentTasks:[]};return await m.processInput(e,t,n)})(s),r=await By.addTasksFromCapture(e.items,t,n),a={id:"capture_".concat(Date.now()),originalInput:s,parsedItems:e.items,timestamp:new Date,processed:!0};c((e=>[a,...e.slice(0,4)])),i(""),console.log("\u2705 Added ".concat(r.length," tasks to your system!")),r.length>0&&console.log("Tasks successfully saved to database!")}catch(pD){console.error("Error processing input:",pD)}finally{o(!1)}}},v=e=>{switch(e){case"task":return"\u2705";case"event":return"\ud83d\udcc5";case"meal":return"\ud83c\udf7d\ufe0f";case"project":return"\ud83d\udcc1";case"sop":return"\ud83d\udccb";default:return"\ud83d\udcdd"}},y=e=>{switch(e){case"work":return"bg-green-100 text-green-800";case"family":return"bg-blue-100 text-blue-800";case"personal":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return(0,$v.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,$v.jsxs)("div",{className:"text-center mb-8",children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Capture"}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Brain dump everything. AI will organize it for you."})]}),(0,$v.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm mb-8",children:(0,$v.jsxs)("div",{className:"p-6",children:[(0,$v.jsxs)("div",{className:"relative",children:[(0,$v.jsx)("textarea",{ref:p,value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),g())},placeholder:"Type anything... 'Need to call dentist tomorrow at 2pm, plan dinner for Friday with Sarah, review the Q4 budget by Thursday...'",className:"w-full h-32 p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",disabled:a}),a&&(0,$v.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)(Jy,{className:"w-5 h-5 text-blue-600 animate-pulse"}),(0,$v.jsx)("span",{className:"text-blue-600 font-medium",children:"AI is processing..."})]})})]}),(0,$v.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsxs)("button",{onClick:()=>f(!h),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 px-3 py-2 rounded-lg hover:bg-gray-100",children:[(0,$v.jsx)(by,{className:"w-4 h-4"}),(0,$v.jsx)("span",{className:"text-sm",children:"Templates"})]}),(0,$v.jsxs)("button",{onClick:()=>{d(!0),setTimeout((()=>{d(!1),i((e=>e+" [Voice input would go here]"))}),2e3)},className:"flex items-center space-x-2 px-3 py-2 rounded-lg ".concat(u?"bg-red-100 text-red-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:[(0,$v.jsx)(aD,{className:"w-4 h-4"}),(0,$v.jsx)("span",{className:"text-sm",children:u?"Listening...":"Voice"})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("span",{className:"text-xs text-gray-500",children:"\u2318 + Enter to process"}),(0,$v.jsxs)("button",{onClick:g,disabled:!s.trim()||a,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,$v.jsx)(cD,{className:"w-4 h-4"}),(0,$v.jsx)("span",{children:"Process"})]})]})]}),h&&(0,$v.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,$v.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Templates"}),(0,$v.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{title:"Meeting Follow-up",template:"Follow up on [topic] with [person] by [date]"},{title:"Weekly Meal Prep",template:"Plan meals for next week, shop for groceries on [day], prep on [day]"},{title:"Family Activity",template:"[Activity] with family on [date] at [time], need to [preparation]"},{title:"Work Project",template:"Start [project name], first step: [action], deadline: [date]"}].map(((e,t)=>(0,$v.jsxs)("button",{onClick:()=>(e=>{var t;i(e),f(!1),null===(t=p.current)||void 0===t||t.focus()})(e.template),className:"text-left p-3 bg-white border border-gray-200 rounded-lg hover:border-blue-300 hover:shadow-sm transition-all",children:[(0,$v.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.title}),(0,$v.jsx)("div",{className:"text-xs text-gray-500 mt-1 truncate",children:e.template})]},t)))})]})]})}),l.length>0&&(0,$v.jsxs)("div",{className:"space-y-4",children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Captures"}),l.map((e=>(0,$v.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,$v.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,$v.jsxs)("div",{className:"flex-1",children:[(0,$v.jsxs)("p",{className:"text-gray-700 italic",children:['"',e.originalInput,'"']}),(0,$v.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:e.timestamp.toLocaleString()})]}),(0,$v.jsx)(Jy,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"})]}),(0,$v.jsxs)("div",{className:"space-y-3",children:[(0,$v.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"AI Created:"}),e.parsedItems.map((e=>(0,$v.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("span",{className:"text-lg",children:v(e.type)}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h5",{className:"font-medium text-gray-900",children:e.title}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,$v.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(y(e.context)),children:e.context}),e.scheduledDate&&(0,$v.jsxs)("span",{className:"text-xs text-gray-500 flex items-center",children:[(0,$v.jsx)(_v,{className:"w-3 h-3 mr-1"}),e.scheduledDate.toLocaleDateString(),e.scheduledTime&&" at ".concat(e.scheduledTime)]}),e.duration&&(0,$v.jsxs)("span",{className:"text-xs text-gray-500 flex items-center",children:[(0,$v.jsx)(gy,{className:"w-3 h-3 mr-1"}),e.duration,"m"]}),e.assignedTo&&(0,$v.jsxs)("span",{className:"text-xs text-gray-500 flex items-center",children:[(0,$v.jsx)(IT,{className:"w-3 h-3 mr-1"}),e.assignedTo]})]})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(100*e.confidence),"% confident"]}),(0,$v.jsx)("button",{onClick:()=>{alert("\u2705 Task added to your system! Check Today or Planning views.")},className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"\u2713 Added"})]})]},e.id)))]})]},e.id)))]})]})},hD=e=>{let{contextId:t,userId:n}=e;return(0,$v.jsx)(pv,{children:(0,$v.jsx)(ny,{contextId:t,userId:n,children:(0,$v.jsxs)(Rg,{children:[(0,$v.jsx)(jg,{path:"/",element:(0,$v.jsx)(Ig,{to:"/today",replace:!0})}),(0,$v.jsx)(jg,{path:"/today",element:(0,$v.jsx)(sj,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/planning",element:(0,$v.jsx)(rD,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/capture",element:(0,$v.jsx)(dD,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/dashboard",element:(0,$v.jsx)(uy,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/sop-manager",element:(0,$v.jsx)(eb,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/calendar",element:(0,$v.jsx)(bT,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/projects",element:(0,$v.jsx)(xT,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/meals",element:(0,$v.jsx)(NT,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/finance",element:(0,$v.jsx)(AT,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"/settings",element:(0,$v.jsx)(HT,{contextId:t,userId:n})}),(0,$v.jsx)(jg,{path:"*",element:(0,$v.jsx)(Ig,{to:"/dashboard",replace:!0})})]})})})};const fD=function(){var e,t;const{user:n,loading:s,signInWithGoogle:i,signInWithEmail:a,signUpWithEmail:o,signOut:l,error:c}=um(),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)(!1),[E,S]=(0,r.useState)(null),[k,C]=(0,r.useState)(!1);if((0,r.useEffect)((()=>{(async()=>{if(n&&!x){C(!0);const e=setTimeout((()=>{console.log("\u23f0 Context initialization timeout, falling back to demo mode"),w(!0),C(!1)}),5e3);try{console.log("\ud83d\udd0d Initializing context for user:",n.id);const t=await MT.getContextsForUser(n.id);if(console.log("\ud83d\udccb Found contexts:",t.length),0===t.length){console.log("\ud83c\udfd7\ufe0f Creating default family context...");const e=await MT.createDefaultFamilyContext(n.id);S(e),console.log("\u2705 Created default context:",e.id)}else S(t[0]),console.log("\u2705 Using existing context:",t[0].id);clearTimeout(e),C(!1)}catch(c){console.error("\u274c Error initializing user context:",c),console.log("\ud83c\udfad Falling back to demo mode due to Firebase error"),clearTimeout(e),w(!0),C(!1)}}})()}),[n,x]),s)return(0,$v.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,$v.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Symphony"}),(0,$v.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading..."})]})});if(!n&&!x)return(0,$v.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,$v.jsxs)("div",{className:"w-full max-w-md space-y-8 rounded-lg bg-white p-10 shadow-lg",children:[(0,$v.jsxs)("div",{className:"text-center",children:[(0,$v.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Symphony"}),(0,$v.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Your personal life operating system"})]}),(0,$v.jsxs)("div",{className:"mt-8 space-y-6",children:[c&&(0,$v.jsx)("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-700",children:c}),(0,$v.jsx)("div",{className:"text-center mb-4",children:(0,$v.jsxs)("div",{className:"flex rounded-md border border-gray-200 p-1",children:[(0,$v.jsx)("button",{type:"button",onClick:()=>b(!1),className:"flex-1 rounded py-2 text-sm font-medium ".concat(y?"text-gray-700 hover:bg-gray-50":"bg-blue-600 text-white"),children:"Sign In"}),(0,$v.jsx)("button",{type:"button",onClick:()=>b(!0),className:"flex-1 rounded py-2 text-sm font-medium ".concat(y?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"),children:"Sign Up"})]})}),(0,$v.jsxs)("div",{className:"space-y-4",children:[y&&(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,$v.jsx)("input",{id:"displayName",name:"displayName",type:"text",value:g,onChange:e=>v(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,$v.jsx)("input",{id:"email",name:"email",type:"email",value:u,onChange:e=>d(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500"})]}),(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,$v.jsx)("input",{id:"password",name:"password",type:"password",value:h,onChange:e=>f(e.target.value),required:!0,minLength:6,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),y&&(0,$v.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"At least 6 characters"})]}),y&&(0,$v.jsxs)("div",{children:[(0,$v.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,$v.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:p,onChange:e=>m(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500"})]}),(0,$v.jsx)("button",{onClick:async()=>{try{if(y){if(h!==p)return void alert("Passwords don't match");await o(u,h,g)}else await a(u,h)}catch(c){console.error("Authentication error:",c)}},disabled:s,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 disabled:bg-blue-300",children:s?y?"Creating account...":"Signing in...":y?"Create Account":"Sign In"})]}),(0,$v.jsxs)("div",{className:"relative",children:[(0,$v.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,$v.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,$v.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,$v.jsx)("span",{className:"bg-white px-2 text-gray-500",children:"Or"})})]}),(0,$v.jsx)("button",{onClick:i,className:"w-full bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700",children:"Continue with Google"}),(0,$v.jsx)("button",{onClick:()=>w(!0),className:"w-full border border-green-300 bg-green-50 text-green-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-green-100",children:"Try Demo Mode"}),(0,$v.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[(0,$v.jsx)("p",{children:"Have an invitation code?"}),(0,$v.jsx)("button",{onClick:()=>{const e=window.prompt("Enter your family invitation code:");e&&alert("To join a family:\n1. Create an account or sign in\n2. Go to Settings\n3. Use code: ".concat(e,"\n\nFor demo: Use demo mode and check console for invitation codes."))},className:"text-blue-600 hover:text-blue-800 font-medium",children:"Join Family"})]})]})]})});const N=n||{id:"demo-user",email:"demo@example.com",name:"Demo User"},A=x?"demo-family-123":(null===E||void 0===E?void 0:E.id)||"";return(0,$v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,$v.jsx)("header",{className:"bg-white shadow",children:(0,$v.jsx)("div",{className:"w-full px-6 py-4",children:(0,$v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsx)("img",{src:"/color-tree.jpg",alt:"Symphony Logo",className:"w-12 h-12 rounded-lg object-cover"}),(0,$v.jsxs)("div",{className:"flex flex-col",children:[(0,$v.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Symphony"}),(0,$v.jsx)("p",{className:"text-xs text-gray-500",children:"Personal Operating System"})]})]}),(0,$v.jsxs)("div",{className:"flex items-center space-x-4",children:[x&&(0,$v.jsx)("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded",children:"Demo Mode"}),(0,$v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$v.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,$v.jsx)("span",{className:"text-white text-sm font-medium",children:(null===(e=N.name)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())||"U"})}),(0,$v.jsx)("span",{className:"text-sm font-medium text-gray-700",children:N.name})]}),(0,$v.jsx)("div",{className:"h-6 border-l border-gray-300"}),(0,$v.jsx)("button",{onClick:x?()=>w(!1):l,className:"text-gray-700 hover:text-gray-900 text-sm font-medium",children:x?"Exit Demo":"Sign Out"})]})]})]})})}),A?(0,$v.jsx)(hD,{contextId:A,userId:N.id}):(0,$v.jsx)("main",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:(0,$v.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,$v.jsx)("div",{className:"text-center",children:k?(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Setting up your workspace..."}),(0,$v.jsx)("p",{className:"text-gray-500",children:"Please wait while we initialize your account"})]}):(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Unable to connect to Firebase"}),(0,$v.jsx)("p",{className:"text-gray-500 mb-4",children:"There seems to be an issue with the Firebase configuration"}),(0,$v.jsx)("button",{onClick:()=>w(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue in Demo Mode"})]})})})})]})};s.createRoot(document.getElementById("root")).render((0,$v.jsx)(r.StrictMode,{children:(0,$v.jsx)(fD,{})}))})();
//# sourceMappingURL=main.00b9451a.js.map